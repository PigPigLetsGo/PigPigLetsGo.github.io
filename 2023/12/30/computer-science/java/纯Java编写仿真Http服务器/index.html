



<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#FFF">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">

<link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico">
  <meta http-equiv="Cache-Control" content="no-transform">
  <meta http-equiv="Cache-Control" content="no-siteapp">


<link rel="alternate" type="application/rss+xml" title="Dkx の Java小窝" href="https://pigpigletsgo.github.io/rss.xml" />
<link rel="alternate" type="application/atom+xml" title="Dkx の Java小窝" href="https://pigpigletsgo.github.io/atom.xml" />
<link rel="alternate" type="application/json" title="Dkx の Java小窝" href="https://pigpigletsgo.github.io/feed.json" />

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="/css/app.css?v=0.2.5">

  

<link rel="canonical" href="https://pigpigletsgo.github.io/2023/12/30/computer-science/java/%E7%BA%AFJava%E7%BC%96%E5%86%99%E4%BB%BF%E7%9C%9FHttp%E6%9C%8D%E5%8A%A1%E5%99%A8/">



  <title>
纯 java 仿写 http 服务器 - Java - 计算机学科 |
Dou的个人博客 = Dkx の Java 小窝 = 别怕路长梦远</title>
<meta name="generator" content="Hexo 7.0.0"></head>
<body itemscope itemtype="http://schema.org/WebPage">
  <div id="loading">
    <div class="cat">
      <div class="body"></div>
      <div class="head">
        <div class="face"></div>
      </div>
      <div class="foot">
        <div class="tummy-end"></div>
        <div class="bottom"></div>
        <div class="legs left"></div>
        <div class="legs right"></div>
      </div>
      <div class="paw">
        <div class="hands left"></div>
        <div class="hands right"></div>
      </div>
    </div>
  </div>
  <div id="container">
    <header id="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="inner">
        <div id="brand">
          <div class="pjax">
          
  <h1 itemprop="name headline">纯 java 仿写 http 服务器
  </h1>
  
<div class="meta">
  <span class="item" title="创建时间：2023-12-30 16:48:20">
    <span class="icon">
      <i class="ic i-calendar"></i>
    </span>
    <span class="text">发表于</span>
    <time itemprop="dateCreated datePublished" datetime="2023-12-30T16:48:20+08:00">2023-12-30</time>
  </span>
  <span class="item" title="本文字数">
    <span class="icon">
      <i class="ic i-pen"></i>
    </span>
    <span class="text">本文字数</span>
    <span>53k</span>
    <span class="text">字</span>
  </span>
  <span class="item" title="阅读时长">
    <span class="icon">
      <i class="ic i-clock"></i>
    </span>
    <span class="text">阅读时长</span>
    <span>49 分钟</span>
  </span>
</div>


          </div>
        </div>
        <nav id="nav">
  <div class="inner">
    <div class="toggle">
      <div class="lines" aria-label="切换导航栏">
        <span class="line"></span>
        <span class="line"></span>
        <span class="line"></span>
      </div>
    </div>
    <ul class="menu">
      <li class="item title"><a href="/" rel="start">Dou的个人博客</a></li>
    </ul>
    <ul class="right">
      <li class="item theme">
        <i class="ic i-sun"></i>
      </li>
      <li class="item search">
        <i class="ic i-search"></i>
      </li>
    </ul>
  </div>
</nav>

      </div>
      <div id="imgs" class="pjax">
        <ul>
          <li class="item" data-background-image="https://img.timelessq.com/images/2022/07/26/5da180f23a92b4141ea87338ac84c765.jpg"></li>
          <li class="item" data-background-image="https://img.timelessq.com/images/2022/07/26/560306a4274d1fc26eb475dd52237387.jpg"></li>
          <li class="item" data-background-image="https://img.timelessq.com/images/2022/07/26/5651daf17bf5de77514e658264d7cccc.jpg"></li>
          <li class="item" data-background-image="https://img.timelessq.com/images/2022/07/26/5651daf17bf5de77514e658264d7cccc.jpg"></li>
          <li class="item" data-background-image="https://img.timelessq.com/images/2022/07/26/560306a4274d1fc26eb475dd52237387.jpg"></li>
          <li class="item" data-background-image="https://img.timelessq.com/images/2022/07/26/560306a4274d1fc26eb475dd52237387.jpg"></li>
        </ul>
      </div>
    </header>
    <div id="waves">
      <svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto">
        <defs>
          <path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z" />
        </defs>
        <g class="parallax">
          <use xlink:href="#gentle-wave" x="48" y="0" />
          <use xlink:href="#gentle-wave" x="48" y="3" />
          <use xlink:href="#gentle-wave" x="48" y="5" />
          <use xlink:href="#gentle-wave" x="48" y="7" />
        </g>
      </svg>
    </div>
    <main>
      <div class="inner">
        <div id="main" class="pjax">
          
  <div class="article wrap">
    
<div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList">
<i class="ic i-home"></i>
<span><a href="/">首页</a></span><i class="ic i-angle-right"></i>
<span  itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/computer-science/" itemprop="item" rel="index" title="分类于 计算机学科"><span itemprop="name">计算机学科</span></a>
<meta itemprop="position" content="1" /></span>
<i class="ic i-angle-right"></i>
<span  class="current" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/computer-science/java/" itemprop="item" rel="index" title="分类于 Java"><span itemprop="name">Java</span></a>
<meta itemprop="position" content="2" /></span>
</div>

    <article itemscope itemtype="http://schema.org/Article" class="post block" lang="zh-CN">
  <link itemprop="mainEntityOfPage" href="https://pigpigletsgo.github.io/2023/12/30/computer-science/java/%E7%BA%AFJava%E7%BC%96%E5%86%99%E4%BB%BF%E7%9C%9FHttp%E6%9C%8D%E5%8A%A1%E5%99%A8/">

  <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="image" content="/images/avatar.jpg">
    <meta itemprop="name" content="Dkx">
    <meta itemprop="description" content="别怕路长梦远, 欢迎来我的博客空间">
  </span>

  <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="Dkx の Java 小窝">
  </span>

  <div class="body md" itemprop="articleBody">
    

    <h2 id="请求"><a class="markdownIt-Anchor" href="#请求">#</a> 请求🌗</h2>
<p>编写 ServerSocket 来充当服务器</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyHttpServer</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String...args)</span>&#123;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="comment">//设置接收的端口号为：8080</span></span><br><span class="line">            <span class="type">ServerSocket</span> <span class="variable">serverSocket</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ServerSocket</span>(<span class="number">8080</span>);</span><br><span class="line">            <span class="comment">//等待接收数据，程序执行此处就会阻塞等等接收数据</span></span><br><span class="line">            <span class="type">Socket</span> <span class="variable">socket</span> <span class="operator">=</span> serverSocket.accept();</span><br><span class="line">            <span class="comment">//打印接收到的数据对象</span></span><br><span class="line">            System.out.println(socket);</span><br><span class="line">        &#125;<span class="keyword">catch</span>(IOException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>通过浏览器访问 ServerSocket</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">http://localhost:8080</span><br></pre></td></tr></table></figure>
<p>访问后控制台打印结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">Socket[addr=/0:0:0:0:0:0:0:1,port=7104,localport=8080]</span><br></pre></td></tr></table></figure>
<p>通过 Socket 调用 getInputStream () 来获取输入流打印浏览器请求体的信息</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyHttpServer</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String...args)</span>&#123;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="type">ServerSocket</span> <span class="variable">serverSocket</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ServerSocket</span>(<span class="number">8080</span>);</span><br><span class="line">            <span class="keyword">while</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">                <span class="type">Socket</span> <span class="variable">socket</span> <span class="operator">=</span> serverSocket.accept();</span><br><span class="line">                System.out.println(socket);</span><br><span class="line">                <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> socket.getInputStream();</span><br><span class="line">                <span class="type">OutputStream</span> <span class="variable">os</span> <span class="operator">=</span> socket.getOutputStream();</span><br><span class="line">                <span class="type">byte</span>[] by = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span> * <span class="number">1024</span>];</span><br><span class="line">                <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> is.read(by);</span><br><span class="line">                System.out.println(<span class="string">&quot;读取到的字节数是: &quot;</span>+len);</span><br><span class="line">                System.out.println(<span class="keyword">new</span> <span class="title class_">String</span>(by,<span class="number">0</span>,len));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">catch</span>(IOException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>访问浏览器后，控制台的打印 请求头 信息：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">Socket[addr=/0:0:0:0:0:0:0:1,port=7268,localport=8080]</span><br><span class="line">读取到的字节数是: 810</span><br><span class="line">GET / HTTP/1.1</span><br><span class="line">Host: localhost:8080</span><br><span class="line">Connection: keep-alive</span><br><span class="line">Cache-Control: max-age=0</span><br><span class="line">sec-ch-ua: &quot;Google Chrome&quot;;v=&quot;113&quot;, &quot;Chromium&quot;;v=&quot;113&quot;, &quot;Not-A.Brand&quot;;v=&quot;24&quot;</span><br><span class="line">sec-ch-ua-mobile: ?0</span><br><span class="line">sec-ch-ua-platform: &quot;Windows&quot;</span><br><span class="line">Upgrade-Insecure-Requests: 1</span><br><span class="line">User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/113.0.0.0 Safari/537.36</span><br><span class="line">Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7</span><br><span class="line">Sec-Fetch-Site: none</span><br><span class="line">Sec-Fetch-Mode: navigate</span><br><span class="line">Sec-Fetch-User: ?1</span><br><span class="line">Sec-Fetch-Dest: document</span><br><span class="line">Accept-Encoding: gzip, deflate, br</span><br><span class="line">Accept-Language: en-US,en;q=0.9,zh-CN;q=0.8,zh;q=0.7</span><br><span class="line">Cookie: Idea-8296eb31=16c5dc07-6155-413d-b308-90f5c8fb55fe; JSESSIONID=F024A5B2C3183BCEFD841682047E6907</span><br></pre></td></tr></table></figure>
<p>我们通过浏览器请求本地的 ServerSocket 浏览器就会一直等待响应，因为使用无限循环让服务器一直保持开启的状态</p>
<h2 id="响应"><a class="markdownIt-Anchor" href="#响应">#</a> 响应😋</h2>
<p>使用 Java 中的 ServerSocket 通过 OutputStream 来实现将内容相应到浏览器的页面上。</p>
<ol>
<li>创建 ServerSocket 服务器套接字，并使用 try {} catch (){} 捕获异常。</li>
<li>创建线程池<mark> Executors.newCachedThreadPool</mark>，serverSocket 调用 accept (); 阻塞程序等待接收数据报，<mark>注意</mark>：不要写在子线程中 ( <code>executorService.execute</code> ) 去执行它否则性能爆炸。</li>
<li>无限循环保持启动状态开启使用子线程 executorService.execute ，执行内部的操作。</li>
<li>创建 InputStream 和 OutputStream，is 读取请求 HTTP 时的请求体信息，定义缓冲区数组一次性读取多个。</li>
<li>定义字符串赋值一个 h1 标签内容是成员字段自增值，在定义字符串赋值 HTTP 协议的请求信息和请求类型。</li>
<li>再定义 HTTP 协议的字符串中拼接上内容字符串<sup> (&quot;&lt;h1&gt;&quot;+count+&quot;&lt;h1/&gt;&quot;)</sup> ，在每段请求信息的后面都要使用 &quot;<mark> 空格换行</mark> &quot; 进行分隔否则后面数据发送不到。</li>
<li>将 response 拼接好信息的字符串通过输出流 os.write () 写出到浏览器中。</li>
<li>所有操作都完毕后关闭流，释放资源否则不会写出数据到页面中。</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyHttpServer</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String... args)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">ServerSocket</span> <span class="variable">serverSocket</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ServerSocket</span>(<span class="number">8080</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;服务器已经启动，监听端口为：8080 ...&quot;</span>);</span><br><span class="line">            <span class="type">ExecutorService</span> <span class="variable">executorService</span> <span class="operator">=</span> Executors.newCachedThreadPool();</span><br><span class="line">            <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">                <span class="type">Socket</span> <span class="variable">socket</span> <span class="operator">=</span> serverSocket.accept();</span><br><span class="line">                executorService.execute(() -&gt; &#123;</span><br><span class="line">                    <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">                    <span class="type">OutputStream</span> <span class="variable">os</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        System.out.println(socket);</span><br><span class="line">                        is = socket.getInputStream();</span><br><span class="line">                        os = socket.getOutputStream();</span><br><span class="line">                        <span class="type">byte</span>[] by = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span> * <span class="number">1024</span>];</span><br><span class="line">                        <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> is.read(by);</span><br><span class="line">                        <span class="keyword">if</span> (len != -<span class="number">1</span>) &#123;</span><br><span class="line">                            System.out.println(<span class="string">&quot;读取到的字节数是: &quot;</span> + len);</span><br><span class="line">                            System.out.println(<span class="keyword">new</span> <span class="title class_">String</span>(by, <span class="number">0</span>, len));</span><br><span class="line">                            <span class="comment">//响应给浏览器需要使用Http协议</span></span><br><span class="line">                            <span class="type">String</span> <span class="variable">body</span> <span class="operator">=</span> <span class="string">&quot;&lt;h1&gt;&quot;</span> + count + <span class="string">&quot;&lt;/h1&gt;&quot;</span>;</span><br><span class="line">                            <span class="comment">//http协议/版本 状态码  状态 后面的格式必须是\r\n不能乱写否则报错</span></span><br><span class="line">                            <span class="type">String</span> <span class="variable">response</span> <span class="operator">=</span> <span class="string">&quot;HTTP/1.1 200 OK\r\n&quot;</span> +<span class="comment">//HTTP1.1协议 状态码:200 正确 回车换行</span></span><br><span class="line">                                    <span class="comment">//告诉浏览器文本的内容大小</span></span><br><span class="line">                                    <span class="string">&quot;Content-Length: &quot;</span> + body.getBytes().length + <span class="string">&quot;\r\n&quot;</span> +</span><br><span class="line">                                    <span class="comment">//告诉浏览器文本类型: 普通文本/plain 不解析html标签代码</span></span><br><span class="line">                                    <span class="string">&quot;Content-Type: text/plain; charset-utf-8\r\n&quot;</span> +<span class="comment">//内容类型是普通文本 回车换行 字符集</span></span><br><span class="line">                                    <span class="comment">//固定写法,必须要写的空格换行(必须要写一个空行)</span></span><br><span class="line">                                    <span class="string">&quot;\r\n&quot;</span> +<span class="comment">//回车换行,否则后面的数据接收不到</span></span><br><span class="line">                                    <span class="comment">//body响应浏览器内容</span></span><br><span class="line">                                    <span class="comment">//要返回给浏览器的文本正文(内容)</span></span><br><span class="line">                                    body + <span class="string">&quot;\r\n&quot;</span>;<span class="comment">//回车换行,否则后面的数据接收不到</span></span><br><span class="line">                            <span class="comment">//将上面的HTTP协议信息和响应的数据写出到浏览器中</span></span><br><span class="line">                            os.write(response.getBytes());</span><br><span class="line">                            count++;</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                            System.out.println(<span class="string">&quot;没有读取到数据&quot;</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">                        <span class="keyword">try</span>&#123;</span><br><span class="line">                            <span class="keyword">if</span>(os != <span class="literal">null</span>)&#123;</span><br><span class="line">                                os.flush();<span class="comment">//将数据刷出</span></span><br><span class="line">                            &#125;</span><br><span class="line">                            <span class="keyword">if</span>(socket != <span class="literal">null</span>)&#123;</span><br><span class="line">                                <span class="comment">//上一段对话已经结束进行下一段对话</span></span><br><span class="line">                                socket.shutdownOutput();</span><br><span class="line">                                socket.close();<span class="comment">//关闭套接字资源</span></span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;<span class="keyword">catch</span>(IOException e)&#123;</span><br><span class="line">                            e.printStackTrace();</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>效果</strong>：</p>
<p><img data-src="./images/test-1684482715163-1.gif" alt="test"></p>
<h2 id="请求信息十六进制显示️"><a class="markdownIt-Anchor" href="#请求信息十六进制显示️">#</a> 请求信息十六进制显示⚡️</h2>
<p>将 HTTP 请求头的信息转换为十六进制显示类似如下：</p>
<p><img data-src="./images/image-20230519104124416.png" alt="image-20230519104124416"></p>
<p>思路：</p>
<blockquote>
<p><strong>定义传入二进制数据转换为十六进制的方法</strong>.</p>
<p>传入一个二进制的数据到 byte2Hex 方法中进行地位和高位的计算转换为对应的十六进制数据，地位计算出一个值为 char 数组成员字段的下标值，高位也是组成一个十六进制的值</p>
<p><mark>二进制转十六进制数</mark> 规则：</p>
<p><code>从低位开始，将二进制数每四位一组，转成对应的六进制数即可</code> ：</p>
<p><code>例子</code> ：</p>
 <figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">0B11010101</span><br><span class="line">0B[1101][0101]=0XD5</span><br><span class="line">第一组是4+1=5</span><br><span class="line">第二组是1+4+8=13/D</span><br></pre></td></tr></table></figure>
<p><code>地位</code> ：进行 &amp; 操作计算出地位要转换的数据</p>
<p><code>高位</code> ：先进行 &amp; 操作计算出高位要转换的数据然后进行运算符右移让其从高位变地位来计算，如果不懂需要细读 二进制转十六进制的规则</p>
<p>计算出结果后通过值来获取 char 数组成员字段下标对应十六进制的值</p>
</blockquote>
<p>定义成员变量来记录十六进制的数据组</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">char</span>[] arr = &#123;<span class="string">&#x27;0&#x27;</span>,<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;2&#x27;</span>,<span class="string">&#x27;3&#x27;</span>,<span class="string">&#x27;4&#x27;</span>,<span class="string">&#x27;5&#x27;</span>,<span class="string">&#x27;6&#x27;</span>,<span class="string">&#x27;7&#x27;</span>,<span class="string">&#x27;8&#x27;</span>,<span class="string">&#x27;9&#x27;</span>,<span class="string">&#x27;A&#x27;</span>,</span><br><span class="line">                                   <span class="string">&#x27;B&#x27;</span>,<span class="string">&#x27;C&#x27;</span>,<span class="string">&#x27;D&#x27;</span>,<span class="string">&#x27;E&#x27;</span>,<span class="string">&#x27;F&#x27;</span>&#125;;</span><br></pre></td></tr></table></figure>
<p>定义方法将传入的二进制数据转换为十六进制</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 3a -&gt; &quot;3A&quot;</span></span><br><span class="line"><span class="comment"> * a5 -&gt; &quot;A5&quot;</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> bt</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> String <span class="title function_">byte2Hex</span><span class="params">(<span class="type">byte</span> bt)</span>&#123;</span><br><span class="line">   <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 00111111：形参</span></span><br><span class="line"><span class="comment">    * &amp;</span></span><br><span class="line"><span class="comment">    * 00001111</span></span><br><span class="line"><span class="comment">    * 操作:</span></span><br><span class="line"><span class="comment">    * 00001111</span></span><br><span class="line"><span class="comment">    * 结果：15 对应成员变量下标结果: F</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="comment">//计算地位</span></span><br><span class="line">   <span class="type">int</span> <span class="variable">lo</span> <span class="operator">=</span> bt &amp; <span class="number">0b00001111</span>;</span><br><span class="line">   <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 00111111：形参</span></span><br><span class="line"><span class="comment">    * &amp;</span></span><br><span class="line"><span class="comment">    * 11110000</span></span><br><span class="line"><span class="comment">    * 操作:</span></span><br><span class="line"><span class="comment">    * 00110000</span></span><br><span class="line"><span class="comment">    * 结果:</span></span><br><span class="line"><span class="comment">    * 48</span></span><br><span class="line"><span class="comment">    * &gt;&gt; 4</span></span><br><span class="line"><span class="comment">    * 结果:</span></span><br><span class="line"><span class="comment">    * 24 12 6 3</span></span><br><span class="line"><span class="comment">    * 最终结果:</span></span><br><span class="line"><span class="comment">    * 3 对应成员变量下标结果: 3</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="comment">//计算高位</span></span><br><span class="line">   <span class="comment">//运算右移4位是因为让高位变地位重新开始计算而不是继续计算</span></span><br><span class="line">   <span class="type">int</span> <span class="variable">hi</span> <span class="operator">=</span> (bt &amp; <span class="number">0b11110000</span>) &gt;&gt; <span class="number">4</span>;</span><br><span class="line">   <span class="type">char</span> <span class="variable">clo</span> <span class="operator">=</span> arr[lo];</span><br><span class="line">   <span class="type">char</span> <span class="variable">chi</span> <span class="operator">=</span> arr[hi];</span><br><span class="line">   <span class="comment">//转换为字符串类型拼接返回</span></span><br><span class="line">   <span class="keyword">return</span> chi + <span class="string">&quot;&quot;</span> + clo;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>测试代码</strong>：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//f:15 1111:15 11:3 -&gt; 111111 48 56 60 63 最终实参为:63</span></span><br><span class="line"><span class="comment">//byte会将 0x3f 转换为二进制数据：63 传入形参中</span></span><br><span class="line"><span class="type">byte</span> <span class="variable">b</span> <span class="operator">=</span> <span class="number">0x3f</span>;</span><br><span class="line"><span class="type">String</span> <span class="variable">Hex</span> <span class="operator">=</span> byte2Hex(b);</span><br><span class="line">System.out.println(Hex);</span><br><span class="line">----------------------------Result----------------------------</span><br><span class="line"><span class="number">3F</span></span><br></pre></td></tr></table></figure>
<p>上面的代码通过测试能返回一个二进制数转为十六进制数据对应的数据但是我们想要的不是只有一个。</p>
<h3 id="将多个二进制转十六进制的数据拼接打印️"><a class="markdownIt-Anchor" href="#将多个二进制转十六进制的数据拼接打印️">#</a> 将多个二进制转十六进制的数据拼接打印☢️</h3>
<p>定义接收 byte 数组的方法 bytesArr2HexStr 将数组中二进制数据转换为多个十六进制显示：</p>
<p>思路：</p>
<blockquote>
<p>接收一个二进制数组和数据的大小，循环数据大小，定义 StringBuffer 使用 append 追加每次循环传入 byte2Hex 转换方法中返回的十六进制数据并在每段数据后拼接空格，if 判断每 8 段数据多拼接一个空格，if 判断每 16 段数据空格换行，最终返回 sb.toString () 将 StringBuffer 转换为字符串类型返回。</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 将传入的整个二进制数据全部转换为十六进制的数据</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> by 接收字节数组</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> len 数据的大小</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> String <span class="title function_">bytesArr2HexStr</span><span class="params">(<span class="type">byte</span>[] by,<span class="type">int</span> len)</span>&#123;</span><br><span class="line">   <span class="comment">//使用StringBuffer来接收转换后的十六进制数据</span></span><br><span class="line">   <span class="type">StringBuffer</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuffer</span>();</span><br><span class="line">   <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>;i &lt; len;i ++)&#123;</span><br><span class="line">      <span class="comment">//每追加一个十六进制数据就拼接一个空格</span></span><br><span class="line">      sb.append(byte2Hex(by[i])+<span class="string">&quot; &quot;</span>);</span><br><span class="line">      <span class="comment">//判断每第8个多追加一个空格 i+1避免第一个就满足条件</span></span><br><span class="line">      <span class="keyword">if</span>((i + <span class="number">1</span>) % <span class="number">8</span> == <span class="number">0</span>)</span><br><span class="line">         sb.append(<span class="string">&quot; &quot;</span>);</span><br><span class="line">      <span class="comment">//判断每16个进行换行空格 i+1避免第一个就满足条件</span></span><br><span class="line">      <span class="keyword">if</span>((i + <span class="number">1</span>) % <span class="number">16</span> == <span class="number">0</span>)</span><br><span class="line">         sb.append(<span class="string">&quot;\r\n&quot;</span>);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="comment">//将StringBuffer转换为字符串并返回</span></span><br><span class="line">   <span class="keyword">return</span> sb.toString();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在 <code>main</code>  方法中：InputStream 中读取 <code>请求体</code> 的二进制数据并将二进制数据传入十六进制转换方法中进行转换：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//从Socket中读取HTTP请求信息</span></span><br><span class="line">is = socket.getInputStream();</span><br><span class="line">os = socket.getOutputStream();</span><br><span class="line"><span class="comment">//字节缓冲区</span></span><br><span class="line"><span class="type">byte</span>[] by = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span> * <span class="number">1024</span>];</span><br><span class="line"><span class="comment">//将读取到的字节数据赋值给变量len</span></span><br><span class="line"><span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> is.read(by);</span><br><span class="line"><span class="comment">//判断是否读取到末尾</span></span><br><span class="line"><span class="keyword">if</span> (len != -<span class="number">1</span>) &#123;</span><br><span class="line">   <span class="comment">//调用方法进行转换为十六进制</span></span><br><span class="line">   <span class="type">String</span> <span class="variable">hexMsg</span> <span class="operator">=</span> bytesArr2HexStr(by,len);</span><br><span class="line">   System.out.println(hexMsg);</span><br><span class="line">----------------------------Result----------------------------</span><br><span class="line"><span class="number">47</span> <span class="number">45</span> <span class="number">54</span> <span class="number">20</span> <span class="number">2F</span> <span class="number">66</span> <span class="number">61</span> <span class="number">76</span>  <span class="number">69</span> <span class="number">63</span> <span class="number">6F</span> 6E 2E <span class="number">69</span> <span class="number">63</span> <span class="number">6F</span>  </span><br><span class="line"><span class="number">20</span> <span class="number">48</span> <span class="number">54</span> <span class="number">54</span> <span class="number">50</span> <span class="number">2F</span> <span class="number">31</span> 2E  <span class="number">31</span> <span class="number">0D</span> 0A <span class="number">48</span> <span class="number">6F</span> <span class="number">73</span> <span class="number">74</span> 3A  </span><br><span class="line"><span class="number">20</span> 6C <span class="number">6F</span> <span class="number">63</span> <span class="number">61</span> 6C <span class="number">68</span> <span class="number">6F</span>  <span class="number">73</span> <span class="number">74</span> 3A <span class="number">38</span> <span class="number">30</span> <span class="number">38</span> <span class="number">30</span> <span class="number">0D</span>  </span><br><span class="line">0A <span class="number">43</span> <span class="number">6F</span> 6E 6E <span class="number">65</span> <span class="number">63</span> <span class="number">74</span>  <span class="number">69</span> <span class="number">6F</span> 6E 3A <span class="number">20</span> 6B <span class="number">65</span> <span class="number">65</span>  </span><br><span class="line"><span class="number">70</span> <span class="number">2D</span> <span class="number">61</span> 6C <span class="number">69</span> <span class="number">76</span> <span class="number">65</span> <span class="number">0D</span>  0A <span class="number">73</span> <span class="number">65</span> <span class="number">63</span> <span class="number">2D</span> <span class="number">63</span> <span class="number">68</span> <span class="number">2D</span>  </span><br><span class="line"><span class="number">75</span> <span class="number">61</span> 3A <span class="number">20</span> <span class="number">22</span> <span class="number">47</span> <span class="number">6F</span> <span class="number">6F</span>  <span class="number">67</span> 6C <span class="number">65</span> <span class="number">20</span> <span class="number">43</span> <span class="number">68</span> <span class="number">72</span> <span class="number">6F</span>  </span><br><span class="line"><span class="number">6D</span> <span class="number">65</span> <span class="number">22</span> 3B <span class="number">76</span> <span class="number">3D</span> <span class="number">22</span> <span class="number">31</span>  <span class="number">31</span> <span class="number">33</span> <span class="number">22</span> 2C <span class="number">20</span> <span class="number">22</span> <span class="number">43</span> <span class="number">68</span>  </span><br><span class="line"><span class="number">72</span> <span class="number">6F</span> <span class="number">6D</span> <span class="number">69</span> <span class="number">75</span> <span class="number">6D</span> <span class="number">22</span> 3B  <span class="number">76</span> <span class="number">3D</span> <span class="number">22</span> <span class="number">31</span> <span class="number">31</span> <span class="number">33</span> <span class="number">22</span> 2C  </span><br><span class="line"><span class="number">20</span> <span class="number">22</span> 4E <span class="number">6F</span> <span class="number">74</span> <span class="number">2D</span> <span class="number">41</span> 2E  <span class="number">42</span> <span class="number">72</span> <span class="number">61</span> 6E <span class="number">64</span> <span class="number">22</span> 3B <span class="number">76</span>  </span><br><span class="line"><span class="number">3D</span> <span class="number">22</span> <span class="number">32</span> <span class="number">34</span> <span class="number">22</span> <span class="number">0D</span> 0A <span class="number">73</span>  <span class="number">65</span> <span class="number">63</span> <span class="number">2D</span> <span class="number">63</span> <span class="number">68</span> <span class="number">2D</span> <span class="number">75</span> <span class="number">61</span>  </span><br><span class="line"><span class="number">2D</span> <span class="number">6D</span> <span class="number">6F</span> <span class="number">62</span> <span class="number">69</span> 6C <span class="number">65</span> 3A  <span class="number">20</span> <span class="number">3F</span> <span class="number">30</span> <span class="number">0D</span> 0A <span class="number">55</span> <span class="number">73</span> <span class="number">65</span>  </span><br><span class="line"><span class="number">72</span> <span class="number">2D</span> <span class="number">41</span> <span class="number">67</span> <span class="number">65</span> 6E <span class="number">74</span> 3A  <span class="number">20</span> <span class="number">4D</span> <span class="number">6F</span> 7A <span class="number">69</span> 6C 6C <span class="number">61</span>  </span><br><span class="line"><span class="number">2F</span> <span class="number">35</span> 2E <span class="number">30</span> <span class="number">20</span> <span class="number">28</span> <span class="number">57</span> <span class="number">69</span>  6E <span class="number">64</span> <span class="number">6F</span> <span class="number">77</span> <span class="number">73</span> <span class="number">20</span> 4E <span class="number">54</span>  </span><br><span class="line"><span class="number">20</span> <span class="number">31</span> <span class="number">30</span> 2E <span class="number">30</span> 3B <span class="number">20</span> <span class="number">57</span>  <span class="number">69</span> 6E <span class="number">36</span> <span class="number">34</span> 3B <span class="number">20</span> <span class="number">78</span> <span class="number">36</span>  </span><br><span class="line"><span class="number">34</span> <span class="number">29</span> <span class="number">20</span> <span class="number">41</span> <span class="number">70</span> <span class="number">70</span> 6C <span class="number">65</span>  <span class="number">57</span> <span class="number">65</span> <span class="number">62</span> 4B <span class="number">69</span> <span class="number">74</span> <span class="number">2F</span> <span class="number">35</span>  </span><br><span class="line"><span class="number">33</span> <span class="number">37</span> 2E <span class="number">33</span> <span class="number">36</span> <span class="number">20</span> <span class="number">28</span> 4B  <span class="number">48</span> <span class="number">54</span> <span class="number">4D</span> 4C 2C <span class="number">20</span> 6C <span class="number">69</span>  </span><br><span class="line">6B <span class="number">65</span> <span class="number">20</span> <span class="number">47</span> <span class="number">65</span> <span class="number">63</span> 6B <span class="number">6F</span>  <span class="number">29</span> <span class="number">20</span> <span class="number">43</span> <span class="number">68</span> <span class="number">72</span> <span class="number">6F</span> <span class="number">6D</span> <span class="number">65</span>  </span><br><span class="line"><span class="number">2F</span> <span class="number">31</span> <span class="number">31</span> <span class="number">33</span> 2E <span class="number">30</span> 2E <span class="number">30</span>  2E <span class="number">30</span> <span class="number">20</span> <span class="number">53</span> <span class="number">61</span> <span class="number">66</span> <span class="number">61</span> <span class="number">72</span>  </span><br><span class="line"><span class="number">69</span> <span class="number">2F</span> <span class="number">35</span> <span class="number">33</span> <span class="number">37</span> 2E <span class="number">33</span> <span class="number">36</span>  <span class="number">0D</span> 0A <span class="number">73</span> <span class="number">65</span> <span class="number">63</span> <span class="number">2D</span> <span class="number">63</span> <span class="number">68</span>  </span><br><span class="line"><span class="number">2D</span> <span class="number">75</span> <span class="number">61</span> <span class="number">2D</span> <span class="number">70</span> 6C <span class="number">61</span> <span class="number">74</span>  <span class="number">66</span> <span class="number">6F</span> <span class="number">72</span> <span class="number">6D</span> 3A <span class="number">20</span> <span class="number">22</span> <span class="number">57</span>  </span><br><span class="line"><span class="number">69</span> 6E <span class="number">64</span> <span class="number">6F</span> <span class="number">77</span> <span class="number">73</span> <span class="number">22</span> <span class="number">0D</span>  0A <span class="number">41</span> <span class="number">63</span> <span class="number">63</span> <span class="number">65</span> <span class="number">70</span> <span class="number">74</span> 3A  </span><br><span class="line"><span class="number">20</span> <span class="number">69</span> <span class="number">6D</span> <span class="number">61</span> <span class="number">67</span> <span class="number">65</span> <span class="number">2F</span> <span class="number">61</span>  <span class="number">76</span> <span class="number">69</span> <span class="number">66</span> 2C <span class="number">69</span> <span class="number">6D</span> <span class="number">61</span> <span class="number">67</span>  </span><br><span class="line"><span class="number">65</span> <span class="number">2F</span> <span class="number">77</span> <span class="number">65</span> <span class="number">62</span> <span class="number">70</span> 2C <span class="number">69</span>  <span class="number">6D</span> <span class="number">61</span> <span class="number">67</span> <span class="number">65</span> <span class="number">2F</span> <span class="number">61</span> <span class="number">70</span> 6E  </span><br><span class="line"><span class="number">67</span> 2C <span class="number">69</span> <span class="number">6D</span> <span class="number">61</span> <span class="number">67</span> <span class="number">65</span> <span class="number">2F</span>  <span class="number">73</span> <span class="number">76</span> <span class="number">67</span> 2B <span class="number">78</span> <span class="number">6D</span> 6C 2C  </span><br><span class="line"><span class="number">69</span> <span class="number">6D</span> <span class="number">61</span> <span class="number">67</span> <span class="number">65</span> <span class="number">2F</span> 2A 2C  2A <span class="number">2F</span> 2A 3B <span class="number">71</span> <span class="number">3D</span> <span class="number">30</span> 2E  </span><br><span class="line"><span class="number">38</span> <span class="number">0D</span> 0A <span class="number">53</span> <span class="number">65</span> <span class="number">63</span> <span class="number">2D</span> <span class="number">46</span>  <span class="number">65</span> <span class="number">74</span> <span class="number">63</span> <span class="number">68</span> <span class="number">2D</span> <span class="number">53</span> <span class="number">69</span> <span class="number">74</span>  </span><br><span class="line"><span class="number">65</span> 3A <span class="number">20</span> <span class="number">73</span> <span class="number">61</span> <span class="number">6D</span> <span class="number">65</span> <span class="number">2D</span>  <span class="number">6F</span> <span class="number">72</span> <span class="number">69</span> <span class="number">67</span> <span class="number">69</span> 6E <span class="number">0D</span> 0A  </span><br><span class="line"><span class="number">53</span> <span class="number">65</span> <span class="number">63</span> <span class="number">2D</span> <span class="number">46</span> <span class="number">65</span> <span class="number">74</span> <span class="number">63</span>  <span class="number">68</span> <span class="number">2D</span> <span class="number">4D</span> <span class="number">6F</span> <span class="number">64</span> <span class="number">65</span> 3A <span class="number">20</span>  </span><br><span class="line">6E <span class="number">6F</span> <span class="number">2D</span> <span class="number">63</span> <span class="number">6F</span> <span class="number">72</span> <span class="number">73</span> <span class="number">0D</span>  0A <span class="number">53</span> <span class="number">65</span> <span class="number">63</span> <span class="number">2D</span> <span class="number">46</span> <span class="number">65</span> <span class="number">74</span>  </span><br><span class="line"><span class="number">63</span> <span class="number">68</span> <span class="number">2D</span> <span class="number">44</span> <span class="number">65</span> <span class="number">73</span> <span class="number">74</span> 3A  <span class="number">20</span> <span class="number">69</span> <span class="number">6D</span> <span class="number">61</span> <span class="number">67</span> <span class="number">65</span> <span class="number">0D</span> 0A  </span><br><span class="line"><span class="number">52</span> <span class="number">65</span> <span class="number">66</span> <span class="number">65</span> <span class="number">72</span> <span class="number">65</span> <span class="number">72</span> 3A  <span class="number">20</span> <span class="number">68</span> <span class="number">74</span> <span class="number">74</span> <span class="number">70</span> 3A <span class="number">2F</span> <span class="number">2F</span>  </span><br><span class="line">6C <span class="number">6F</span> <span class="number">63</span> <span class="number">61</span> 6C <span class="number">68</span> <span class="number">6F</span> <span class="number">73</span>  <span class="number">74</span> 3A <span class="number">38</span> <span class="number">30</span> <span class="number">38</span> <span class="number">30</span> <span class="number">2F</span> <span class="number">0D</span>  </span><br><span class="line">0A <span class="number">41</span> <span class="number">63</span> <span class="number">63</span> <span class="number">65</span> <span class="number">70</span> <span class="number">74</span> <span class="number">2D</span>  <span class="number">45</span> 6E <span class="number">63</span> <span class="number">6F</span> <span class="number">64</span> <span class="number">69</span> 6E <span class="number">67</span>  </span><br><span class="line">3A <span class="number">20</span> <span class="number">67</span> 7A <span class="number">69</span> <span class="number">70</span> 2C <span class="number">20</span>  <span class="number">64</span> <span class="number">65</span> <span class="number">66</span> 6C <span class="number">61</span> <span class="number">74</span> <span class="number">65</span> 2C  </span><br><span class="line"><span class="number">20</span> <span class="number">62</span> <span class="number">72</span> <span class="number">0D</span> 0A <span class="number">41</span> <span class="number">63</span> <span class="number">63</span>  <span class="number">65</span> <span class="number">70</span> <span class="number">74</span> <span class="number">2D</span> 4C <span class="number">61</span> 6E <span class="number">67</span>  </span><br><span class="line"><span class="number">75</span> <span class="number">61</span> <span class="number">67</span> <span class="number">65</span> 3A <span class="number">20</span> <span class="number">65</span> 6E  <span class="number">2D</span> <span class="number">55</span> <span class="number">53</span> 2C <span class="number">65</span> 6E 3B <span class="number">71</span>  </span><br><span class="line"><span class="number">3D</span> <span class="number">30</span> 2E <span class="number">39</span> 2C 7A <span class="number">68</span> <span class="number">2D</span>  <span class="number">43</span> 4E 3B <span class="number">71</span> <span class="number">3D</span> <span class="number">30</span> 2E <span class="number">38</span>  </span><br><span class="line">2C 7A <span class="number">68</span> 3B <span class="number">71</span> <span class="number">3D</span> <span class="number">30</span> 2E  <span class="number">37</span> <span class="number">0D</span> 0A <span class="number">43</span> <span class="number">6F</span> <span class="number">6F</span> 6B <span class="number">69</span>  </span><br><span class="line"><span class="number">65</span> 3A <span class="number">20</span> <span class="number">49</span> <span class="number">64</span> <span class="number">65</span> <span class="number">61</span> <span class="number">2D</span>  <span class="number">38</span> <span class="number">32</span> <span class="number">39</span> <span class="number">36</span> <span class="number">65</span> <span class="number">62</span> <span class="number">33</span> <span class="number">31</span>  </span><br><span class="line"><span class="number">3D</span> <span class="number">31</span> <span class="number">36</span> <span class="number">63</span> <span class="number">35</span> <span class="number">64</span> <span class="number">63</span> <span class="number">30</span>  <span class="number">37</span> <span class="number">2D</span> <span class="number">36</span> <span class="number">31</span> <span class="number">35</span> <span class="number">35</span> <span class="number">2D</span> <span class="number">34</span>  </span><br><span class="line"><span class="number">31</span> <span class="number">33</span> <span class="number">64</span> <span class="number">2D</span> <span class="number">62</span> <span class="number">33</span> <span class="number">30</span> <span class="number">38</span>  <span class="number">2D</span> <span class="number">39</span> <span class="number">30</span> <span class="number">66</span> <span class="number">35</span> <span class="number">63</span> <span class="number">38</span> <span class="number">66</span>  </span><br><span class="line"><span class="number">62</span> <span class="number">35</span> <span class="number">35</span> <span class="number">66</span> <span class="number">65</span> <span class="number">0D</span> 0A <span class="number">0D</span>  0A </span><br><span class="line">---------------------------------------------------------------------------</span><br><span class="line">GET /favicon.ico HTTP/<span class="number">1.1</span></span><br><span class="line">Host: localhost:<span class="number">8080</span></span><br><span class="line">Connection: keep-alive</span><br><span class="line">sec-ch-ua: <span class="string">&quot;Google Chrome&quot;</span>;v=<span class="string">&quot;113&quot;</span>, <span class="string">&quot;Chromium&quot;</span>;v=<span class="string">&quot;113&quot;</span>, <span class="string">&quot;Not-A.Brand&quot;</span>;v=<span class="string">&quot;24&quot;</span></span><br><span class="line">sec-ch-ua-mobile: ?<span class="number">0</span></span><br><span class="line">User-Agent: Mozilla/<span class="number">5.0</span> (Windows NT <span class="number">10.0</span>; Win64; x64) AppleWebKit/<span class="number">537.36</span> (KHTML, like Gecko) Chrome/<span class="number">113.0</span><span class="number">.0</span><span class="number">.0</span> Safari/<span class="number">537.36</span></span><br><span class="line">sec-ch-ua-platform: <span class="string">&quot;Windows&quot;</span></span><br><span class="line">Accept: image/avif,image/webp,image/apng,image/svg+xml,image<span class="comment">/*,*/</span>*;q=<span class="number">0.8</span></span><br><span class="line">Sec-Fetch-Site: same-origin</span><br><span class="line">Sec-Fetch-Mode: no-cors</span><br><span class="line">Sec-Fetch-Dest: image</span><br><span class="line">Referer: http:<span class="comment">//localhost:8080/</span></span><br><span class="line">Accept-Encoding: gzip, deflate, br</span><br><span class="line">Accept-Language: en-US,en;q=<span class="number">0.9</span>,zh-CN;q=<span class="number">0.8</span>,zh;q=<span class="number">0.7</span></span><br><span class="line">Cookie: Idea-8296eb31=16c5dc07-<span class="number">6155</span>-<span class="number">413d</span>-b308-90f5c8fb55fe</span><br></pre></td></tr></table></figure>
<h2 id="请求头信息ascii码显示"><a class="markdownIt-Anchor" href="#请求头信息ascii码显示">#</a> 请求头信息 ASCII 码显示🌓</h2>
<p>编写判断十六进制可展示范围的字符</p>
<p>思路：</p>
<ol>
<li>定义四个 StringBuffer：sb：主体，sbLeft：左边数据，sbRight：右边展示 ASCII 字符，fenge：展示 … 。</li>
<li>循环字节数据大小，将循环到的字节数据传入到 byte2Hex 方法中进行十六进制转换并在每个数据后拼接空格然后追加到 sbLeft 中 。</li>
<li>判断当前循环的二进制字节数据的字符可见范围<sup>可对照 ASCII 码表查看</sup>满足条件则转换为字符追加到 sbRight 中，如果没有则追加  <code>.</code>  进行分隔。</li>
<li>判断 i+1 从 1 开始 %8 是否等于 0，也就是每 8 位一组多追加一个空格进去。</li>
<li>判断 i+1 从 1 开始 %16 是否等于 0，也就是每 16 位将：分隔，sbLeft，分隔，sbRight，空格换行追加到主体 sb 中，并重新创建 sbLeft，sbRight，fenge 的 StringBuffer 清空之前的数据，因为之前的数据存入 sb 中了再存就重复了。</li>
<li>追后执行完了循环在进行一次所有 StringBuffer 向 sb 中追加，追加进去最后一条数据</li>
<li>返回 sb.toString () 转换为字符串类型返回</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 将传入的整个二进制数据全部转换为十六进制的数据</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> by 接收字节数组</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> len 数据的大小</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> String <span class="title function_">bytesArr2HexStr</span><span class="params">(<span class="type">byte</span>[] by,<span class="type">int</span> len)</span>&#123;</span><br><span class="line">   <span class="comment">//使用StringBuffer来接收转换后的十六进制数据</span></span><br><span class="line">   <span class="type">StringBuffer</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuffer</span>();</span><br><span class="line">   <span class="type">StringBuffer</span> <span class="variable">sbLeft</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuffer</span>();</span><br><span class="line">   <span class="type">StringBuffer</span> <span class="variable">fenge</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuffer</span>();</span><br><span class="line">   <span class="type">StringBuffer</span> <span class="variable">sbRight</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuffer</span>();</span><br><span class="line">   <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>;i &lt; len;i ++)&#123;</span><br><span class="line">      <span class="comment">//每追加一个十六进制数据就拼接一个空格</span></span><br><span class="line">      sbLeft.append(byte2Hex(by[i])+<span class="string">&quot; &quot;</span>);</span><br><span class="line">      <span class="comment">//判断可见字符的范围</span></span><br><span class="line">      <span class="keyword">if</span>(by[i] &gt;= <span class="number">0x20</span> &amp;&amp; by[i] &lt;= <span class="number">0x7e</span>)&#123;</span><br><span class="line">         <span class="comment">//将二进制数据转换为char字符拼接到StringBuffer中</span></span><br><span class="line">         sbRight.append((<span class="type">char</span>)by[i]);</span><br><span class="line">      &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">         <span class="comment">//如果不在可见范围内则追加一个 . 即可</span></span><br><span class="line">         sbRight.append(<span class="string">&quot;.&quot;</span>);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">//判断每第8个多追加一个空格 i+1避免第一个就满足条件</span></span><br><span class="line">      <span class="keyword">if</span>((i + <span class="number">1</span>) % <span class="number">8</span> == <span class="number">0</span>)</span><br><span class="line">         sbLeft.append(<span class="string">&quot; &quot;</span>);</span><br><span class="line">      <span class="comment">//判断每16个进行换行空格 i+1避免第一个就满足条件</span></span><br><span class="line">      <span class="keyword">if</span>(i % <span class="number">16</span> == <span class="number">0</span>)&#123;</span><br><span class="line">         fenge.append(<span class="string">&quot;.......&quot;</span>);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span>((i + <span class="number">1</span>) % <span class="number">16</span> == <span class="number">0</span>)&#123;</span><br><span class="line">         sb.append(fenge).append(sbLeft).append(fenge).append(sbRight).append(<span class="string">&quot;\r\n&quot;</span>);</span><br><span class="line">         sbLeft = <span class="keyword">new</span> <span class="title class_">StringBuffer</span>();</span><br><span class="line">         sbRight = <span class="keyword">new</span> <span class="title class_">StringBuffer</span>();</span><br><span class="line">         fenge = <span class="keyword">new</span> <span class="title class_">StringBuffer</span>();</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="comment">//将最后的数据追加到SpringBuffer中</span></span><br><span class="line">   sb.append(fenge).append(sbLeft).append(<span class="string">&quot;  &quot;</span>).append(fenge).append(sbRight).append(<span class="string">&quot;\r\n&quot;</span>);</span><br><span class="line">   <span class="comment">//将StringBuffer转换为字符串并返回</span></span><br><span class="line">   <span class="keyword">return</span> sb.toString();</span><br><span class="line">&#125;</span><br><span class="line">--------------------------------Result--------------------------------</span><br><span class="line">Socket[addr=/<span class="number">0</span>:<span class="number">0</span>:<span class="number">0</span>:<span class="number">0</span>:<span class="number">0</span>:<span class="number">0</span>:<span class="number">0</span>:<span class="number">1</span>,port=<span class="number">12171</span>,localport=<span class="number">8080</span>]</span><br><span class="line">Socket[addr=/<span class="number">0</span>:<span class="number">0</span>:<span class="number">0</span>:<span class="number">0</span>:<span class="number">0</span>:<span class="number">0</span>:<span class="number">0</span>:<span class="number">1</span>,port=<span class="number">12172</span>,localport=<span class="number">8080</span>]</span><br><span class="line">......<span class="number">.47</span> <span class="number">45</span> <span class="number">54</span> <span class="number">20</span> <span class="number">2F</span> <span class="number">20</span> <span class="number">48</span> <span class="number">54</span>  <span class="number">54</span> <span class="number">50</span> <span class="number">2F</span> <span class="number">31</span> 2E <span class="number">31</span> <span class="number">0D</span> 0A  .......GET / HTTP/<span class="number">1.1</span>..</span><br><span class="line">......<span class="number">.48</span> <span class="number">6F</span> <span class="number">73</span> <span class="number">74</span> 3A <span class="number">20</span> 6C <span class="number">6F</span>  <span class="number">63</span> <span class="number">61</span> 6C <span class="number">68</span> <span class="number">6F</span> <span class="number">73</span> <span class="number">74</span> 3A  .......Host: localhost:</span><br><span class="line">......<span class="number">.38</span> <span class="number">30</span> <span class="number">38</span> <span class="number">30</span> <span class="number">0D</span> 0A <span class="number">43</span> <span class="number">6F</span>  6E 6E <span class="number">65</span> <span class="number">63</span> <span class="number">74</span> <span class="number">69</span> <span class="number">6F</span> 6E  ......<span class="number">.8080</span>..Connection</span><br><span class="line">.......3A <span class="number">20</span> 6B <span class="number">65</span> <span class="number">65</span> <span class="number">70</span> <span class="number">2D</span> <span class="number">61</span>  6C <span class="number">69</span> <span class="number">76</span> <span class="number">65</span> <span class="number">0D</span> 0A <span class="number">43</span> <span class="number">61</span>  .......: keep-alive..Ca</span><br><span class="line">......<span class="number">.63</span> <span class="number">68</span> <span class="number">65</span> <span class="number">2D</span> <span class="number">43</span> <span class="number">6F</span> 6E <span class="number">74</span>  <span class="number">72</span> <span class="number">6F</span> 6C 3A <span class="number">20</span> <span class="number">6D</span> <span class="number">61</span> <span class="number">78</span>  .......che-Control: max</span><br><span class="line">......<span class="number">.2D</span> <span class="number">61</span> <span class="number">67</span> <span class="number">65</span> <span class="number">3D</span> <span class="number">30</span> <span class="number">0D</span> 0A  <span class="number">73</span> <span class="number">65</span> <span class="number">63</span> <span class="number">2D</span> <span class="number">63</span> <span class="number">68</span> <span class="number">2D</span> <span class="number">75</span>  .......-age=<span class="number">0.</span>.sec-ch-u</span><br><span class="line">......<span class="number">.61</span> 3A <span class="number">20</span> <span class="number">22</span> <span class="number">47</span> <span class="number">6F</span> <span class="number">6F</span> <span class="number">67</span>  6C <span class="number">65</span> <span class="number">20</span> <span class="number">43</span> <span class="number">68</span> <span class="number">72</span> <span class="number">6F</span> <span class="number">6D</span>  .......a: <span class="string">&quot;Google Chrom</span></span><br><span class="line"><span class="string">.......65 22 3B 76 3D 22 31 31  33 22 2C 20 22 43 68 72  .......e&quot;</span>;v=<span class="string">&quot;113&quot;</span>, <span class="string">&quot;Chr</span></span><br><span class="line"><span class="string">.......6F 6D 69 75 6D 22 3B 76  3D 22 31 31 33 22 2C 20  .......omium&quot;</span>;v=<span class="string">&quot;113&quot;</span>, </span><br><span class="line">......<span class="number">.22</span> 4E <span class="number">6F</span> <span class="number">74</span> <span class="number">2D</span> <span class="number">41</span> 2E <span class="number">42</span>  <span class="number">72</span> <span class="number">61</span> 6E <span class="number">64</span> <span class="number">22</span> 3B <span class="number">76</span> <span class="number">3D</span>  .......<span class="string">&quot;Not-A.Brand&quot;</span>;v=</span><br><span class="line">......<span class="number">.22</span> <span class="number">32</span> <span class="number">34</span> <span class="number">22</span> <span class="number">0D</span> 0A <span class="number">73</span> <span class="number">65</span>  <span class="number">63</span> <span class="number">2D</span> <span class="number">63</span> <span class="number">68</span> <span class="number">2D</span> <span class="number">75</span> <span class="number">61</span> <span class="number">2D</span>  .......<span class="string">&quot;24&quot;</span>..sec-ch-ua-</span><br><span class="line">......<span class="number">.6D</span> <span class="number">6F</span> <span class="number">62</span> <span class="number">69</span> 6C <span class="number">65</span> 3A <span class="number">20</span>  <span class="number">3F</span> <span class="number">30</span> <span class="number">0D</span> 0A <span class="number">73</span> <span class="number">65</span> <span class="number">63</span> <span class="number">2D</span>  .......mobile: ?<span class="number">0.</span>.sec-</span><br><span class="line">......<span class="number">.63</span> <span class="number">68</span> <span class="number">2D</span> <span class="number">75</span> <span class="number">61</span> <span class="number">2D</span> <span class="number">70</span> 6C  <span class="number">61</span> <span class="number">74</span> <span class="number">66</span> <span class="number">6F</span> <span class="number">72</span> <span class="number">6D</span> 3A <span class="number">20</span>  .......ch-ua-platform: </span><br><span class="line">......<span class="number">.22</span> <span class="number">57</span> <span class="number">69</span> 6E <span class="number">64</span> <span class="number">6F</span> <span class="number">77</span> <span class="number">73</span>  <span class="number">22</span> <span class="number">0D</span> 0A <span class="number">55</span> <span class="number">70</span> <span class="number">67</span> <span class="number">72</span> <span class="number">61</span>  .......<span class="string">&quot;Windows&quot;</span>..Upgra</span><br><span class="line">......<span class="number">.64</span> <span class="number">65</span> <span class="number">2D</span> <span class="number">49</span> 6E <span class="number">73</span> <span class="number">65</span> <span class="number">63</span>  <span class="number">75</span> <span class="number">72</span> <span class="number">65</span> <span class="number">2D</span> <span class="number">52</span> <span class="number">65</span> <span class="number">71</span> <span class="number">75</span>  .......de-Insecure-Requ</span><br><span class="line">......<span class="number">.65</span> <span class="number">73</span> <span class="number">74</span> <span class="number">73</span> 3A <span class="number">20</span> <span class="number">31</span> <span class="number">0D</span>  0A <span class="number">55</span> <span class="number">73</span> <span class="number">65</span> <span class="number">72</span> <span class="number">2D</span> <span class="number">41</span> <span class="number">67</span>  .......ests: <span class="number">1.</span>.User-Ag</span><br><span class="line">......<span class="number">.65</span> 6E <span class="number">74</span> 3A <span class="number">20</span> <span class="number">4D</span> <span class="number">6F</span> 7A  <span class="number">69</span> 6C 6C <span class="number">61</span> <span class="number">2F</span> <span class="number">35</span> 2E <span class="number">30</span>  .......ent: Mozilla/<span class="number">5.0</span></span><br><span class="line">......<span class="number">.20</span> <span class="number">28</span> <span class="number">57</span> <span class="number">69</span> 6E <span class="number">64</span> <span class="number">6F</span> <span class="number">77</span>  <span class="number">73</span> <span class="number">20</span> 4E <span class="number">54</span> <span class="number">20</span> <span class="number">31</span> <span class="number">30</span> 2E  ....... (Windows NT <span class="number">10.</span></span><br><span class="line">......<span class="number">.30</span> 3B <span class="number">20</span> <span class="number">57</span> <span class="number">69</span> 6E <span class="number">36</span> <span class="number">34</span>  3B <span class="number">20</span> <span class="number">78</span> <span class="number">36</span> <span class="number">34</span> <span class="number">29</span> <span class="number">20</span> <span class="number">41</span>  ......<span class="number">.0</span>; Win64; x64) A</span><br><span class="line">......<span class="number">.70</span> <span class="number">70</span> 6C <span class="number">65</span> <span class="number">57</span> <span class="number">65</span> <span class="number">62</span> 4B  <span class="number">69</span> <span class="number">74</span> <span class="number">2F</span> <span class="number">35</span> <span class="number">33</span> <span class="number">37</span> 2E <span class="number">33</span>  .......ppleWebKit/<span class="number">537.3</span></span><br><span class="line">......<span class="number">.36</span> <span class="number">20</span> <span class="number">28</span> 4B <span class="number">48</span> <span class="number">54</span> <span class="number">4D</span> 4C  2C <span class="number">20</span> 6C <span class="number">69</span> 6B <span class="number">65</span> <span class="number">20</span> <span class="number">47</span>  ......<span class="number">.6</span> (KHTML, like G</span><br><span class="line">......<span class="number">.65</span> <span class="number">63</span> 6B <span class="number">6F</span> <span class="number">29</span> <span class="number">20</span> <span class="number">43</span> <span class="number">68</span>  <span class="number">72</span> <span class="number">6F</span> <span class="number">6D</span> <span class="number">65</span> <span class="number">2F</span> <span class="number">31</span> <span class="number">31</span> <span class="number">33</span>  .......ecko) Chrome/<span class="number">113</span></span><br><span class="line">.......2E <span class="number">30</span> 2E <span class="number">30</span> 2E <span class="number">30</span> <span class="number">20</span> <span class="number">53</span>  <span class="number">61</span> <span class="number">66</span> <span class="number">61</span> <span class="number">72</span> <span class="number">69</span> <span class="number">2F</span> <span class="number">35</span> <span class="number">33</span>  .......<span class="number">.0</span><span class="number">.0</span><span class="number">.0</span> Safari/<span class="number">53</span></span><br><span class="line">......<span class="number">.37</span> 2E <span class="number">33</span> <span class="number">36</span> <span class="number">0D</span> 0A <span class="number">41</span> <span class="number">63</span>  <span class="number">63</span> <span class="number">65</span> <span class="number">70</span> <span class="number">74</span> 3A <span class="number">20</span> <span class="number">74</span> <span class="number">65</span>  ......<span class="number">.7</span><span class="number">.36</span>..Accept: te</span><br><span class="line">......<span class="number">.78</span> <span class="number">74</span> <span class="number">2F</span> <span class="number">68</span> <span class="number">74</span> <span class="number">6D</span> 6C 2C  <span class="number">61</span> <span class="number">70</span> <span class="number">70</span> 6C <span class="number">69</span> <span class="number">63</span> <span class="number">61</span> <span class="number">74</span>  .......xt/html,applicat</span><br><span class="line">......<span class="number">.69</span> <span class="number">6F</span> 6E <span class="number">2F</span> <span class="number">78</span> <span class="number">68</span> <span class="number">74</span> <span class="number">6D</span>  6C 2B <span class="number">78</span> <span class="number">6D</span> 6C 2C <span class="number">61</span> <span class="number">70</span>  .......ion/xhtml+xml,ap</span><br><span class="line">......<span class="number">.70</span> 6C <span class="number">69</span> <span class="number">63</span> <span class="number">61</span> <span class="number">74</span> <span class="number">69</span> <span class="number">6F</span>  6E <span class="number">2F</span> <span class="number">78</span> <span class="number">6D</span> 6C 3B <span class="number">71</span> <span class="number">3D</span>  .......plication/xml;q=</span><br><span class="line">......<span class="number">.30</span> 2E <span class="number">39</span> 2C <span class="number">69</span> <span class="number">6D</span> <span class="number">61</span> <span class="number">67</span>  <span class="number">65</span> <span class="number">2F</span> <span class="number">61</span> <span class="number">76</span> <span class="number">69</span> <span class="number">66</span> 2C <span class="number">69</span>  ......<span class="number">.0</span><span class="number">.9</span>,image/avif,i</span><br><span class="line">......<span class="number">.6D</span> <span class="number">61</span> <span class="number">67</span> <span class="number">65</span> <span class="number">2F</span> <span class="number">77</span> <span class="number">65</span> <span class="number">62</span>  <span class="number">70</span> 2C <span class="number">69</span> <span class="number">6D</span> <span class="number">61</span> <span class="number">67</span> <span class="number">65</span> <span class="number">2F</span>  .......mage/webp,image/</span><br><span class="line">......<span class="number">.61</span> <span class="number">70</span> 6E <span class="number">67</span> 2C 2A <span class="number">2F</span> 2A  3B <span class="number">71</span> <span class="number">3D</span> <span class="number">30</span> 2E <span class="number">38</span> 2C <span class="number">61</span>  .......apng,*`/`*;q=<span class="number">0.8</span>,a</span><br><span class="line">......<span class="number">.70</span> <span class="number">70</span> 6C <span class="number">69</span> <span class="number">63</span> <span class="number">61</span> <span class="number">74</span> <span class="number">69</span>  <span class="number">6F</span> 6E <span class="number">2F</span> <span class="number">73</span> <span class="number">69</span> <span class="number">67</span> 6E <span class="number">65</span>  .......pplication/signe</span><br><span class="line">......<span class="number">.64</span> <span class="number">2D</span> <span class="number">65</span> <span class="number">78</span> <span class="number">63</span> <span class="number">68</span> <span class="number">61</span> 6E  <span class="number">67</span> <span class="number">65</span> 3B <span class="number">76</span> <span class="number">3D</span> <span class="number">62</span> <span class="number">33</span> 3B  .......d-exchange;v=b3;</span><br><span class="line">......<span class="number">.71</span> <span class="number">3D</span> <span class="number">30</span> 2E <span class="number">37</span> <span class="number">0D</span> 0A <span class="number">53</span>  <span class="number">65</span> <span class="number">63</span> <span class="number">2D</span> <span class="number">46</span> <span class="number">65</span> <span class="number">74</span> <span class="number">63</span> <span class="number">68</span>  .......q=<span class="number">0.7</span>..Sec-Fetch</span><br><span class="line">......<span class="number">.2D</span> <span class="number">53</span> <span class="number">69</span> <span class="number">74</span> <span class="number">65</span> 3A <span class="number">20</span> 6E  <span class="number">6F</span> 6E <span class="number">65</span> <span class="number">0D</span> 0A <span class="number">53</span> <span class="number">65</span> <span class="number">63</span>  .......-Site: none..Sec</span><br><span class="line">......<span class="number">.2D</span> <span class="number">46</span> <span class="number">65</span> <span class="number">74</span> <span class="number">63</span> <span class="number">68</span> <span class="number">2D</span> <span class="number">4D</span>  <span class="number">6F</span> <span class="number">64</span> <span class="number">65</span> 3A <span class="number">20</span> 6E <span class="number">61</span> <span class="number">76</span>  .......-Fetch-Mode: nav</span><br><span class="line">......<span class="number">.69</span> <span class="number">67</span> <span class="number">61</span> <span class="number">74</span> <span class="number">65</span> <span class="number">0D</span> 0A <span class="number">53</span>  <span class="number">65</span> <span class="number">63</span> <span class="number">2D</span> <span class="number">46</span> <span class="number">65</span> <span class="number">74</span> <span class="number">63</span> <span class="number">68</span>  .......igate..Sec-Fetch</span><br><span class="line">......<span class="number">.2D</span> <span class="number">55</span> <span class="number">73</span> <span class="number">65</span> <span class="number">72</span> 3A <span class="number">20</span> <span class="number">3F</span>  <span class="number">31</span> <span class="number">0D</span> 0A <span class="number">53</span> <span class="number">65</span> <span class="number">63</span> <span class="number">2D</span> <span class="number">46</span>  .......-User: ?<span class="number">1.</span>.Sec-F</span><br><span class="line">......<span class="number">.65</span> <span class="number">74</span> <span class="number">63</span> <span class="number">68</span> <span class="number">2D</span> <span class="number">44</span> <span class="number">65</span> <span class="number">73</span>  <span class="number">74</span> 3A <span class="number">20</span> <span class="number">64</span> <span class="number">6F</span> <span class="number">63</span> <span class="number">75</span> <span class="number">6D</span>  .......etch-Dest: docum</span><br><span class="line">......<span class="number">.65</span> 6E <span class="number">74</span> <span class="number">0D</span> 0A <span class="number">41</span> <span class="number">63</span> <span class="number">63</span>  <span class="number">65</span> <span class="number">70</span> <span class="number">74</span> <span class="number">2D</span> <span class="number">45</span> 6E <span class="number">63</span> <span class="number">6F</span>  .......ent..Accept-Enco</span><br><span class="line">......<span class="number">.64</span> <span class="number">69</span> 6E <span class="number">67</span> 3A <span class="number">20</span> <span class="number">67</span> 7A  <span class="number">69</span> <span class="number">70</span> 2C <span class="number">20</span> <span class="number">64</span> <span class="number">65</span> <span class="number">66</span> 6C  .......ding: gzip, defl</span><br><span class="line">......<span class="number">.61</span> <span class="number">74</span> <span class="number">65</span> 2C <span class="number">20</span> <span class="number">62</span> <span class="number">72</span> <span class="number">0D</span>  0A <span class="number">41</span> <span class="number">63</span> <span class="number">63</span> <span class="number">65</span> <span class="number">70</span> <span class="number">74</span> <span class="number">2D</span>  .......ate, br..Accept-</span><br><span class="line">.......4C <span class="number">61</span> 6E <span class="number">67</span> <span class="number">75</span> <span class="number">61</span> <span class="number">67</span> <span class="number">65</span>  3A <span class="number">20</span> <span class="number">65</span> 6E <span class="number">2D</span> <span class="number">55</span> <span class="number">53</span> 2C  .......Language: en-US,</span><br><span class="line">......<span class="number">.65</span> 6E 3B <span class="number">71</span> <span class="number">3D</span> <span class="number">30</span> 2E <span class="number">39</span>  2C 7A <span class="number">68</span> <span class="number">2D</span> <span class="number">43</span> 4E 3B <span class="number">71</span>  .......en;q=<span class="number">0.9</span>,zh-CN;q</span><br><span class="line">......<span class="number">.3D</span> <span class="number">30</span> 2E <span class="number">38</span> 2C 7A <span class="number">68</span> 3B  <span class="number">71</span> <span class="number">3D</span> <span class="number">30</span> 2E <span class="number">37</span> <span class="number">0D</span> 0A <span class="number">43</span>  .......=<span class="number">0.8</span>,zh;q=<span class="number">0.7</span>..C</span><br><span class="line">......<span class="number">.6F</span> <span class="number">6F</span> 6B <span class="number">69</span> <span class="number">65</span> 3A <span class="number">20</span> <span class="number">49</span>  <span class="number">64</span> <span class="number">65</span> <span class="number">61</span> <span class="number">2D</span> <span class="number">38</span> <span class="number">32</span> <span class="number">39</span> <span class="number">36</span>  .......ookie: Idea-<span class="number">8296</span></span><br><span class="line">......<span class="number">.65</span> <span class="number">62</span> <span class="number">33</span> <span class="number">31</span> <span class="number">3D</span> <span class="number">31</span> <span class="number">36</span> <span class="number">63</span>  <span class="number">35</span> <span class="number">64</span> <span class="number">63</span> <span class="number">30</span> <span class="number">37</span> <span class="number">2D</span> <span class="number">36</span> <span class="number">31</span>  .......eb31=16c5dc07-<span class="number">61</span></span><br><span class="line">......<span class="number">.35</span> <span class="number">35</span> <span class="number">2D</span> <span class="number">34</span> <span class="number">31</span> <span class="number">33</span> <span class="number">64</span> <span class="number">2D</span>  <span class="number">62</span> <span class="number">33</span> <span class="number">30</span> <span class="number">38</span> <span class="number">2D</span> <span class="number">39</span> <span class="number">30</span> <span class="number">66</span>  ......<span class="number">.55</span>-<span class="number">413d</span>-b308-<span class="number">90f</span></span><br><span class="line">......<span class="number">.35</span> <span class="number">63</span> <span class="number">38</span> <span class="number">66</span> <span class="number">62</span> <span class="number">35</span> <span class="number">35</span> <span class="number">66</span>  <span class="number">65</span> <span class="number">0D</span> 0A <span class="number">0D</span> 0A   .......5c8fb55fe....</span><br><span class="line"></span><br><span class="line">读取到的字节数是: <span class="number">765</span></span><br><span class="line">GET / HTTP/<span class="number">1.1</span></span><br><span class="line">Host: localhost:<span class="number">8080</span></span><br><span class="line">Connection: keep-alive</span><br><span class="line">Cache-Control: max-age=<span class="number">0</span></span><br><span class="line">sec-ch-ua: <span class="string">&quot;Google Chrome&quot;</span>;v=<span class="string">&quot;113&quot;</span>, <span class="string">&quot;Chromium&quot;</span>;v=<span class="string">&quot;113&quot;</span>, <span class="string">&quot;Not-A.Brand&quot;</span>;v=<span class="string">&quot;24&quot;</span></span><br><span class="line">sec-ch-ua-mobile: ?<span class="number">0</span></span><br><span class="line">sec-ch-ua-platform: <span class="string">&quot;Windows&quot;</span></span><br><span class="line">Upgrade-Insecure-Requests: <span class="number">1</span></span><br><span class="line">User-Agent: Mozilla/<span class="number">5.0</span> (Windows NT <span class="number">10.0</span>; Win64; x64) AppleWebKit/<span class="number">537.36</span> (KHTML, like Gecko) Chrome/<span class="number">113.0</span><span class="number">.0</span><span class="number">.0</span> Safari/<span class="number">537.36</span></span><br><span class="line">Accept: text/html,application/xhtml+xml,application/xml;q=<span class="number">0.9</span>,image/avif,image/webp,image/apng,*`/`*;q=<span class="number">0.8</span>,application/signed-exchange;v=b3;q=<span class="number">0.7</span></span><br><span class="line">Sec-Fetch-Site: none</span><br><span class="line">Sec-Fetch-Mode: navigate</span><br><span class="line">Sec-Fetch-User: ?<span class="number">1</span></span><br><span class="line">Sec-Fetch-Dest: document</span><br><span class="line">Accept-Encoding: gzip, deflate, br</span><br><span class="line">Accept-Language: en-US,en;q=<span class="number">0.9</span>,zh-CN;q=<span class="number">0.8</span>,zh;q=<span class="number">0.7</span></span><br><span class="line">Cookie: Idea-8296eb31=16c5dc07-<span class="number">6155</span>-<span class="number">413d</span>-b308-90f5c8fb55fe</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">......<span class="number">.47</span> <span class="number">45</span> <span class="number">54</span> <span class="number">20</span> <span class="number">2F</span> <span class="number">66</span> <span class="number">61</span> <span class="number">76</span>  <span class="number">69</span> <span class="number">63</span> <span class="number">6F</span> 6E 2E <span class="number">69</span> <span class="number">63</span> <span class="number">6F</span>  .......GET /favicon.ico</span><br><span class="line">......<span class="number">.20</span> <span class="number">48</span> <span class="number">54</span> <span class="number">54</span> <span class="number">50</span> <span class="number">2F</span> <span class="number">31</span> 2E  <span class="number">31</span> <span class="number">0D</span> 0A <span class="number">48</span> <span class="number">6F</span> <span class="number">73</span> <span class="number">74</span> 3A  ....... HTTP/<span class="number">1.1</span>..Host:</span><br><span class="line">......<span class="number">.20</span> 6C <span class="number">6F</span> <span class="number">63</span> <span class="number">61</span> 6C <span class="number">68</span> <span class="number">6F</span>  <span class="number">73</span> <span class="number">74</span> 3A <span class="number">38</span> <span class="number">30</span> <span class="number">38</span> <span class="number">30</span> <span class="number">0D</span>  ....... localhost:<span class="number">8080.</span></span><br><span class="line">.......0A <span class="number">43</span> <span class="number">6F</span> 6E 6E <span class="number">65</span> <span class="number">63</span> <span class="number">74</span>  <span class="number">69</span> <span class="number">6F</span> 6E 3A <span class="number">20</span> 6B <span class="number">65</span> <span class="number">65</span>  ........Connection: kee</span><br><span class="line">......<span class="number">.70</span> <span class="number">2D</span> <span class="number">61</span> 6C <span class="number">69</span> <span class="number">76</span> <span class="number">65</span> <span class="number">0D</span>  0A <span class="number">73</span> <span class="number">65</span> <span class="number">63</span> <span class="number">2D</span> <span class="number">63</span> <span class="number">68</span> <span class="number">2D</span>  .......p-alive..sec-ch-</span><br><span class="line">......<span class="number">.75</span> <span class="number">61</span> 3A <span class="number">20</span> <span class="number">22</span> <span class="number">47</span> <span class="number">6F</span> <span class="number">6F</span>  <span class="number">67</span> 6C <span class="number">65</span> <span class="number">20</span> <span class="number">43</span> <span class="number">68</span> <span class="number">72</span> <span class="number">6F</span>  .......ua: <span class="string">&quot;Google Chro</span></span><br><span class="line"><span class="string">.......6D 65 22 3B 76 3D 22 31  31 33 22 2C 20 22 43 68  .......me&quot;</span>;v=<span class="string">&quot;113&quot;</span>, <span class="string">&quot;Ch</span></span><br><span class="line"><span class="string">.......72 6F 6D 69 75 6D 22 3B  76 3D 22 31 31 33 22 2C  .......romium&quot;</span>;v=<span class="string">&quot;113&quot;</span>,</span><br><span class="line">......<span class="number">.20</span> <span class="number">22</span> 4E <span class="number">6F</span> <span class="number">74</span> <span class="number">2D</span> <span class="number">41</span> 2E  <span class="number">42</span> <span class="number">72</span> <span class="number">61</span> 6E <span class="number">64</span> <span class="number">22</span> 3B <span class="number">76</span>  ....... <span class="string">&quot;Not-A.Brand&quot;</span>;v</span><br><span class="line">......<span class="number">.3D</span> <span class="number">22</span> <span class="number">32</span> <span class="number">34</span> <span class="number">22</span> <span class="number">0D</span> 0A <span class="number">73</span>  <span class="number">65</span> <span class="number">63</span> <span class="number">2D</span> <span class="number">63</span> <span class="number">68</span> <span class="number">2D</span> <span class="number">75</span> <span class="number">61</span>  .......=<span class="string">&quot;24&quot;</span>..sec-ch-ua</span><br><span class="line">......<span class="number">.2D</span> <span class="number">6D</span> <span class="number">6F</span> <span class="number">62</span> <span class="number">69</span> 6C <span class="number">65</span> 3A  <span class="number">20</span> <span class="number">3F</span> <span class="number">30</span> <span class="number">0D</span> 0A <span class="number">55</span> <span class="number">73</span> <span class="number">65</span>  .......-mobile: ?<span class="number">0.</span>.Use</span><br><span class="line">......<span class="number">.72</span> <span class="number">2D</span> <span class="number">41</span> <span class="number">67</span> <span class="number">65</span> 6E <span class="number">74</span> 3A  <span class="number">20</span> <span class="number">4D</span> <span class="number">6F</span> 7A <span class="number">69</span> 6C 6C <span class="number">61</span>  .......r-Agent: Mozilla</span><br><span class="line">......<span class="number">.2F</span> <span class="number">35</span> 2E <span class="number">30</span> <span class="number">20</span> <span class="number">28</span> <span class="number">57</span> <span class="number">69</span>  6E <span class="number">64</span> <span class="number">6F</span> <span class="number">77</span> <span class="number">73</span> <span class="number">20</span> 4E <span class="number">54</span>  ......./<span class="number">5.0</span> (Windows NT</span><br><span class="line">......<span class="number">.20</span> <span class="number">31</span> <span class="number">30</span> 2E <span class="number">30</span> 3B <span class="number">20</span> <span class="number">57</span>  <span class="number">69</span> 6E <span class="number">36</span> <span class="number">34</span> 3B <span class="number">20</span> <span class="number">78</span> <span class="number">36</span>  ....... <span class="number">10.0</span>; Win64; x6</span><br><span class="line">......<span class="number">.34</span> <span class="number">29</span> <span class="number">20</span> <span class="number">41</span> <span class="number">70</span> <span class="number">70</span> 6C <span class="number">65</span>  <span class="number">57</span> <span class="number">65</span> <span class="number">62</span> 4B <span class="number">69</span> <span class="number">74</span> <span class="number">2F</span> <span class="number">35</span>  ......<span class="number">.4</span>) AppleWebKit/<span class="number">5</span></span><br><span class="line">......<span class="number">.33</span> <span class="number">37</span> 2E <span class="number">33</span> <span class="number">36</span> <span class="number">20</span> <span class="number">28</span> 4B  <span class="number">48</span> <span class="number">54</span> <span class="number">4D</span> 4C 2C <span class="number">20</span> 6C <span class="number">69</span>  ......<span class="number">.37</span><span class="number">.36</span> (KHTML, li</span><br><span class="line">.......6B <span class="number">65</span> <span class="number">20</span> <span class="number">47</span> <span class="number">65</span> <span class="number">63</span> 6B <span class="number">6F</span>  <span class="number">29</span> <span class="number">20</span> <span class="number">43</span> <span class="number">68</span> <span class="number">72</span> <span class="number">6F</span> <span class="number">6D</span> <span class="number">65</span>  .......ke Gecko) Chrome</span><br><span class="line">......<span class="number">.2F</span> <span class="number">31</span> <span class="number">31</span> <span class="number">33</span> 2E <span class="number">30</span> 2E <span class="number">30</span>  2E <span class="number">30</span> <span class="number">20</span> <span class="number">53</span> <span class="number">61</span> <span class="number">66</span> <span class="number">61</span> <span class="number">72</span>  ......./<span class="number">113.0</span><span class="number">.0</span><span class="number">.0</span> Safar</span><br><span class="line">......<span class="number">.69</span> <span class="number">2F</span> <span class="number">35</span> <span class="number">33</span> <span class="number">37</span> 2E <span class="number">33</span> <span class="number">36</span>  <span class="number">0D</span> 0A <span class="number">73</span> <span class="number">65</span> <span class="number">63</span> <span class="number">2D</span> <span class="number">63</span> <span class="number">68</span>  .......i/<span class="number">537.36</span>..sec-ch</span><br><span class="line">......<span class="number">.2D</span> <span class="number">75</span> <span class="number">61</span> <span class="number">2D</span> <span class="number">70</span> 6C <span class="number">61</span> <span class="number">74</span>  <span class="number">66</span> <span class="number">6F</span> <span class="number">72</span> <span class="number">6D</span> 3A <span class="number">20</span> <span class="number">22</span> <span class="number">57</span>  .......-ua-platform: <span class="string">&quot;W</span></span><br><span class="line"><span class="string">.......69 6E 64 6F 77 73 22 0D  0A 41 63 63 65 70 74 3A  .......indows&quot;</span>..Accept:</span><br><span class="line">......<span class="number">.20</span> <span class="number">69</span> <span class="number">6D</span> <span class="number">61</span> <span class="number">67</span> <span class="number">65</span> <span class="number">2F</span> <span class="number">61</span>  <span class="number">76</span> <span class="number">69</span> <span class="number">66</span> 2C <span class="number">69</span> <span class="number">6D</span> <span class="number">61</span> <span class="number">67</span>  ....... image/avif,imag</span><br><span class="line">......<span class="number">.65</span> <span class="number">2F</span> <span class="number">77</span> <span class="number">65</span> <span class="number">62</span> <span class="number">70</span> 2C <span class="number">69</span>  <span class="number">6D</span> <span class="number">61</span> <span class="number">67</span> <span class="number">65</span> <span class="number">2F</span> <span class="number">61</span> <span class="number">70</span> 6E  .......e/webp,image/apn</span><br><span class="line">......<span class="number">.67</span> 2C <span class="number">69</span> <span class="number">6D</span> <span class="number">61</span> <span class="number">67</span> <span class="number">65</span> <span class="number">2F</span>  <span class="number">73</span> <span class="number">76</span> <span class="number">67</span> 2B <span class="number">78</span> <span class="number">6D</span> 6C 2C  .......g,image/svg+xml,</span><br><span class="line">......<span class="number">.69</span> <span class="number">6D</span> <span class="number">61</span> <span class="number">67</span> <span class="number">65</span> <span class="number">2F</span> 2A 2C  2A <span class="number">2F</span> 2A 3B <span class="number">71</span> <span class="number">3D</span> <span class="number">30</span> 2E  .......image<span class="comment">/*,*/</span>*;q=<span class="number">0.</span></span><br><span class="line">......<span class="number">.38</span> <span class="number">0D</span> 0A <span class="number">53</span> <span class="number">65</span> <span class="number">63</span> <span class="number">2D</span> <span class="number">46</span>  <span class="number">65</span> <span class="number">74</span> <span class="number">63</span> <span class="number">68</span> <span class="number">2D</span> <span class="number">53</span> <span class="number">69</span> <span class="number">74</span>  ......<span class="number">.8</span>..Sec-Fetch-Sit</span><br><span class="line">......<span class="number">.65</span> 3A <span class="number">20</span> <span class="number">73</span> <span class="number">61</span> <span class="number">6D</span> <span class="number">65</span> <span class="number">2D</span>  <span class="number">6F</span> <span class="number">72</span> <span class="number">69</span> <span class="number">67</span> <span class="number">69</span> 6E <span class="number">0D</span> 0A  .......e: same-origin..</span><br><span class="line">......<span class="number">.53</span> <span class="number">65</span> <span class="number">63</span> <span class="number">2D</span> <span class="number">46</span> <span class="number">65</span> <span class="number">74</span> <span class="number">63</span>  <span class="number">68</span> <span class="number">2D</span> <span class="number">4D</span> <span class="number">6F</span> <span class="number">64</span> <span class="number">65</span> 3A <span class="number">20</span>  .......Sec-Fetch-Mode: </span><br><span class="line">.......6E <span class="number">6F</span> <span class="number">2D</span> <span class="number">63</span> <span class="number">6F</span> <span class="number">72</span> <span class="number">73</span> <span class="number">0D</span>  0A <span class="number">53</span> <span class="number">65</span> <span class="number">63</span> <span class="number">2D</span> <span class="number">46</span> <span class="number">65</span> <span class="number">74</span>  .......no-cors..Sec-Fet</span><br><span class="line">......<span class="number">.63</span> <span class="number">68</span> <span class="number">2D</span> <span class="number">44</span> <span class="number">65</span> <span class="number">73</span> <span class="number">74</span> 3A  <span class="number">20</span> <span class="number">69</span> <span class="number">6D</span> <span class="number">61</span> <span class="number">67</span> <span class="number">65</span> <span class="number">0D</span> 0A  .......ch-Dest: image..</span><br><span class="line">......<span class="number">.52</span> <span class="number">65</span> <span class="number">66</span> <span class="number">65</span> <span class="number">72</span> <span class="number">65</span> <span class="number">72</span> 3A  <span class="number">20</span> <span class="number">68</span> <span class="number">74</span> <span class="number">74</span> <span class="number">70</span> 3A <span class="number">2F</span> <span class="number">2F</span>  .......Referer: http:<span class="comment">//</span></span><br><span class="line">.......6C <span class="number">6F</span> <span class="number">63</span> <span class="number">61</span> 6C <span class="number">68</span> <span class="number">6F</span> <span class="number">73</span>  <span class="number">74</span> 3A <span class="number">38</span> <span class="number">30</span> <span class="number">38</span> <span class="number">30</span> <span class="number">2F</span> <span class="number">0D</span>  .......localhost:<span class="number">8080</span>/.</span><br><span class="line">.......0A <span class="number">41</span> <span class="number">63</span> <span class="number">63</span> <span class="number">65</span> <span class="number">70</span> <span class="number">74</span> <span class="number">2D</span>  <span class="number">45</span> 6E <span class="number">63</span> <span class="number">6F</span> <span class="number">64</span> <span class="number">69</span> 6E <span class="number">67</span>  ........Accept-Encoding</span><br><span class="line">.......3A <span class="number">20</span> <span class="number">67</span> 7A <span class="number">69</span> <span class="number">70</span> 2C <span class="number">20</span>  <span class="number">64</span> <span class="number">65</span> <span class="number">66</span> 6C <span class="number">61</span> <span class="number">74</span> <span class="number">65</span> 2C  .......: gzip, deflate,</span><br><span class="line">......<span class="number">.20</span> <span class="number">62</span> <span class="number">72</span> <span class="number">0D</span> 0A <span class="number">41</span> <span class="number">63</span> <span class="number">63</span>  <span class="number">65</span> <span class="number">70</span> <span class="number">74</span> <span class="number">2D</span> 4C <span class="number">61</span> 6E <span class="number">67</span>  ....... br..Accept-Lang</span><br><span class="line">......<span class="number">.75</span> <span class="number">61</span> <span class="number">67</span> <span class="number">65</span> 3A <span class="number">20</span> <span class="number">65</span> 6E  <span class="number">2D</span> <span class="number">55</span> <span class="number">53</span> 2C <span class="number">65</span> 6E 3B <span class="number">71</span>  .......uage: en-US,en;q</span><br><span class="line">......<span class="number">.3D</span> <span class="number">30</span> 2E <span class="number">39</span> 2C 7A <span class="number">68</span> <span class="number">2D</span>  <span class="number">43</span> 4E 3B <span class="number">71</span> <span class="number">3D</span> <span class="number">30</span> 2E <span class="number">38</span>  .......=<span class="number">0.9</span>,zh-CN;q=<span class="number">0.8</span></span><br><span class="line">.......2C 7A <span class="number">68</span> 3B <span class="number">71</span> <span class="number">3D</span> <span class="number">30</span> 2E  <span class="number">37</span> <span class="number">0D</span> 0A <span class="number">43</span> <span class="number">6F</span> <span class="number">6F</span> 6B <span class="number">69</span>  .......,zh;q=<span class="number">0.7</span>..Cooki</span><br><span class="line">......<span class="number">.65</span> 3A <span class="number">20</span> <span class="number">49</span> <span class="number">64</span> <span class="number">65</span> <span class="number">61</span> <span class="number">2D</span>  <span class="number">38</span> <span class="number">32</span> <span class="number">39</span> <span class="number">36</span> <span class="number">65</span> <span class="number">62</span> <span class="number">33</span> <span class="number">31</span>  .......e: Idea-8296eb31</span><br><span class="line">......<span class="number">.3D</span> <span class="number">31</span> <span class="number">36</span> <span class="number">63</span> <span class="number">35</span> <span class="number">64</span> <span class="number">63</span> <span class="number">30</span>  <span class="number">37</span> <span class="number">2D</span> <span class="number">36</span> <span class="number">31</span> <span class="number">35</span> <span class="number">35</span> <span class="number">2D</span> <span class="number">34</span>  .......=16c5dc07-<span class="number">6155</span>-<span class="number">4</span></span><br><span class="line">......<span class="number">.31</span> <span class="number">33</span> <span class="number">64</span> <span class="number">2D</span> <span class="number">62</span> <span class="number">33</span> <span class="number">30</span> <span class="number">38</span>  <span class="number">2D</span> <span class="number">39</span> <span class="number">30</span> <span class="number">66</span> <span class="number">35</span> <span class="number">63</span> <span class="number">38</span> <span class="number">66</span>  ......<span class="number">.13d</span>-b308-90f5c8f</span><br><span class="line">......<span class="number">.62</span> <span class="number">35</span> <span class="number">35</span> <span class="number">66</span> <span class="number">65</span> <span class="number">0D</span> 0A <span class="number">0D</span>  0A   .......b55fe....</span><br><span class="line"></span><br><span class="line">读取到的字节数是: <span class="number">665</span></span><br><span class="line">GET /favicon.ico HTTP/<span class="number">1.1</span></span><br><span class="line">Host: localhost:<span class="number">8080</span></span><br><span class="line">Connection: keep-alive</span><br><span class="line">sec-ch-ua: <span class="string">&quot;Google Chrome&quot;</span>;v=<span class="string">&quot;113&quot;</span>, <span class="string">&quot;Chromium&quot;</span>;v=<span class="string">&quot;113&quot;</span>, <span class="string">&quot;Not-A.Brand&quot;</span>;v=<span class="string">&quot;24&quot;</span></span><br><span class="line">sec-ch-ua-mobile: ?<span class="number">0</span></span><br><span class="line">User-Agent: Mozilla/<span class="number">5.0</span> (Windows NT <span class="number">10.0</span>; Win64; x64) AppleWebKit/<span class="number">537.36</span> (KHTML, like Gecko) Chrome/<span class="number">113.0</span><span class="number">.0</span><span class="number">.0</span> Safari/<span class="number">537.36</span></span><br><span class="line">sec-ch-ua-platform: <span class="string">&quot;Windows&quot;</span></span><br><span class="line">Accept: image/avif,image/webp,image/apng,image/svg+xml,image<span class="comment">/*,*/</span>*;q=<span class="number">0.8</span></span><br><span class="line">Sec-Fetch-Site: same-origin</span><br><span class="line">Sec-Fetch-Mode: no-cors</span><br><span class="line">Sec-Fetch-Dest: image</span><br><span class="line">Referer: http:<span class="comment">//localhost:8080/</span></span><br><span class="line">Accept-Encoding: gzip, deflate, br</span><br><span class="line">Accept-Language: en-US,en;q=<span class="number">0.9</span>,zh-CN;q=<span class="number">0.8</span>,zh;q=<span class="number">0.7</span></span><br><span class="line">Cookie: Idea-8296eb31=16c5dc07-<span class="number">6155</span>-<span class="number">413d</span>-b308-90f5c8fb55fe</span><br></pre></td></tr></table></figure>
<h2 id="回显主页和favicon"><a class="markdownIt-Anchor" href="#回显主页和favicon">#</a> 回显主页和 favicon🍨</h2>
<p>主页在项目结构中创建一个 index.html 文件和 icon 图标文件，在程序中读取并解析</p>
<p><font style="color:red">index，favicon，long.gif 是在项目的根目录下不是在 src 下</font>.</p>
<p><img data-src="./images/image-20230519171735050.png" alt="image-20230519171735050"></p>
<p>创建封装请求的类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 把请求的字符串封装成请求的类</span></span><br><span class="line"><span class="comment"> * 请求的类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Request</span> &#123;</span><br><span class="line"><span class="comment">//    请求方式</span></span><br><span class="line">    <span class="keyword">private</span> String method;</span><br><span class="line"><span class="comment">//    请求的url</span></span><br><span class="line">    <span class="keyword">private</span> String uri;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getMethod</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> method;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setMethod</span><span class="params">(String method)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.method = method;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getUri</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> uri;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUri</span><span class="params">(String uri)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.uri = uri;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>HttpServer 类中定义解析请求方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * 解析请求</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@param</span> msg</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> Request <span class="title function_">parseRequest</span><span class="params">(String msg)</span>&#123;</span><br><span class="line">   <span class="type">Request</span> <span class="variable">request</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Request</span>();</span><br><span class="line">   String[] split = msg.split(<span class="string">&quot;\r\n&quot;</span>);</span><br><span class="line">   <span class="comment">//解析第一行</span></span><br><span class="line">   <span class="comment">//GET /favicon.ico HTTP/1.1</span></span><br><span class="line">   String[] split0 = split[<span class="number">0</span>].split(<span class="string">&quot; &quot;</span>);</span><br><span class="line">   request.setMethod(split0[<span class="number">0</span>]);<span class="comment">//method: GET</span></span><br><span class="line">   request.setUri(split0[<span class="number">1</span>]);<span class="comment">//uri: / 或者 /favicon.ico</span></span><br><span class="line">   <span class="keyword">return</span> request;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>main</strong>:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String... args)</span> &#123;</span><br><span class="line">   <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="type">ServerSocket</span> <span class="variable">serverSocket</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ServerSocket</span>(<span class="number">8080</span>);</span><br><span class="line">      System.out.println(<span class="string">&quot;服务器已经启动，监听端口为：8080 ...&quot;</span>);</span><br><span class="line">      <span class="type">ExecutorService</span> <span class="variable">executorService</span> <span class="operator">=</span> Executors.newCachedThreadPool();</span><br><span class="line">      <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">         <span class="type">Socket</span> <span class="variable">socket</span> <span class="operator">=</span> serverSocket.accept();</span><br><span class="line">         executorService.execute(() -&gt; &#123;</span><br><span class="line">            <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">            <span class="type">OutputStream</span> <span class="variable">os</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">               System.out.println(socket);</span><br><span class="line">               is = socket.getInputStream();</span><br><span class="line">               os = socket.getOutputStream();</span><br><span class="line">               <span class="type">byte</span>[] by = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span> * <span class="number">1024</span>];</span><br><span class="line">               <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> is.read(by);</span><br><span class="line">               <span class="keyword">if</span> (len != -<span class="number">1</span>) &#123;</span><br><span class="line">                  <span class="type">String</span> <span class="variable">hexMsg</span> <span class="operator">=</span> bytesArr2HexStr(by,len);</span><br><span class="line">                  System.out.println(hexMsg);</span><br><span class="line">                  System.out.println(<span class="string">&quot;读取到的字节数是: &quot;</span> + len);</span><br><span class="line">                  <span class="type">String</span> <span class="variable">msg</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(by, <span class="number">0</span>, len);</span><br><span class="line">                  System.out.println(msg);</span><br><span class="line">                  <span class="type">Request</span> <span class="variable">request</span> <span class="operator">=</span> parseRequest(msg);</span><br><span class="line">                  <span class="comment">//响应给浏览器需要使用Http协议</span></span><br><span class="line">                  <span class="type">String</span> <span class="variable">body</span> <span class="operator">=</span> <span class="string">&quot;&lt;h1&gt;&quot;</span> + count + <span class="string">&quot;&lt;/h1&gt;&quot;</span>+<span class="string">&quot;\r\n&quot;</span>+<span class="string">&quot;text/plain : plain plain text does not parse html tags&quot;</span>;</span><br><span class="line">                  <span class="comment">//http协议/版本 状态码  状态 后面的格式必须是\r\n不能乱写否则报错</span></span><br><span class="line">                  <span class="type">String</span> <span class="variable">response</span> <span class="operator">=</span> <span class="string">&quot;HTTP/1.1 200 OK\r\n&quot;</span> +<span class="comment">//HTTP1.1协议 状态码:200 正确 回车换行</span></span><br><span class="line">                     <span class="comment">//告诉浏览器文本的内容大小</span></span><br><span class="line">                     <span class="string">&quot;Content-Length: &quot;</span> + body.getBytes().length + <span class="string">&quot;\r\n&quot;</span> +</span><br><span class="line">                     <span class="comment">//告诉浏览器文本类型: 普通文本/plain 不解析html标签代码 设置字符集</span></span><br><span class="line">                     <span class="string">&quot;Content-Type: text/plain; charset-utf-8\r\n&quot;</span> +<span class="comment">//内容类型是普通文本 回车换行 字符集</span></span><br><span class="line">                     <span class="comment">//固定写法,必须要写的空格换行(必须要写一个空行)</span></span><br><span class="line">                     <span class="string">&quot;\r\n&quot;</span> +<span class="comment">//回车换行,否则后面的数据接收不到</span></span><br><span class="line">                     <span class="comment">//body响应浏览器内容</span></span><br><span class="line">                     <span class="comment">//要返回给浏览器的文本正文(内容)</span></span><br><span class="line">                     body + <span class="string">&quot;\r\n&quot;</span>;<span class="comment">//回车换行,否则后面的数据接收不到</span></span><br><span class="line">                  <span class="type">String</span> <span class="variable">file</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">                  <span class="comment">//判断1：读取index.html文件</span></span><br><span class="line">                  <span class="comment">//判断2：读取/favicon.icon图标文件</span></span><br><span class="line">                  <span class="comment">//判断请求路径是否带有index.html，有则执行</span></span><br><span class="line">                  <span class="comment">//请求并不是一次全部请求资源而是一个一个请求所以使用if else if先判断index.html然后favicon.icon再然后long.gif(图片)</span></span><br><span class="line">                  <span class="keyword">if</span>(<span class="comment">/*request.getUri().equals(&quot;/&quot;) || */</span>request.getUri().equals(<span class="string">&quot;/index.html&quot;</span>))&#123;</span><br><span class="line">                     <span class="comment">//获取请求的uri并截取丢弃前面的 / </span></span><br><span class="line">                     file = request.getUri().substring(<span class="number">1</span>);</span><br><span class="line">                    <span class="comment">/**</span></span><br><span class="line"><span class="comment">                     * 如果读取index文件则重新赋值response变量将里面的body内容去掉还有读取大小也没必须设置了</span></span><br><span class="line"><span class="comment">                     * 必须设置HTTP协议信息</span></span><br><span class="line"><span class="comment">                     */</span></span><br><span class="line">                     response = <span class="string">&quot;HTTP/1.1 200 OK\r\n&quot;</span> +<span class="comment">//HTTP1.1协议 状态码:200 正确 回车换行</span></span><br><span class="line">                        <span class="comment">//告诉浏览器文本类型: 文本/html 解析html标签代码</span></span><br><span class="line">                        <span class="string">&quot;Content-Type: text/html; charset-utf-8\r\n&quot;</span> +<span class="comment">//内容类型是普通文本 回车换行 字符集</span></span><br><span class="line">                        <span class="comment">//固定写法,必须要写的空格换行(必须要写一个空行)</span></span><br><span class="line">                        <span class="string">&quot;\r\n&quot;</span>;</span><br><span class="line">                     <span class="comment">//判断是否请求了favicon.ico，请求则执行</span></span><br><span class="line">                  &#125;<span class="keyword">else</span> <span class="keyword">if</span>(request.getUri().equals(<span class="string">&quot;/favicon.ico&quot;</span>))&#123;</span><br><span class="line">                     <span class="comment">//获取请求的uri并截取丢弃前面的 / </span></span><br><span class="line">                     file = request.getUri().substring(<span class="number">1</span>);</span><br><span class="line">                    <span class="comment">/**</span></span><br><span class="line"><span class="comment">                     * 如果读取index文件则重新赋值response变量将里面的body内容去掉还有读取大小也没必须设置了</span></span><br><span class="line"><span class="comment">                     * 必须设置HTTP协议信息</span></span><br><span class="line"><span class="comment">                     */</span></span><br><span class="line">                     response = <span class="string">&quot;HTTP/1.1 200 OK\r\n&quot;</span> +<span class="comment">//HTTP1.1协议 状态码:200 正确 回车换行</span></span><br><span class="line">                        <span class="comment">//告诉浏览器文本类型: 图片/x-icon 设置字符集</span></span><br><span class="line">                        <span class="string">&quot;Content-Type: image/x-icon; charset-utf-8\r\n&quot;</span> +<span class="comment">//内容类型是普通文本 回车换行 字符集</span></span><br><span class="line">                        <span class="comment">//固定写法,必须要写的空格换行(必须要写一个空行)</span></span><br><span class="line">                        <span class="string">&quot;\r\n&quot;</span>;</span><br><span class="line">                  &#125;</span><br><span class="line">                  <span class="comment">//将HTTP协议信息写出到浏览器中(响应回去)</span></span><br><span class="line">                  os.write(response.getBytes());</span><br><span class="line">                  <span class="comment">//判断如果file不为空，那么请求的就是index.html页面或者favicon.icon则执行方法体</span></span><br><span class="line">                  <span class="keyword">if</span>(file != <span class="literal">null</span>)&#123;</span><br><span class="line">                     <span class="comment">//文件输入流读取文件</span></span><br><span class="line">                     <span class="type">FileInputStream</span> <span class="variable">fis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(file);</span><br><span class="line">                     <span class="keyword">while</span>((len = fis.read(by)) != -<span class="number">1</span>)&#123;</span><br><span class="line">                        <span class="comment">//将读取到的页面字节数据写出到浏览器</span></span><br><span class="line">                        os.write(by,<span class="number">0</span>,len);</span><br><span class="line">                     &#125;</span><br><span class="line">                  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                     <span class="comment">//将上面的HTTP协议信息和响应的数据写出到浏览器中</span></span><br><span class="line">                     os.write(response.getBytes());</span><br><span class="line">                     count++;</span><br><span class="line">                  &#125;</span><br><span class="line">               &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                  System.out.println(<span class="string">&quot;没有读取到数据&quot;</span>);</span><br><span class="line">               &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">               e.printStackTrace();</span><br><span class="line">            &#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">               <span class="keyword">try</span>&#123;</span><br><span class="line">                  <span class="keyword">if</span>(os != <span class="literal">null</span>)&#123;</span><br><span class="line">                     os.flush();<span class="comment">//将数据刷出</span></span><br><span class="line">                  &#125;</span><br><span class="line">                  <span class="keyword">if</span>(socket != <span class="literal">null</span>)&#123;</span><br><span class="line">                     <span class="comment">//上一段对话已经结束进行下一段对话</span></span><br><span class="line">                     socket.shutdownOutput();</span><br><span class="line">                     socket.close();<span class="comment">//关闭套接字资源</span></span><br><span class="line">                  &#125;</span><br><span class="line">               &#125;<span class="keyword">catch</span>(IOException e)&#123;</span><br><span class="line">                  e.printStackTrace();</span><br><span class="line">               &#125;</span><br><span class="line">            &#125;</span><br><span class="line">         &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">   &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">      e.printStackTrace();</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>效果：</p>
<p><img data-src="./images/test-1684485451217-3.gif" alt="test"></p>
<p><img data-src="./images/image-20230519163754131.png" alt="image-20230519163754131"></p>
<h2 id="主页中有img图片标签"><a class="markdownIt-Anchor" href="#主页中有img图片标签">#</a> 主页中有 img 图片标签🏒</h2>
<p>index.html</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>主页<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;long.gif&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;龙猫&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>在 http 中并不是一次性请求全部的 html 资源的 img 会发送一次请来获取图片资源，favicon.icon 也会发送一次请求。</p>
<p><img data-src="./images/image-20230519164647930.png" alt="image-20230519164647930"></p>
<p><strong>第一次请求</strong>：/index.html</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.......47 45 54 20 2F 69 6E 64  65 78 2E 68 74 6D 6C 20  .......GET /index.html </span><br><span class="line">读取到的字节数是: 775</span><br><span class="line">GET /index.html HTTP/1.1</span><br></pre></td></tr></table></figure>
<p><strong>第二次请求</strong>：/img/long.gif</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.......47 45 54 20 2F 6C 6F 6E  67 2E 67 69 66 20 48 54  .......GET /long.gif HT </span><br><span class="line">读取到的字节数是: 724</span><br><span class="line">GET /long.gif HTTP/1.1</span><br></pre></td></tr></table></figure>
<p><strong>第三次请求</strong>：/favicon.ico</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.......47 45 54 20 2F 66 61 76  69 63 6F 6E 2E 69 63 6F  .......GET /favicon.ico</span><br><span class="line">读取到的字节数是: 675</span><br><span class="line">GET /favicon.ico HTTP/1.1</span><br></pre></td></tr></table></figure>
<p>编写请求图片资源代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String... args)</span> &#123;</span><br><span class="line">   <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="type">ServerSocket</span> <span class="variable">serverSocket</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ServerSocket</span>(<span class="number">8080</span>);</span><br><span class="line">      System.out.println(<span class="string">&quot;服务器已经启动，监听端口为：8080 ...&quot;</span>);</span><br><span class="line">      <span class="type">ExecutorService</span> <span class="variable">executorService</span> <span class="operator">=</span> Executors.newCachedThreadPool();</span><br><span class="line">      <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">         <span class="type">Socket</span> <span class="variable">socket</span> <span class="operator">=</span> serverSocket.accept();</span><br><span class="line">         executorService.execute(() -&gt; &#123;</span><br><span class="line">            <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">            <span class="type">OutputStream</span> <span class="variable">os</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">               System.out.println(socket);</span><br><span class="line">               is = socket.getInputStream();</span><br><span class="line">               os = socket.getOutputStream();</span><br><span class="line">               <span class="type">byte</span>[] by = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span> * <span class="number">1024</span>];</span><br><span class="line">               <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> is.read(by);</span><br><span class="line">               <span class="keyword">if</span> (len != -<span class="number">1</span>) &#123;</span><br><span class="line">                  <span class="type">String</span> <span class="variable">hexMsg</span> <span class="operator">=</span> bytesArr2HexStr(by,len);</span><br><span class="line">                  System.out.println(hexMsg);</span><br><span class="line">                  System.out.println(<span class="string">&quot;读取到的字节数是: &quot;</span> + len);</span><br><span class="line">                  <span class="type">String</span> <span class="variable">msg</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(by, <span class="number">0</span>, len);</span><br><span class="line">                  System.out.println(msg);</span><br><span class="line">                  <span class="type">Request</span> <span class="variable">request</span> <span class="operator">=</span> parseRequest(msg);</span><br><span class="line">                  <span class="comment">//响应给浏览器需要使用Http协议</span></span><br><span class="line">                  <span class="type">String</span> <span class="variable">body</span> <span class="operator">=</span> <span class="string">&quot;&lt;h1&gt;&quot;</span> + count + <span class="string">&quot;&lt;/h1&gt;&quot;</span>+<span class="string">&quot;\r\n&quot;</span>+<span class="string">&quot;text/plain : plain plain text does not parse html tags&quot;</span>;</span><br><span class="line">                  <span class="comment">//http协议/版本 状态码  状态 后面的格式必须是\r\n不能乱写否则报错</span></span><br><span class="line">                  <span class="type">String</span> <span class="variable">response</span> <span class="operator">=</span> <span class="string">&quot;HTTP/1.1 200 OK\r\n&quot;</span> +<span class="comment">//HTTP1.1协议 状态码:200 正确 回车换行</span></span><br><span class="line">                     <span class="comment">//告诉浏览器文本的内容大小</span></span><br><span class="line">                     <span class="string">&quot;Content-Length: &quot;</span> + body.getBytes().length + <span class="string">&quot;\r\n&quot;</span> +</span><br><span class="line">                     <span class="comment">//告诉浏览器文本类型: 普通文本/plain 不解析任何代码语义</span></span><br><span class="line">                     <span class="string">&quot;Content-Type: text/plain; charset-utf-8\r\n&quot;</span> +<span class="comment">//内容类型是普通文本 回车换行 字符集</span></span><br><span class="line">                     <span class="comment">//固定写法,必须要写的空格换行(必须要写一个空行)</span></span><br><span class="line">                     <span class="string">&quot;\r\n&quot;</span> +<span class="comment">//回车换行,否则后面的数据接收不到</span></span><br><span class="line">                     <span class="comment">//body响应浏览器内容</span></span><br><span class="line">                     <span class="comment">//要返回给浏览器的文本正文(内容)</span></span><br><span class="line">                     body + <span class="string">&quot;\r\n&quot;</span>;<span class="comment">//回车换行,否则后面的数据接收不到</span></span><br><span class="line">                  <span class="type">String</span> <span class="variable">file</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">                  <span class="comment">//判断请求的是否是index.html页面</span></span><br><span class="line">                  <span class="keyword">if</span>(request.getUri().equals(<span class="string">&quot;/index.html&quot;</span>))&#123;</span><br><span class="line">                     <span class="comment">//file赋值为index.html文件的路径</span></span><br><span class="line">                     <span class="comment">//获取请求的uri并截取丢弃前面的 /</span></span><br><span class="line">                     file = request.getUri().substring(<span class="number">1</span>);</span><br><span class="line">                     <span class="comment">/**</span></span><br><span class="line"><span class="comment">                        * 如果读取index文件则重新赋值response变量将里面的body内容去掉还有读取大小也没必须设置了</span></span><br><span class="line"><span class="comment">                        * 必须设置HTTP协议信息</span></span><br><span class="line"><span class="comment">                        */</span></span><br><span class="line">                     response = <span class="string">&quot;HTTP/1.1 200 OK\r\n&quot;</span> +<span class="comment">//HTTP1.1协议 状态码:200 正确 回车换行</span></span><br><span class="line">                        <span class="comment">//告诉浏览器文本类型: 文本/html html页面，解析标签 设置字符集</span></span><br><span class="line">                        <span class="string">&quot;Content-Type: text/html; charset-utf-8\r\n&quot;</span> +<span class="comment">//内容类型是普通文本 回车换行 字符集</span></span><br><span class="line">                        <span class="comment">//固定写法,必须要写的空格换行(必须要写一个空行)</span></span><br><span class="line">                        <span class="string">&quot;\r\n&quot;</span>;</span><br><span class="line">                     <span class="comment">//判断请求是否为favicon.icon</span></span><br><span class="line">                  &#125;<span class="keyword">else</span> <span class="keyword">if</span>(request.getUri().equals(<span class="string">&quot;/favicon.ico&quot;</span>))&#123;</span><br><span class="line">                     <span class="comment">//将file赋值为icon的图标路径</span></span><br><span class="line">                     <span class="comment">//获取请求的uri并截取丢弃前面的 /</span></span><br><span class="line">                     file = request.getUri().substring(<span class="number">1</span>);</span><br><span class="line">                     <span class="comment">/**</span></span><br><span class="line"><span class="comment">                       * 如果读取index文件则重新赋值response变量将里面的body内容去掉还有读取大小也没必须设置了</span></span><br><span class="line"><span class="comment">                       * 必须设置HTTP协议信息</span></span><br><span class="line"><span class="comment">                       */</span></span><br><span class="line">                     response = <span class="string">&quot;HTTP/1.1 200 OK\r\n&quot;</span> +<span class="comment">//HTTP1.1协议 状态码:200 正确 回车换行</span></span><br><span class="line">                        <span class="comment">//告诉浏览器文本类型: 图片类型/x-icon 设置字符集</span></span><br><span class="line">                        <span class="string">&quot;Content-Type: image/x-icon; charset-utf-8\r\n&quot;</span> +<span class="comment">//内容类型是普通文本 回车换行 字符集</span></span><br><span class="line">                        <span class="comment">//固定写法,必须要写的空格换行(必须要写一个空行)</span></span><br><span class="line">                        <span class="string">&quot;\r\n&quot;</span>;</span><br><span class="line">                     <span class="comment">//判断请求的文件后缀名是否为.gif</span></span><br><span class="line">                  &#125;<span class="keyword">else</span> <span class="keyword">if</span>(request.getUri().endsWith(<span class="string">&quot;.gif&quot;</span>))&#123;</span><br><span class="line">                     <span class="comment">//file赋值为gif图片的路径</span></span><br><span class="line">                     <span class="comment">//获取请求的uri并截取丢弃前面的 /</span></span><br><span class="line">                     file = request.getUri().substring(<span class="number">1</span>);</span><br><span class="line">                     <span class="comment">//HTTP请求/版本  状态码 状态</span></span><br><span class="line">                     response = <span class="string">&quot;HTTP/1.1 200 OK\r\n&quot;</span>+</span><br><span class="line">                        <span class="comment">//告诉浏览器请求的类型： 图片/gif格式 设置字符集</span></span><br><span class="line">                        <span class="string">&quot;Content-Type: image/gif; charset-utf-8\r\n&quot;</span>+</span><br><span class="line">                        <span class="string">&quot;\r\n&quot;</span>;</span><br><span class="line">                  &#125;</span><br><span class="line">                  <span class="comment">//将HTTP协议信息写出到浏览器中(响应回去)</span></span><br><span class="line">                  os.write(response.getBytes());</span><br><span class="line">                  <span class="comment">//判断如果file不为空，那么请求的就是index.html页面则执行方法体</span></span><br><span class="line">                  <span class="keyword">if</span>(file != <span class="literal">null</span>)&#123;</span><br><span class="line">                     <span class="comment">//文件输入流读取文件</span></span><br><span class="line">                     <span class="type">FileInputStream</span> <span class="variable">fis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(file);</span><br><span class="line">                     <span class="keyword">while</span>((len = fis.read(by)) != -<span class="number">1</span>)&#123;</span><br><span class="line">                        <span class="comment">//将读取到的页面字节数据写出到浏览器</span></span><br><span class="line">                        os.write(by,<span class="number">0</span>,len);</span><br><span class="line">                     &#125;</span><br><span class="line">                  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                     <span class="comment">//将上面的HTTP协议信息和响应的数据写出到浏览器中</span></span><br><span class="line">                     os.write(response.getBytes());</span><br><span class="line">                     count++;</span><br><span class="line">                  &#125;</span><br><span class="line">               &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                  System.out.println(<span class="string">&quot;没有读取到数据&quot;</span>);</span><br><span class="line">               &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">               e.printStackTrace();</span><br><span class="line">            &#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">               <span class="keyword">try</span>&#123;</span><br><span class="line">                  <span class="keyword">if</span>(os != <span class="literal">null</span>)&#123;</span><br><span class="line">                     os.flush();<span class="comment">//将数据刷出</span></span><br><span class="line">                  &#125;</span><br><span class="line">                  <span class="keyword">if</span>(socket != <span class="literal">null</span>)&#123;</span><br><span class="line">                     <span class="comment">//上一段对话已经结束进行下一段对话</span></span><br><span class="line">                     socket.shutdownOutput();</span><br><span class="line">                     socket.close();<span class="comment">//关闭套接字资源</span></span><br><span class="line">                  &#125;</span><br><span class="line">               &#125;<span class="keyword">catch</span>(IOException e)&#123;</span><br><span class="line">                  e.printStackTrace();</span><br><span class="line">               &#125;</span><br><span class="line">            &#125;</span><br><span class="line">         &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">   &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">      e.printStackTrace();</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>效果</strong>：</p>
<p><img data-src="./images/image-20230519172731302.png" alt="image-20230519172731302"></p>
<p><img data-src="./images/image-20230519172852773.png" alt="image-20230519172852773"></p>
<p><img data-src="./images/image-20230519172824824.png" alt="image-20230519172824824"></p>
<h2 id="主页跳转到登录页面"><a class="markdownIt-Anchor" href="#主页跳转到登录页面">#</a> 主页跳转到登录页面🕋</h2>
<p>在 index.html 页面中添加一个 跳转到 (login.html) 另一个页面的 a 标签</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>主页<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;login.html&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_self&quot;</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;long.gif&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;龙猫&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>在<font style="color:red"><strong>项目根目录</strong></font>下创建一个 login.html 页面</p>
<p><img data-src="./images/image-20230519202110050.png" alt="image-20230519202110050"></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>账号：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;account&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>密码：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;登录&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>继续在判断资源路径的后面编写跳转时请求另一个页面的代码，当请求以后缀名为.html 文件时则执行方法体给 file 赋值 login.html 通过 substring (1); 从下标 1 开始截取值结果为 login.html</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(request.getUri().endsWith(<span class="string">&quot;.html&quot;</span>))&#123;</span><br><span class="line">   <span class="comment">//file赋值为请求的名称后缀名为html的文件名称去掉前面的 /</span></span><br><span class="line">   file = request.getUri().substring(<span class="number">1</span>);<span class="comment">//login.html</span></span><br><span class="line">   <span class="comment">//设置HTTP协议</span></span><br><span class="line">   <span class="comment">//协议/版本 状态码 状态</span></span><br><span class="line">   response = <span class="string">&quot;HTTP/1.1 200 OK\r\n&quot;</span>+</span><br><span class="line">      <span class="comment">//告诉浏览器请求的类型：文本/html 解析html标签代码 设置字符集</span></span><br><span class="line">      <span class="string">&quot;Content-Type: text/html; charset-utf-8\r\n&quot;</span>+</span><br><span class="line">      <span class="comment">//必须设置换行空格</span></span><br><span class="line">      <span class="string">&quot;\r\n&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="表单登录回显文本"><a class="markdownIt-Anchor" href="#表单登录回显文本">#</a> 表单登录回显文本🍔</h2>
<p>编写 login.html 文件给 form 标签加上提交信息和方式，使用 后缀名.do 或者.action 来区分其它文件的后缀名跳转</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--假设 账号:123 密码:admin ,允许登录 一般选择.do .action--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--我们要避开程序中已经写过的后缀名写法--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;login.do&quot;</span> <span class="attr">method</span>=<span class="string">&quot;get&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>账号：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;account&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>密码：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;登录&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>查看 login.html 点击登录后提交的路径信息</p>
<p><strong>提交信息为</strong>：<mark>/login.do?account=admin&amp;password=123</mark></p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line">Socket[addr=/0:0:0:0:0:0:0:1,port=8531,localport=8080]</span><br><span class="line">.......47 45 54 20 2F 6C 6F 67  69 6E 2E 64 6F 3F 61 63  .......GET /login.do?ac</span><br><span class="line">.......63 6F 75 6E 74 3D 61 64  6D 69 6E 26 70 61 73 73  .......count=admin&amp;pass</span><br><span class="line">.......77 6F 72 64 3D 31 32 33  20 48 54 54 50 2F 31 2E  .......word=123 HTTP/1.</span><br><span class="line">.......31 0D 0A 48 6F 73 74 3A  20 6C 6F 63 61 6C 68 6F  .......1..Host: localho</span><br><span class="line">.......73 74 3A 38 30 38 30 0D  0A 43 6F 6E 6E 65 63 74  .......st:8080..Connect</span><br><span class="line">.......69 6F 6E 3A 20 6B 65 65  70 2D 61 6C 69 76 65 0D  .......ion: keep-alive.</span><br><span class="line">.......0A 73 65 63 2D 63 68 2D  75 61 3A 20 22 47 6F 6F  ........sec-ch-ua: &quot;Goo</span><br><span class="line">.......67 6C 65 20 43 68 72 6F  6D 65 22 3B 76 3D 22 31  .......gle Chrome&quot;;v=&quot;1</span><br><span class="line">.......31 33 22 2C 20 22 43 68  72 6F 6D 69 75 6D 22 3B  .......13&quot;, &quot;Chromium&quot;;</span><br><span class="line">.......76 3D 22 31 31 33 22 2C  20 22 4E 6F 74 2D 41 2E  .......v=&quot;113&quot;, &quot;Not-A.</span><br><span class="line">.......42 72 61 6E 64 22 3B 76  3D 22 32 34 22 0D 0A 73  .......Brand&quot;;v=&quot;24&quot;..s</span><br><span class="line">.......65 63 2D 63 68 2D 75 61  2D 6D 6F 62 69 6C 65 3A  .......ec-ch-ua-mobile:</span><br><span class="line">.......20 3F 30 0D 0A 73 65 63  2D 63 68 2D 75 61 2D 70  ....... ?0..sec-ch-ua-p</span><br><span class="line">.......6C 61 74 66 6F 72 6D 3A  20 22 57 69 6E 64 6F 77  .......latform: &quot;Window</span><br><span class="line">.......73 22 0D 0A 55 70 67 72  61 64 65 2D 49 6E 73 65  .......s&quot;..Upgrade-Inse</span><br><span class="line">.......63 75 72 65 2D 52 65 71  75 65 73 74 73 3A 20 31  .......cure-Requests: 1</span><br><span class="line">.......0D 0A 55 73 65 72 2D 41  67 65 6E 74 3A 20 4D 6F  .........User-Agent: Mo</span><br><span class="line">.......7A 69 6C 6C 61 2F 35 2E  30 20 28 57 69 6E 64 6F  .......zilla/5.0 (Windo</span><br><span class="line">.......77 73 20 4E 54 20 31 30  2E 30 3B 20 57 69 6E 36  .......ws NT 10.0; Win6</span><br><span class="line">.......34 3B 20 78 36 34 29 20  41 70 70 6C 65 57 65 62  .......4; x64) AppleWeb</span><br><span class="line">.......4B 69 74 2F 35 33 37 2E  33 36 20 28 4B 48 54 4D  .......Kit/537.36 (KHTM</span><br><span class="line">.......4C 2C 20 6C 69 6B 65 20  47 65 63 6B 6F 29 20 43  .......L, like Gecko) C</span><br><span class="line">.......68 72 6F 6D 65 2F 31 31  33 2E 30 2E 30 2E 30 20  .......hrome/113.0.0.0 </span><br><span class="line">.......53 61 66 61 72 69 2F 35  33 37 2E 33 36 0D 0A 41  .......Safari/537.36..A</span><br><span class="line">.......63 63 65 70 74 3A 20 74  65 78 74 2F 68 74 6D 6C  .......ccept: text/html</span><br><span class="line">.......2C 61 70 70 6C 69 63 61  74 69 6F 6E 2F 78 68 74  .......,application/xht</span><br><span class="line">.......6D 6C 2B 78 6D 6C 2C 61  70 70 6C 69 63 61 74 69  .......ml+xml,applicati</span><br><span class="line">.......6F 6E 2F 78 6D 6C 3B 71  3D 30 2E 39 2C 69 6D 61  .......on/xml;q=0.9,ima</span><br><span class="line">.......67 65 2F 61 76 69 66 2C  69 6D 61 67 65 2F 77 65  .......ge/avif,image/we</span><br><span class="line">.......62 70 2C 69 6D 61 67 65  2F 61 70 6E 67 2C 2A 2F  .......bp,image/apng,*/</span><br><span class="line">.......2A 3B 71 3D 30 2E 38 2C  61 70 70 6C 69 63 61 74  .......*;q=0.8,applicat</span><br><span class="line">.......69 6F 6E 2F 73 69 67 6E  65 64 2D 65 78 63 68 61  .......ion/signed-excha</span><br><span class="line">.......6E 67 65 3B 76 3D 62 33  3B 71 3D 30 2E 37 0D 0A  .......nge;v=b3;q=0.7..</span><br><span class="line">.......53 65 63 2D 46 65 74 63  68 2D 53 69 74 65 3A 20  .......Sec-Fetch-Site: </span><br><span class="line">.......73 61 6D 65 2D 6F 72 69  67 69 6E 0D 0A 53 65 63  .......same-origin..Sec</span><br><span class="line">.......2D 46 65 74 63 68 2D 4D  6F 64 65 3A 20 6E 61 76  .......-Fetch-Mode: nav</span><br><span class="line">.......69 67 61 74 65 0D 0A 53  65 63 2D 46 65 74 63 68  .......igate..Sec-Fetch</span><br><span class="line">.......2D 55 73 65 72 3A 20 3F  31 0D 0A 53 65 63 2D 46  .......-User: ?1..Sec-F</span><br><span class="line">.......65 74 63 68 2D 44 65 73  74 3A 20 64 6F 63 75 6D  .......etch-Dest: docum</span><br><span class="line">.......65 6E 74 0D 0A 52 65 66  65 72 65 72 3A 20 68 74  .......ent..Referer: ht</span><br><span class="line">.......74 70 3A 2F 2F 6C 6F 63  61 6C 68 6F 73 74 3A 38  .......tp://localhost:8</span><br><span class="line">.......30 38 30 2F 6C 6F 67 69  6E 2E 68 74 6D 6C 0D 0A  .......080/login.html..</span><br><span class="line">.......41 63 63 65 70 74 2D 45  6E 63 6F 64 69 6E 67 3A  .......Accept-Encoding:</span><br><span class="line">.......20 67 7A 69 70 2C 20 64  65 66 6C 61 74 65 2C 20  ....... gzip, deflate, </span><br><span class="line">.......62 72 0D 0A 41 63 63 65  70 74 2D 4C 61 6E 67 75  .......br..Accept-Langu</span><br><span class="line">.......61 67 65 3A 20 65 6E 2D  55 53 2C 65 6E 3B 71 3D  .......age: en-US,en;q=</span><br><span class="line">.......30 2E 39 2C 7A 68 2D 43  4E 3B 71 3D 30 2E 38 2C  .......0.9,zh-CN;q=0.8,</span><br><span class="line">.......7A 68 3B 71 3D 30 2E 37  0D 0A 43 6F 6F 6B 69 65  .......zh;q=0.7..Cookie</span><br><span class="line">.......3A 20 49 64 65 61 2D 38  32 39 36 65 62 33 31 3D  .......: Idea-8296eb31=</span><br><span class="line">.......31 36 63 35 64 63 30 37  2D 36 31 35 35 2D 34 31  .......16c5dc07-6155-41</span><br><span class="line">.......33 64 2D 62 33 30 38 2D  39 30 66 35 63 38 66 62  .......3d-b308-90f5c8fb</span><br><span class="line">.......35 35 66 65 0D 0A 0D 0A    .......55fe....</span><br><span class="line"></span><br><span class="line">读取到的字节数是: 824</span><br><span class="line">GET /login.do?account=admin&amp;password=123 HTTP/1.1</span><br><span class="line">Host: localhost:8080</span><br><span class="line">Connection: keep-alive</span><br><span class="line">sec-ch-ua: &quot;Google Chrome&quot;;v=&quot;113&quot;, &quot;Chromium&quot;;v=&quot;113&quot;, &quot;Not-A.Brand&quot;;v=&quot;24&quot;</span><br><span class="line">sec-ch-ua-mobile: ?0</span><br><span class="line">sec-ch-ua-platform: &quot;Windows&quot;</span><br><span class="line">Upgrade-Insecure-Requests: 1</span><br><span class="line">User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/113.0.0.0 Safari/537.36</span><br><span class="line">Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7</span><br><span class="line">Sec-Fetch-Site: same-origin</span><br><span class="line">Sec-Fetch-Mode: navigate</span><br><span class="line">Sec-Fetch-User: ?1</span><br><span class="line">Sec-Fetch-Dest: document</span><br><span class="line">Referer: http://localhost:8080/login.html</span><br><span class="line">Accept-Encoding: gzip, deflate, br</span><br><span class="line">Accept-Language: en-US,en;q=0.9,zh-CN;q=0.8,zh;q=0.7</span><br><span class="line">Cookie: Idea-8296eb31=16c5dc07-6155-413d-b308-90f5c8fb55fe</span><br></pre></td></tr></table></figure>
<p><strong>解析请求</strong>：</p>
<p>切割路径：</p>
<ol>
<li>将 /login.html?account=admin&amp;password=123 以？进行切割分为两段</li>
<li>拿到请求 uri：/login.html 设置到 封装请求类的 Uri 成员字段中</li>
<li>拿到 account=admin&amp;password=123，再进行切割以 &amp; 进行切割分为两段</li>
<li>拿到的切割后的数据为 account=admin 和 password=123，遍历 String 数组</li>
<li>在 for 中使用 indexOf (&quot;=&quot;); 获取 = 的下标值，再使用 substring (0,index) 获取前面的 account，使用 substring (index) 获取后面的 admin，并以键值对的形式存入 Map 集合中</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 解析请求</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> msg</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> Request <span class="title function_">parseRequest</span><span class="params">(String msg)</span>&#123;</span><br><span class="line">   <span class="type">Request</span> <span class="variable">request</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Request</span>();</span><br><span class="line">   String[] split = msg.split(<span class="string">&quot;\r\n&quot;</span>);</span><br><span class="line">   <span class="comment">//解析第一行</span></span><br><span class="line">   <span class="comment">//GET /favicon.ico HTTP/1.1</span></span><br><span class="line">   String[] split0 = split[<span class="number">0</span>].split(<span class="string">&quot; &quot;</span>);</span><br><span class="line">   request.setMethod(split0[<span class="number">0</span>]);<span class="comment">//method : GET</span></span><br><span class="line">   <span class="comment">//判断请求路径中是否包含?号</span></span><br><span class="line">   <span class="keyword">if</span>(split0[<span class="number">1</span>].contains(<span class="string">&quot;?&quot;</span>))&#123;</span><br><span class="line">      <span class="comment">// /login.do?account=admin&amp;password=123,以？号进行切割</span></span><br><span class="line">      String[] split1 =  split0[<span class="number">1</span>].split(<span class="string">&quot;[?]&quot;</span>);</span><br><span class="line">      <span class="comment">// /login.do</span></span><br><span class="line">      request.setUri(split1[<span class="number">0</span>]);</span><br><span class="line">      <span class="comment">// account=admin&amp;password=123</span></span><br><span class="line">      String[] split2 = split1[<span class="number">1</span>].split(<span class="string">&quot;[&amp;]&quot;</span>);</span><br><span class="line">      <span class="comment">/**</span></span><br><span class="line"><span class="comment">        * 循环数据</span></span><br><span class="line"><span class="comment">        * account=admin</span></span><br><span class="line"><span class="comment">        * password=123</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">      <span class="keyword">for</span>(String i:split2)&#123;</span><br><span class="line">         <span class="comment">//获取=的索引值</span></span><br><span class="line">         <span class="type">int</span> <span class="variable">idx</span> <span class="operator">=</span> i.indexOf(<span class="string">&quot;=&quot;</span>);</span><br><span class="line">         <span class="comment">//将account=admin和password=123拆分为key,value存储到Map集合中key为:将account,value:admin</span></span><br><span class="line">         request.getParamMap().put(i.substring(<span class="number">0</span>,idx),i.substring(idx+<span class="number">1</span>));</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">      request.setUri(split0[<span class="number">1</span>]);<span class="comment">//uri : / 或者 /favicon.ico</span></span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">return</span> request;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在封装请求的类中定义一个成员字段：Map 集合用于存储用户登录提交的信息：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 把请求的字符串封装成请求的类</span></span><br><span class="line"><span class="comment"> * 请求的类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Request</span> &#123;</span><br><span class="line"><span class="comment">//    请求方式</span></span><br><span class="line">    <span class="keyword">private</span> String method;</span><br><span class="line"><span class="comment">//    请求的url</span></span><br><span class="line">    <span class="keyword">private</span> String uri;</span><br><span class="line"><span class="comment">//    以键值对的形式存储用户提交账号和密码的信息</span></span><br><span class="line">    <span class="keyword">private</span> Map&lt;String,String&gt; paramMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();<span class="comment">//存放参数 例如：account=admin&amp;password=123</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getMethod</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> method;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setMethod</span><span class="params">(String method)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.method = method;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getUri</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> uri;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUri</span><span class="params">(String uri)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.uri = uri;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Map&lt;String, String&gt; <span class="title function_">getParamMap</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> paramMap;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setParamMap</span><span class="params">(Map&lt;String, String&gt; paramMap)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.paramMap = paramMap;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在 HttpServer 类中的 main 方法中继续编写请求处理代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(request.getUri().equals(<span class="string">&quot;/login.do&quot;</span>))&#123;</span><br><span class="line">   <span class="comment">//通过key获取value 获取账号</span></span><br><span class="line">   <span class="type">String</span> <span class="variable">account</span> <span class="operator">=</span> request.getParamMap().get(<span class="string">&quot;account&quot;</span>);</span><br><span class="line">   <span class="comment">//通过key获取value 获取密码</span></span><br><span class="line">   <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> request.getParamMap().get(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">   <span class="comment">//协议/版本 状态码 状态 空格换行</span></span><br><span class="line">   response = <span class="string">&quot;HTTP/1.1 200 OK\r\n&quot;</span>+</span><br><span class="line">      <span class="comment">//告诉浏览器请求类型: 文本/html 解析html标签代码 设置字符集</span></span><br><span class="line">      <span class="string">&quot;Content-Type: text/html; charset-utf-8\r\n&quot;</span>+</span><br><span class="line">      <span class="comment">//空格换行</span></span><br><span class="line">      <span class="string">&quot;\r\n&quot;</span>;</span><br><span class="line">   os.write(response.getBytes());</span><br><span class="line">   <span class="comment">//判断账号和密码是否是我们期望的</span></span><br><span class="line">   <span class="keyword">if</span>(<span class="string">&quot;admin&quot;</span>.equals(account) &amp;&amp; <span class="string">&quot;123&quot;</span>.equals(password))&#123;</span><br><span class="line">      os.write(<span class="string">&quot;&lt;h1&gt;Login successful&lt;h1&gt;&quot;</span>.getBytes());</span><br><span class="line">   &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">      os.write(<span class="string">&quot;&lt;h1&gt;Login failed&lt;h1&gt;&quot;</span>.getBytes());</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="comment">//结束方法</span></span><br><span class="line">   <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img data-src="./images/image-20230519220412571.png" alt="image-20230519220412571"></p>
<p><img data-src="./images/image-20230519220957706.png" alt="image-20230519220957706"></p>
<h2 id="转发和重定向️"><a class="markdownIt-Anchor" href="#转发和重定向️">#</a> 转发和重定向⚡️</h2>
<p>当我们点击登录，登录成功后地址栏不会发生变化这种情况是不合适的，因为当我们点击刷新的时候都是在请求那个 Uri。</p>
<p>清空控制台。</p>
<img data-src="./images/image-20230519221531747.png" alt="image-20230519221531747" style="zoom: 50%;" />
<p>刷新请求页面：</p>
<p><img data-src="./images/image-20230519221702959.png" alt="image-20230519221702959"></p>
<p>查看控制台请求信息：</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.......47 45 54 20 2F 6C 6F 67  69 6E 2E 64 6F 3F 61 63  .......GET /login.do?ac</span><br><span class="line">读取到的字节数是: 850</span><br><span class="line">GET /login.do?account=admin&amp;password=123 HTTP/1.1</span><br></pre></td></tr></table></figure>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.......47 45 54 20 2F 6C 6F 6E  67 2E 67 69 66 20 48 54  .......GET /long.gif HT</span><br><span class="line">读取到的字节数是: 697</span><br><span class="line">GET /long.gif HTTP/1.1</span><br></pre></td></tr></table></figure>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.......47 45 54 20 2F 66 61 76  69 63 6F 6E 2E 69 63 6F  .......GET /favicon.ico</span><br><span class="line">读取到的字节数是: 700</span><br><span class="line">GET /favicon.ico HTTP/1.1</span><br></pre></td></tr></table></figure>
<h3 id="http响应代码️"><a class="markdownIt-Anchor" href="#http响应代码️">#</a> HTTP 响应代码⚡️</h3>
<p><mark>302 Found</mark></p>
<p>HTTP 302 Found 重定向状态码表名请求的资源被暂时的移动到了由 <code>Location</code>  头部指定的 URL 上。浏览器会重定向到这个 URL，但是搜索引擎不会对该资源的链接进行更新 (In SEO-speak,it is said that the link-juic is not sent to the new URL)。</p>
<p><strong>状态</strong>：</p>
<blockquote>
<p>302 Found</p>
</blockquote>
<p><mark>Location</mark></p>
<p><code>Location</code>  首部指定的是需要将页面重定向至的地址，一般在响应码为 3xx 的响应中才会有意义。</p>
<p>发送新请求，获取 <code>Location</code>  指向的新页面所采用的方法与初始请求使用的方法以及重定向的类型相关；</p>
<ul>
<li>303 (See Also) 始终引致请求使用 <code>GET</code>  方法，而 307 (Temporary Redirect) 和 308 (Permanent Redirect) 则不转变初始请求中的所使用的方法；</li>
<li>301 (Permanent Redirect) 和 302 (Found) 在大多数情况下不会转变初始请求中的方法，不过一些比较早的用户代理可能会引发方法的变更 (所以你基本上不知道这一点)。</li>
</ul>
<p>状态码为上述之一的所有相应都会带有一个 <code>Location</code>  首部。</p>
<p>除了重定向相应之外，状态码为 201 (Created) 的消息也会带有 <code>Location</code>  首部，它指向的是新创建的资源的地址。</p>
<p><strong>语法</strong>：</p>
<blockquote>
<p>Location: <url></p>
</blockquote>
<p>修改登录请求 login.do 的处理方式:</p>
<p>当 if 判断登录成功后响应一个 302 Found 的状态码 (重定向) 让浏览器主动申请一次请求 到 index.html 页面</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//判断请求路径是否为 /login.do</span></span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(request.getUri().equals(<span class="string">&quot;/login.do&quot;</span>))&#123;</span><br><span class="line">   <span class="comment">//通过key获取value 获取账号</span></span><br><span class="line">   <span class="type">String</span> <span class="variable">account</span> <span class="operator">=</span> request.getParamMap().get(<span class="string">&quot;account&quot;</span>);</span><br><span class="line">   <span class="comment">//通过key获取value 获取密码</span></span><br><span class="line">   <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> request.getParamMap().get(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">   <span class="comment">//协议/版本 状态码 状态 空格换行</span></span><br><span class="line">   response = <span class="string">&quot;HTTP/1.1 200 OK\r\n&quot;</span>+</span><br><span class="line">      <span class="comment">//告诉浏览器请求类型: 文本/html 解析html标签代码 设置字符集</span></span><br><span class="line">      <span class="string">&quot;Content-Type: text/html; charset-utf-8\r\n&quot;</span>+</span><br><span class="line">      <span class="comment">//空格换行</span></span><br><span class="line">      <span class="string">&quot;\r\n&quot;</span>;</span><br><span class="line">   <span class="comment">//判断账号和密码是否是我们期望的</span></span><br><span class="line">   <span class="keyword">if</span>(<span class="string">&quot;admin&quot;</span>.equals(account) &amp;&amp; <span class="string">&quot;123&quot;</span>.equals(password))&#123;</span><br><span class="line">      <span class="comment">//如果满足条件也就是登录成功跳转到主页index.html</span></span><br><span class="line">      <span class="comment">//重定向状态码</span></span><br><span class="line">      response = <span class="string">&quot;HTTP/1.1 302 Found\r\n&quot;</span>+</span><br><span class="line">         <span class="comment">//成功,重定向到,index.html</span></span><br><span class="line">         <span class="comment">//让浏览器主动申请一次页面</span></span><br><span class="line">         <span class="string">&quot;Location: index.html\r\n&quot;</span>+</span><br><span class="line">         <span class="comment">//空格换行</span></span><br><span class="line">         <span class="string">&quot;\r\n&quot;</span>;</span><br><span class="line">   &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">      <span class="comment">//如果不满足条件也就是登录失败跳转到当前页面(登录页面)login.html</span></span><br><span class="line">      <span class="comment">//登录失败转发到login.html页面</span></span><br><span class="line">      file = <span class="string">&quot;login.html&quot;</span>;<span class="comment">//服务器内部读取一个文件,返回给浏览器</span></span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>效果</strong>：</p>
<p><img data-src="./images/test-1684546004575-1.gif" alt="test"></p>
<p>请求的信息：</p>
<p>请求 /login.do 到 login.html 页面中，第一次请求账号和密码都是 null 所以走 else 将 file 赋值为 login.html</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.......47 45 54 20 2F 6C 6F 67  69 6E 2E 64 6F 20 48 54  .......GET /login.do HT</span><br><span class="line">读取到的字节数是: 773</span><br><span class="line">GET /login.do HTTP/1.1</span><br></pre></td></tr></table></figure>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.......47 45 54 20 2F 66 61 76  69 63 6F 6E 2E 69 63 6F  .......GET /favicon.ico</span><br><span class="line">读取到的字节数是: 673</span><br><span class="line">GET /favicon.ico HTTP/1.1</span><br></pre></td></tr></table></figure>
<p>登录错误的请求读取 login.html 页面二进制数据展示页面：此时地址栏不发生改变，服务器处理</p>
<p><img data-src="./images/image-20230520094259782.png" alt="image-20230520094259782"></p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.......47 45 54 20 2F 6C 6F 67  69 6E 2E 64 6F 3F 61 63  .......GET /login.do?ac</span><br><span class="line">读取到的字节数是: 823</span><br><span class="line">GET /login.do?account=admin&amp;password=1234 HTTP/1.1</span><br></pre></td></tr></table></figure>
<p>登录成功请求 HTTP 协议状态码为 302 Found 重定向到 Location：index.html 浏览器主动申请 index.html 页面</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.......47 45 54 20 2F 6C 6F 67  69 6E 2E 64 6F 3F 61 63  .......GET /login.do?ac</span><br><span class="line">读取到的字节数是: 850</span><br><span class="line">GET /login.do?account=admin&amp;password=123 HTTP/1.1</span><br></pre></td></tr></table></figure>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.......47 45 54 20 2F 69 6E 64  65 78 2E 68 74 6D 6C 20  .......GET /index.html </span><br><span class="line">读取到的字节数是: 825</span><br><span class="line">GET /index.html HTTP/1.1</span><br></pre></td></tr></table></figure>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.......47 45 54 20 2F 6C 6F 6E  67 2E 67 69 66 20 48 54  .......GET /long.gif HT</span><br><span class="line">读取到的字节数是: 672</span><br><span class="line">GET /long.gif HTTP/1.1</span><br></pre></td></tr></table></figure>
<h2 id="使用post方式提交表单️"><a class="markdownIt-Anchor" href="#使用post方式提交表单️">#</a> 使用 POST 方式提交表单☔️</h2>
<p>将 login.html 页面的请求方式改为 method = “post”</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--假设 账号:123 密码:admin ,允许登录 一般选择.do .action--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--我们要避开程序中已经写过的后缀名写法--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;login.do&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>账号：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;account&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>密码：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;登录&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>查看登录后的请求结果：</p>
<p>登录后地址栏不会显示账号和密码，账号密码在请求体中显示</p>
<p><img data-src="./images/image-20230520101235364.png" alt="image-20230520101235364"></p>
<p>在最后一行 (<mark>请求体</mark>) 中显示 账号和密码信息：</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">.......50 4F 53 54 20 2F 6C 6F  67 69 6E 2E 64 6F 20 48  .......POST /login.do H</span><br><span class="line">.......54 54 50 2F 31 2E 31 0D  0A 48 6F 73 74 3A 20 31  .......TTP/1.1..Host: 1</span><br><span class="line">.......32 37 2E 30 2E 30 2E 31  3A 38 30 38 30 0D 0A 55  .......27.0.0.1:8080..U</span><br><span class="line">.......73 65 72 2D 41 67 65 6E  74 3A 20 4D 6F 7A 69 6C  .......ser-Agent: Mozil</span><br><span class="line">.......6C 61 2F 35 2E 30 20 28  57 69 6E 64 6F 77 73 20  .......la/5.0 (Windows </span><br><span class="line">.......4E 54 20 31 30 2E 30 3B  20 57 69 6E 36 34 3B 20  .......NT 10.0; Win64; </span><br><span class="line">.......78 36 34 3B 20 72 76 3A  31 30 39 2E 30 29 20 47  .......x64; rv:109.0) G</span><br><span class="line">.......65 63 6B 6F 2F 32 30 31  30 30 31 30 31 20 46 69  .......ecko/20100101 Fi</span><br><span class="line">.......72 65 66 6F 78 2F 31 31  33 2E 30 0D 0A 41 63 63  .......refox/113.0..Acc</span><br><span class="line">.......65 70 74 3A 20 74 65 78  74 2F 68 74 6D 6C 2C 61  .......ept: text/html,a</span><br><span class="line">.......70 70 6C 69 63 61 74 69  6F 6E 2F 78 68 74 6D 6C  .......pplication/xhtml</span><br><span class="line">.......2B 78 6D 6C 2C 61 70 70  6C 69 63 61 74 69 6F 6E  .......+xml,application</span><br><span class="line">.......2F 78 6D 6C 3B 71 3D 30  2E 39 2C 69 6D 61 67 65  ......./xml;q=0.9,image</span><br><span class="line">.......2F 61 76 69 66 2C 69 6D  61 67 65 2F 77 65 62 70  ......./avif,image/webp</span><br><span class="line">.......2C 2A 2F 2A 3B 71 3D 30  2E 38 0D 0A 41 63 63 65  .......,*/*;q=0.8..Acce</span><br><span class="line">.......70 74 2D 4C 61 6E 67 75  61 67 65 3A 20 7A 68 2D  .......pt-Language: zh-</span><br><span class="line">.......43 4E 2C 7A 68 3B 71 3D  30 2E 38 2C 7A 68 2D 54  .......CN,zh;q=0.8,zh-T</span><br><span class="line">.......57 3B 71 3D 30 2E 37 2C  7A 68 2D 48 4B 3B 71 3D  .......W;q=0.7,zh-HK;q=</span><br><span class="line">.......30 2E 35 2C 65 6E 2D 55  53 3B 71 3D 30 2E 33 2C  .......0.5,en-US;q=0.3,</span><br><span class="line">.......65 6E 3B 71 3D 30 2E 32  0D 0A 41 63 63 65 70 74  .......en;q=0.2..Accept</span><br><span class="line">.......2D 45 6E 63 6F 64 69 6E  67 3A 20 67 7A 69 70 2C  .......-Encoding: gzip,</span><br><span class="line">.......20 64 65 66 6C 61 74 65  2C 20 62 72 0D 0A 43 6F  ....... deflate, br..Co</span><br><span class="line">.......6E 74 65 6E 74 2D 54 79  70 65 3A 20 61 70 70 6C  .......ntent-Type: appl</span><br><span class="line">.......69 63 61 74 69 6F 6E 2F  78 2D 77 77 77 2D 66 6F  .......ication/x-www-fo</span><br><span class="line">.......72 6D 2D 75 72 6C 65 6E  63 6F 64 65 64 0D 0A 43  .......rm-urlencoded..C</span><br><span class="line">.......6F 6E 74 65 6E 74 2D 4C  65 6E 67 74 68 3A 20 32  .......ontent-Length: 2</span><br><span class="line">.......36 0D 0A 4F 72 69 67 69  6E 3A 20 68 74 74 70 3A  .......6..Origin: http:</span><br><span class="line">.......2F 2F 31 32 37 2E 30 2E  30 2E 31 3A 38 30 38 30  .......//127.0.0.1:8080</span><br><span class="line">.......0D 0A 43 6F 6E 6E 65 63  74 69 6F 6E 3A 20 6B 65  .........Connection: ke</span><br><span class="line">.......65 70 2D 61 6C 69 76 65  0D 0A 52 65 66 65 72 65  .......ep-alive..Refere</span><br><span class="line">.......72 3A 20 68 74 74 70 3A  2F 2F 31 32 37 2E 30 2E  .......r: http://127.0.</span><br><span class="line">.......30 2E 31 3A 38 30 38 30  2F 6C 6F 67 69 6E 2E 64  .......0.1:8080/login.d</span><br><span class="line">.......6F 0D 0A 55 70 67 72 61  64 65 2D 49 6E 73 65 63  .......o..Upgrade-Insec</span><br><span class="line">.......75 72 65 2D 52 65 71 75  65 73 74 73 3A 20 31 0D  .......ure-Requests: 1.</span><br><span class="line">.......0A 53 65 63 2D 46 65 74  63 68 2D 44 65 73 74 3A  ........Sec-Fetch-Dest:</span><br><span class="line">.......20 64 6F 63 75 6D 65 6E  74 0D 0A 53 65 63 2D 46  ....... document..Sec-F</span><br><span class="line">.......65 74 63 68 2D 4D 6F 64  65 3A 20 6E 61 76 69 67  .......etch-Mode: navig</span><br><span class="line">.......61 74 65 0D 0A 53 65 63  2D 46 65 74 63 68 2D 53  .......ate..Sec-Fetch-S</span><br><span class="line">.......69 74 65 3A 20 73 61 6D  65 2D 6F 72 69 67 69 6E  .......ite: same-origin</span><br><span class="line">.......0D 0A 53 65 63 2D 46 65  74 63 68 2D 55 73 65 72  .........Sec-Fetch-User</span><br><span class="line">.......3A 20 3F 31 0D 0A 50 72  61 67 6D 61 3A 20 6E 6F  .......: ?1..Pragma: no</span><br><span class="line">.......2D 63 61 63 68 65 0D 0A  43 61 63 68 65 2D 43 6F  .......-cache..Cache-Co</span><br><span class="line">.......6E 74 72 6F 6C 3A 20 6E  6F 2D 63 61 63 68 65 0D  .......ntrol: no-cache.</span><br><span class="line">.......0A 0D 0A 61 63 63 6F 75  6E 74 3D 61 64 6D 69 6E  ..........account=admin</span><br><span class="line">.......26 70 61 73 73 77 6F 72  64 3D 31 32 33   .......&amp;password=123</span><br><span class="line"></span><br><span class="line">读取到的字节数是: 717</span><br><span class="line">POST /login.do HTTP/1.1</span><br><span class="line">Host: 127.0.0.1:8080</span><br><span class="line">User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:109.0) Gecko/20100101 Firefox/113.0</span><br><span class="line">Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,*/*;q=0.8</span><br><span class="line">Accept-Language: zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2</span><br><span class="line">Accept-Encoding: gzip, deflate, br</span><br><span class="line">Content-Type: application/x-www-form-urlencoded</span><br><span class="line">Content-Length: 26</span><br><span class="line">Origin: http://127.0.0.1:8080</span><br><span class="line">Connection: keep-alive</span><br><span class="line">Referer: http://127.0.0.1:8080/login.do</span><br><span class="line">Upgrade-Insecure-Requests: 1</span><br><span class="line">Sec-Fetch-Dest: document</span><br><span class="line">Sec-Fetch-Mode: navigate</span><br><span class="line">Sec-Fetch-Site: same-origin</span><br><span class="line">Sec-Fetch-User: ?1</span><br><span class="line">Pragma: no-cache</span><br><span class="line">Cache-Control: no-cache</span><br><span class="line"></span><br><span class="line">account=admin&amp;password=123</span><br></pre></td></tr></table></figure>
<p>登录成功后没有重定向页面是因为并没有解析到账号和密码原来的解析方式是 get 方式的 post 方式解析不到。</p>
<p>思路：</p>
<blockquote>
<p>无论有没有请求体，请求头与请求体之间都要带有一个 &quot;\r\n\r\n&quot; ，先通过 indexOf 获取到 &quot;\r\n\r\n&quot; 的下标位置，然后通过 substring (index1+4) 获取 &quot;\r\n\r\n&quot;，之后的字符串，再判断字符串中是否包含 &quot;=&quot;，<mark>因为 无论有没有请求体，请求头与请求体之间都要带有一个 &quot;\r\n\r\n&quot;</mark>，所以在请求 index.html 的时候没有 account=admin&amp;password=123，因此后面的代码操作就会报错 ArrayIndexOutOfBoundsException，所以要判断&quot;=“来判断后面是否有 account=admin&amp;password=123 数据，然后通过”&amp;“将”\r\n\r\n&quot;之后的字符串进行切割分为两段，account=admin 和 password=123，循环切割后的数据，通过 indexOf (&quot;=&quot;) 获取&quot;=“的下标位置，在通过 request.getParamMap ().put (i.substring (0,index1),i.substring (index1+1));，从 0 开始到”=“的前位置的字符串也就是 account 和从”=&quot; 下标位置 + 1 的位置开始到末尾也就是 admin，以 key,value 的形式存储到 Map 集合中。</p>
</blockquote>
<p><img data-src="./images/image-20230520101847481.png" alt="image-20230520101847481"></p>
<p><img data-src="./images/image-20230520101923595.png" alt="image-20230520101923595"></p>
<p>编写解析方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * 解析请求</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@param</span> msg</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> Request <span class="title function_">parseRequest</span><span class="params">(String msg)</span>&#123;</span><br><span class="line">   <span class="type">Request</span> <span class="variable">request</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Request</span>();</span><br><span class="line">   String[] split = msg.split(<span class="string">&quot;\r\n&quot;</span>);</span><br><span class="line">   <span class="comment">//解析第一行</span></span><br><span class="line">   <span class="comment">//GET /favicon.ico HTTP/1.1</span></span><br><span class="line">   String[] split0 = split[<span class="number">0</span>].split(<span class="string">&quot; &quot;</span>);</span><br><span class="line">   request.setMethod(split0[<span class="number">0</span>]);<span class="comment">//method : GET</span></span><br><span class="line">   <span class="comment">//判断请求路径中是否包含?号</span></span><br><span class="line">   <span class="keyword">if</span>(split0[<span class="number">1</span>].contains(<span class="string">&quot;?&quot;</span>))&#123;</span><br><span class="line">      <span class="comment">// /login.do?account=admin&amp;password=123,以？号进行切割</span></span><br><span class="line">      String[] split1 =  split0[<span class="number">1</span>].split(<span class="string">&quot;[?]&quot;</span>);</span><br><span class="line">      <span class="comment">// /login.do</span></span><br><span class="line">      request.setUri(split1[<span class="number">0</span>]);</span><br><span class="line">      <span class="comment">// account=admin&amp;password=123</span></span><br><span class="line">      String[] split2 = split1[<span class="number">1</span>].split(<span class="string">&quot;[&amp;]&quot;</span>);</span><br><span class="line">      <span class="keyword">for</span>(String i:split2)&#123;</span><br><span class="line">         <span class="type">int</span> <span class="variable">idx</span> <span class="operator">=</span> i.indexOf(<span class="string">&quot;=&quot;</span>);</span><br><span class="line">         request.getParamMap().put(i.substring(<span class="number">0</span>,idx),i.substring(idx+<span class="number">1</span>));</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">      request.setUri(split0[<span class="number">1</span>]);<span class="comment">//uri : / 或者 /favicon.ico</span></span><br><span class="line">      <span class="comment">//获取请求头与请求体之间的位置</span></span><br><span class="line">      <span class="type">int</span> <span class="variable">idx1</span> <span class="operator">=</span> msg.indexOf(<span class="string">&quot;\r\n\r\n&quot;</span>);</span><br><span class="line">      <span class="comment">//截取请求头与请求体之后字符串 m = account=admin&amp;password=123</span></span><br><span class="line">      <span class="type">String</span> <span class="variable">m</span> <span class="operator">=</span> msg.substring(idx1+<span class="number">4</span>);</span><br><span class="line">      <span class="comment">//判断m截取的字符串中是否包含= , 因为即使没有请求体也会有它们之间的空格换行空格换行存在,判断=是判断是否存在后面account=admin&amp;password=123的数据</span></span><br><span class="line">      <span class="keyword">if</span>(m.contains(<span class="string">&quot;=&quot;</span>))&#123;</span><br><span class="line">         <span class="comment">//判断是否有请求头与请求体之间的空格</span></span><br><span class="line">         <span class="keyword">if</span>(idx1 != -<span class="number">1</span>)&#123;</span><br><span class="line">            <span class="comment">//将account=admin&amp;password=123 之间以&amp;进行切割</span></span><br><span class="line">            String[] spli = m.split(<span class="string">&quot;[&amp;]&quot;</span>);</span><br><span class="line">            <span class="comment">//循环切割后的数据</span></span><br><span class="line">            <span class="keyword">for</span>(String i:spli)&#123;</span><br><span class="line">               <span class="comment">//获取=的位置下标</span></span><br><span class="line">               <span class="type">int</span> <span class="variable">index1</span> <span class="operator">=</span> i.indexOf(<span class="string">&quot;=&quot;</span>);</span><br><span class="line">               <span class="comment">//以键值对的形式获取=分隔开的数据存储到map集合中</span></span><br><span class="line">               request.getParamMap().put(i.substring(<span class="number">0</span>,index1),i.substring(index1+<span class="number">1</span>));</span><br><span class="line">            &#125;</span><br><span class="line">         &#125;</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">return</span> request;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>完整代码：MyHttpServer</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> web;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.OutputStream;</span><br><span class="line"><span class="keyword">import</span> java.net.ServerSocket;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ExecutorService;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Executors;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyHttpServer</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">char</span>[] arr = &#123;<span class="string">&#x27;0&#x27;</span>,<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;2&#x27;</span>,<span class="string">&#x27;3&#x27;</span>,<span class="string">&#x27;4&#x27;</span>,<span class="string">&#x27;5&#x27;</span>,<span class="string">&#x27;6&#x27;</span>,<span class="string">&#x27;7&#x27;</span>,<span class="string">&#x27;8&#x27;</span>,<span class="string">&#x27;9&#x27;</span>,<span class="string">&#x27;A&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;B&#x27;</span>,<span class="string">&#x27;C&#x27;</span>,<span class="string">&#x27;D&#x27;</span>,<span class="string">&#x27;E&#x27;</span>,<span class="string">&#x27;F&#x27;</span>&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String... args)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">ServerSocket</span> <span class="variable">serverSocket</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ServerSocket</span>(<span class="number">8080</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;服务器已经启动，监听端口为：8080 ...&quot;</span>);</span><br><span class="line">            <span class="type">ExecutorService</span> <span class="variable">executorService</span> <span class="operator">=</span> Executors.newCachedThreadPool();</span><br><span class="line">            <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">                <span class="type">Socket</span> <span class="variable">socket</span> <span class="operator">=</span> serverSocket.accept();</span><br><span class="line">                executorService.execute(() -&gt; &#123;</span><br><span class="line">                    <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">                    <span class="type">OutputStream</span> <span class="variable">os</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        System.out.println(socket);</span><br><span class="line">                        is = socket.getInputStream();</span><br><span class="line">                        os = socket.getOutputStream();</span><br><span class="line">                        <span class="type">byte</span>[] by = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span> * <span class="number">1024</span>];</span><br><span class="line">                        <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> is.read(by);</span><br><span class="line">                        <span class="keyword">if</span> (len != -<span class="number">1</span>) &#123;</span><br><span class="line">                            <span class="type">String</span> <span class="variable">hexMsg</span> <span class="operator">=</span> bytesArr2HexStr(by,len);</span><br><span class="line">                            System.out.println(hexMsg);</span><br><span class="line">                            System.out.println(<span class="string">&quot;读取到的字节数是: &quot;</span> + len);</span><br><span class="line">                            <span class="type">String</span> <span class="variable">msg</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(by, <span class="number">0</span>, len);</span><br><span class="line">                            System.out.println(msg);</span><br><span class="line">                            <span class="type">Request</span> <span class="variable">request</span> <span class="operator">=</span> parseRequest(msg);</span><br><span class="line">                            <span class="comment">//响应给浏览器需要使用Http协议</span></span><br><span class="line">                            <span class="type">String</span> <span class="variable">body</span> <span class="operator">=</span> <span class="string">&quot;&lt;h1&gt;&quot;</span> + count + <span class="string">&quot;&lt;/h1&gt;&quot;</span>+<span class="string">&quot;\r\n&quot;</span>+<span class="string">&quot;text/plain : plain plain text does not parse html tags&quot;</span>;</span><br><span class="line">                            <span class="comment">//http协议/版本 状态码  状态 后面的格式必须是\r\n不能乱写否则报错</span></span><br><span class="line">                            <span class="type">String</span> <span class="variable">response</span> <span class="operator">=</span> <span class="string">&quot;HTTP/1.1 200 OK\r\n&quot;</span> +<span class="comment">//HTTP1.1协议 状态码:200 正确 回车换行</span></span><br><span class="line">                                    <span class="comment">//告诉浏览器文本的内容大小</span></span><br><span class="line">                                    <span class="string">&quot;Content-Length: &quot;</span> + body.getBytes().length + <span class="string">&quot;\r\n&quot;</span> +</span><br><span class="line">                                    <span class="comment">//告诉浏览器文本类型: 普通文本/plain 不解析任何代码语义</span></span><br><span class="line">                                    <span class="string">&quot;Content-Type: text/plain; charset-utf-8\r\n&quot;</span> +<span class="comment">//内容类型是普通文本 回车换行 字符集</span></span><br><span class="line">                                    <span class="comment">//固定写法,必须要写的空格换行(必须要写一个空行)</span></span><br><span class="line">                                    <span class="string">&quot;\r\n&quot;</span> +<span class="comment">//回车换行,否则后面的数据接收不到</span></span><br><span class="line">                                    <span class="comment">//body响应浏览器内容</span></span><br><span class="line">                                    <span class="comment">//要返回给浏览器的文本正文(内容)</span></span><br><span class="line">                                    body + <span class="string">&quot;\r\n&quot;</span>;<span class="comment">//回车换行,否则后面的数据接收不到</span></span><br><span class="line">                            <span class="type">String</span> <span class="variable">file</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">									 <span class="comment">//判断请求的是否是index.html页面</span></span><br><span class="line">                            <span class="keyword">if</span>(request.getUri().equals(<span class="string">&quot;/index.html&quot;</span>))&#123;</span><br><span class="line">									 <span class="comment">//file赋值为index.html文件的路径</span></span><br><span class="line">                                <span class="comment">//获取请求的uri并截取丢弃前面的 /</span></span><br><span class="line">                                file = request.getUri().substring(<span class="number">1</span>);</span><br><span class="line">                                <span class="comment">/**</span></span><br><span class="line"><span class="comment">                                 * 如果读取index文件则重新赋值response变量将里面的body内容去掉还有读取大小也没必须设置了</span></span><br><span class="line"><span class="comment">                                 * 必须设置HTTP协议信息</span></span><br><span class="line"><span class="comment">                                 */</span></span><br><span class="line">                                response = <span class="string">&quot;HTTP/1.1 200 OK\r\n&quot;</span> +<span class="comment">//HTTP1.1协议 状态码:200 正确 回车换行</span></span><br><span class="line">                                        <span class="comment">//告诉浏览器文本类型: 文本/html html页面，解析标签 设置字符集</span></span><br><span class="line">                                        <span class="string">&quot;Content-Type: text/html; charset-utf-8\r\n&quot;</span> 														+<span class="comment">//内容类型是普通文本 回车换行 字符集</span></span><br><span class="line">                                        <span class="comment">//固定写法,必须要写的空格换行(必须要写一个空行)</span></span><br><span class="line">                                        <span class="string">&quot;\r\n&quot;</span>;</span><br><span class="line">										 <span class="comment">//判断请求是否为favicon.icon</span></span><br><span class="line">                            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(request.getUri().equals(<span class="string">&quot;/favicon.ico&quot;</span>))&#123;</span><br><span class="line">										 <span class="comment">//将file赋值为icon的图标路径</span></span><br><span class="line">                                <span class="comment">//获取请求的uri并截取丢弃前面的 /</span></span><br><span class="line">                                file = request.getUri().substring(<span class="number">1</span>);</span><br><span class="line">                                <span class="comment">/**</span></span><br><span class="line"><span class="comment">                                 * 如果读取index文件则重新赋值response变量将里面的body内容去掉还有读取大小也没必须设置了</span></span><br><span class="line"><span class="comment">                                 * 必须设置HTTP协议信息</span></span><br><span class="line"><span class="comment">                                 */</span></span><br><span class="line">                                response = <span class="string">&quot;HTTP/1.1 200 OK\r\n&quot;</span> +<span class="comment">//HTTP1.1协议 状态码:200 正确 回车换行</span></span><br><span class="line">                                        <span class="comment">//告诉浏览器文本类型: 图片类型/x-icon 设置字符集</span></span><br><span class="line">                                        <span class="string">&quot;Content-Type: image/x-icon; charset-utf-														 8\r\n&quot;</span> +<span class="comment">//内容类型是普通文本 回车换行 字符集</span></span><br><span class="line">                                        <span class="comment">//固定写法,必须要写的空格换行(必须要写一个空行)</span></span><br><span class="line">                                        <span class="string">&quot;\r\n&quot;</span>;</span><br><span class="line">										  <span class="comment">//判断请求的文件后缀名是否为.gif</span></span><br><span class="line">                            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(request.getUri().endsWith(<span class="string">&quot;.gif&quot;</span>))&#123;</span><br><span class="line">										  <span class="comment">//file赋值为gif图片的路径</span></span><br><span class="line">                                <span class="comment">//获取请求的uri并截取丢弃前面的 /</span></span><br><span class="line">                                file = request.getUri().substring(<span class="number">1</span>);</span><br><span class="line">										  <span class="comment">//HTTP请求/版本  状态码 状态</span></span><br><span class="line">                                response = <span class="string">&quot;HTTP/1.1 200 OK\r\n&quot;</span>+</span><br><span class="line">										  <span class="comment">//告诉浏览器请求的类型： 图片/gif格式 设置字符集</span></span><br><span class="line">                                        <span class="string">&quot;Content-Type: image/gif; charset-utf-8\r\n&quot;</span>+</span><br><span class="line">                                        <span class="string">&quot;\r\n&quot;</span>;</span><br><span class="line">                            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(request.getUri().endsWith(<span class="string">&quot;.html&quot;</span>))&#123;</span><br><span class="line">											<span class="comment">//file赋值为请求的名称后缀名为html的文件名称去掉前面的 /</span></span><br><span class="line">                                file = request.getUri().substring(<span class="number">1</span>);</span><br><span class="line">											<span class="comment">//设置HTTP协议</span></span><br><span class="line">											<span class="comment">//协议/版本 状态码 状态</span></span><br><span class="line">                                response = <span class="string">&quot;HTTP/1.1 200 OK\r\n&quot;</span>+</span><br><span class="line">											<span class="comment">//告诉浏览器请求的类型：文本/html 解析html标签代码 设置字符集</span></span><br><span class="line">                                        <span class="string">&quot;Content-Type: text/html; charset-utf-8\r\n&quot;</span>+</span><br><span class="line">											<span class="comment">//必须设置换行空格</span></span><br><span class="line">                                        <span class="string">&quot;\r\n&quot;</span>;</span><br><span class="line">											<span class="comment">//判断请求路径是否为 /login.do</span></span><br><span class="line">                            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(request.getUri().equals(<span class="string">&quot;/login.do&quot;</span>))&#123;</span><br><span class="line">											<span class="comment">//通过key获取value 获取账号</span></span><br><span class="line">                                <span class="type">String</span> <span class="variable">account</span> <span class="operator">=</span> request.getParamMap().get(<span class="string">&quot;account&quot;</span>);</span><br><span class="line">											<span class="comment">//通过key获取value 获取密码</span></span><br><span class="line">                                <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> request.getParamMap().get(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">											<span class="comment">//协议/版本 状态码 状态 空格换行</span></span><br><span class="line">                                response = <span class="string">&quot;HTTP/1.1 200 OK\r\n&quot;</span>+</span><br><span class="line">											<span class="comment">//告诉浏览器请求类型: 文本/html 解析html标签代码 设置字符集</span></span><br><span class="line">                                        <span class="string">&quot;Content-Type: text/html; charset-utf-8\r\n&quot;</span>+</span><br><span class="line">											<span class="comment">//空格换行</span></span><br><span class="line">                                        <span class="string">&quot;\r\n&quot;</span>;</span><br><span class="line">											<span class="comment">//判断账号和密码是否是我们期望的</span></span><br><span class="line">                                <span class="keyword">if</span>(<span class="string">&quot;admin&quot;</span>.equals(account) &amp;&amp; <span class="string">&quot;123&quot;</span>.equals(password))&#123;</span><br><span class="line">											<span class="comment">//如果满足条件也就是登录成功跳转到主页index.html</span></span><br><span class="line">                                                <span class="comment">//重定向状态码</span></span><br><span class="line">                                    response = <span class="string">&quot;HTTP/1.1 302 Found\r\n&quot;</span>+</span><br><span class="line">                                            <span class="comment">//成功,重定向到,index.html</span></span><br><span class="line">											<span class="comment">//让浏览器主动申请一次页面</span></span><br><span class="line">                                            <span class="string">&quot;Location: index.html\r\n&quot;</span>+</span><br><span class="line">											<span class="comment">//空格换行</span></span><br><span class="line">                                            <span class="string">&quot;\r\n&quot;</span>;</span><br><span class="line">                                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">											<span class="comment">//如果不满足条件也就是登录失败跳转到当前页面(登录页面)login.html</span></span><br><span class="line">											<span class="comment">//登录失败转发到login.html页面</span></span><br><span class="line">                                    file = <span class="string">&quot;login.html&quot;</span>;<span class="comment">//服务器内部读取一个文件,返回给浏览器</span></span><br><span class="line">                                &#125;</span><br><span class="line">                            &#125;</span><br><span class="line">									 <span class="comment">//将HTTP协议信息写出到浏览器中(响应回去)</span></span><br><span class="line">                            os.write(response.getBytes());</span><br><span class="line">									 <span class="comment">//判断如果file不为空，那么请求的就是index.html页面则执行方法体</span></span><br><span class="line">                            <span class="keyword">if</span>(file != <span class="literal">null</span>)&#123;</span><br><span class="line">									 <span class="comment">//文件输入流读取文件</span></span><br><span class="line">                                <span class="type">FileInputStream</span> <span class="variable">fis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(file);</span><br><span class="line">                                <span class="keyword">while</span>((len = fis.read(by)) != -<span class="number">1</span>)&#123;</span><br><span class="line">									 <span class="comment">//将读取到的页面字节数据写出到浏览器</span></span><br><span class="line">                                    os.write(by,<span class="number">0</span>,len);</span><br><span class="line">                                &#125;</span><br><span class="line">                            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                                <span class="comment">//将上面的HTTP协议信息和响应的数据写出到浏览器中</span></span><br><span class="line">                                os.write(response.getBytes());</span><br><span class="line">                                count++;</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                            System.out.println(<span class="string">&quot;没有读取到数据&quot;</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">                        <span class="keyword">try</span>&#123;</span><br><span class="line">                            <span class="keyword">if</span>(os != <span class="literal">null</span>)&#123;</span><br><span class="line">                                os.flush();<span class="comment">//将数据刷出</span></span><br><span class="line">                            &#125;</span><br><span class="line">                            <span class="keyword">if</span>(socket != <span class="literal">null</span>)&#123;</span><br><span class="line">                                <span class="comment">//上一段对话已经结束进行下一段对话</span></span><br><span class="line">                                socket.shutdownOutput();</span><br><span class="line">                                socket.close();<span class="comment">//关闭套接字资源</span></span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;<span class="keyword">catch</span>(IOException e)&#123;</span><br><span class="line">                            e.printStackTrace();</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 解析请求</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> msg</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Request <span class="title function_">parseRequest</span><span class="params">(String msg)</span>&#123;</span><br><span class="line">        <span class="type">Request</span> <span class="variable">request</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Request</span>();</span><br><span class="line">        String[] split = msg.split(<span class="string">&quot;\r\n&quot;</span>);</span><br><span class="line">		  <span class="comment">//解析第一行</span></span><br><span class="line">		  <span class="comment">//GET /favicon.ico HTTP/1.1</span></span><br><span class="line">        String[] split0 = split[<span class="number">0</span>].split(<span class="string">&quot; &quot;</span>);</span><br><span class="line">        request.setMethod(split0[<span class="number">0</span>]);<span class="comment">//method : GET</span></span><br><span class="line">        <span class="comment">//判断请求路径中是否包含?号</span></span><br><span class="line">        <span class="keyword">if</span>(split0[<span class="number">1</span>].contains(<span class="string">&quot;?&quot;</span>))&#123;</span><br><span class="line">            <span class="comment">// /login.do?account=admin&amp;password=123,以？号进行切割</span></span><br><span class="line">            String[] split1 =  split0[<span class="number">1</span>].split(<span class="string">&quot;[?]&quot;</span>);</span><br><span class="line">            <span class="comment">// /login.do</span></span><br><span class="line">            request.setUri(split1[<span class="number">0</span>]);</span><br><span class="line">            <span class="comment">// account=admin&amp;password=123</span></span><br><span class="line">            String[] split2 = split1[<span class="number">1</span>].split(<span class="string">&quot;[&amp;]&quot;</span>);</span><br><span class="line">            <span class="keyword">for</span>(String i:split2)&#123;</span><br><span class="line">                <span class="type">int</span> <span class="variable">idx</span> <span class="operator">=</span> i.indexOf(<span class="string">&quot;=&quot;</span>);</span><br><span class="line">                request.getParamMap().put(i.substring(<span class="number">0</span>,idx),i.substring(idx+<span class="number">1</span>));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            request.setUri(split0[<span class="number">1</span>]);<span class="comment">//uri : / 或者 /favicon.ico</span></span><br><span class="line">				<span class="comment">//获取请求头与请求体之间的位置</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">idx1</span> <span class="operator">=</span> msg.indexOf(<span class="string">&quot;\r\n\r\n&quot;</span>);</span><br><span class="line">				<span class="comment">//截取请求头与请求体之后字符串 m = account=admin&amp;password=123</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">m</span> <span class="operator">=</span> msg.substring(idx1+<span class="number">4</span>);</span><br><span class="line">				<span class="comment">//判断m截取的字符串中是否包含= , 因为即使没有请求体也会有它们之间的空格换行空格换行存在,判断=是判断是否存在后面account=admin&amp;password=123的数据</span></span><br><span class="line">            <span class="keyword">if</span>(m.contains(<span class="string">&quot;=&quot;</span>))&#123;</span><br><span class="line">				<span class="comment">//判断是否有请求头与请求体之间的空格</span></span><br><span class="line">                <span class="keyword">if</span>(idx1 != -<span class="number">1</span>)&#123;</span><br><span class="line">				<span class="comment">//将account=admin&amp;password=123 之间以&amp;进行切割</span></span><br><span class="line">                    String[] spli = m.split(<span class="string">&quot;[&amp;]&quot;</span>);</span><br><span class="line">				<span class="comment">//循环切割后的数据</span></span><br><span class="line">                    <span class="keyword">for</span>(String i:spli)&#123;</span><br><span class="line">				<span class="comment">//获取=的位置下标</span></span><br><span class="line">                        <span class="type">int</span> <span class="variable">index1</span> <span class="operator">=</span> i.indexOf(<span class="string">&quot;=&quot;</span>);</span><br><span class="line">				<span class="comment">//以键值对的形式获取=分隔开的数据存储到map集合中</span></span><br><span class="line">                        request.getParamMap().put(i.substring(<span class="number">0</span>,index1),i.substring(index1+<span class="number">1</span>));</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> request;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 将传入的整个二进制数据全部转换为十六进制的数据</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> by 接收字节数组</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> len 数据的大小</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String <span class="title function_">bytesArr2HexStr</span><span class="params">(<span class="type">byte</span>[] by,<span class="type">int</span> len)</span>&#123;</span><br><span class="line">		  <span class="comment">//使用StringBuffer来接收转换后的十六进制数据</span></span><br><span class="line">        <span class="type">StringBuffer</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuffer</span>();</span><br><span class="line">        <span class="type">StringBuffer</span> <span class="variable">sbLeft</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuffer</span>();</span><br><span class="line">        <span class="type">StringBuffer</span> <span class="variable">fenge</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuffer</span>();</span><br><span class="line">        <span class="type">StringBuffer</span> <span class="variable">sbRight</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuffer</span>();</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>;i &lt; len;i ++)&#123;</span><br><span class="line">				<span class="comment">//每追加一个十六进制数据就拼接一个空格</span></span><br><span class="line">            sbLeft.append(byte2Hex(by[i])+<span class="string">&quot; &quot;</span>);</span><br><span class="line">				<span class="comment">//判断可见字符的范围</span></span><br><span class="line">            <span class="keyword">if</span>(by[i] &gt;= <span class="number">0x20</span> &amp;&amp; by[i] &lt;= <span class="number">0x7e</span>)&#123;</span><br><span class="line">				<span class="comment">//将二进制数据转换为char字符拼接到StringBuffer中</span></span><br><span class="line">                sbRight.append((<span class="type">char</span>)by[i]);</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">				<span class="comment">//如果不在可见范围内则追加一个 . 即可</span></span><br><span class="line">                sbRight.append(<span class="string">&quot;.&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">				<span class="comment">//判断每第8个多追加一个空格 i+1避免第一个就满足条件</span></span><br><span class="line">            <span class="keyword">if</span>((i + <span class="number">1</span>) % <span class="number">8</span> == <span class="number">0</span>)</span><br><span class="line">                sbLeft.append(<span class="string">&quot; &quot;</span>);</span><br><span class="line">				<span class="comment">//判断每16个进行换行空格 i+1避免第一个就满足条件</span></span><br><span class="line">            <span class="keyword">if</span>(i % <span class="number">16</span> == <span class="number">0</span>)&#123;</span><br><span class="line">                fenge.append(<span class="string">&quot;.......&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>((i + <span class="number">1</span>) % <span class="number">16</span> == <span class="number">0</span>)&#123;</span><br><span class="line">                sb.append(fenge).append(sbLeft).append(fenge).append(sbRight).append(<span class="string">&quot;\r\n&quot;</span>);</span><br><span class="line">                sbLeft = <span class="keyword">new</span> <span class="title class_">StringBuffer</span>();</span><br><span class="line">                sbRight = <span class="keyword">new</span> <span class="title class_">StringBuffer</span>();</span><br><span class="line">                fenge = <span class="keyword">new</span> <span class="title class_">StringBuffer</span>();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        sb.append(fenge).append(sbLeft).append(<span class="string">&quot;  &quot;</span>).append(fenge).append(sbRight).append(<span class="string">&quot;\r\n&quot;</span>);</span><br><span class="line">		<span class="comment">//将StringBuffer转换为字符串并返回</span></span><br><span class="line">        <span class="keyword">return</span> sb.toString();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 3a -&gt; &quot;3A&quot;</span></span><br><span class="line"><span class="comment">     * a5 -&gt; &quot;A5&quot;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> bt</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String <span class="title function_">byte2Hex</span><span class="params">(<span class="type">byte</span> bt)</span>&#123;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 00111111</span></span><br><span class="line"><span class="comment">         * &amp;</span></span><br><span class="line"><span class="comment">         * 00001111</span></span><br><span class="line"><span class="comment">         * 操作:</span></span><br><span class="line"><span class="comment">         * 00001111</span></span><br><span class="line"><span class="comment">         * 结果：15 对应结果: F</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">lo</span> <span class="operator">=</span> bt &amp; <span class="number">0b00001111</span>;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 00111111</span></span><br><span class="line"><span class="comment">         * &amp;</span></span><br><span class="line"><span class="comment">         * 11110000</span></span><br><span class="line"><span class="comment">         * 操作:</span></span><br><span class="line"><span class="comment">         * 00110000</span></span><br><span class="line"><span class="comment">         * 结果:</span></span><br><span class="line"><span class="comment">         * 48</span></span><br><span class="line"><span class="comment">         * &gt;&gt; 4</span></span><br><span class="line"><span class="comment">         * 结果:</span></span><br><span class="line"><span class="comment">         * 24 12 6 3</span></span><br><span class="line"><span class="comment">         * 最终结果:</span></span><br><span class="line"><span class="comment">         * 3 对应结果 3</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">hi</span> <span class="operator">=</span> (bt &amp; <span class="number">0b11110000</span>) &gt;&gt; <span class="number">4</span>;</span><br><span class="line">        <span class="type">char</span> <span class="variable">clo</span> <span class="operator">=</span> arr[lo];</span><br><span class="line">        <span class="type">char</span> <span class="variable">chi</span> <span class="operator">=</span> arr[hi];</span><br><span class="line">        <span class="keyword">return</span> chi + <span class="string">&quot;&quot;</span> + clo;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

  </div>

   <footer>

    <div class="meta">
  <span class="item">
    <span class="icon">
      <i class="ic i-calendar-check"></i>
    </span>
    <span class="text">更新于</span>
    <time title="修改时间：2023-12-31 10:13:40" itemprop="dateModified" datetime="2023-12-31T10:13:40+08:00">2023-12-31</time>
  </span>
</div>

      
<div class="reward">
  <button><i class="ic i-heartbeat"></i> 赞赏</button>
  <p>请我喝[茶]~(￣▽￣)~*</p>
  <div id="qr">
      
      <div>
        <img data-src="/images/wechatpay.png" alt="Dkx 微信支付">
        <p>微信支付</p>
      </div>
      
      <div>
        <img data-src="/images/alipay.png" alt="Dkx 支付宝">
        <p>支付宝</p>
      </div>
      
      <div>
        <img data-src="/images/paypal.png" alt="Dkx 贝宝">
        <p>贝宝</p>
      </div>
  </div>
</div>

      

<div id="copyright">
<ul>
  <li class="author">
    <strong>本文作者： </strong>Dkx <i class="ic i-at"><em>@</em></i>Dkx の Java 小窝
  </li>
  <li class="link">
    <strong>本文链接：</strong>
    <a href="https://pigpigletsgo.github.io/2023/12/30/computer-science/java/%E7%BA%AFJava%E7%BC%96%E5%86%99%E4%BB%BF%E7%9C%9FHttp%E6%9C%8D%E5%8A%A1%E5%99%A8/" title="纯 java 仿写 http 服务器">https://pigpigletsgo.github.io/2023/12/30/computer-science/java/纯Java编写仿真Http服务器/</a>
  </li>
  <li class="license">
    <strong>版权声明： </strong>本站所有文章除特别声明外，均采用 <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> 许可协议。转载请注明出处！
  </li>
</ul>
</div>

  </footer>

</article>

  </div>
  

<div class="post-nav">
    <div class="item left">
      

  <a href="/2023/12/30/computer-science/java/data-structures-and-algorithms/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%92%8C%E7%AE%97%E6%B3%95/" itemprop="url" rel="prev" data-background-image="https:&#x2F;&#x2F;img.timelessq.com&#x2F;images&#x2F;2022&#x2F;07&#x2F;26&#x2F;5651daf17bf5de77514e658264d7cccc.jpg" title="数据结构与算法">
  <span class="type">上一篇</span>
  <span class="category"><i class="ic i-flag"></i> Java</span>
  <h3>数据结构与算法</h3>
  </a>

    </div>
    <div class="item right">
      

  <a href="/2023/12/30/computer-science/web/HTML5+CSS3/" itemprop="url" rel="next" data-background-image="https:&#x2F;&#x2F;img.timelessq.com&#x2F;images&#x2F;2022&#x2F;07&#x2F;26&#x2F;560306a4274d1fc26eb475dd52237387.jpg" title="HTML5+CSS3">
  <span class="type">下一篇</span>
  <span class="category"><i class="ic i-flag"></i> web</span>
  <h3>HTML5+CSS3</h3>
  </a>

    </div>
</div>

  
  <div class="wrap" id="comments"></div>


        </div>
        <div id="sidebar">
          

<div class="inner">

  <div class="panels">
    <div class="inner">
      <div class="contents panel pjax" data-title="文章目录">
          <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AF%B7%E6%B1%82"><span class="toc-number">1.</span> <span class="toc-text"> 请求🌗</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%93%8D%E5%BA%94"><span class="toc-number">2.</span> <span class="toc-text"> 响应😋</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AF%B7%E6%B1%82%E4%BF%A1%E6%81%AF%E5%8D%81%E5%85%AD%E8%BF%9B%E5%88%B6%E6%98%BE%E7%A4%BA%EF%B8%8F"><span class="toc-number">3.</span> <span class="toc-text"> 请求信息十六进制显示⚡️</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%86%E5%A4%9A%E4%B8%AA%E4%BA%8C%E8%BF%9B%E5%88%B6%E8%BD%AC%E5%8D%81%E5%85%AD%E8%BF%9B%E5%88%B6%E7%9A%84%E6%95%B0%E6%8D%AE%E6%8B%BC%E6%8E%A5%E6%89%93%E5%8D%B0%EF%B8%8F"><span class="toc-number">3.1.</span> <span class="toc-text"> 将多个二进制转十六进制的数据拼接打印☢️</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AF%B7%E6%B1%82%E5%A4%B4%E4%BF%A1%E6%81%AFascii%E7%A0%81%E6%98%BE%E7%A4%BA"><span class="toc-number">4.</span> <span class="toc-text"> 请求头信息 ASCII 码显示🌓</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9E%E6%98%BE%E4%B8%BB%E9%A1%B5%E5%92%8Cfavicon"><span class="toc-number">5.</span> <span class="toc-text"> 回显主页和 favicon🍨</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%BB%E9%A1%B5%E4%B8%AD%E6%9C%89img%E5%9B%BE%E7%89%87%E6%A0%87%E7%AD%BE"><span class="toc-number">6.</span> <span class="toc-text"> 主页中有 img 图片标签🏒</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%BB%E9%A1%B5%E8%B7%B3%E8%BD%AC%E5%88%B0%E7%99%BB%E5%BD%95%E9%A1%B5%E9%9D%A2"><span class="toc-number">7.</span> <span class="toc-text"> 主页跳转到登录页面🕋</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A1%A8%E5%8D%95%E7%99%BB%E5%BD%95%E5%9B%9E%E6%98%BE%E6%96%87%E6%9C%AC"><span class="toc-number">8.</span> <span class="toc-text"> 表单登录回显文本🍔</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BD%AC%E5%8F%91%E5%92%8C%E9%87%8D%E5%AE%9A%E5%90%91%EF%B8%8F"><span class="toc-number">9.</span> <span class="toc-text"> 转发和重定向⚡️</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#http%E5%93%8D%E5%BA%94%E4%BB%A3%E7%A0%81%EF%B8%8F"><span class="toc-number">9.1.</span> <span class="toc-text"> HTTP 响应代码⚡️</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8post%E6%96%B9%E5%BC%8F%E6%8F%90%E4%BA%A4%E8%A1%A8%E5%8D%95%EF%B8%8F"><span class="toc-number">10.</span> <span class="toc-text"> 使用 POST 方式提交表单☔️</span></a></li></ol>
      </div>
      <div class="related panel pjax" data-title="系列文章">
        <ul>
          <li class="active"><a href="/2023/12/30/computer-science/java/%E7%BA%AFJava%E7%BC%96%E5%86%99%E4%BB%BF%E7%9C%9FHttp%E6%9C%8D%E5%8A%A1%E5%99%A8/" rel="bookmark" title="纯java仿写http服务器">纯java仿写http服务器</a></li>
        </ul>
      </div>
      <div class="overview panel" data-title="站点概览">
        <div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <img class="image" itemprop="image" alt="Dkx"
      data-src="/images/avatar.jpg">
  <p class="name" itemprop="name">Dkx</p>
  <div class="description" itemprop="description">欢迎来我的博客空间</div>
</div>

<nav class="state">
    <div class="item posts">
      <a href="/archives/">
        <span class="count">7</span>
        <span class="name">文章</span>
      </a>
    </div>
    <div class="item categories">
      <a href="/categories/">
        <span class="count">10</span>
        <span class="name">分类</span>
      </a>
    </div>
</nav>

<div class="social">
      <span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL1BpZ1BpZ0xldHNHbw==" title="https:&#x2F;&#x2F;github.com&#x2F;PigPigLetsGo"><i class="ic i-github"></i></span>
      <span class="exturl item twitter" data-url="aHR0cHM6Ly90d2l0dGVyLmNvbS9Ea3gxMjE5" title="https:&#x2F;&#x2F;twitter.com&#x2F;Dkx1219"><i class="ic i-twitter"></i></span>
      <span class="exturl item zhihu" data-url="aHR0cHM6Ly93d3cuemhpaHUuY29tL3Blb3BsZS96dWktaG91LXllLWJlaS1sdWUtc2hh" title="https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;zui-hou-ye-bei-lue-sha"><i class="ic i-zhihu"></i></span>
      <span class="exturl item music" data-url="aHR0cHM6Ly9tdXNpYy4xNjMuY29tLyMvdXNlci9ob21lP2lkPTU3NjUxMDQ1OQ==" title="https:&#x2F;&#x2F;music.163.com&#x2F;#&#x2F;user&#x2F;home?id&#x3D;576510459"><i class="ic i-cloud-music"></i></span>
      <span class="exturl item weibo" data-url="aHR0cHM6Ly93d3cud2VpYm8uY29tL3UvNTk5OTU0OTg0MQ==" title="https:&#x2F;&#x2F;www.weibo.com&#x2F;u&#x2F;5999549841"><i class="ic i-weibo"></i></span>
      <span class="exturl item facebook" data-url="aHR0cHM6Ly93d3cuZmFjZWJvb2suY29tL3Byb2ZpbGUucGhwP2lkPTEwMDA5NDA4Nzc0ODIwMQ==" title="https:&#x2F;&#x2F;www.facebook.com&#x2F;profile.php?id&#x3D;100094087748201"><i class="ic i-facebook"></i></span>
      <span class="exturl item youtube" data-url="aHR0cHM6Ly93d3cueW91dHViZS5jb20vQERreC12djdsbQ==" title="https:&#x2F;&#x2F;www.youtube.com&#x2F;@Dkx-vv7lm"><i class="ic i-youtube"></i></span>
      <span class="exturl item instagram" data-url="aHR0cHM6Ly93d3cuaW5zdGFncmFtLmNvbS9kb3Vka3g/aWdzaD1PR1E1WkRjMk9EazJaQSUzRCUzRCZ1dG1fc291cmNlPXFy" title="https:&#x2F;&#x2F;www.instagram.com&#x2F;doudkx?igsh&#x3D;OGQ5ZDc2ODk2ZA%3D%3D&amp;utm_source&#x3D;qr"><i class="ic i-instagram"></i></span>
      <span class="exturl item telegram" data-url="aHR0cHM6Ly90Lm1lL2RvdTAxMDg=" title="https:&#x2F;&#x2F;t.me&#x2F;dou0108"><i class="ic i-twitter"></i></span>
</div>

<ul class="menu">
  
    
  <li class="item">
    <a href="/" rel="section"><i class="ic i-home"></i>首页</a>
  </li>

        
  <li class="item dropdown">
      <a href="javascript:void(0);"><i class="ic i-feather"></i>文章</a>
    <ul class="submenu">

        
  <li class="item">
    <a href="/archives/" rel="section"><i class="ic i-list-alt"></i>归档</a>
  </li>

        
  <li class="item">
    <a href="/categories/" rel="section"><i class="ic i-th"></i>分类</a>
  </li>

        
  <li class="item">
    <a href="/tags/" rel="section"><i class="ic i-tags"></i>标签</a>
  </li>

  </ul>
    
  <li class="item">
    <a href="/friends/" rel="section"><i class="ic i-heart"></i>friends</a>
  </li>

    
  <li class="item">
    <a href="/links/" rel="section"><i class="ic i-magic"></i>links</a>
  </li>


</ul>

      </div>
    </div>
  </div>

  <ul id="quick">
    <li class="prev pjax">
        <a href="/2023/12/30/computer-science/java/data-structures-and-algorithms/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%92%8C%E7%AE%97%E6%B3%95/" rel="prev" title="上一篇"><i class="ic i-chevron-left"></i></a>
    </li>
    <li class="up"><i class="ic i-arrow-up"></i></li>
    <li class="down"><i class="ic i-arrow-down"></i></li>
    <li class="next pjax">
        <a href="/2023/12/30/computer-science/web/HTML5+CSS3/" rel="next" title="下一篇"><i class="ic i-chevron-right"></i></a>
    </li>
    <li class="percent"></li>
  </ul>
</div>


        </div>
        <div class="dimmer"></div>
      </div>
    </main>
    <footer id="footer">
      <div class="inner">
        <div class="widgets">
          
<div class="rpost pjax">
  <h2>随机文章</h2>
  <ul>
      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/void/" title="分类于 void">void</a>
<i class="ic i-angle-right"></i>
<a href="/categories/void/Reality/" title="分类于 Reality">Reality</a>
<i class="ic i-angle-right"></i>
<a href="/categories/void/Reality/movie/" title="分类于 movie">movie</a>
</div>

    <span><a href="/2023/12/30/void/movie/Reality/%E5%8A%A0%E8%8F%B2%E7%8C%AB%E7%94%B5%E5%BD%B1/" title="加菲猫-电影">加菲猫-电影</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/void/" title="分类于 void">void</a>
<i class="ic i-angle-right"></i>
<a href="/categories/void/animation/" title="分类于 animation">animation</a>
<i class="ic i-angle-right"></i>
<a href="/categories/void/animation/movie/" title="分类于 movie">movie</a>
</div>

    <span><a href="/2023/12/31/void/movie/animation/%E5%86%B0%E6%B2%B3%E4%B8%96%E7%BA%AA/" title="冰河世纪">冰河世纪</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/computer-science/" title="分类于 计算机学科">计算机学科</a>
<i class="ic i-angle-right"></i>
<a href="/categories/computer-science/data-structures-and-algorithms/" title="分类于 数据结构与算法">数据结构与算法</a>
<i class="ic i-angle-right"></i>
<a href="/categories/computer-science/data-structures-and-algorithms/java/" title="分类于 Java">Java</a>
</div>

    <span><a href="/2023/12/30/computer-science/java/data-structures-and-algorithms/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%92%8C%E7%AE%97%E6%B3%95/" title="数据结构与算法">数据结构与算法</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/void/" title="分类于 void">void</a>
<i class="ic i-angle-right"></i>
<a href="/categories/void/animation/" title="分类于 animation">animation</a>
<i class="ic i-angle-right"></i>
<a href="/categories/void/animation/movie/" title="分类于 movie">movie</a>
</div>

    <span><a href="/2023/12/30/void/movie/animation/%E7%90%A6%E5%AE%AB%E5%A5%87%E9%AA%8F-%E5%8D%83%E4%B8%8E%E5%8D%83%E5%AF%BB/" title="琦宫奇骏-千与千寻">琦宫奇骏-千与千寻</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/computer-science/" title="分类于 计算机学科">计算机学科</a>
<i class="ic i-angle-right"></i>
<a href="/categories/computer-science/data-structures-and-algorithms/" title="分类于 数据结构与算法">数据结构与算法</a>
<i class="ic i-angle-right"></i>
<a href="/categories/computer-science/data-structures-and-algorithms/java/" title="分类于 Java">Java</a>
</div>

    <span><a href="/2023/12/30/computer-science/java/data-structures-and-algorithms/%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE-%E8%AF%A6%E7%BB%86/" title="二分查找[详细]">二分查找[详细]</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/web/" title="分类于 web">web</a>
</div>

    <span><a href="/2023/12/30/computer-science/web/HTML5+CSS3/" title="HTML5+CSS3">HTML5+CSS3</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/computer-science/" title="分类于 计算机学科">计算机学科</a>
<i class="ic i-angle-right"></i>
<a href="/categories/computer-science/java/" title="分类于 Java">Java</a>
</div>

    <span><a href="/2023/12/30/computer-science/java/%E7%BA%AFJava%E7%BC%96%E5%86%99%E4%BB%BF%E7%9C%9FHttp%E6%9C%8D%E5%8A%A1%E5%99%A8/" title="纯java仿写http服务器">纯java仿写http服务器</a></span>
  </li>

  </ul>
</div>

        </div>
        <div class="status">
  <div class="copyright">
    
    &copy; 2010 – 
    <span itemprop="copyrightYear">2023</span>
    <span class="with-love">
      <i class="ic i-sakura rotate"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Dkx @ Dou的个人博客</span>
  </div>
  <div class="count">
    <span class="post-meta-item-icon">
      <i class="ic i-chart-area"></i>
    </span>
    <span title="站点总字数">392k 字</span>

    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="ic i-coffee"></i>
    </span>
    <span title="站点阅读时长">5:56</span>
  </div>
  <div class="powered-by">
    基于 <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span>
  </div>
</div>

      </div>
    </footer>
  </div>
<script data-config type="text/javascript">
  var LOCAL = {
    path: '2023/12/30/computer-science/java/纯Java编写仿真Http服务器/',
    favicon: {
      show: "（●´3｀●）やれやれだぜ",
      hide: "(´Д｀)大変だ！"
    },
    search : {
      placeholder: "文章搜索",
      empty: "关于 「 ${query} 」，什么也没搜到",
      stats: "${time} ms 内找到 ${hits} 条结果"
    },
    valine: true,fancybox: true,
    copyright: '复制成功，转载请遵守 <i class="ic i-creative-commons"></i>BY-NC-SA 协议。',
    ignores : [
      function(uri) {
        return uri.includes('#');
      },
      function(uri) {
        return new RegExp(LOCAL.path+"$").test(uri);
      }
    ]
  };
</script>

<script src="https://cdn.polyfill.io/v2/polyfill.js"></script>

<script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script>

<script src="/js/app.js?v=0.2.5"></script>




</body>
</html>
