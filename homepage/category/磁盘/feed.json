{
    "version": "https://jsonfeed.org/version/1",
    "title": "homepage • All posts by \"磁盘\" category",
    "description": "欢迎来我的博客空间",
    "home_page_url": "https://pigpigletsgo.github.io/homepage",
    "items": [
        {
            "id": "https://pigpigletsgo.github.io/homepage/2024/02/08/computer-science/linux/%E7%A3%81%E7%9B%98/%E6%9F%A5%E8%AF%A2%E7%A3%81%E7%9B%98%E6%83%85%E5%86%B5/",
            "url": "https://pigpigletsgo.github.io/homepage/2024/02/08/computer-science/linux/%E7%A3%81%E7%9B%98/%E6%9F%A5%E8%AF%A2%E7%A3%81%E7%9B%98%E6%83%85%E5%86%B5/",
            "title": "linux查询磁盘情况",
            "date_published": "2024-02-08T04:43:41.809Z",
            "content_html": "<h2 id=\"查询磁盘情况\"><a class=\"anchor\" href=\"#查询磁盘情况\">#</a> 查询磁盘情况</h2>\n<p>基本语法:</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">df</span> <span class=\"token parameter variable\">-h</span></pre></td></tr></table></figure><p>查询系统整体磁盘使用情况</p>\n<p><img data-src=\"https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/image_2023-01-05-19-25-29.png\" alt=\"image_2023-01-05-19-25-29\" /></p>\n<p><strong>参数说明</strong>：</p>\n<p>Filesystem：标识该文件系统位于哪个分区，因此该列显示的是设备名称；</p>\n<p>1K-blocks：此列表示文件系统的总大小，默认以 KB 为单位</p>\n<p>Used：表示用掉的硬盘空间大小</p>\n<p>Available：表示剩余的硬盘空间大小</p>\n<p>Use%：硬盘空间使用率，如果使用率高达 90% 以上，就需要额外注意，因为容量不足，会严重影响系统的正常运行</p>\n<p>Mounted on：文件系统的挂载点，也就是硬盘挂载的目录位置</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">du</span> <span class=\"token parameter variable\">-h</span> /目录</pre></td></tr></table></figure><p>查询指定目录的磁盘占用情况，默认为当前目录</p>\n<ul>\n<li>参数:</li>\n</ul>\n<p>-s 指定目录占用大小汇总</p>\n<p>-h 带计量单位</p>\n<p>-a 含文件</p>\n<p>--max-depth=1 子目录深度</p>\n<p>-c 列出明细的同时，增加汇总值</p>\n<p>应用实例:</p>\n<p>查询 /opt 目录的磁盘占用情况，深度为 1</p>\n<p><img data-src=\"https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/image-20240208124032631.png\" alt=\"image-20240208124032631\" /></p>\n<blockquote>\n<p>练习</p>\n</blockquote>\n<ul>\n<li>统计 /opt 目录下的文件数量</li>\n</ul>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">#ll 列出 目录 | 管道 过滤 以 - 开头的 | 管道 wc:wordcount 统计文件数量 -l 显示统计数量</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>dkx@192  ~  ll /opt<span class=\"token operator\">|</span><span class=\"token function\">grep</span> <span class=\"token string\">'^-'</span><span class=\"token operator\">|</span><span class=\"token function\">wc</span> <span class=\"token parameter variable\">-l</span>                                                                                        ✔  <span class=\"token number\">901</span>  06:38:02</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token number\">2</span></pre></td></tr></table></figure><ul>\n<li>统计 /opt 文件夹下目录的个数</li>\n</ul>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">#文件都是以 d 开头的:dwrxwrxwrx</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre> dkx@192  ~  ll /opt<span class=\"token operator\">|</span><span class=\"token function\">grep</span> <span class=\"token string\">'^d'</span><span class=\"token operator\">|</span><span class=\"token function\">wc</span> <span class=\"token parameter variable\">-l</span>                                                                                        ✔  <span class=\"token number\">902</span>  06:38:22</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token number\">4</span></pre></td></tr></table></figure><ul>\n<li>统计 /opt 文件夹下文件的个数，包括子文件夹里的</li>\n</ul>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">#-R 递归显示出所有的文件个数，然后统计数量</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre> dkx@192  ~  ll <span class=\"token parameter variable\">-R</span> /opt<span class=\"token operator\">|</span><span class=\"token function\">grep</span> <span class=\"token string\">'^-'</span><span class=\"token operator\">|</span><span class=\"token function\">wc</span> <span class=\"token parameter variable\">-l</span>                                                                                     ✔  <span class=\"token number\">904</span>  06:48:48</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token number\">1302</span></pre></td></tr></table></figure><ul>\n<li>统计 /opt 文件夹下目录的个数，包括子文件夹里的</li>\n</ul>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">#-R 递归显示出所有的文件夹个数，然后统计数量</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre> dkx@192  ~  ll <span class=\"token parameter variable\">-R</span> /opt<span class=\"token operator\">|</span><span class=\"token function\">grep</span> <span class=\"token string\">'^d'</span><span class=\"token operator\">|</span><span class=\"token function\">wc</span> <span class=\"token parameter variable\">-l</span>                                                                                     ✔  <span class=\"token number\">903</span>  06:47:27</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token number\">161</span></pre></td></tr></table></figure>",
            "tags": [
                "linux",
                "计算机学科"
            ]
        },
        {
            "id": "https://pigpigletsgo.github.io/homepage/2024/02/08/computer-science/linux/%E7%A3%81%E7%9B%98/Linux%E5%88%86%E5%8C%BA%E6%9C%BA%E5%88%B6/",
            "url": "https://pigpigletsgo.github.io/homepage/2024/02/08/computer-science/linux/%E7%A3%81%E7%9B%98/Linux%E5%88%86%E5%8C%BA%E6%9C%BA%E5%88%B6/",
            "title": "Linux分区",
            "date_published": "2024-02-08T04:43:41.799Z",
            "content_html": "<h2 id=\"linux分区\"><a class=\"anchor\" href=\"#linux分区\">#</a> Linux 分区</h2>\n<p>原理介绍</p>\n<ol>\n<li>\n<p>对 Linux 来说无论有几个分区，分给哪一目录使用，它归根结底就只有一个根目录，一个独立且唯一的文件结构，Linux 中每个分区都是用来组成整个文件系统的一部分</p>\n</li>\n<li>\n<p>Linux 采用了一种叫 <code>载入</code>  的处理方法，它的整个文件系统中包含了一整套的文件和目录，且将一个分区和一个目录联系起来，这时要载入的一个分区将使它的存储空间在一个目录下获得</p>\n</li>\n</ol>\n<p><img data-src=\"https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/image_2023-01-05-18-11-08.png\" alt=\"image_2023-01-05-18-11-08\" /></p>\n<ul>\n<li>查看所有设备挂载情况</li>\n</ul>\n<p>命令: <code>lsblk</code>  或者 <code>lsblk -f</code></p>\n<p>参数: -f : 显示文件系统信息</p>\n<p>​\t\t -m : 显示权限信息</p>\n<p><img data-src=\"https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/image-20240208124153263.png\" alt=\"image-20240208124153263\" /></p>\n<ul>\n<li>硬盘说明</li>\n</ul>\n<ol>\n<li>\n<p>Linux 硬盘分 IDE 硬盘和 SCSI 硬盘，目前基本上是 SCSI 硬盘</p>\n</li>\n<li>\n<p>对于 &lt;font color='red'&gt;IDE 硬盘 &lt;/font&gt;, 驱动器标识符为 &quot;hdx~&quot;, 其中 &quot;hd&quot; 表明分区所在设备的类型，这里是指 IDE 硬盘了.&quot;x&quot; 为盘号 (a 为基本盘，b 为基本从属盘，c 为辅助主盘，d 为辅助从属盘), &quot;~&quot; 代表分区，前四个分区用数字 1 到 4 表示，它们是主分区或扩展分区，从 5 开始就是逻辑分区。例:hda3 表示为第一个 IDE 硬盘上的第三个主分区或扩展分区，hdb2 表示为第二个 IDE 硬盘上的第二个主分区或扩展分区</p>\n</li>\n<li>\n<p>对于 &lt;font color='red'&gt;SCSI 硬盘 &lt;/font &gt; 则标识为 &quot;sdx~&quot;, SCSI 硬盘是用 &quot;sd&quot; 来表示分区所在设备的类型的，其余则和 IDE 硬盘的表示方法一样</p>\n</li>\n</ol>\n<h3 id=\"增加硬盘\"><a class=\"anchor\" href=\"#增加硬盘\">#</a> 增加硬盘</h3>\n<p>虚拟机增加硬盘的步骤</p>\n<p>在 [虚拟机] 菜单中，选择 [设置], 然后设备列表里添加硬盘，然后一路 [下一步], 中间只有选择磁盘大小的地方需要修改，直到完成，然后 &lt; font color='red'&gt; 重启系统 &lt;/font&gt;(才能识别！)</p>\n<p><img data-src=\"https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/image_2023-01-05-18-18-02.png\" alt=\"image_2023-01-05-18-18-02\" /></p>\n<p><img data-src=\"https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/image-20240208124211316.png\" alt=\"image-20240208124211316\" /></p>\n<p><img data-src=\"https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/image_2023-01-05-18-19-22.png\" alt=\"image_2023-01-05-18-19-22\" /></p>\n<p><img data-src=\"https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/image_2023-01-05-18-20-05.png\" alt=\"image_2023-01-05-18-20-05\" /></p>\n<p><img data-src=\"https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/image_2023-01-05-18-22-53.png\" alt=\"image_2023-01-05-18-22-53\" /></p>\n<blockquote>\n<p>分区</p>\n</blockquote>\n<p>分区命令: <code>fdisk /dev/sdb</code></p>\n<p>/dev: 字符设备文件</p>\n<p>开始对 /sdb 分区</p>\n<ul>\n<li>\n<p>m 显示命令列表</p>\n</li>\n<li>\n<p>p 显示磁盘分区 同 fdisk -l</p>\n</li>\n<li>\n<p>n 新增分区</p>\n</li>\n<li>\n<p>d 删除分区</p>\n</li>\n<li>\n<p>w 写入并退出</p>\n</li>\n</ul>\n<p>说明：开始分区后输入 n, 新增分区，然后选择 p, 分区类型为主分区，两次回车默认剩余全部空间，最后输入 w 写入分区并退出，若不保存退出输入 q</p>\n<p><img data-src=\"https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/image_2023-01-05-18-33-34.png\" alt=\"image_2023-01-05-18-33-34\" /></p>\n<h3 id=\"格式化磁盘\"><a class=\"anchor\" href=\"#格式化磁盘\">#</a> 格式化磁盘</h3>\n<p>分区命令: <code>mkfs -t ext4 /dev/sdb1</code></p>\n<p><img data-src=\"https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/1286512-20190206141059483-251392832.png\" alt=\"img\" /></p>\n<p>其中 ext4 是分区类型</p>\n<p><img data-src=\"https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/image-20240208124231127.png\" alt=\"image-20240208124231127\" /></p>\n<p>挂载：将一个分区与一个目录联系起来</p>\n<p>mount   设备名称  挂载目录</p>\n<ul>\n<li>挂载分区: <code>mount /dev/sdb1 /newdisk</code></li>\n</ul>\n<p><img data-src=\"https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/image-20240208124240563.png\" alt=\"image-20240208124240563\" /></p>\n<p><img data-src=\"https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/image-20240208124255145.png\" alt=\"image-20240208124255145\" /></p>\n<ul>\n<li>注意:&lt;font color='red'&gt; 用命令挂载重启后会生效 &lt;/font&gt;</li>\n</ul>\n<blockquote>\n<p>断开挂载点：注意切出挂载点目录</p>\n</blockquote>\n<ul>\n<li>断开挂载点: <code>umount /dev/sdb1</code></li>\n</ul>\n<p><img data-src=\"https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/image-20240208124305347.png\" alt=\"image-20240208124305347\" /></p>\n<p><img data-src=\"https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/image-20240208124323320.png\" alt=\"image-20240208124323320\" /></p>\n<blockquote>\n<p>永久挂载</p>\n</blockquote>\n<p>通过修改 <code>/etc/fstab</code>  实现挂载</p>\n<p>添加完成后 执行 mount -a 立刻生效</p>\n<p>第一个数组：0/1 = 备份 / 不备份，第二个数字：2/1/0 = 根目录 / 其它目录文件检查 / 不检查</p>\n<p><img data-src=\"https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/image_2023-01-05-19-07-32.png\" alt=\"image_2023-01-05-19-07-32\" /></p>\n<p>重启之后还是挂载的状态说明成功了</p>\n<p><img data-src=\"https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/image_2023-01-05-19-09-52.png\" alt=\"image_2023-01-05-19-09-52\" /></p>\n",
            "tags": [
                "linux",
                "计算机学科"
            ]
        }
    ]
}