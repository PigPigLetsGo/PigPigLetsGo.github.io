{
    "version": "https://jsonfeed.org/version/1",
    "title": "homepage • All posts by \"vue\" category",
    "description": "欢迎来我的博客空间",
    "home_page_url": "https://pigpigletsgo.github.io/homepage",
    "items": [
        {
            "id": "https://pigpigletsgo.github.io/homepage/2024/02/12/computer-science/web/vue/%E9%85%8D%E7%BD%AE@%E6%9B%BF%E4%BB%A3src%E7%9B%AE%E5%BD%95/",
            "url": "https://pigpigletsgo.github.io/homepage/2024/02/12/computer-science/web/vue/%E9%85%8D%E7%BD%AE@%E6%9B%BF%E4%BB%A3src%E7%9B%AE%E5%BD%95/",
            "title": "配置@代替src目录",
            "date_published": "2024-02-12T11:08:25.837Z",
            "content_html": "<h2 id=\"配置\"><a class=\"anchor\" href=\"#配置\">#</a> 配置</h2>\n<h5 id=\"1-安装path模块\"><a class=\"anchor\" href=\"#1-安装path模块\">#</a> 1 安装 path 模块</h5>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>npm i path <span class=\"token operator\">--</span>save<span class=\"token operator\">-</span>dev</pre></td></tr></table></figure><h5 id=\"2-配置jsconfigjs\"><a class=\"anchor\" href=\"#2-配置jsconfigjs\">#</a> 2 配置 jsconfig.js</h5>\n<p>一般项目自动生成的配置如下：</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token string-property property\">\"compilerOptions\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token string-property property\">\"target\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"es5\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token string-property property\">\"module\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"esnext\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token string-property property\">\"baseUrl\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"./\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token string-property property\">\"moduleResolution\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"node\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token string-property property\">\"paths\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>      <span class=\"token string-property property\">\"@/*\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token string\">\"src/*\"</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>      <span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token string-property property\">\"lib\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>      <span class=\"token string\">\"esnext\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>      <span class=\"token string\">\"dom\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>      <span class=\"token string\">\"dom.iterable\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>      <span class=\"token string\">\"scripthost\"</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>   <span class=\"token string-property property\">\"compilerOptions\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>      <span class=\"token string-property property\">\"baseUrl\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"./\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>      <span class=\"token string-property property\">\"paths\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>         <span class=\"token string-property property\">\"@/*\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"src/*\"</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>   <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>   <span class=\"token string-property property\">\"exclude\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"node_modules\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"dist\"</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h5 id=\"3-配置vueconfigjs\"><a class=\"anchor\" href=\"#3-配置vueconfigjs\">#</a> 3 配置 vue.config.js</h5>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// 配置 configureWebpack</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token string\">'use strict'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">const</span> path <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'path'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">resolve</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">dir</span> <span class=\"token operator\">=></span> path<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span>__dirname<span class=\"token punctuation\">,</span> dir<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre> </pre></td></tr><tr><td data-num=\"6\"></td><td><pre>module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token literal-property property\">configureWebpack</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'vue Element Admin'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token literal-property property\">resolve</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>      <span class=\"token literal-property property\">alias</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token string-property property\">'@'</span><span class=\"token operator\">:</span> <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token string\">'src'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure>",
            "tags": [
                "计算机学科",
                "vue3",
                "代码经验"
            ]
        },
        {
            "id": "https://pigpigletsgo.github.io/homepage/2024/02/12/computer-science/web/vue/Vue%E6%A6%82%E8%BF%B0/",
            "url": "https://pigpigletsgo.github.io/homepage/2024/02/12/computer-science/web/vue/Vue%E6%A6%82%E8%BF%B0/",
            "title": "Vue概述",
            "date_published": "2024-02-12T11:08:25.830Z",
            "content_html": "<h2 id=\"vue是什么\"><a class=\"anchor\" href=\"#vue是什么\">#</a> Vue 是什么</h2>\n<p><strong>概念</strong>：Vue 是一个用于 &lt;font title='red'&gt; 构建用户界面 &lt;/font&gt;<sup>①</sup> 的渐进式<sup>②</sup> 框架<sup>③</sup></p>\n<h5 id=\"一构建用户界面\"><a class=\"anchor\" href=\"#一构建用户界面\">#</a> 一，构建用户界面</h5>\n<p><img data-src=\"https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202308180941519.png\" alt=\"image-20230818094153365\" /></p>\n<p>将数据构建成用户所能看懂的数据，然后再加上一些样式就能呈现出用户想要看到的效果。</p>\n<p><img data-src=\"https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202308180943636.png\" alt=\"image-20230818094238563\" /></p>\n<blockquote>\n<p>基于数据去结构渲染用户所能看到的页面这一整个过程就是构建用户界面的过程。</p>\n</blockquote>\n<h5 id=\"二渐进式\"><a class=\"anchor\" href=\"#二渐进式\">#</a> 二，渐进式</h5>\n<p>什么是渐进呢。翻译过来就是：循序渐进。</p>\n<p><img data-src=\"https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202308180944749.png\" alt=\"image-20230818093850521\" /></p>\n<p>&lt;span alt='solid'&gt;Vue 的两种使用方式 &lt;/span&gt;：</p>\n<ol>\n<li>Vue 核心包开发\n<ul>\n<li><strong>场景</strong>：&lt;font title='red'&gt; 局部 &lt;/font &gt; 模块改造</li>\n</ul>\n</li>\n<li>Vue 核心包 &amp; Vue 插件 工程化开发\n<ul>\n<li><strong>场景</strong>：&lt;font title='red'&gt; 整站 &lt;/font&gt; 开发</li>\n</ul>\n</li>\n</ol>\n<h5 id=\"三框架\"><a class=\"anchor\" href=\"#三框架\">#</a> 三，框架</h5>\n<p>框架是什么？框架 -》 一套完整的项目解决方案 ，是专门用来开发 中大型项目的。</p>\n<h6 id=\"使用框架的好处\"><a class=\"anchor\" href=\"#使用框架的好处\">#</a> 使用框架的好处</h6>\n<p><strong>优点</strong>：大大提升开发效率 (&lt;span alt='solid'&gt;70% ↑&lt;/span&gt;)</p>\n<p><strong>缺点</strong>：需要理解记忆 &lt;font title='red'&gt; 规则 &lt;/font&gt; -》 官网</p>\n<blockquote>\n<p>&lt;span alt='solid'&gt; 总结 &lt;/span&gt;：</p>\n<ol>\n<li>Vue 是什么？\n<ul>\n<li>Vue 是一个用于 &lt;font title='red'&gt; 构建用户界面 &lt;/font&gt; 的 &lt;font title='red'&gt; 渐进式 框架 &lt;/font&gt;.\n<ol>\n<li>构建用户界面：基于 &lt;font title='red'&gt; 数据动态 &lt; font title='red'&gt; 渲染 &lt;/font &gt; 页面</li>\n<li>渐进式：&lt;font title='red'&gt; 循序渐进 &lt;/font &gt; 的学习</li>\n<li>框架：一套完整的项目解决方案，&lt;font title='red'&gt; 提升开发效率 &lt;/font&gt; ↑ (理解记忆 &lt; font title='red'&gt; 规则 &lt;/font&gt;)\n<ol>\n<li>规则 -》官网文档查看</li>\n</ol>\n</li>\n</ol>\n</li>\n</ul>\n</li>\n</ol>\n</blockquote>\n",
            "tags": [
                "计算机学科",
                "介绍",
                "vue3"
            ]
        },
        {
            "id": "https://pigpigletsgo.github.io/homepage/2024/01/24/computer-science/web/vue/vue3/%E9%85%8D%E7%BD%AE%E4%BB%A3%E7%A0%81%E6%A3%80%E6%9F%A5%E5%B7%A5%E4%BD%9C%E6%B5%81/",
            "url": "https://pigpigletsgo.github.io/homepage/2024/01/24/computer-science/web/vue/vue3/%E9%85%8D%E7%BD%AE%E4%BB%A3%E7%A0%81%E6%A3%80%E6%9F%A5%E5%B7%A5%E4%BD%9C%E6%B5%81/",
            "title": "vue3-提交前做代码检查",
            "date_published": "2024-01-24T10:48:46.831Z",
            "content_html": "<h2 id=\"提交前做代码检查\"><a class=\"anchor\" href=\"#提交前做代码检查\">#</a> 提交前做代码检查</h2>\n<p>一定要保证代码在丢到仓库里面之前，一定保证代码全部都是规范的，然后再进仓库才是合理的。不然不规范的代码放进仓库了，然后后面的同事拉取代码结果一堆报错人家还要修改你送过来的报错。 那么需要再提交之前做代码的规范检查使用 husky 这个工具来完成。</p>\n<p>husky 是基于 git 的 hooks 工具。hooks 工具可以理解为就是钩子，可以在特定的时机执行特定的命令。比如 vue 的生命周期其中也有了解过钩子的说法。</p>\n<p><strong>如下操作步骤</strong>：</p>\n<ol>\n<li>\n<p>初始化 git 仓库，执行 git init 即可</p>\n</li>\n<li>\n<p>初始化 husky 工具配置，执行  <code>pnpm dlx husky-init &amp;&amp; pnpm install</code>  即可</p>\n<p>官网： <span class=\"exturl\" data-url=\"aHR0cHM6Ly90eXBpY29kZS5naXRodWIuaW8vaHVza3kv\">https://typicode.github.io/husky/</span></p>\n</li>\n<li>\n<p>修改 <code>.husky/pre-commit</code>  文件</p>\n<p>- 表示删除线</p>\n<p>我们把原来有的 npm test 删掉，然后换成 pnpm lint</p>\n<p><strong>pnpm lint 作用</strong>：对整个项目当中所有文件进行校验，并且发现有错误的地方会自动修复</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token operator\">-</span>n<span class=\"token operator\">-</span>p<span class=\"token operator\">-</span>m<span class=\"token operator\">-</span> <span class=\"token operator\">-</span>t<span class=\"token operator\">-</span>e<span class=\"token operator\">-</span>s<span class=\"token operator\">-</span>t<span class=\"token operator\">-</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token operator\">+</span>pnpm lint</pre></td></tr></table></figure><p>&lt;font title='red'&gt; 问题 &lt;/font&gt;：默认进行的是全量检查，&lt;font title='red'&gt; 耗时 &lt;/font &gt; 问题，&lt;font title='red'&gt; 历史 &lt;/font &gt; 问题。</p>\n</li>\n</ol>\n<p><strong>演示</strong>：</p>\n<figure class=\"highlight sh\"><figcaption data-lang=\"sh\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>Administrator@Jfier MINGW64 /e/vue/Demo7/Demo/vue3-big-event-admin</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>$ <span class=\"token function\">git</span> init</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>hint: Using <span class=\"token string\">'master'</span> as the name <span class=\"token keyword\">for</span> the initial branch. This default branch name</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>hint: is subject to change. To configure the initial branch name to use <span class=\"token keyword\">in</span> all</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>hint: of your new repositories, <span class=\"token function\">which</span> will suppress this warning, call:</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>hint:</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>hint:   <span class=\"token function\">git</span> config <span class=\"token parameter variable\">--global</span> init.defaultBranch <span class=\"token operator\">&lt;</span>name<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>hint:</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>hint: Names commonly chosen instead of <span class=\"token string\">'master'</span> are <span class=\"token string\">'main'</span>, <span class=\"token string\">'trunk'</span> and</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>hint: <span class=\"token string\">'development'</span><span class=\"token builtin class-name\">.</span> The just-created branch can be renamed via this command:</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>hint:</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>hint:   <span class=\"token function\">git</span> branch <span class=\"token parameter variable\">-m</span> <span class=\"token operator\">&lt;</span>name<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>Initialized empty Git repository <span class=\"token keyword\">in</span> E:/Vue/Demo7/Demo/vue3-big-event-admin/.git/</pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>Administrator@Jfier MINGW64 /e/vue/Demo7/Demo/vue3-big-event-admin <span class=\"token punctuation\">(</span>master<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>$ <span class=\"token function\">pnpm</span> dlx husky-init <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">pnpm</span> <span class=\"token function\">install</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>Packages: +2</pre></td></tr><tr><td data-num=\"18\"></td><td><pre>++</pre></td></tr><tr><td data-num=\"19\"></td><td><pre>Progress: resolved <span class=\"token number\">2</span>, reused <span class=\"token number\">0</span>, downloaded <span class=\"token number\">2</span>, added <span class=\"token number\">2</span>, <span class=\"token keyword\">done</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>husky-init updating package.json</pre></td></tr><tr><td data-num=\"21\"></td><td><pre>  setting prepare script to <span class=\"token builtin class-name\">command</span> <span class=\"token string\">\"husky install\"</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>husky - Git hooks installed</pre></td></tr><tr><td data-num=\"23\"></td><td><pre>husky - created .husky/pre-commit</pre></td></tr><tr><td data-num=\"24\"></td><td><pre></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>please review changes <span class=\"token keyword\">in</span> package.json</pre></td></tr><tr><td data-num=\"26\"></td><td><pre>Packages: +1</pre></td></tr><tr><td data-num=\"27\"></td><td><pre>+</pre></td></tr><tr><td data-num=\"28\"></td><td><pre>Progress: resolved <span class=\"token number\">217</span>, reused <span class=\"token number\">195</span>, downloaded <span class=\"token number\">0</span>, added <span class=\"token number\">1</span>, <span class=\"token keyword\">done</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre></pre></td></tr><tr><td data-num=\"30\"></td><td><pre><span class=\"token operator\">></span> vue3-big-event-admin@0.0.0 prepare E:<span class=\"token punctuation\">\\</span>vue<span class=\"token punctuation\">\\</span>Demo7<span class=\"token punctuation\">\\</span>Demo<span class=\"token punctuation\">\\</span>vue3-big-event-admin</pre></td></tr><tr><td data-num=\"31\"></td><td><pre><span class=\"token operator\">></span> husky <span class=\"token function\">install</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>husky - Git hooks installed</pre></td></tr><tr><td data-num=\"34\"></td><td><pre></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>dependencies:</pre></td></tr><tr><td data-num=\"36\"></td><td><pre>+ pinia <span class=\"token number\">2.1</span>.6</pre></td></tr><tr><td data-num=\"37\"></td><td><pre>+ vue <span class=\"token number\">3.3</span>.4</pre></td></tr><tr><td data-num=\"38\"></td><td><pre>+ vue-router <span class=\"token number\">4.2</span>.4</pre></td></tr><tr><td data-num=\"39\"></td><td><pre></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>devDependencies:</pre></td></tr><tr><td data-num=\"41\"></td><td><pre>+ @rushstack/eslint-patch <span class=\"token number\">1.3</span>.3</pre></td></tr><tr><td data-num=\"42\"></td><td><pre>+ @vitejs/plugin-vue <span class=\"token number\">4.3</span>.4</pre></td></tr><tr><td data-num=\"43\"></td><td><pre>+ @vue/eslint-config-prettier <span class=\"token number\">8.0</span>.0</pre></td></tr><tr><td data-num=\"44\"></td><td><pre>+ eslint <span class=\"token number\">8.48</span>.0</pre></td></tr><tr><td data-num=\"45\"></td><td><pre>+ eslint-plugin-vue <span class=\"token number\">9.17</span>.0</pre></td></tr><tr><td data-num=\"46\"></td><td><pre>+ husky <span class=\"token number\">8.0</span>.3</pre></td></tr><tr><td data-num=\"47\"></td><td><pre>+ prettier <span class=\"token number\">3.0</span>.3</pre></td></tr><tr><td data-num=\"48\"></td><td><pre>+ vite <span class=\"token number\">4.4</span>.9</pre></td></tr><tr><td data-num=\"49\"></td><td><pre></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>Done <span class=\"token keyword\">in</span> <span class=\"token number\">3</span>.9s</pre></td></tr></table></figure><p>完毕后，在项目目录中就会出现一个文件夹</p>\n<p><img data-src=\"https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202308311651735.png\" alt=\"image-20230831165129161\" /></p>\n<p>在 package.json 文件中可以看到如下：</p>\n<p><strong>解释</strong>：lint 命令对其中后缀名的文件都进行校验</p>\n<figure class=\"highlight json\"><figcaption data-lang=\"JSON\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token property\">\"lint\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"eslint . --ext .vue,.js,.jsx,.cjs,.mjs --fix --ignore-path .gitignore\"</span></pre></td></tr></table></figure><p>但是这个命令并不会被触发，怎么使用呢？如下：</p>\n<p>在 pre-commit 配置文件中，注释掉原有的 npm test 添加 pnpm lint，当我们提交代码就会触发 lint 命令进行校验了。</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token hashbang comment\">#!/usr/bin/env sh</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">.</span> <span class=\"token string\">\"$(dirname -- \"</span>$0<span class=\"token string\">\")/_/husky.sh\"</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre># npm test</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>pnpm lint</pre></td></tr></table></figure><p><strong>进行实验</strong>：</p>\n<p>在 main.js 中添加一行代码：gaga 为 未定义的变量</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>gaga<span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><strong>将代码添加到暂存区</strong>：</p>\n<figure class=\"highlight sh\"><figcaption data-lang=\"sh\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>Administrator@Jfier MINGW64 /e/vue/Demo7/Demo/vue3-big-event-admin <span class=\"token punctuation\">(</span>master<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>$ <span class=\"token function\">git</span> <span class=\"token function\">add</span> <span class=\"token builtin class-name\">.</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>warning: <span class=\"token keyword\">in</span> the working copy of <span class=\"token string\">'.eslintrc.cjs'</span>, LF will be replaced by CRLF the next <span class=\"token function\">time</span> Git touches it</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>warning: <span class=\"token keyword\">in</span> the working copy of <span class=\"token string\">'.gitignore'</span>, LF will be replaced by CRLF the next <span class=\"token function\">time</span> Git touches it</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>warning: <span class=\"token keyword\">in</span> the working copy of <span class=\"token string\">'.husky/pre-commit'</span>, LF will be replaced by CRLF the next <span class=\"token function\">time</span> Git touches it</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>warning: <span class=\"token keyword\">in</span> the working copy of <span class=\"token string\">'.prettierrc.json'</span>, LF will be replaced by CRLF the next <span class=\"token function\">time</span> Git touches it</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>warning: <span class=\"token keyword\">in</span> the working copy of <span class=\"token string\">'.vscode/extensions.json'</span>, LF will be replaced by CRLF the next <span class=\"token function\">time</span> Git touches it</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>warning: <span class=\"token keyword\">in</span> the working copy of <span class=\"token string\">'README.md'</span>, LF will be replaced by CRLF the next <span class=\"token function\">time</span> Git touches it</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>warning: <span class=\"token keyword\">in</span> the working copy of <span class=\"token string\">'index.html'</span>, LF will be replaced by CRLF the next <span class=\"token function\">time</span> Git touches it</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>warning: <span class=\"token keyword\">in</span> the working copy of <span class=\"token string\">'package.json'</span>, LF will be replaced by CRLF the next <span class=\"token function\">time</span> Git touches it</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>warning: <span class=\"token keyword\">in</span> the working copy of <span class=\"token string\">'pnpm-lock.yaml'</span>, LF will be replaced by CRLF the next <span class=\"token function\">time</span> Git touches it</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>warning: <span class=\"token keyword\">in</span> the working copy of <span class=\"token string\">'src/App.vue'</span>, LF will be replaced by CRLF the next <span class=\"token function\">time</span> Git touches it</pre></td></tr><tr><td data-num=\"13\"></td><td><pre>warning: <span class=\"token keyword\">in</span> the working copy of <span class=\"token string\">'src/assets/base.css'</span>, LF will be replaced by CRLF the next <span class=\"token function\">time</span> Git touches it</pre></td></tr><tr><td data-num=\"14\"></td><td><pre>warning: <span class=\"token keyword\">in</span> the working copy of <span class=\"token string\">'src/assets/logo.svg'</span>, LF will be replaced by CRLF the next <span class=\"token function\">time</span> Git touches it</pre></td></tr><tr><td data-num=\"15\"></td><td><pre>warning: <span class=\"token keyword\">in</span> the working copy of <span class=\"token string\">'src/assets/main.css'</span>, LF will be replaced by CRLF the next <span class=\"token function\">time</span> Git touches it</pre></td></tr><tr><td data-num=\"16\"></td><td><pre>warning: <span class=\"token keyword\">in</span> the working copy of <span class=\"token string\">'src/components/HelloWorld.vue'</span>, LF will be replaced by CRLF the next <span class=\"token function\">time</span> Git touches it</pre></td></tr><tr><td data-num=\"17\"></td><td><pre>warning: <span class=\"token keyword\">in</span> the working copy of <span class=\"token string\">'src/components/TheWelcome.vue'</span>, LF will be replaced by CRLF the next <span class=\"token function\">time</span> Git touches it</pre></td></tr><tr><td data-num=\"18\"></td><td><pre>warning: <span class=\"token keyword\">in</span> the working copy of <span class=\"token string\">'src/components/WelcomeItem.vue'</span>, LF will be replaced by CRLF the next <span class=\"token function\">time</span> Git touches it</pre></td></tr><tr><td data-num=\"19\"></td><td><pre>warning: <span class=\"token keyword\">in</span> the working copy of <span class=\"token string\">'src/components/icons/IconCommunity.vue'</span>, LF will be replaced by CRLF the next <span class=\"token function\">time</span> Git touches it</pre></td></tr><tr><td data-num=\"20\"></td><td><pre>warning: <span class=\"token keyword\">in</span> the working copy of <span class=\"token string\">'src/components/icons/IconDocumentation.vue'</span>, LF will be replaced by CRLF the next <span class=\"token function\">time</span> Git touches it</pre></td></tr><tr><td data-num=\"21\"></td><td><pre>warning: <span class=\"token keyword\">in</span> the working copy of <span class=\"token string\">'src/components/icons/IconEcosystem.vue'</span>, LF will be replaced by CRLF the next <span class=\"token function\">time</span> Git touches it</pre></td></tr><tr><td data-num=\"22\"></td><td><pre>warning: <span class=\"token keyword\">in</span> the working copy of <span class=\"token string\">'src/components/icons/IconSupport.vue'</span>, LF will be replaced by CRLF the next <span class=\"token function\">time</span> Git touches it</pre></td></tr><tr><td data-num=\"23\"></td><td><pre>warning: <span class=\"token keyword\">in</span> the working copy of <span class=\"token string\">'src/components/icons/IconTooling.vue'</span>, LF will be replaced by CRLF the next <span class=\"token function\">time</span> Git touches it</pre></td></tr><tr><td data-num=\"24\"></td><td><pre>warning: <span class=\"token keyword\">in</span> the working copy of <span class=\"token string\">'src/main.js'</span>, LF will be replaced by CRLF the next <span class=\"token function\">time</span> Git touches it</pre></td></tr><tr><td data-num=\"25\"></td><td><pre>warning: <span class=\"token keyword\">in</span> the working copy of <span class=\"token string\">'src/router/index.js'</span>, LF will be replaced by CRLF the next <span class=\"token function\">time</span> Git touches it</pre></td></tr><tr><td data-num=\"26\"></td><td><pre>warning: <span class=\"token keyword\">in</span> the working copy of <span class=\"token string\">'src/stores/counter.js'</span>, LF will be replaced by CRLF the next <span class=\"token function\">time</span> Git touches it</pre></td></tr><tr><td data-num=\"27\"></td><td><pre>warning: <span class=\"token keyword\">in</span> the working copy of <span class=\"token string\">'src/views/AboutView.vue'</span>, LF will be replaced by CRLF the next <span class=\"token function\">time</span> Git touches it</pre></td></tr><tr><td data-num=\"28\"></td><td><pre>warning: <span class=\"token keyword\">in</span> the working copy of <span class=\"token string\">'src/views/HomeView.vue'</span>, LF will be replaced by CRLF the next <span class=\"token function\">time</span> Git touches it</pre></td></tr><tr><td data-num=\"29\"></td><td><pre>warning: <span class=\"token keyword\">in</span> the working copy of <span class=\"token string\">'vite.config.js'</span>, LF will be replaced by CRLF the next <span class=\"token function\">time</span> Git touches it</pre></td></tr></table></figure><p><strong>将代码提交</strong>：</p>\n<figure class=\"highlight sh\"><figcaption data-lang=\"sh\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>Administrator@Jfier MINGW64 /e/vue/Demo7/Demo/vue3-big-event-admin <span class=\"token punctuation\">(</span>master<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>$ <span class=\"token function\">git</span> commit <span class=\"token parameter variable\">-m</span> <span class=\"token string\">'提交啦'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token operator\">></span> vue3-big-event-admin@0.0.0 lint E:<span class=\"token punctuation\">\\</span>Vue<span class=\"token punctuation\">\\</span>Demo7<span class=\"token punctuation\">\\</span>Demo<span class=\"token punctuation\">\\</span>vue3-big-event-admin</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token operator\">></span> eslint <span class=\"token builtin class-name\">.</span> <span class=\"token parameter variable\">--ext</span> .vue,.js,.jsx,.cjs,.mjs <span class=\"token parameter variable\">--fix</span> --ignore-path .gitignore</pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>E:<span class=\"token punctuation\">\\</span>Vue<span class=\"token punctuation\">\\</span>Demo7<span class=\"token punctuation\">\\</span>Demo<span class=\"token punctuation\">\\</span>vue3-big-event-admin<span class=\"token punctuation\">\\</span>src<span class=\"token punctuation\">\\</span>main.js</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  <span class=\"token number\">9</span>:13  error  <span class=\"token string\">'gaga'</span> is not defined  no-undef</pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>✖ <span class=\"token number\">1</span> problem <span class=\"token punctuation\">(</span><span class=\"token number\">1</span> error, <span class=\"token number\">0</span> warnings<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre> ELIFECYCLE  Command failed with <span class=\"token builtin class-name\">exit</span> code <span class=\"token number\">1</span>.</pre></td></tr><tr><td data-num=\"14\"></td><td><pre>husky - pre-commit hook exited with code <span class=\"token number\">1</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>提交时出现了报错。解释报错：在 main.js 中的 9 行 13 字符的地方发生错误，原因：未定义的变量</p>\n<hr />\n<p><strong>将 main.js 文件中的报错代码注释或者删除或者修复后再次进行提交代码到仓库</strong>：</p>\n<figure class=\"highlight sh\"><figcaption data-lang=\"sh\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>Administrator@Jfier MINGW64 /e/vue/Demo7/Demo/vue3-big-event-admin <span class=\"token punctuation\">(</span>master<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>$ <span class=\"token function\">git</span> <span class=\"token function\">add</span> <span class=\"token builtin class-name\">.</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>warning: <span class=\"token keyword\">in</span> the working copy of <span class=\"token string\">'src/App.vue'</span>, LF will be replaced by CRLF the next <span class=\"token function\">time</span> Git touches it</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>warning: <span class=\"token keyword\">in</span> the working copy of <span class=\"token string\">'src/components/TheWelcome.vue'</span>, LF will be replaced by CRLF the next <span class=\"token function\">time</span> Git touches it</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>warning: <span class=\"token keyword\">in</span> the working copy of <span class=\"token string\">'src/components/icons/IconCommunity.vue'</span>, LF will be replaced by CRLF the next <span class=\"token function\">time</span> Git touches it</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>warning: <span class=\"token keyword\">in</span> the working copy of <span class=\"token string\">'src/components/icons/IconDocumentation.vue'</span>, LF will be replaced by CRLF the next <span class=\"token function\">time</span> Git touches it</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>warning: <span class=\"token keyword\">in</span> the working copy of <span class=\"token string\">'src/components/icons/IconEcosystem.vue'</span>, LF will be replaced by CRLF the next <span class=\"token function\">time</span> Git touches it</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>warning: <span class=\"token keyword\">in</span> the working copy of <span class=\"token string\">'src/components/icons/IconSupport.vue'</span>, LF will be replaced by CRLF the next <span class=\"token function\">time</span> Git touches it</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>warning: <span class=\"token keyword\">in</span> the working copy of <span class=\"token string\">'src/main.js'</span>, LF will be replaced by CRLF the next <span class=\"token function\">time</span> Git touches it</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>warning: <span class=\"token keyword\">in</span> the working copy of <span class=\"token string\">'vite.config.js'</span>, LF will be replaced by CRLF the next <span class=\"token function\">time</span> Git touches it</pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>Administrator@Jfier MINGW64 /e/vue/Demo7/Demo/vue3-big-event-admin <span class=\"token punctuation\">(</span>master<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>$ <span class=\"token function\">git</span> commit <span class=\"token parameter variable\">-m</span> <span class=\"token string\">'提交啦1'</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token operator\">></span> vue3-big-event-admin@0.0.0 lint E:<span class=\"token punctuation\">\\</span>Vue<span class=\"token punctuation\">\\</span>Demo7<span class=\"token punctuation\">\\</span>Demo<span class=\"token punctuation\">\\</span>vue3-big-event-admin</pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token operator\">></span> eslint <span class=\"token builtin class-name\">.</span> <span class=\"token parameter variable\">--ext</span> .vue,.js,.jsx,.cjs,.mjs <span class=\"token parameter variable\">--fix</span> --ignore-path .gitignore</pre></td></tr><tr><td data-num=\"17\"></td><td><pre></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token punctuation\">[</span>master <span class=\"token punctuation\">(</span>root-commit<span class=\"token punctuation\">)</span> 135d389<span class=\"token punctuation\">]</span> 提交啦1</pre></td></tr><tr><td data-num=\"19\"></td><td><pre> <span class=\"token number\">28</span> files changed, <span class=\"token number\">2397</span> insertions<span class=\"token punctuation\">(</span>+<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre> create mode <span class=\"token number\">100644</span> .eslintrc.cjs</pre></td></tr><tr><td data-num=\"21\"></td><td><pre> create mode <span class=\"token number\">100644</span> .gitignore</pre></td></tr><tr><td data-num=\"22\"></td><td><pre> create mode <span class=\"token number\">100644</span> .husky/pre-commit</pre></td></tr><tr><td data-num=\"23\"></td><td><pre> create mode <span class=\"token number\">100644</span> .prettierrc.json</pre></td></tr><tr><td data-num=\"24\"></td><td><pre> create mode <span class=\"token number\">100644</span> .vscode/extensions.json</pre></td></tr><tr><td data-num=\"25\"></td><td><pre> create mode <span class=\"token number\">100644</span> README.md</pre></td></tr><tr><td data-num=\"26\"></td><td><pre> create mode <span class=\"token number\">100644</span> index.html</pre></td></tr><tr><td data-num=\"27\"></td><td><pre> create mode <span class=\"token number\">100644</span> package.json</pre></td></tr><tr><td data-num=\"28\"></td><td><pre> create mode <span class=\"token number\">100644</span> pnpm-lock.yaml</pre></td></tr><tr><td data-num=\"29\"></td><td><pre> create mode <span class=\"token number\">100644</span> public/favicon.ico</pre></td></tr><tr><td data-num=\"30\"></td><td><pre> create mode <span class=\"token number\">100644</span> src/App.vue</pre></td></tr><tr><td data-num=\"31\"></td><td><pre> create mode <span class=\"token number\">100644</span> src/assets/base.css</pre></td></tr><tr><td data-num=\"32\"></td><td><pre> create mode <span class=\"token number\">100644</span> src/assets/logo.svg</pre></td></tr><tr><td data-num=\"33\"></td><td><pre> create mode <span class=\"token number\">100644</span> src/assets/main.css</pre></td></tr><tr><td data-num=\"34\"></td><td><pre> create mode <span class=\"token number\">100644</span> src/components/HelloWorld.vue</pre></td></tr><tr><td data-num=\"35\"></td><td><pre> create mode <span class=\"token number\">100644</span> src/components/TheWelcome.vue</pre></td></tr><tr><td data-num=\"36\"></td><td><pre> create mode <span class=\"token number\">100644</span> src/components/WelcomeItem.vue</pre></td></tr><tr><td data-num=\"37\"></td><td><pre> create mode <span class=\"token number\">100644</span> src/components/icons/IconCommunity.vue</pre></td></tr><tr><td data-num=\"38\"></td><td><pre> create mode <span class=\"token number\">100644</span> src/components/icons/IconDocumentation.vue</pre></td></tr><tr><td data-num=\"39\"></td><td><pre> create mode <span class=\"token number\">100644</span> src/components/icons/IconEcosystem.vue</pre></td></tr><tr><td data-num=\"40\"></td><td><pre> create mode <span class=\"token number\">100644</span> src/components/icons/IconSupport.vue</pre></td></tr><tr><td data-num=\"41\"></td><td><pre> create mode <span class=\"token number\">100644</span> src/components/icons/IconTooling.vue</pre></td></tr><tr><td data-num=\"42\"></td><td><pre> create mode <span class=\"token number\">100644</span> src/main.js</pre></td></tr><tr><td data-num=\"43\"></td><td><pre> create mode <span class=\"token number\">100644</span> src/router/index.js</pre></td></tr><tr><td data-num=\"44\"></td><td><pre> create mode <span class=\"token number\">100644</span> src/stores/counter.js</pre></td></tr><tr><td data-num=\"45\"></td><td><pre> create mode <span class=\"token number\">100644</span> src/views/AboutView.vue</pre></td></tr><tr><td data-num=\"46\"></td><td><pre> create mode <span class=\"token number\">100644</span> src/views/HomeView.vue</pre></td></tr><tr><td data-num=\"47\"></td><td><pre> create mode <span class=\"token number\">100644</span> vite.config.js</pre></td></tr><tr><td data-num=\"48\"></td><td><pre></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>Administrator@Jfier MINGW64 /e/vue/Demo7/Demo/vue3-big-event-admin <span class=\"token punctuation\">(</span>master<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>$ <span class=\"token function\">git</span> log <span class=\"token parameter variable\">--oneline</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>135d389 <span class=\"token punctuation\">(</span>HEAD -<span class=\"token operator\">></span> master<span class=\"token punctuation\">)</span> 提交啦1</pre></td></tr></table></figure><p>提交成功了！</p>\n<h2 id=\"暂存区eslint校验\"><a class=\"anchor\" href=\"#暂存区eslint校验\">#</a> 暂存区 eslint 校验</h2>\n<p>解决上述的历史问题，防止别人的不规范代码影响到自己的代码。</p>\n<p>这个插件会校验暂存区新添加的代码，不会官历史的代码有什么问题。</p>\n<ol>\n<li>\n<p>安装 lint-staged 包  <code>pnpm i lint-staged -D</code></p>\n</li>\n<li>\n<p>package.json 配置  <code>lint-staged</code>  命令</p>\n<figure class=\"highlight json\"><figcaption data-lang=\"JSON\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>   <span class=\"token comment\">//... 省略...</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token property\">\"lint-staged\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token property\">\"*.&#123;js,ts,vue&#125;\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>     \t<span class=\"token string\">\"eslint --fix\"</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token property\">\"dev\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"vite\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token property\">\"build\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"vite build\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token property\">\"preview\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"vite preview\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token property\">\"lint\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"eslint . --ext .vue,.js,.jsx,.cjs,.mjs --fix --ignore-path .gitignore\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token property\">\"format\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"prettier --write src/\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token property\">\"prepare\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"husky install\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token property\">\"lint-staged\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"lint-staged\"</span>   <span class=\"token comment\">//&lt;------------------------</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure></li>\n<li>\n<p><code>.husky/pre-commit</code>  文件修改</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>pnpm lint<span class=\"token operator\">-</span>staged</pre></td></tr></table></figure></li>\n</ol>\n",
            "tags": [
                "计算机学科",
                "vue3"
            ]
        },
        {
            "id": "https://pigpigletsgo.github.io/homepage/2024/01/24/computer-science/web/vue/vue3/%E7%BB%84%E5%90%88%E5%BC%8FAPI/",
            "url": "https://pigpigletsgo.github.io/homepage/2024/01/24/computer-science/web/vue/vue3/%E7%BB%84%E5%90%88%E5%BC%8FAPI/",
            "title": "vue3-组合式API",
            "date_published": "2024-01-24T10:48:46.827Z",
            "content_html": "<h2 id=\"vue3的优势\"><a class=\"anchor\" href=\"#vue3的优势\">#</a> Vue3 的优势</h2>\n<p><img data-src=\"https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202308300855078.png\" alt=\"image-20230830085501915\" /></p>\n<ol>\n<li>\n<p>组合式 API</p>\n<ul>\n<li>之前写的 vue2 是选项是 API 那什么是选项是 API 呢，如下：</li>\n</ul>\n<p><img data-src=\"https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202308300857157.png\" alt=\"image-20230830085720920\" /></p>\n<p>就是在整个配置项当中有一个一个选项 data (数据)，methods (函数)，computed (计算属性)，wattch (侦听器)。</p>\n<p><strong>特征</strong>：如果要实现一个功能，实际上我们需要分散式的将代码散落到各个配置项当中。</p>\n<ul>\n<li>vue3 当中改成了 Composition API\n<ul>\n<li>Composition API 提供数据再也不用到 data 当中 提供了，而是可以调用方法的时候提供。直接将我们同功能相关的内容进行 集合式的管理</li>\n<li><strong>好处</strong>：如果要改造某一块的功能假设有 8 百行代码，那么我们不需要关注其它 750 行代码在干嘛，只需要关注与该功能模块里面代码</li>\n</ul>\n</li>\n</ul>\n<p><img data-src=\"https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202308300901558.png\" alt=\"image-20230830090144717\" /></p>\n<p><img data-src=\"https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202308300907172.png\" alt=\"image-20230830090745930\" /></p>\n</li>\n</ol>\n<h2 id=\"认识create-vue\"><a class=\"anchor\" href=\"#认识create-vue\">#</a> 认识 create-vue</h2>\n<p>create-vue 是 Vue&lt;font title='red'&gt; 官方新的脚手架工具 &lt;/font&gt;，底层切换到了 &lt; font title='red'&gt;vite (下一代构架工具) &lt;/font&gt;，为开发提供极速响应</p>\n<h3 id=\"使用create-vue创建项目\"><a class=\"anchor\" href=\"#使用create-vue创建项目\">#</a> 使用 create-vue 创建项目</h3>\n<h5 id=\"1-前提环境条件\"><a class=\"anchor\" href=\"#1-前提环境条件\">#</a> 1 前提环境条件</h5>\n<p>已安装 &lt;span alt='solid'&gt;16.0 或更高版本 &lt;/span &gt; 的 Node.js</p>\n<p><code>node -v</code></p>\n<h5 id=\"2-创建一个vue应用\"><a class=\"anchor\" href=\"#2-创建一个vue应用\">#</a> 2 创建一个 Vue 应用</h5>\n<p><code>npm ini vue@latest</code></p>\n<p>这一指令将会安装并执行  create-vue</p>\n<p><img data-src=\"https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202308300914324.png\" alt=\"image-20230830091415555\" /></p>\n<h5 id=\"3-启动vue应用\"><a class=\"anchor\" href=\"#3-启动vue应用\">#</a> 3 启动 vue 应用</h5>\n<p>cd 到 项目根目录下 执行命令： <code>npm install</code>  安装一下依赖</p>\n<p>执行命令启动项目： <code>npm run dev</code></p>\n<p><img data-src=\"https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202308300930576.png\" alt=\"image-20230830093005405\" /></p>\n<p>访问地址查看是否成功的启动了。</p>\n<p><img data-src=\"https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202308300930973.png\" alt=\"image-20230830093025788\" /></p>\n<h2 id=\"熟悉项目目录和关键文件\"><a class=\"anchor\" href=\"#熟悉项目目录和关键文件\">#</a> 熟悉项目目录和关键文件</h2>\n<p><img data-src=\"https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202308300936977.png\" alt=\"image-20230830093601804\" /></p>\n<p><strong>关键文件</strong>：</p>\n<ol>\n<li>\n<p>vite.config.js - 项目的配置文件  &lt;font title='red'&gt; 基于 vite 的配置 &lt;/font&gt;.</p>\n</li>\n<li>\n<p>package.json - 项目包文件 &lt;font title='red'&gt; 核心依赖项变成了 vue3.x 和 vite&lt;/font&gt;.</p>\n</li>\n<li>\n<p>main.js - 入口文件 &lt;font title='red'&gt;createApp 函数创建应用实例 &lt;/font&gt;.</p>\n</li>\n<li>\n<p>app.vue - 根组件 &lt;font title='red'&gt;SFC 单文件组件 script - template -style&lt;/font&gt;.</p>\n<p>变化一：脚本 script 和模版 template 顺序调整</p>\n<p>变化二：模版 template 不再要求唯一根元素</p>\n<p>变化三：脚本 script 添加 setup 标识支持组合式 API</p>\n</li>\n<li>\n<p>index.html - 单页入口 &lt;font title='red'&gt; 提供 id 为 app 的挂载点 &lt;/font&gt;.</p>\n</li>\n</ol>\n<p><strong>vscode 中两个不同的插件启用其中一个禁用其中一个</strong>。</p>\n<p>在 vscode 中 vue2 的插件是：Vetur</p>\n<p><img data-src=\"https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202308300943446.png\" alt=\"image-20230830094319922\" /></p>\n<p>在 vscode 中 vue3 的插件是：Vue Language Features</p>\n<p><img data-src=\"https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202308300941687.png\" alt=\"image-20230830094154036\" /></p>\n<h1 id=\"组合式api\"><a class=\"anchor\" href=\"#组合式api\">#</a> 组合式 API</h1>\n<h2 id=\"组合式api-setup选项\"><a class=\"anchor\" href=\"#组合式api-setup选项\">#</a> 组合式 API - setup 选项</h2>\n<h4 id=\"setup选项的写法和执行时机\"><a class=\"anchor\" href=\"#setup选项的写法和执行时机\">#</a> setup 选项的写法和执行时机</h4>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token operator\">&lt;</span>script<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>\t<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>\t<span class=\"token comment\">//setup</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>\t<span class=\"token comment\">//1. 执行时机，比 beforeCreate 还要早</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>\t<span class=\"token comment\">//2.setup 函数中，获取不到 this (this 是 undefined)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>\t\t<span class=\"token function\">setup</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>         console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'setup函数'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>      <span class=\"token function\">beforeCreate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>         console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'beforeCreate函数'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>\t<span class=\"token punctuation\">&#125;</span>   </pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>script<span class=\"token operator\">></span></pre></td></tr></table></figure><p><img data-src=\"https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202308301044889.png\" alt=\"image-20230830104401422\" /></p>\n<h2 id=\"setup选项中写代码的特点\"><a class=\"anchor\" href=\"#setup选项中写代码的特点\">#</a> setup 选项中写代码的特点</h2>\n<p>数据 和 函数，需要在 setup 最后 return，才能在模版中应用</p>\n<p><img data-src=\"https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202308301045360.png\" alt=\"image-20230830104536353\" /></p>\n<p>明确了，在 setup 中写代码的特点需要 return 每次需要 return 太麻烦了。所以不得不提到 script setup 语法糖</p>\n<p><img data-src=\"https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202308301056104.png\" alt=\"image-20230830105622676\" /></p>\n<h3 id=\"script-setup语法糖原理\"><a class=\"anchor\" href=\"#script-setup语法糖原理\">#</a> script setup 语法糖原理</h3>\n<p><img data-src=\"https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202308301104037.png\" alt=\"image-20230830110456175\" /></p>\n<blockquote>\n<p>&lt;span alt='solid'&gt; 总结 &lt;/span&gt;：</p>\n<ol>\n<li>\n<p>setup 选项的执行时机？</p>\n<p>beforeCreate 钩子之前，自动执行</p>\n</li>\n<li>\n<p>setup 写代码的特点是什么？</p>\n<p>定义数据 + 函数 然后以对象方式 return</p>\n</li>\n<li>\n<p>script setup 解决了什么问题？</p>\n<p>经过语法糖的封装更简单的使用组合式 API</p>\n</li>\n<li>\n<p>setup 中的 this 还指向组件实例吗？</p>\n<p>指向 undefined</p>\n</li>\n</ol>\n</blockquote>\n<h2 id=\"组合式api-reactive和ref函数\"><a class=\"anchor\" href=\"#组合式api-reactive和ref函数\">#</a> 组合式 API-reactive 和 ref 函数</h2>\n<h3 id=\"reactive\"><a class=\"anchor\" href=\"#reactive\">#</a> reactive()</h3>\n<p><strong>作用</strong>：接收 &lt;font title='red'&gt; 对象类型数据的参数传入 &lt;/font &gt; 并返回一个 &lt; font title='red'&gt; 响应式的对象 &lt;/font&gt;。</p>\n<p><strong>核心步骤</strong>：</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token operator\">&lt;</span>script setup<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>\t<span class=\"token comment\">// 导入</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>   <span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> reactive <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'vue'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>\t<span class=\"token comment\">// 执行函数 传入参数 变量接收</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>\t<span class=\"token keyword\">const</span> state <span class=\"token operator\">=</span> <span class=\"token function\">reactive</span><span class=\"token punctuation\">(</span>对象类型数据<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>script<span class=\"token operator\">></span></pre></td></tr></table></figure><ol>\n<li>从 vue 包中 &lt;font title='red'&gt; 导入 reactive 函数 &lt;/font&gt;</li>\n<li>在 script setup 中 &lt;font title='red'&gt; 执行 reactive 函数 &lt;/font &gt; 并传入 &lt; font title='red'&gt; 类型为对象 &lt;/font &gt; 的初始值，并使用变量接收返回值</li>\n</ol>\n<p><strong>代码演示</strong>：App.vue</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">setup</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\"></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token comment\">//reactive: 接收一个对象类型的数据，返回一个响应式的对象</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token comment\">// 问题：如果是简单类型，怎么办呢？</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> reactive <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'vue'</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token keyword\">const</span> state <span class=\"token operator\">=</span> <span class=\"token function\">reactive</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> <span class=\"token number\">100</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">setCount</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    state<span class=\"token punctuation\">.</span>count<span class=\"token operator\">++</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>template</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token comment\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">@click</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>setCount<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>+1<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>template</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p><strong>效果</strong>：</p>\n<p><img data-src=\"https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202308301134330.png\" alt=\"image-20230830113421785\" /></p>\n<h3 id=\"ref\"><a class=\"anchor\" href=\"#ref\">#</a> ref()</h3>\n<p><strong>作用</strong>：接收 &lt;font title='red'&gt; 简单类型或者对象类型的数据 &lt;/font &gt; 传入并返回一个 &lt; font title='red'&gt; 响应式的对象 &lt;/font&gt;。</p>\n<p><strong>核心步骤</strong>：</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token operator\">&lt;</span>script setup<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>\t<span class=\"token comment\">// 导入   </span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>   <span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> ref <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'vue'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>\t<span class=\"token comment\">// 执行函数 传入参数 变量接收</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>\t<span class=\"token keyword\">const</span> count <span class=\"token operator\">=</span> <span class=\"token function\">ref</span><span class=\"token punctuation\">(</span>简单类型或者复杂类型数据<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>script<span class=\"token operator\">></span></pre></td></tr></table></figure><ol>\n<li>从 vue 包中 &lt;font title='red'&gt; 导入 ref 函数 &lt;/font&gt;。</li>\n<li>在 script setup 中 &lt;font title='red'&gt; 执行 ref 函数 &lt;/font &gt; 并传入初始值，使用 &lt; font title='red'&gt; 变量接收 &lt;/font&gt; ref 函数的返回值</li>\n</ol>\n<blockquote>\n<p>&lt;span alt='solid'&gt; 推荐 &lt;/span&gt;：以后声明数据，统一使用 ref</p>\n</blockquote>\n<p><strong>代码演示</strong>：App.vue</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">setup</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\"></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">// 2. ref: 接收简单类型 或 复杂类型，返回一个响应式的对象</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">// 本质：是在原有传入数据的基础上，外层包了一层对象，包成了复杂类型</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\">// 底层，包成复杂类型之后，再借助 reactive 实现的响应式</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">// 注意点：因为包了一层对象，所以访问数据时需要通过.value</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> ref <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'vue'</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">const</span> count <span class=\"token operator\">=</span> <span class=\"token function\">ref</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>count<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">setCount</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  count<span class=\"token punctuation\">.</span>value<span class=\"token operator\">++</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>template</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token comment\">&lt;!-- </pre></td></tr><tr><td data-num=\"16\"></td><td><pre>      在 script 中因为包了一层对象而访问数据需要.value</pre></td></tr><tr><td data-num=\"17\"></td><td><pre>      在 template 中.value 不需要加 (帮我们扒了一层) </pre></td></tr><tr><td data-num=\"18\"></td><td><pre>      推荐：以后声明数据，统一使用 ref</pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    --></span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token comment\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">@click</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>count++<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>[template]+1<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">@click</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>setCount<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>[script setup]+1<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>template</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>ref 对象的打印结果：</p>\n<p><img data-src=\"https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202308301306119.png\" alt=\"image-20230830130641491\" /></p>\n<blockquote>\n<p>总结：</p>\n<ol>\n<li>\n<p>reactive 和 ref 函数的共同作用是什么？</p>\n<p>用函数调用的方式生成响应式数据</p>\n</li>\n<li>\n<p>reactive &lt;font title='red'&gt;vs&lt;/font&gt; ref ?</p>\n<ol>\n<li>reactive 不能处理简单类型的数据</li>\n<li>ref 参数类型支持更好但是必须通过 ==.value== 访问修改</li>\n<li>ref 函数的内部实现依赖于<mark> reactive</mark> 函数</li>\n</ol>\n</li>\n<li>\n<p>在实际工作中推荐使用哪个？</p>\n<p>推荐使用 ref 函数，更加灵活统一</p>\n</li>\n</ol>\n</blockquote>\n<h2 id=\"组合式api-computed-计算属性函数\"><a class=\"anchor\" href=\"#组合式api-computed-计算属性函数\">#</a> 组合式 API - computed 计算属性函数</h2>\n<p>计算属性基本思想和 Vue2 的完全一致，组合式 API 下的计算属性 &lt;font title='red'&gt; 只是修改了写法 &lt;/font&gt;。</p>\n<p><strong>核心步骤</strong>:</p>\n<ol>\n<li>&lt;font title='red'&gt; 导入 &lt;/font&gt;computed 函数</li>\n<li>&lt;font title='red'&gt; 执行函数 &lt;/font &gt; 在回调参数中 &lt; font title='red'&gt;retrun 基于响应式数据做计算的值 &lt;/font&gt;，用 &lt; font title='red'&gt; 变量接收 &lt;/font&gt;。</li>\n</ol>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token operator\">&lt;</span>script setup<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>\t<span class=\"token comment\">// 导入</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>\t<span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> computed <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'vue'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>\t<span class=\"token comment\">// 执行函数 变量接收 在回调参数中 return 计算值</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>\t<span class=\"token keyword\">const</span> computedState <span class=\"token operator\">=</span> <span class=\"token function\">computed</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>      <span class=\"token keyword\">return</span> 基于响应式数据做计算之后的值</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>   <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>script<span class=\"token operator\">></span></pre></td></tr></table></figure><p><strong>代码演示</strong>：App.vue</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">setup</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\"></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token comment\">//const 计算属性 = computed (() => &#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token comment\">//   return 计算返回的结果</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token comment\">// &#125;)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> computed<span class=\"token punctuation\">,</span> ref <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'vue'</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token comment\">// 声明数据</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token keyword\">const</span> list <span class=\"token operator\">=</span> <span class=\"token function\">ref</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6</span><span class=\"token punctuation\">,</span> <span class=\"token number\">7</span><span class=\"token punctuation\">,</span> <span class=\"token number\">8</span><span class=\"token punctuation\">,</span> <span class=\"token number\">9</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  <span class=\"token comment\">// 基于 list 派生一个计算属性，从 list 中过滤出 > 2</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  <span class=\"token keyword\">const</span> computedList <span class=\"token operator\">=</span> <span class=\"token function\">computed</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token keyword\">return</span> list<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span> <span class=\"token operator\">=></span> item <span class=\"token operator\">></span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>  <span class=\"token comment\">// 定义一个修改数组的方法</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">addFn</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    list<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token number\">666</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>template</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span>原始数组:<span class=\"token comment\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span>计算后的数组:<span class=\"token comment\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">@click</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>addFn<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>修改<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>template</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>效果：</p>\n<p><img data-src=\"https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202308301339461.png\" alt=\"image-20230830133921670\" /></p>\n<blockquote>\n<p>&lt;span alt='solid'&gt; 最佳实践 &lt;/span&gt;.</p>\n<ol>\n<li>\n<p>计算属性中不应该有 “副作用”</p>\n<p>比如异步请求 / 修改 dom</p>\n</li>\n<li>\n<p>避免直接修改计算属性的值</p>\n<p>计算属性应该是只读的，特殊情况可以配置 get   set</p>\n</li>\n</ol>\n</blockquote>\n<h2 id=\"组合式api-watch\"><a class=\"anchor\" href=\"#组合式api-watch\">#</a> 组合式 API - watch</h2>\n<h3 id=\"watch函数\"><a class=\"anchor\" href=\"#watch函数\">#</a> watch 函数</h3>\n<p><strong>作用</strong>：侦听 &lt;font title='red'&gt; 一个或者多个数据 &lt;/font &gt; 的变化，数据变化时执行回调函数</p>\n<p><strong>两个额外参数</strong>：</p>\n<ol>\n<li>immediate (立即执行)</li>\n<li>deep (深度侦听)</li>\n</ol>\n<h3 id=\"基础使用-侦听单个数据\"><a class=\"anchor\" href=\"#基础使用-侦听单个数据\">#</a> 基础使用 - 侦听单个数据</h3>\n<ol>\n<li>&lt;font title='red'&gt; 导入 watch&lt;/font &gt; 函数</li>\n<li>&lt;font title='red'&gt; 执行 watch 函数 &lt;/font &gt; 传入要侦听的响应式数据 (&lt;font title='red'&gt;res 对象 &lt;/font&gt;) 和回调函数</li>\n</ol>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token operator\">&lt;</span>script setup<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>   <span class=\"token comment\">//1. 导入 watch</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>   <span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> ref<span class=\"token punctuation\">,</span> watch <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'vue'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>\t<span class=\"token keyword\">const</span> count <span class=\"token operator\">=</span> <span class=\"token function\">ref</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>   <span class=\"token comment\">//2. 调用 watch 侦听变化</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>   <span class=\"token function\">watch</span><span class=\"token punctuation\">(</span>count<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">newValue<span class=\"token punctuation\">,</span> oldValue</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">count发生了变化，老值为</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">$&#123;</span>oldValue<span class=\"token interpolation-punctuation punctuation\">&#125;</span></span><span class=\"token string\">，新值为</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">$&#123;</span>newValue<span class=\"token interpolation-punctuation punctuation\">&#125;</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>   <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>script<span class=\"token operator\">></span></pre></td></tr></table></figure><h3 id=\"基础使用-侦听多个数据\"><a class=\"anchor\" href=\"#基础使用-侦听多个数据\">#</a> 基础使用 - 侦听多个数据</h3>\n<p>说明：同时侦听多个响应式数据的变化，不管哪个数据变化都需要</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token operator\">&lt;</span>script setup<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  \t<span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> ref<span class=\"token punctuation\">,</span> watch <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'vue'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>\t<span class=\"token keyword\">const</span> count <span class=\"token operator\">=</span> <span class=\"token function\">ref</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>   <span class=\"token keyword\">const</span> name <span class=\"token operator\">=</span> <span class=\"token function\">ref</span><span class=\"token punctuation\">(</span><span class=\"token string\">'cp'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>   <span class=\"token comment\">// 侦听多个数据源</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>   <span class=\"token function\">watch</span><span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>   \t<span class=\"token punctuation\">[</span>count<span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>      <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">[</span>newCount<span class=\"token punctuation\">,</span> newName<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>oldCount<span class=\"token punctuation\">,</span> oldName<span class=\"token punctuation\">]</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>         console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'count或者name变化了'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>newCount<span class=\"token punctuation\">,</span> newName<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>oldCount<span class=\"token punctuation\">,</span> oldName<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>   <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>script<span class=\"token operator\">></span></pre></td></tr></table></figure><h4 id=\"immediate\"><a class=\"anchor\" href=\"#immediate\">#</a> immediate</h4>\n<p><strong>说明</strong>：在侦听器创建时 &lt;font title='red'&gt; 立即触发回调 &lt;/font&gt;，响应式数据变化之后继续执行 回调</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">const</span> count <span class=\"token operator\">=</span> <span class=\"token function\">ref</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">watch</span><span class=\"token punctuation\">(</span>count<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">newValue<span class=\"token punctuation\">,</span> oldValue</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>   console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>newValue<span class=\"token punctuation\">,</span> oldValue<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>   <span class=\"token literal-property property\">immediate</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><h4 id=\"deep\"><a class=\"anchor\" href=\"#deep\">#</a> deep</h4>\n<p><strong>作用</strong>：侦听复杂数据类型的改变</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// 声明一个复杂数据类型</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">const</span> obj <span class=\"token operator\">=</span> <span class=\"token function\">ref</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>   <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'张三'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>   <span class=\"token literal-property property\">age</span><span class=\"token operator\">:</span> <span class=\"token number\">18</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token function\">watch</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">newValue<span class=\"token punctuation\">,</span> oldValue</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>   console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>newValue<span class=\"token punctuation\">,</span> oldValue<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>   <span class=\"token literal-property property\">deep</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><strong>代码演示</strong>：App.vue</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">setup</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\"></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> ref<span class=\"token punctuation\">,</span> watch <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'vue'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token keyword\">const</span> count <span class=\"token operator\">=</span> <span class=\"token function\">ref</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token keyword\">const</span> nickname <span class=\"token operator\">=</span> <span class=\"token function\">ref</span><span class=\"token punctuation\">(</span><span class=\"token string\">'张三'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">chanageCount</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    count<span class=\"token punctuation\">.</span>value<span class=\"token operator\">++</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">chanageNickName</span> <span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    nickname<span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> <span class=\"token string\">'李四'</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  <span class=\"token comment\">// 1. 监视单个数据的变化 监视 count 的变化</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>  <span class=\"token comment\">//   watch (ref 对象，(newValue, oldValue) => &#123; ... &#125;)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>  <span class=\"token comment\">// watch(count, (newValue, oldValue) => &#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>  <span class=\"token comment\">//   console.log (newValue, oldValue) // 开启 immediate 后 0 undefined</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>  <span class=\"token comment\">// &#125;, &#123;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>  <span class=\"token comment\">//   immediate: true</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>  <span class=\"token comment\">// &#125;)</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>  <span class=\"token comment\">// 2. 监视多个数据的变化</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>  <span class=\"token comment\">//watch ([ref 对象 1， ref 对象 2], (newArr, oldArr) => &#123; ... &#125;)</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>  <span class=\"token comment\">// watch([count, nickname], (newArr, oldArr) => &#123;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>  <span class=\"token comment\">//   console.log (newArr, oldArr) // 开启 immediate 后 (2) [0, ' 张三 '] []</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>  <span class=\"token comment\">// &#125;, &#123;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>  <span class=\"token comment\">//   // 立刻执行</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>  <span class=\"token comment\">//   immediate: true,</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>  <span class=\"token comment\">// &#125;)</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>  <span class=\"token comment\">// 声明一个复杂数据类型</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>  <span class=\"token keyword\">const</span> userInfo <span class=\"token operator\">=</span> <span class=\"token function\">ref</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>    <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'小张'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    <span class=\"token literal-property property\">age</span><span class=\"token operator\">:</span> <span class=\"token number\">18</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">setUserInfo</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>    <span class=\"token comment\">// 如果修改的只是对象内部的属性值那么这个对象并没有发生变化因而不会触发 watch 侦听函数</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>    <span class=\"token comment\">//userInfo.value.name = ' 大张'</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>    <span class=\"token comment\">// 如果修改的是一整个对象那么 watch 侦听函数就会触发</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>    <span class=\"token comment\">//userInfo.value = &#123;name: ' 大大大大张 ', age: 20&#125;</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>    userInfo<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">.</span>age<span class=\"token operator\">++</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>  <span class=\"token function\">watch</span><span class=\"token punctuation\">(</span>userInfo<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">newValue<span class=\"token punctuation\">,</span> oldValue</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>newValue<span class=\"token punctuation\">,</span> oldValue<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>    <span class=\"token comment\">//deep 深度监视，默认 watch 进行的是，浅层监视</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>    <span class=\"token comment\">//   const ref1 = ref (简单类型) 可以直接监视</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>    <span class=\"token comment\">//   const ref2 = ref (复杂类型) 监视不到复杂类型内部数据的变化</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>    <span class=\"token literal-property property\">deep</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>template</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">@click</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>chanageCount<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>修改数字<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">@click</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>chanageNickName<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>修改名字<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token comment\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">@click</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>setUserInfo<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>修改userInfo<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>template</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><h3 id=\"精确侦听对象的某个属性\"><a class=\"anchor\" href=\"#精确侦听对象的某个属性\">#</a> 精确侦听对象的某个属性</h3>\n<p><strong>需求</strong>：在不开启 deep 的前提下，侦听 age 的变化，只有 age 变化时才执行回调</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">const</span> info <span class=\"token operator\">=</span> <span class=\"token function\">ref</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>   <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'cp'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>   <span class=\"token literal-property property\">age</span><span class=\"token operator\">:</span> <span class=\"token number\">18</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token function\">watch</span><span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>\t<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> info<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">.</span>age<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">newValue<span class=\"token punctuation\">,</span> oldValue</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'age发生变化了'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><blockquote>\n<p>&lt;span alt='solid'&gt; 总结 &lt;/span&gt;：</p>\n<ol>\n<li>\n<p>作为 watch 函数的第一个参数，ref 对象需要添加 .value 吗？</p>\n<p>不需要，第一个参数就是传 ref 对象</p>\n</li>\n<li>\n<p>watch 只能侦听单个数据吗？</p>\n<p>单个  或者  多个</p>\n</li>\n<li>\n<p>不开启 deep，直接监视 复杂类型，修改属性，能触发回调吗？</p>\n<p>不能，默认是浅层侦听</p>\n</li>\n<li>\n<p>不开启 deep，精确侦听对象的某个属性？</p>\n<p>可以把第一个参数写成函数的写法，返回要监听的具体属性</p>\n</li>\n</ol>\n</blockquote>\n<h2 id=\"组合式api-生命周期函数\"><a class=\"anchor\" href=\"#组合式api-生命周期函数\">#</a> 组合式 API - 生命周期函数</h2>\n<p>&lt;span alt='solid'&gt;Vue3 的生命周期 API (选项式 &lt;font title='red'&gt;VS&lt;/font&gt; 组合式)&lt;/span&gt;.</p>\n<p>&lt;center&gt; 对比图 &lt;/center&gt;</p>\n<p><img data-src=\"https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202308301453052.png\" alt=\"image-20230830145333569\" /></p>\n<p><strong>代码演示</strong>：App.vue</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token operator\">&lt;</span>script setup<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> onMounted <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'vue'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">//beforeCreate 和 created 的相关代码</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\">// 一律放在 setup 中执行</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">getList</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'请求发送，获取数据'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2000</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\">// 一进入页面的请求</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token function\">getList</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token comment\">// 如果有些代码需要在 mounted 生命周期中执行</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token function\">onMounted</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'mounted声明周期函数 - 逻辑1'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token comment\">// 写成函数的调用方式，可以调用多次</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token comment\">// 调用一次提供一个钩子</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token comment\">// 并不会冲突，而是按照顺序依次执行</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token function\">onMounted</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'mounted声明周期函数 - 逻辑2'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>script<span class=\"token operator\">></span></pre></td></tr></table></figure><p>效果：</p>\n<p><img data-src=\"https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202308301508288.png\" alt=\"image-20230830150853812\" /></p>\n<h2 id=\"组合式api-父子通信\"><a class=\"anchor\" href=\"#组合式api-父子通信\">#</a> 组合式 API - 父子通信</h2>\n<h3 id=\"组合式api下的-父传子\"><a class=\"anchor\" href=\"#组合式api下的-父传子\">#</a> 组合式 API 下的  父传子</h3>\n<h4 id=\"基本思想\"><a class=\"anchor\" href=\"#基本思想\">#</a> 基本思想</h4>\n<ol>\n<li>父组件中给子组件绑定属性</li>\n<li>子组件内部通过 props 选项接收</li>\n</ol>\n<p><img data-src=\"https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202308301512885.png\" alt=\"image-20230830151244355\" /></p>\n<p><strong>代码演示</strong>：</p>\n<p>子组件</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">setup</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\"></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">// 子组件</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">// 注意：由于写了 setup 所以无法直接配置 props 选项</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\">// 所以：此处需要借助于 \"编译器宏\" 函数接收子组件传递的数据</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">const</span> props <span class=\"token operator\">=</span> <span class=\"token function\">defineProps</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token literal-property property\">car</span><span class=\"token operator\">:</span> String<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token literal-property property\">money</span><span class=\"token operator\">:</span> Number</pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">.</span>car<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>template</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token comment\">&lt;!-- 对于 props 传递过来的数据模版中可以直接使用 --></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>son<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>我是子组件 - <span class=\"token comment\"></span> - <span class=\"token comment\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>template</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>style</span><span class=\"token punctuation\">></span></span><span class=\"token style\"><span class=\"token language-css\"></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token selector\">.son</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token property\">border</span><span class=\"token punctuation\">:</span> 1px solid #000<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token property\">padding</span><span class=\"token punctuation\">:</span> 30px<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>style</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>父组件</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">setup</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\"></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">// 父传子</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">// 1. 给子组件，添加属性的方式传值</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\">// 2. 在子组件，通过 props 接收</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">// 局部组件 (导入进来就能用)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> SonCom <span class=\"token keyword\">from</span> <span class=\"token string\">'@/components/son-com.vue'</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> ref <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'vue'</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">const</span> money <span class=\"token operator\">=</span> <span class=\"token function\">ref</span><span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">getMoney</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  money<span class=\"token punctuation\">.</span>value <span class=\"token operator\">+=</span> <span class=\"token number\">10</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>template</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h3</span><span class=\"token punctuation\">></span></span>父组件 - <span class=\"token comment\"></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">@click</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>getMoney<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>搬砖<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h3</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>  <span class=\"token comment\">&lt;!-- 给子组件，添加属性的方式传值 --></span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>SonCom</span> <span class=\"token attr-name\">car</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>宝马车<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">:money</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>money<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>SonCom</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>template</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>效果：</p>\n<p><img data-src=\"https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202308301601780.png\" alt=\"image-20230830160147414\" /></p>\n<h4 id=\"defineprops原理\"><a class=\"anchor\" href=\"#defineprops原理\">#</a> defineProps 原理</h4>\n<p>&lt;span alt='solid'&gt;defineProps 原理 &lt;/span&gt;：就是 &lt; font title='red'&gt; 编译阶段的一个标识 &lt;/font&gt;，实际编译器解析时，遇到后会进行编译转换</p>\n<p><img data-src=\"https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202308301533960.png\" alt=\"image-20230830153302024\" /></p>\n<p>里面编写 defineProps 里面接收 message，count 等等，实际上 它在真正编译器解析之后，解析成完整的对象配置的时候，它相当于有 set up，也有组件的 name 也有组件的 props，实际上你看起来写了 defineProps 是在 setup 里面的，但是到了编译阶段会把 defineProps 函数的内容转换成 props 配置项。本质上配置的 还是 props 选项。只不过可以在 setup 里面可以去接收使用而已。</p>\n<p>所以我们就懂了 defineProps 就是编译阶段的一个标识，它会帮你去编译转换</p>\n<h3 id=\"组合式api下的-子传父\"><a class=\"anchor\" href=\"#组合式api下的-子传父\">#</a> 组合式 API 下的 子传父</h3>\n<h4 id=\"基本思想-2\"><a class=\"anchor\" href=\"#基本思想-2\">#</a> 基本思想</h4>\n<ol>\n<li>父组件中给 &lt;font title='red'&gt; 子组件标签通过 @绑定事件 &lt;/font&gt;.</li>\n<li>子组件内部通过 &lt;font title='red'&gt;emit 方法触发事件 &lt;/font&gt;.</li>\n</ol>\n<p><img data-src=\"https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202308301541679.png\" alt=\"image-20230830154153547\" /></p>\n<p>代码演示：</p>\n<p>子组件</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">setup</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\"></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">const</span> emit <span class=\"token operator\">=</span> <span class=\"token function\">defineEmits</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'changeMoney'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">buy</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token comment\">// 此处报错，不能直接修改老爹传过来的值</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token comment\">// props.money--</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token comment\">// 需要 emit 触发事件</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token function\">emit</span><span class=\"token punctuation\">(</span><span class=\"token string\">'changeMoney'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>template</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token comment\">&lt;!-- 对于 props 传递过来的数据模版中可以直接使用 --></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>           我是子组件我爱: <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">@click</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>buy<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>花钱<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>template</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>style</span><span class=\"token punctuation\">></span></span><span class=\"token style\"><span class=\"token language-css\"></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token selector\">.son</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token property\">border</span><span class=\"token punctuation\">:</span> 1px solid #000<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token property\">padding</span><span class=\"token punctuation\">:</span> 30px<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>style</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>父组件</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">setup</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\"></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">// 局部组件 (导入进来就能用)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> SonCom <span class=\"token keyword\">from</span> <span class=\"token string\">'@/components/son-com.vue'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> ref <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'vue'</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">const</span> money <span class=\"token operator\">=</span> <span class=\"token function\">ref</span><span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">getMoney</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  money<span class=\"token punctuation\">.</span>value <span class=\"token operator\">+=</span> <span class=\"token number\">10</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\">// 子传父</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\">// 1. 在子组件内部，emit 触发事件 (编译器宏获取)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token comment\">// 2. 在父组件通过 @就可以监听了</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">changeFn</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">newMoney</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>  money<span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> newMoney</pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>template</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h3</span><span class=\"token punctuation\">></span></span>父组件 - <span class=\"token comment\"></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">@click</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>getMoney<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>搬砖<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h3</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>  <span class=\"token comment\">&lt;!-- 给子组件，添加属性的方式传值 --></span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>SonCom</span> <span class=\"token attr-name\">@changeMoney</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>changeFn<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>SonCom</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>template</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>效果：</p>\n<p><img data-src=\"https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202308301606169.png\" alt=\"image-20230830160649846\" /></p>\n<blockquote>\n<p>总结：</p>\n<p>父传子</p>\n<ol>\n<li>\n<p>父传子的过程中通过什么方式接收 props?</p>\n<p>defineProps ({属性名：类型})</p>\n</li>\n<li>\n<p>setup 语法糖中如何使用父组件传递过来的数据？</p>\n<p>const props = defineProps ({属性名：类型})</p>\n<p><span class=\"exturl\" data-url=\"aHR0cDovL3Byb3BzLnh4eA==\">props.xxx</span></p>\n</li>\n</ol>\n<p>子传父</p>\n<ol>\n<li>\n<p>子传父的过程中通过什么方式得到 emit 方法？</p>\n<p><code>defineEmits(['事件名称'])</code></p>\n</li>\n<li>\n<p>怎么触发事件</p>\n<p><code>emit('自定义事件名', 参数)</code></p>\n</li>\n</ol>\n</blockquote>\n<h2 id=\"组合式api-模版引用\"><a class=\"anchor\" href=\"#组合式api-模版引用\">#</a> 组合式 API - 模版引用</h2>\n<h3 id=\"模版引用的概念\"><a class=\"anchor\" href=\"#模版引用的概念\">#</a> 模版引用的概念</h3>\n<p>通过 &lt;font title='red'&gt;ref 标识 &lt;/font &gt; 获取真实的 &lt; font title='red'&gt;dom 对象或者组件实例对象 &lt;/font&gt;.</p>\n<p><img data-src=\"https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202308301613244.png\" alt=\"image-20230830161330667\" /></p>\n<blockquote>\n<p>&lt;span alt='solid'&gt; 比如说 &lt;/span&gt;：做一个登陆功能，这个时候在官网文档就会告诉你，我们需要通过 <code>this.$refs.form.validate()</code>  拿到组件，然后调用组件里面的方法或者找到某个输入框原生 dom.focus 让它聚焦，将来我们都会有很多的场景可以通过 ref 表示去获取真实的 dom 或者组件实例</p>\n</blockquote>\n<p>Vue3 中也同样包含这样的一个语法，但是不是通过 this 去获取了，也是通过 ref 去创建</p>\n<h4 id=\"如何使用-以获取dom为例-组件同理\"><a class=\"anchor\" href=\"#如何使用-以获取dom为例-组件同理\">#</a> 如何使用 (以获取 dom 为例 组件同理)</h4>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token operator\">&lt;</span>script setup<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>\t<span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> ref <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'vue'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>\t<span class=\"token comment\">//1. 调用 ref 函数得到 ref 对象</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">const</span> h1Ref <span class=\"token operator\">=</span> <span class=\"token function\">ref</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>script<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token operator\">&lt;</span>template<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>\t<span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token operator\">--</span><span class=\"token number\">2.</span>通过ref标识绑定ref对象<span class=\"token operator\">--</span><span class=\"token operator\">></span>     </pre></td></tr><tr><td data-num=\"8\"></td><td><pre>   <span class=\"token operator\">&lt;</span>h1 ref<span class=\"token operator\">=</span><span class=\"token string\">\"h1Ref\"</span><span class=\"token operator\">></span>我是dom标签h1<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>template<span class=\"token operator\">></span></pre></td></tr></table></figure><ol>\n<li>调用 ref 函数生成一个 ref 对象</li>\n<li>通过 ref 标识绑定 ref 对象到标签</li>\n</ol>\n<h3 id=\"defineexpose\"><a class=\"anchor\" href=\"#defineexpose\">#</a> defineExpose()</h3>\n<p>默认情况下载 script setup 语法糖下 &lt;font title='red'&gt; 组件内部的属性和方法是不开放 &lt;/font &gt; 给父组件访问的，可以通过 defineExpose 编译宏 &lt; font title='red'&gt; 指定哪些属性和方法允许访问 &lt;/font&gt;.</p>\n<p><img data-src=\"https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202308301641207.png\" alt=\"image-20230830164103652\" /></p>\n<p><strong>比如说</strong>：定义好了一个数据叫做 test message 它是不会往外暴漏的。如果你想要往外暴漏就需要 defineExpose 宏函数</p>\n<p><strong>代码演示</strong>：</p>\n<p>子组件</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">setup</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\"></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">const</span> count <span class=\"token operator\">=</span> <span class=\"token number\">999</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">sayHi</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'打招呼'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token function\">defineExpose</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        count<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        sayHi</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>template</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span>我是用于测试的组件 - <span class=\"token comment\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>template</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>父组件</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">setup</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\"></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> TestCom <span class=\"token keyword\">from</span> <span class=\"token string\">'@/components/son-test.vue'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> onMounted<span class=\"token punctuation\">,</span> ref <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'vue'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\">// 模版引用可以获取 dom 也可以获取组件</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">// 1. 调用 ref 函数，生成一个 ref 对象</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\">// 2. 通过 ref 标识，进行绑定</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\">// 3. 通过 ref 对象.value 即可访问到绑定的元素 (必须渲染完成后，才能拿到)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">const</span> inp <span class=\"token operator\">=</span> <span class=\"token function\">ref</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>inp<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\">// 声明周期钩子</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token function\">onMounted</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>inp<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>  inp<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">.</span><span class=\"token function\">focus</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">focusFn</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>  inp<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">.</span><span class=\"token function\">focus</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token comment\">// --------------------------------------------</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token keyword\">const</span> testRef <span class=\"token operator\">=</span> <span class=\"token function\">ref</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">getCom</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>testRef<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre></pre></td></tr><tr><td data-num=\"24\"></td><td><pre></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>template</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">ref</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>inp<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">@click</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>focusFn<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>点击我让输入框聚焦<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>TestCom</span> <span class=\"token attr-name\">ref</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>testRef<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>TestCom</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">@click</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>getCom<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>获取组件<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>template</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>效果：</p>\n<p><img data-src=\"https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202308301653559.png\" alt=\"image-20230830165329176\" /></p>\n<blockquote>\n<p>&lt;span alt='solid'&gt; 总结 &lt;/span&gt;：</p>\n<ol>\n<li>\n<p>获取模版引用的时机是什么？</p>\n<p>组件挂载完毕</p>\n</li>\n<li>\n<p>defineExpose 编译宏的作用是什么？</p>\n<p>显式暴漏组件内部的属性和方法</p>\n</li>\n</ol>\n</blockquote>\n<h2 id=\"组合式api-provide-和-inject\"><a class=\"anchor\" href=\"#组合式api-provide-和-inject\">#</a> 组合式 API - provide 和 inject</h2>\n<p><strong>作用和场景</strong></p>\n<p>顶层组件向任意的底层组件 &lt;font title='red'&gt; 传递数据和方法 &lt;/font&gt;，实现 &lt; font title='red'&gt; 跨层组件通信 &lt;/font&gt;.</p>\n<p><img data-src=\"https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202308301656597.png\" alt=\"image-20230830165629092\" /></p>\n<p>比如说：整个医生问诊是一个大组件 room-page 它可以将数据往下传递传递给 room-msg-item 中间一层组件，再往下有一个 room-msg-comment 评价组件，从上到下有一个包裹关系。需求是从顶层组件需要往底层组件传递订单消息。一旦订单消息传递过去了，将来底层组件如果评价完成了，要能通知大组件 room-page 呢</p>\n<h3 id=\"跨层传递普通数据\"><a class=\"anchor\" href=\"#跨层传递普通数据\">#</a> 跨层传递普通数据</h3>\n<ol>\n<li>顶层组件通过 &lt;font title='red'&gt;provide 函数提供 &lt;/font &gt; 数据</li>\n<li>底层组件通过 &lt;font title='red'&gt;inject 函数获取 &lt;/font &gt; 数据</li>\n</ol>\n<p><img data-src=\"https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202308301709456.png\" alt=\"image-20230830170916682\" /></p>\n<p><strong>代码演示</strong>：</p>\n<p>父组件</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">setup</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\"></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token keyword\">import</span> CenterSon <span class=\"token keyword\">from</span> <span class=\"token string\">'@/components/son-center.vue'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> provide <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'vue'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token comment\">// 1. 跨层传递普通数据</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token comment\">// 使用 provide 向子组件传递数据</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token function\">provide</span><span class=\"token punctuation\">(</span><span class=\"token string\">'theme-color'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'pink'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>template</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span>我是顶层组件<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>CenterSon</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>CenterSon</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>template</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>底部组件</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">setup</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\"></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> inject <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'vue'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">// 使用 inject 获取父组件传递过来的数据</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">const</span> themeColor <span class=\"token operator\">=</span> <span class=\"token function\">inject</span><span class=\"token punctuation\">(</span><span class=\"token string\">'theme-color'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>template</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h5</span><span class=\"token punctuation\">></span></span>我是底层组件 - <span class=\"token comment\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h5</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span><span class=\"token punctuation\">></span></span>更新count<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>template</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>中间组件</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">setup</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\"></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">import</span> ButtonSon <span class=\"token keyword\">from</span> <span class=\"token string\">'@/components/son-button.vue'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>template</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h3</span><span class=\"token punctuation\">></span></span>我是中间层组件<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h3</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ButtonSon</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ButtonSon</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>template</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><h3 id=\"跨层传递响应式数据\"><a class=\"anchor\" href=\"#跨层传递响应式数据\">#</a> 跨层传递响应式数据</h3>\n<p>在调用 provide 函数时，第二个参数设置为 &lt;font title='red'&gt;ref 对象 &lt;/font&gt;.</p>\n<p><img data-src=\"https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202308301935024.png\" alt=\"image-20230830193520483\" /></p>\n<p><strong>代码演示</strong>：</p>\n<p>父组件</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">setup</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\"></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token keyword\">import</span> CenterSon <span class=\"token keyword\">from</span> <span class=\"token string\">'@/components/son-center.vue'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> provide<span class=\"token punctuation\">,</span> ref <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'vue'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token comment\">// 跨层传递响应式数据</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token keyword\">const</span> count <span class=\"token operator\">=</span> <span class=\"token function\">ref</span><span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token function\">provide</span><span class=\"token punctuation\">(</span><span class=\"token string\">'count'</span><span class=\"token punctuation\">,</span> count<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token comment\">// 2 秒后改变数据</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    count<span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> <span class=\"token number\">500</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2000</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>template</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span>我是顶层组件<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>CenterSon</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>CenterSon</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>template</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>底部组件</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">setup</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\"></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> inject <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'vue'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">// 使用 inject 获取父组件传递过来的数据</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">const</span> count <span class=\"token operator\">=</span> <span class=\"token function\">inject</span><span class=\"token punctuation\">(</span><span class=\"token string\">'count'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>template</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h5</span><span class=\"token punctuation\">></span></span>我是底层组件 - <span class=\"token comment\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h5</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span><span class=\"token punctuation\">></span></span>更新count<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>template</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>中间组件</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">setup</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\"></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">import</span> ButtonSon <span class=\"token keyword\">from</span> <span class=\"token string\">'@/components/son-button.vue'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>template</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h3</span><span class=\"token punctuation\">></span></span>我是中间层组件<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h3</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ButtonSon</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ButtonSon</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>template</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><h3 id=\"跨层传递方法\"><a class=\"anchor\" href=\"#跨层传递方法\">#</a> 跨层传递方法</h3>\n<p>顶层组件可以向底层组件传递方法，&lt;font title='red'&gt; 底层组件调用方法修改顶层组件中的数据 &lt;/font&gt;.</p>\n<p><img data-src=\"https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202308301936066.png\" alt=\"image-20230830193623619\" /></p>\n<p><strong>代码演示</strong>：</p>\n<p>父组件</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">setup</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\"></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token keyword\">import</span> CenterSon <span class=\"token keyword\">from</span> <span class=\"token string\">'@/components/son-center.vue'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> provide<span class=\"token punctuation\">,</span> ref <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'vue'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token keyword\">const</span> count <span class=\"token operator\">=</span> <span class=\"token function\">ref</span><span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token function\">provide</span><span class=\"token punctuation\">(</span><span class=\"token string\">'count'</span><span class=\"token punctuation\">,</span> count<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token comment\">// 跨层级函数 => 给子孙后代传递可以修改数据的方法</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token function\">provide</span><span class=\"token punctuation\">(</span><span class=\"token string\">'changeCount'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">newCount</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    count<span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> newCount</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>template</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span>我是顶层组件<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>CenterSon</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>CenterSon</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>template</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>底部组件</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">setup</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\"></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> inject <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'vue'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">// 使用 inject 获取父组件传递过来的数据</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">const</span> count <span class=\"token operator\">=</span> <span class=\"token function\">inject</span><span class=\"token punctuation\">(</span><span class=\"token string\">'count'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">// 获取父组件传递过来的方法</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">const</span> chanage <span class=\"token operator\">=</span> <span class=\"token function\">inject</span><span class=\"token punctuation\">(</span><span class=\"token string\">'changeCount'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">clickFn</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token comment\">// 使用方法传入参数</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token function\">chanage</span><span class=\"token punctuation\">(</span><span class=\"token number\">1000</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>template</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h5</span><span class=\"token punctuation\">></span></span>我是底层组件 - <span class=\"token comment\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h5</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">@click</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>clickFn<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>更新count<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>template</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>中间组件</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">setup</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\"></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">import</span> ButtonSon <span class=\"token keyword\">from</span> <span class=\"token string\">'@/components/son-button.vue'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>template</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h3</span><span class=\"token punctuation\">></span></span>我是中间层组件<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h3</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ButtonSon</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ButtonSon</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>template</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure>",
            "tags": [
                "计算机学科",
                "vue3"
            ]
        },
        {
            "id": "https://pigpigletsgo.github.io/homepage/2024/01/24/computer-science/web/vue/vue3/%E5%85%A8%E5%B1%80%E9%85%8D%E7%BD%AEaxios/",
            "url": "https://pigpigletsgo.github.io/homepage/2024/01/24/computer-science/web/vue/vue3/%E5%85%A8%E5%B1%80%E9%85%8D%E7%BD%AEaxios/",
            "title": "vue3-全局配置axios与使用",
            "date_published": "2024-01-24T10:48:46.824Z",
            "content_html": "<h2 id=\"vue3全局配置axios与使用\"><a class=\"anchor\" href=\"#vue3全局配置axios与使用\">#</a> vue3 全局配置 axios 与使用</h2>\n<h3 id=\"为什么要全局配置axios\"><a class=\"anchor\" href=\"#为什么要全局配置axios\">#</a> 为什么要全局配置 axios</h3>\n<p>在实际项目开发中，几乎每个组件中都会用到 axios 发起数据请求。此时会遇到如下两个问题：</p>\n<p>① 每个组件中都需要导入 axios（代码臃肿）</p>\n<p>② 每次发请求都需要填写完整的请求路径（不利于后期的维护）</p>\n<h3 id=\"vue2与vue3配置axios的不同之处\"><a class=\"anchor\" href=\"#vue2与vue3配置axios的不同之处\">#</a> vue2 与 vue3 配置 axios 的不同之处</h3>\n<p>在 vue2 中会习惯性的把 axios 挂载到全局，以方便在各个组件或页面中使用 this.$http 请求接口。但是在 vue3 中取消了 Vue.prototype，在全局挂载方法和属性时，需要使用官方提供的 globalPropertiesAPI。</p>\n<h3 id=\"第一步导入axios并进行挂载\"><a class=\"anchor\" href=\"#第一步导入axios并进行挂载\">#</a> 第一步：导入 axios 并进行挂载</h3>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">const</span> app <span class=\"token operator\">=</span> <span class=\"token function\">createApp</span><span class=\"token punctuation\">(</span>App<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> axios <span class=\"token keyword\">from</span> <span class=\"token string\">\"axios\"</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>app<span class=\"token punctuation\">.</span>config<span class=\"token punctuation\">.</span>globalProperties<span class=\"token punctuation\">.</span>$http <span class=\"token operator\">=</span> axios</pre></td></tr></table></figure><h3 id=\"第二步在组件中获取getcurrentinstance实例使用实例中已挂载的http方法\"><a class=\"anchor\" href=\"#第二步在组件中获取getcurrentinstance实例使用实例中已挂载的http方法\">#</a> 第二步：在组件中获取 getCurrentInstance 实例，使用实例中已挂载的 $http 方法</h3>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> onMounted<span class=\"token punctuation\">,</span> getCurrentInstance<span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"vue\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token punctuation\">&#123;</span>proxy<span class=\"token punctuation\">&#125;</span> <span class=\"token operator\">=</span> <span class=\"token function\">getCurrentInstance</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token function\">onMounted</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">async</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  </pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token keyword\">const</span> res<span class=\"token operator\">=</span><span class=\"token keyword\">await</span> proxy<span class=\"token punctuation\">.</span>$http<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'api/v1/topics'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure>",
            "tags": [
                "计算机学科",
                "vue3"
            ]
        },
        {
            "id": "https://pigpigletsgo.github.io/homepage/2024/01/24/computer-science/web/vue/vue3/Vue3.3%E6%96%B0%E7%89%B9%E6%80%A7/",
            "url": "https://pigpigletsgo.github.io/homepage/2024/01/24/computer-science/web/vue/vue3/Vue3.3%E6%96%B0%E7%89%B9%E6%80%A7/",
            "title": "vue3-新特性",
            "date_published": "2024-01-24T10:48:46.820Z",
            "content_html": "<h2 id=\"defineoptions\"><a class=\"anchor\" href=\"#defineoptions\">#</a> defineOptions</h2>\n<blockquote>\n<p>&lt;span alt='solid'&gt; 背景说明 &lt;/span&gt;：</p>\n<p>有 <code>&lt;script setup&gt;</code>  之前，如果要定义 props，emits 可以轻而易举的添加一个与 setup 平级的属性。</p>\n<p>但是有了 <code>&lt;script setup&gt;</code>  后，就没法这么干了 setup 属性已经没有了，自然无法添加与其平级的属性。</p>\n<hr />\n<p>为了解决这一问题，引入了 &lt;font title='red'&gt;defineProps&lt;/font &gt; 与 &lt; font title='red'&gt;defineEmits&lt;/font &gt; 这两个宏，但是只解决了 &lt; font title='red'&gt;props&lt;/font &gt; 与 &lt; font title='red'&gt;emits&lt;/font &gt; 这两个属性。</p>\n<p>如果我们要定义组件的 name 或其它自定义的属性，还是得回到最原始的用法 —— 再添加一个普通的 &lt;script&gt; 标签。</p>\n<p>这样就会存在两个 &lt;script&gt; 标签。让人无法接受。</p>\n</blockquote>\n<p>于是。。。就迎来了。</p>\n<h2 id=\"vue33新特性-defineoptions\"><a class=\"anchor\" href=\"#vue33新特性-defineoptions\">#</a> Vue3.3 新特性 - defineOptions</h2>\n<p>所以在 vue3.3 中新引入了 &lt;font title='red'&gt;defineOptions &lt;/font &gt; 宏。顾名思义，主要是用来定义 &lt;font title='red'&gt;Options API &lt;/font &gt; 的选项。可以用 defineOptions 定义任意的选项，props，emits，expose，slots 除外 (因为这些可以使用 defineXXX 来做到)</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token operator\">&lt;</span>script setup<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>\t<span class=\"token function\">defineOptions</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>   \t<span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'Foo'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>      <span class=\"token comment\">// 不希望组件的根元素继承特性，如果希望设置为 true</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>   \t<span class=\"token literal-property property\">inheritAttrs</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>   \t<span class=\"token comment\">//... 更多自定义属性</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>\t<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>script<span class=\"token operator\">></span></pre></td></tr></table></figure><h2 id=\"vue33新特性-definemodel\"><a class=\"anchor\" href=\"#vue33新特性-definemodel\">#</a> Vue3.3 新特性 - defineModel</h2>\n<p>在 Vue3 中，自定义组件上使用 v-model，相当于传递一个 modelValue 属性，同时触发 update:modelValue 事件</p>\n<p><img data-src=\"https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202308302015742.png\" alt=\"image-20230830201543099\" /></p>\n<p>我们需要先定义 props，在定义 emits。其中有许多重复的代码。如果需要修改此值，还需要手动调用 emit 函数。</p>\n<p><img data-src=\"https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202308302031546.png\" alt=\"image-20230830203106641\" /></p>\n<p><strong>代码演示</strong>：</p>\n<p>父组件</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">setup</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\"></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token keyword\">import</span> MyInput <span class=\"token keyword\">from</span> <span class=\"token string\">'@/components/my-input.vue'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> ref <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'vue'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token keyword\">const</span> text <span class=\"token operator\">=</span> <span class=\"token function\">ref</span><span class=\"token punctuation\">(</span><span class=\"token string\">'123456'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>template</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>MyInput</span> <span class=\"token attr-name\">v-model</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>MyInput</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\"></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>template</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>子组件</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">setup</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\"></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> defineModel <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'vue'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">const</span> modeValue <span class=\"token operator\">=</span> <span class=\"token function\">defineModel</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">const</span> emit <span class=\"token operator\">=</span> <span class=\"token function\">defineEmits</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'update:modeValue'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>template</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">:value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>modeValue<span class=\"token punctuation\">\"</span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token attr-name\">@input</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>e => modeValue = e.target.value <span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>template</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>vite 配置</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> fileURLToPath<span class=\"token punctuation\">,</span> <span class=\"token constant\">URL</span> <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'node:url'</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> defineConfig <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'vite'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> vue <span class=\"token keyword\">from</span> <span class=\"token string\">'@vitejs/plugin-vue'</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\">// https://vitejs.dev/config/</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token function\">defineConfig</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  <span class=\"token literal-property property\">plugins</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token function\">vue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>      <span class=\"token comment\">// 配置开启 defineModel</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>      <span class=\"token literal-property property\">script</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token literal-property property\">defineModel</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>  <span class=\"token literal-property property\">resolve</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token literal-property property\">alias</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>      <span class=\"token string-property property\">'@'</span><span class=\"token operator\">:</span> <span class=\"token function\">fileURLToPath</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">URL</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./src'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">.</span>meta<span class=\"token punctuation\">.</span>url<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><strong>效果</strong>：</p>\n<p><img data-src=\"./Vue3.3%E6%96%B0%E7%89%B9%E6%80%A7.assets/image-20230830203747863.png\" alt=\"image-20230830203747863\" /></p>\n",
            "tags": [
                "计算机学科",
                "vue3"
            ]
        },
        {
            "id": "https://pigpigletsgo.github.io/homepage/2024/01/24/computer-science/web/vue/vue3/pnpm%E5%8C%85%E7%AE%A1%E7%90%86%E5%99%A8/",
            "url": "https://pigpigletsgo.github.io/homepage/2024/01/24/computer-science/web/vue/vue3/pnpm%E5%8C%85%E7%AE%A1%E7%90%86%E5%99%A8/",
            "title": "vue3-pnpm 包管理器 - 创建项目",
            "date_published": "2024-01-24T10:48:46.816Z",
            "content_html": "<h2 id=\"pnpm-包管理器-创建项目\"><a class=\"anchor\" href=\"#pnpm-包管理器-创建项目\">#</a> pnpm 包管理器 - 创建项目</h2>\n<p>一些优势：比同类工具快 2 倍左右，节省磁盘空间 …</p>\n<p>安装方式： <code>npm install -g pnpm</code></p>\n<p>创建项目： <code>pnpm create vue</code></p>\n<p>-D =  <code>--save-dev</code>  ，-g =  <code>--global</code></p>\n<p>dev 启动项目，具体的启动方式看 package.json 中怎么配置 vue3 一般使用 vite 来启动</p>\n<table>\n<thead>\n<tr>\n<th>npm</th>\n<th>yarn</th>\n<th>pnpm</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>npm install</td>\n<td>yarn</td>\n<td>pnpm install</td>\n</tr>\n<tr>\n<td>npm install axios</td>\n<td>yarn axios</td>\n<td>pnpm add axios</td>\n</tr>\n<tr>\n<td>npm install axios -D/-g</td>\n<td>yarn add axios -D/g</td>\n<td>pnpm add axios -D/g</td>\n</tr>\n<tr>\n<td>npm uninstall axios</td>\n<td>yarn remove axios</td>\n<td>pnpm remove axios</td>\n</tr>\n<tr>\n<td>npm run dev</td>\n<td>yarn dev</td>\n<td>pnpm dev</td>\n</tr>\n</tbody>\n</table>\n<ul>\n<li>&lt;span alt='solid'&gt; 注意 &lt;/span&gt;：使用 pnpm 创建项目的时候不要直接在根目录创建，而是在根目录中创建一个子目录，用这个子目录作为项目的根目录。</li>\n<li><strong>原因</strong>：防止报 权限不足</li>\n</ul>\n<figure class=\"highlight sh\"><figcaption data-lang=\"sh\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre> <span class=\"token function\">npm</span> <span class=\"token function\">install</span> <span class=\"token parameter variable\">-g</span> <span class=\"token function\">pnpm</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>added <span class=\"token number\">1</span> package <span class=\"token keyword\">in</span> 14s</pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token number\">1</span> package is looking <span class=\"token keyword\">for</span> funding</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  run <span class=\"token variable\"><span class=\"token variable\">`</span><span class=\"token function\">npm</span> fund<span class=\"token variable\">`</span></span> <span class=\"token keyword\">for</span> details</pre></td></tr><tr><td data-num=\"7\"></td><td><pre> <span class=\"token function\">pnpm</span> create vue</pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token punctuation\">..</span>/<span class=\"token punctuation\">..</span>/<span class=\"token punctuation\">..</span>/.pnpm-store/v3/tmp/dlx-12928    <span class=\"token operator\">|</span>   +1 +</pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token punctuation\">..</span>/<span class=\"token punctuation\">..</span>/<span class=\"token punctuation\">..</span>/.pnpm-store/v3/tmp/dlx-12928    <span class=\"token operator\">|</span> Progress: resolved <span class=\"token number\">1</span>, reused <span class=\"token number\">0</span>, downloaded <span class=\"token number\">1</span>, added <span class=\"token number\">1</span>, <span class=\"token keyword\">done</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>Vue.js - The Progressive JavaScript Framework</pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>√ Project name: <span class=\"token punctuation\">..</span>. vue3-big-event-admin</pre></td></tr><tr><td data-num=\"14\"></td><td><pre>√ Add TypeScript? <span class=\"token punctuation\">..</span>. No / Yes</pre></td></tr><tr><td data-num=\"15\"></td><td><pre>√ Add JSX Support? <span class=\"token punctuation\">..</span>. No / Yes</pre></td></tr><tr><td data-num=\"16\"></td><td><pre>√ Add Vue Router <span class=\"token keyword\">for</span> Single Page Application development? <span class=\"token punctuation\">..</span>. No / Yes</pre></td></tr><tr><td data-num=\"17\"></td><td><pre>√ Add Pinia <span class=\"token keyword\">for</span> state management? <span class=\"token punctuation\">..</span>. No / Yes</pre></td></tr><tr><td data-num=\"18\"></td><td><pre>√ Add Vitest <span class=\"token keyword\">for</span> Unit Testing? <span class=\"token punctuation\">..</span>. No / Yes</pre></td></tr><tr><td data-num=\"19\"></td><td><pre>√ Add an End-to-End Testing Solution? » No</pre></td></tr><tr><td data-num=\"20\"></td><td><pre>√ Add ESLint <span class=\"token keyword\">for</span> code quality? <span class=\"token punctuation\">..</span>. No / Yes</pre></td></tr><tr><td data-num=\"21\"></td><td><pre>√ Add Prettier <span class=\"token keyword\">for</span> code formatting? <span class=\"token punctuation\">..</span>. No / Yes</pre></td></tr><tr><td data-num=\"22\"></td><td><pre></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>Scaffolding project <span class=\"token keyword\">in</span> E:<span class=\"token punctuation\">\\</span>Vue<span class=\"token punctuation\">\\</span>Demo7<span class=\"token punctuation\">\\</span>Demo<span class=\"token punctuation\">\\</span>vue3-big-event-admin<span class=\"token punctuation\">..</span>.</pre></td></tr><tr><td data-num=\"24\"></td><td><pre></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>Done. Now run:</pre></td></tr><tr><td data-num=\"26\"></td><td><pre></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>  <span class=\"token builtin class-name\">cd</span> vue3-big-event-admin</pre></td></tr><tr><td data-num=\"28\"></td><td><pre>  <span class=\"token function\">pnpm</span> <span class=\"token function\">install</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>  <span class=\"token function\">pnpm</span> <span class=\"token function\">format</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>  <span class=\"token function\">pnpm</span> dev</pre></td></tr><tr><td data-num=\"31\"></td><td><pre></pre></td></tr><tr><td data-num=\"32\"></td><td><pre> <span class=\"token builtin class-name\">cd</span> .<span class=\"token punctuation\">\\</span>vue3-big-event-admin<span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre> <span class=\"token function\">ls</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre></pre></td></tr><tr><td data-num=\"35\"></td><td><pre></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>    目录: E:<span class=\"token punctuation\">\\</span>Vue<span class=\"token punctuation\">\\</span>Demo7<span class=\"token punctuation\">\\</span>Demo<span class=\"token punctuation\">\\</span>vue3-big-event-admin</pre></td></tr><tr><td data-num=\"37\"></td><td><pre></pre></td></tr><tr><td data-num=\"38\"></td><td><pre></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>Mode                 LastWriteTime         Length Name</pre></td></tr><tr><td data-num=\"40\"></td><td><pre>----                 -------------         ------ ----</pre></td></tr><tr><td data-num=\"41\"></td><td><pre>d-----         <span class=\"token number\">2023</span>/8/31     <span class=\"token number\">15</span>:48                .vscode</pre></td></tr><tr><td data-num=\"42\"></td><td><pre>d-----         <span class=\"token number\">2023</span>/8/31     <span class=\"token number\">15</span>:48                public</pre></td></tr><tr><td data-num=\"43\"></td><td><pre>d-----         <span class=\"token number\">2023</span>/8/31     <span class=\"token number\">15</span>:48                src</pre></td></tr><tr><td data-num=\"44\"></td><td><pre>-a----         <span class=\"token number\">2023</span>/8/31     <span class=\"token number\">15</span>:48            <span class=\"token number\">296</span> .eslintrc.cjs</pre></td></tr><tr><td data-num=\"45\"></td><td><pre>-a----         <span class=\"token number\">2023</span>/8/31     <span class=\"token number\">15</span>:46            <span class=\"token number\">302</span> .gitignore</pre></td></tr><tr><td data-num=\"46\"></td><td><pre>-a----         <span class=\"token number\">2023</span>/8/31     <span class=\"token number\">15</span>:48            <span class=\"token number\">163</span> .prettierrc.json</pre></td></tr><tr><td data-num=\"47\"></td><td><pre>-a----         <span class=\"token number\">2023</span>/8/31     <span class=\"token number\">15</span>:46            <span class=\"token number\">331</span> index.html</pre></td></tr><tr><td data-num=\"48\"></td><td><pre>-a----         <span class=\"token number\">2023</span>/8/31     <span class=\"token number\">15</span>:48            <span class=\"token number\">652</span> package.json</pre></td></tr><tr><td data-num=\"49\"></td><td><pre>-a----         <span class=\"token number\">2023</span>/8/31     <span class=\"token number\">15</span>:48            <span class=\"token number\">705</span> README.md</pre></td></tr><tr><td data-num=\"50\"></td><td><pre>-a----         <span class=\"token number\">2023</span>/8/31     <span class=\"token number\">15</span>:48            <span class=\"token number\">309</span> vite.config.js</pre></td></tr><tr><td data-num=\"51\"></td><td><pre></pre></td></tr><tr><td data-num=\"52\"></td><td><pre></pre></td></tr><tr><td data-num=\"53\"></td><td><pre> <span class=\"token function\">pnpm</span> <span class=\"token function\">install</span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre>Packages: +194</pre></td></tr><tr><td data-num=\"55\"></td><td><pre>++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</pre></td></tr><tr><td data-num=\"56\"></td><td><pre>Progress: resolved <span class=\"token number\">216</span>, reused <span class=\"token number\">0</span>, downloaded <span class=\"token number\">194</span>, added <span class=\"token number\">194</span>, <span class=\"token keyword\">done</span></pre></td></tr><tr><td data-num=\"57\"></td><td><pre>node_modules/.pnpm/vue-demi@0.14.6_vue@3.3.4/node_modules/vue-demi: Running postinstall script, <span class=\"token keyword\">done</span> <span class=\"token keyword\">in</span> 281ms</pre></td></tr><tr><td data-num=\"58\"></td><td><pre>node_modules/.pnpm/esbuild@0.18.20/node_modules/esbuild: Running postinstall script, <span class=\"token keyword\">done</span> <span class=\"token keyword\">in</span> 230ms</pre></td></tr><tr><td data-num=\"59\"></td><td><pre></pre></td></tr><tr><td data-num=\"60\"></td><td><pre>dependencies:</pre></td></tr><tr><td data-num=\"61\"></td><td><pre>+ pinia <span class=\"token number\">2.1</span>.6</pre></td></tr><tr><td data-num=\"62\"></td><td><pre>+ vue <span class=\"token number\">3.3</span>.4</pre></td></tr><tr><td data-num=\"63\"></td><td><pre>+ vue-router <span class=\"token number\">4.2</span>.4</pre></td></tr><tr><td data-num=\"64\"></td><td><pre></pre></td></tr><tr><td data-num=\"65\"></td><td><pre>devDependencies:</pre></td></tr><tr><td data-num=\"66\"></td><td><pre>+ @rushstack/eslint-patch <span class=\"token number\">1.3</span>.3</pre></td></tr><tr><td data-num=\"67\"></td><td><pre>+ @vitejs/plugin-vue <span class=\"token number\">4.3</span>.4</pre></td></tr><tr><td data-num=\"68\"></td><td><pre>+ @vue/eslint-config-prettier <span class=\"token number\">8.0</span>.0</pre></td></tr><tr><td data-num=\"69\"></td><td><pre>+ eslint <span class=\"token number\">8.48</span>.0</pre></td></tr><tr><td data-num=\"70\"></td><td><pre>+ eslint-plugin-vue <span class=\"token number\">9.17</span>.0</pre></td></tr><tr><td data-num=\"71\"></td><td><pre>+ prettier <span class=\"token number\">3.0</span>.3</pre></td></tr><tr><td data-num=\"72\"></td><td><pre>+ vite <span class=\"token number\">4.4</span>.9</pre></td></tr><tr><td data-num=\"73\"></td><td><pre></pre></td></tr><tr><td data-num=\"74\"></td><td><pre>Done <span class=\"token keyword\">in</span> <span class=\"token number\">36</span>.7s</pre></td></tr><tr><td data-num=\"75\"></td><td><pre> <span class=\"token function\">pnpm</span> dev</pre></td></tr><tr><td data-num=\"76\"></td><td><pre></pre></td></tr><tr><td data-num=\"77\"></td><td><pre><span class=\"token operator\">></span> vue3-big-event-admin@0.0.0 dev E:<span class=\"token punctuation\">\\</span>Vue<span class=\"token punctuation\">\\</span>Demo7<span class=\"token punctuation\">\\</span>Demo<span class=\"token punctuation\">\\</span>vue3-big-event-admin</pre></td></tr><tr><td data-num=\"78\"></td><td><pre><span class=\"token operator\">></span> vite</pre></td></tr><tr><td data-num=\"79\"></td><td><pre></pre></td></tr><tr><td data-num=\"80\"></td><td><pre>Port <span class=\"token number\">5173</span> is <span class=\"token keyword\">in</span> use, trying another one<span class=\"token punctuation\">..</span>.</pre></td></tr><tr><td data-num=\"81\"></td><td><pre></pre></td></tr><tr><td data-num=\"82\"></td><td><pre>  VITE v4.4.9  ready <span class=\"token keyword\">in</span> <span class=\"token number\">480</span> ms</pre></td></tr><tr><td data-num=\"83\"></td><td><pre></pre></td></tr><tr><td data-num=\"84\"></td><td><pre>  ➜  Local:   http://localhost:5174/</pre></td></tr><tr><td data-num=\"85\"></td><td><pre>  ➜  Network: use <span class=\"token parameter variable\">--host</span> to expose</pre></td></tr><tr><td data-num=\"86\"></td><td><pre>  ➜  press h to show <span class=\"token builtin class-name\">help</span></pre></td></tr></table></figure>",
            "tags": [
                "计算机学科",
                "vue3"
            ]
        },
        {
            "id": "https://pigpigletsgo.github.io/homepage/2024/01/24/computer-science/web/vue/vue3/Pinia%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/",
            "url": "https://pigpigletsgo.github.io/homepage/2024/01/24/computer-science/web/vue/vue3/Pinia%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/",
            "title": "vue3-什么是Pinia",
            "date_published": "2024-01-24T10:48:46.813Z",
            "content_html": "<h2 id=\"什么是pinia\"><a class=\"anchor\" href=\"#什么是pinia\">#</a> 什么是 Pinia</h2>\n<p>Pinia 是 Vue 的最新 &lt;font title='red'&gt; 状态管理工具 &lt;/font&gt;，是 Vuex 的 &lt; font title='red'&gt; 替代品 &lt;/font&gt;。</p>\n<blockquote>\n<p>&lt;span alt='solid'&gt; 优势 &lt;/span&gt;：</p>\n<ol>\n<li>提供更加简单的 API (去掉了 mutation)</li>\n<li>提供符合，组合式风格的 API (和 Vue3 新语法统一)</li>\n<li>去掉了 modules 的概念，每一个 store 都是一个独立的模块</li>\n<li>配合 TypeScript 更加友好，提供可靠的类型推断</li>\n</ol>\n</blockquote>\n<p>&lt;img src=&quot;<span class=\"exturl\" data-url=\"aHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL1BpZ1BpZ0xldHNHby9pbWVhZ2VzL21hc3Rlci8yMDIzMDgzMDIwNDQ0MTQucG5n\">https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202308302044414.png</span>&quot; alt=&quot;image-20230830204405854&quot; style=&quot;zoom:80%;&quot; /&gt;</p>\n<h2 id=\"手动添加pinia到vue项目\"><a class=\"anchor\" href=\"#手动添加pinia到vue项目\">#</a> 手动添加 Pinia 到 Vue 项目</h2>\n<p>在实际开发项目的时候，关于 Pinia 的配置，可以在项目创建时自定添加现在我们初次学习，从零开始：</p>\n<ol>\n<li>\n<p>使用 Vite 创建一个空的 Vue3 项目</p>\n<p><code>npm create vue@latest</code>   | 或者使用 <code>pnpm create vue</code></p>\n</li>\n<li>\n<p>按照 &lt;font title='red'&gt; 官方文档 &lt;/font&gt; 安装 Pinia 到项目中</p>\n<p><code>npm install pinia --save-dev</code>  |  <code>pnpm add pinia -D</code></p>\n<p>安装完成后再 package.json 中查看</p>\n<p><img data-src=\"https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202309180750304.png\" alt=\"image-20230918075003833\" /></p>\n</li>\n<li>\n<p>创建一个 pinia (根存储) 并将其传递给应用程序，在 main.js 中进行配置注册 Pinia</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token string\">'./assets/main.css'</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> createApp <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'vue'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> App <span class=\"token keyword\">from</span> <span class=\"token string\">'./App.vue'</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span>createPinia<span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'pinia'</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">const</span> app <span class=\"token operator\">=</span> <span class=\"token function\">createApp</span><span class=\"token punctuation\">(</span>App<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>app<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>createPinia<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>app<span class=\"token punctuation\">.</span><span class=\"token function\">mount</span><span class=\"token punctuation\">(</span><span class=\"token string\">'#app'</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure></li>\n<li>\n<p>定义一个 Store</p>\n<p>在 src 目录中创建 store/index.js 配置如下内容</p>\n<blockquote>\n<p>在深入了解核心概念之前，我们需要知道 Store 是使用 <code>defineStore()</code>  定义的，并且它需要一个唯一名称，作为第一个参数传递：</p>\n</blockquote>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> defineStore <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'pinia'</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">//useStore 可以是 useUser、useCart 之类的任何东西</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\">// 第一个参数是应用程序中 store 的唯一 id</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> useStore <span class=\"token operator\">=</span> <span class=\"token function\">defineStore</span><span class=\"token punctuation\">(</span><span class=\"token string\">'main'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token comment\">// other options...</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><blockquote>\n<p>这个 name，也称为 id，是必要的，Pinia 使用它来将 store 连接到 dvetools。将返回的函数命名为 <code>useXxx</code>  是跨可组合项的约定，以使其符合你的使用习惯</p>\n</blockquote>\n</li>\n</ol>\n<p><strong>代码演示</strong>：</p>\n<p>main.js</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token string\">'./assets/main.css'</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> createPinia <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'pinia'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">const</span> pinia <span class=\"token operator\">=</span> <span class=\"token function\">createPinia</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> createApp <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'vue'</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> App <span class=\"token keyword\">from</span> <span class=\"token string\">'./App.vue'</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">const</span> app <span class=\"token operator\">=</span> <span class=\"token function\">createApp</span><span class=\"token punctuation\">(</span>App<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>app<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>pinia<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>app<span class=\"token punctuation\">.</span><span class=\"token function\">mount</span><span class=\"token punctuation\">(</span><span class=\"token string\">'#app'</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>store/index.js</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> ref<span class=\"token punctuation\">,</span> computed <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'vue'</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> defineStore <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'pinia'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\">//useStore 可以是 useUser,useCart 之类的任何东西</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">// 第一个参数是应用程序中 store 的唯一 id</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\">// 定义 store</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\">//defineStore (仓库的唯一标识，() => &#123; ... &#125;)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> useStore <span class=\"token operator\">=</span> <span class=\"token function\">defineStore</span><span class=\"token punctuation\">(</span><span class=\"token string\">'main'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  <span class=\"token comment\">// other options ...</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token comment\">// 声明数据 state - count</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  <span class=\"token keyword\">const</span> count <span class=\"token operator\">=</span> <span class=\"token function\">ref</span><span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>  <span class=\"token comment\">// 声明操作数据的方法 action (普通函数) 组合式写法没有 action 选项，普通函数就是 action</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">addCount</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> count<span class=\"token punctuation\">.</span>value<span class=\"token operator\">++</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">subCount</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> count<span class=\"token punctuation\">.</span>value<span class=\"token operator\">--</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>  <span class=\"token comment\">// 声明基于数据派生的计算属性 getters (computed)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>  <span class=\"token comment\">// 利用 computed 函数去实现的，你需要 getters 你就提供一个 computed</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>  <span class=\"token keyword\">const</span> double <span class=\"token operator\">=</span> <span class=\"token function\">computed</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> count<span class=\"token punctuation\">.</span>value <span class=\"token operator\">*</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>  <span class=\"token comment\">// 声明第二个数据 state - msg 如果这个模块除了 count 还有其它数据</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>  <span class=\"token keyword\">const</span> msg <span class=\"token operator\">=</span> <span class=\"token function\">ref</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hello,world'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>  <span class=\"token comment\">// 将数据暴漏出去</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    count<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    msg<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    addCount<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    subCount<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    double</pre></td></tr><tr><td data-num=\"27\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>&lt;span alt='solid'&gt; 目录结构 &lt;/span&gt;：</p>\n<pre><code>|-src\n|--components\n|---icons\n|---son1.vue\n|---son2.vue\n|--store\n|---index.js\n|--App.vue\n|--main.js\n</code></pre>\n<p>父组件</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">setup</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\"></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token keyword\">import</span> Son1Com <span class=\"token keyword\">from</span> <span class=\"token string\">'@/components/Son1Com.vue'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token keyword\">import</span> Son2Com <span class=\"token keyword\">from</span> <span class=\"token string\">'@/components/Son2Com.vue'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> useCounterStore <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@/store/counter.js'</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token comment\">// 不要对 counterStore 做对象解构会丢失数据的响应式</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token keyword\">const</span> counterStore <span class=\"token operator\">=</span> <span class=\"token function\">useCounterStore</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>counterStore<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>template</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h3</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>      <span class=\"token comment\">&lt;!-- 访问 store 数据的话直接访问 --></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>      App.vue根组件 - <span class=\"token comment\"></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>      - <span class=\"token comment\"></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h3</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Son1Com</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>Son1Com</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Son2Com</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>Son2Com</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>template</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>style</span> <span class=\"token attr-name\">scoped</span><span class=\"token punctuation\">></span></span><span class=\"token style\"><span class=\"token language-css\"></pre></td></tr><tr><td data-num=\"21\"></td><td><pre></pre></td></tr><tr><td data-num=\"22\"></td><td><pre></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>style</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>子组件 1</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">setup</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\"></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> useCounterStore <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@/store/counter.js'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token comment\">// 不要对 counterStore 做对象解构会丢失数据的响应式</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token keyword\">const</span> counterStore <span class=\"token operator\">=</span> <span class=\"token function\">useCounterStore</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>template</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span>我是son1 - <span class=\"token comment\"></span> - <span class=\"token comment\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">@click</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>counterStore.addCount<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>+<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>template</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>style</span> <span class=\"token attr-name\">scoped</span><span class=\"token punctuation\">></span></span><span class=\"token style\"><span class=\"token language-css\"></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>style</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>子组件 2</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">setup</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\"></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> useCounterStore <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@/store/counter.js'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token comment\">// 不要对 counterStore 做对象解构会丢失数据的响应式</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token keyword\">const</span> counterStore <span class=\"token operator\">=</span> <span class=\"token function\">useCounterStore</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>template</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span>我是son2 - <span class=\"token comment\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">@click</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>counterStore.subCount<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>-<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>template</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>style</span> <span class=\"token attr-name\">scoped</span><span class=\"token punctuation\">></span></span><span class=\"token style\"><span class=\"token language-css\"></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>style</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>效果：</p>\n<p>&lt;img src=&quot;<span class=\"exturl\" data-url=\"aHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL1BpZ1BpZ0xldHNHby9pbWVhZ2VzL21hc3Rlci8yMDIzMDgzMTEwMDk0OTkuZ2lm\">https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202308311009499.gif</span>&quot; alt=&quot;test&quot; style=&quot;zoom:50%;&quot; /&gt;</p>\n<h2 id=\"action异步实现\"><a class=\"anchor\" href=\"#action异步实现\">#</a> action 异步实现</h2>\n<p><strong>编写方式</strong>：异步 action 函数的写法和 &lt;font title='red'&gt; 组件中获取异步数据的写法完全一致 &lt;/font&gt;。</p>\n<p><strong>接口地址</strong>：<span class=\"exturl\" data-url=\"aHR0cDovL2dlZWsuaXRoZWltYS5uZXQvdjFfMC9jaGFubmVscw==\">http://geek.itheima.net/v1_0/channels</span></p>\n<p><strong>需求</strong>：在 Pinia 中获取频道列表数据并把数据渲染 App 组件的模版中</p>\n<p><img data-src=\"https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202308311013165.png\" alt=\"image-20230831101326740\" /></p>\n<p><strong>代码演示</strong>：</p>\n<p>store/index.js</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> defineStore <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'pinia'</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> ref <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'vue'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> axios <span class=\"token keyword\">from</span> <span class=\"token string\">'axios'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\">// 规范名：use 仓库名 Store 的组合来命名仓库名</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> useChannelStore <span class=\"token operator\">=</span> <span class=\"token function\">defineStore</span><span class=\"token punctuation\">(</span><span class=\"token string\">'channel'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token comment\">// 声明数据，声明一个空数组</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">const</span> channelList <span class=\"token operator\">=</span> <span class=\"token function\">ref</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token comment\">// 声明操作数据的方法 异步 axios</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">getList</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token comment\">// 对象解构</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token keyword\">const</span> <span class=\"token punctuation\">&#123;</span><span class=\"token literal-property property\">data</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span>data<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> axios<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'http://geek.itheima.net/v1_0/channels'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token comment\">// 将请求获取到的数据赋值给声明 的空数组</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        channelList<span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> data<span class=\"token punctuation\">.</span>channels</pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">.</span>channels<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token comment\">// 暴漏出数据</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        channelList<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        getList</pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>父组件</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">setup</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\"></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token keyword\">import</span> Son1Com <span class=\"token keyword\">from</span> <span class=\"token string\">'@/components/Son1Com.vue'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token keyword\">import</span> Son2Com <span class=\"token keyword\">from</span> <span class=\"token string\">'@/components/Son2Com.vue'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> storeToRefs <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'pinia'</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>   <span class=\"token comment\">//counter 还是上面的例子中的仓库，store 中定义了两个仓库命名不同</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> useCounterStore <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@/store/counter.js'</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> useChannelStore <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@/store/channel.js'</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  <span class=\"token keyword\">const</span> counterStore <span class=\"token operator\">=</span> <span class=\"token function\">useCounterStore</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  <span class=\"token keyword\">const</span> channelStore <span class=\"token operator\">=</span> <span class=\"token function\">useChannelStore</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token comment\">// 不要对 counterStore 做对象解构会丢失数据的响应式</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  <span class=\"token comment\">// 如果希望结构之后还是保持对应的响应式对 Store 在解构的时候用一个方法 storeToRefs 这个方法需要从 pinia 中导入一下</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">&#123;</span> count<span class=\"token punctuation\">,</span> msg<span class=\"token punctuation\">&#125;</span> <span class=\"token operator\">=</span> <span class=\"token function\">storeToRefs</span><span class=\"token punctuation\">(</span>counterStore<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">&#123;</span> channelList <span class=\"token punctuation\">&#125;</span> <span class=\"token operator\">=</span> <span class=\"token function\">storeToRefs</span><span class=\"token punctuation\">(</span>channelStore<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>  <span class=\"token comment\">// 因为是个函数所以不需要数据的响应式，数据的响应式在空数组上，直接对象解构拿到</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">&#123;</span> getList <span class=\"token punctuation\">&#125;</span> <span class=\"token operator\">=</span> channelStore</pre></td></tr><tr><td data-num=\"16\"></td><td><pre></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>template</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h3</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>      <span class=\"token comment\">&lt;!-- 访问 store 数据的话直接访问 --></span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>      App.vue根组件 - <span class=\"token comment\"></span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>      - <span class=\"token comment\"></span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h3</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Son1Com</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>Son1Com</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Son2Com</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>Son2Com</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>hr</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">@click</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>getList<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>获取频道数据<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span> <span class=\"token attr-name\">v-for</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>item in channelList<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">:key</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>item.id<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token comment\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>template</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>style</span> <span class=\"token attr-name\">scoped</span><span class=\"token punctuation\">></span></span><span class=\"token style\"><span class=\"token language-css\"></pre></td></tr><tr><td data-num=\"34\"></td><td><pre></pre></td></tr><tr><td data-num=\"35\"></td><td><pre></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>style</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>效果</p>\n<p><img data-src=\"https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202308311114981.png\" alt=\"image-20230831111442463\" /></p>\n<h2 id=\"pinia的调试\"><a class=\"anchor\" href=\"#pinia的调试\">#</a> Pinia 的调试</h2>\n<p>Vue 官方的 &lt;font title='red'&gt;dev-tools 调试工具 &lt;/font&gt; 对 Pinia 直接支持，可以直接进行调试</p>\n<p><img data-src=\"https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202308311115432.png\" alt=\"image-20230831111542048\" /></p>\n<h2 id=\"pinia持久化插件\"><a class=\"anchor\" href=\"#pinia持久化插件\">#</a> Pinia 持久化插件</h2>\n<p>官方文档：<span class=\"exturl\" data-url=\"aHR0cHM6Ly9wcmF6ZGV2cy5naXRodWIuaW8vcGluaWEtcGx1Z2luLXBlcnNpc3RlZHN0YXRlL3poLw==\">https://prazdevs.github.io/pinia-plugin-persistedstate/zh/</span></p>\n<ol>\n<li>\n<p>安装插件  <code>pinia-plugin-persistedstate</code></p>\n<p><code>npm i pinia-plugin-persistedstate</code></p>\n</li>\n<li>\n<p>mian.js 使用</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> persist <span class=\"token keyword\">from</span> <span class=\"token string\">'pinia-plugin-persistedstate'</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token operator\">...</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>app<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span><span class=\"token function\">createPinia</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>persist<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure></li>\n<li>\n<p>store 仓库中，persist: true 开启</p>\n</li>\n</ol>\n<p><strong>代码演示</strong>：</p>\n<p>main.js</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> createApp <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'vue'</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> createPinia <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'pinia'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">// 导入持久化的插件</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> piniaPluginPersistedstate <span class=\"token keyword\">from</span> <span class=\"token string\">'pinia-plugin-persistedstate'</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> App <span class=\"token keyword\">from</span> <span class=\"token string\">'./App.vue'</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">const</span> pinia <span class=\"token operator\">=</span> <span class=\"token function\">createPinia</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 创建 pinia 实例</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\">// 创建根实例</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">const</span> app <span class=\"token operator\">=</span> <span class=\"token function\">createApp</span><span class=\"token punctuation\">(</span>App<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>app<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>pinia<span class=\"token punctuation\">)</span><span class=\"token comment\">//pinia 插件的安装配置</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>app<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>pinia<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>piniaPluginPersistedstate<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>app<span class=\"token punctuation\">.</span><span class=\"token function\">mount</span><span class=\"token punctuation\">(</span><span class=\"token string\">'#app'</span><span class=\"token punctuation\">)</span><span class=\"token comment\">// 视图的挂载</span></pre></td></tr></table></figure><p>conter.js</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> defineStore <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'pinia'</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> ref<span class=\"token punctuation\">,</span> computed <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'vue'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">// 定义 store</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\">//defineStore (仓库的唯一标识，() => &#123; ... &#125;)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> useCounterStore <span class=\"token operator\">=</span> <span class=\"token function\">defineStore</span><span class=\"token punctuation\">(</span><span class=\"token string\">'counter'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token comment\">// 声明数据 state - count</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">const</span> count <span class=\"token operator\">=</span> <span class=\"token function\">ref</span><span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token comment\">// 声明操作数据的方法 action (普通函数) 组合式写法没有 action 选项 普通函数就是 action</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">addCount</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> count<span class=\"token punctuation\">.</span>value<span class=\"token operator\">++</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">subCount</span> <span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> count<span class=\"token punctuation\">.</span>value<span class=\"token operator\">--</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token comment\">// 声明基于数据派生的计算属性 getters (computed)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token comment\">// 利用 computed 函数去实现的，你需要 getters 你就提供一个 computed</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token keyword\">const</span> double <span class=\"token operator\">=</span> <span class=\"token function\">computed</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> count<span class=\"token punctuation\">.</span>value <span class=\"token operator\">*</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token comment\">// 声明第二个数据 state - msg 如果这个模块除了 count 还有其它数据</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token keyword\">const</span> msg <span class=\"token operator\">=</span> <span class=\"token function\">ref</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hello,world'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token comment\">// 将数据暴漏出去</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        count<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        msg<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        addCount<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        subCount<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        double</pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    <span class=\"token literal-property property\">persist</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">// 开启当前模块的持久化</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>        <span class=\"token comment\">// 指定 key 的名称</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>        <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> <span class=\"token string\">'dk-keykeykey'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>        <span class=\"token comment\">// 指定要持久化的数据，其它的不持久化</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>        <span class=\"token literal-property property\">paths</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'count'</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span> </pre></td></tr><tr><td data-num=\"31\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>效果：</p>\n<p>&lt;img src=&quot;<span class=\"exturl\" data-url=\"aHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL1BpZ1BpZ0xldHNHby9pbWVhZ2VzL21hc3Rlci8yMDIzMDgzMTExMzU2NTgucG5n\">https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202308311135658.png</span>&quot; alt=&quot;image-20230831113535324&quot; style=&quot;zoom:50%;&quot; /&gt;</p>\n<blockquote>\n<p>&lt;span alt='solid'&gt; 总结 &lt;/span&gt;：</p>\n<ol>\n<li>\n<p>pinia 是用来做什么的？</p>\n<p>新一代的状态管理工具，替代 vuex</p>\n</li>\n<li>\n<p>pinia 中还需要 mutation 吗？</p>\n<p>不需要，action 即支持同步也支持异步</p>\n</li>\n<li>\n<p>pinia 如何实现 getters</p>\n<p>componentd 计算属性函数</p>\n</li>\n<li>\n<p>pinia 产生的 store 如何解构赋值数值保持响应式？</p>\n<p>storeToRefs</p>\n</li>\n<li>\n<p>pinia 如何快速实现持久化？</p>\n<p>pinia-plugin-persistedstate</p>\n</li>\n</ol>\n</blockquote>\n",
            "tags": [
                "计算机学科",
                "vue3"
            ]
        },
        {
            "id": "https://pigpigletsgo.github.io/homepage/2024/01/24/computer-science/web/vue/vue3/Eslint%E9%85%8D%E7%BD%AE%E4%BB%A3%E7%A0%81%E9%A3%8E%E6%A0%BC/",
            "url": "https://pigpigletsgo.github.io/homepage/2024/01/24/computer-science/web/vue/vue3/Eslint%E9%85%8D%E7%BD%AE%E4%BB%A3%E7%A0%81%E9%A3%8E%E6%A0%BC/",
            "title": "vue3-Eslint配置代码风格",
            "date_published": "2024-01-24T10:48:46.810Z",
            "content_html": "<h2 id=\"eslint配置代码风格\"><a class=\"anchor\" href=\"#eslint配置代码风格\">#</a> Eslint 配置代码风格</h2>\n<p><strong>环境同步</strong>：</p>\n<ol>\n<li>安装了插件 ESlint，开启保存自动修复</li>\n<li>禁用了插件 Prettier，并关闭保存自动格式化</li>\n</ol>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">//ESlint 插件 + Vscode 配置  实现自动格式化修复</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token string-property property\">\"editor.codeActionsOnSave\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>   <span class=\"token string-property property\">\"source.fixAll\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token string-property property\">\"editor.formatOnSaven\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span></pre></td></tr></table></figure><p><strong>配置文件</strong> <code>.eslintrc.cjs</code></p>\n<ol>\n<li>prettier 风格配置 <span class=\"exturl\" data-url=\"aHR0cHM6Ly9wcmV0dGllci5pbw==\">https://prettier.io</span>\n<ol>\n<li>单引号</li>\n<li>不使用分号</li>\n<li>每行宽度至多 80 字符</li>\n<li>不加对象 | 数组最后逗号</li>\n<li>换行符号不限制 (win mac 不一致)</li>\n</ol>\n</li>\n<li>vue 组件名称多单词组成 (忽略 index.vue)</li>\n<li>props 解构 (关闭)</li>\n</ol>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token literal-property property\">rules</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>   <span class=\"token comment\">//prettier 专注于代码的美观度 (格式化工具)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>   <span class=\"token comment\">// 前置：</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>   <span class=\"token comment\">// 1. 禁用格式化插件 prettier  format on save 关闭</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>   <span class=\"token comment\">// 2. 安装 Eslint 插件，并配置保存时自动修复</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>   <span class=\"token string-property property\">'prettier/prettier'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>      <span class=\"token string\">'warn'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>      <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>         <span class=\"token literal-property property\">singleQuote</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 单引号</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>         <span class=\"token literal-property property\">semi</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 无分号</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>         <span class=\"token literal-property property\">printWidth</span><span class=\"token operator\">:</span> <span class=\"token number\">80</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 每行宽度至多 80 字符</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>         <span class=\"token literal-property property\">trailingComma</span><span class=\"token operator\">:</span> <span class=\"token string\">'none'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 不加对象 | 数组最后逗号</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>         <span class=\"token literal-property property\">endOfLine</span><span class=\"token operator\">:</span> <span class=\"token string\">'auto'</span> <span class=\"token comment\">// 换行符号不限制（win mac 不一致）</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>   <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>      <span class=\"token comment\">// ESLint 关注于规范，如果不符合规范，报错</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>      <span class=\"token string-property property\">'vue/multi-word-component-names'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>         <span class=\"token string\">'warn'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>         <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>            <span class=\"token literal-property property\">ignores</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'index'</span><span class=\"token punctuation\">]</span> <span class=\"token comment\">//vue 组件名称多单词组成（忽略 index.vue）</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>         <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>      <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>         <span class=\"token string-property property\">'vue/no-setup-props-destructure'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'off'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 关闭 props 解构的校验 (props 解构丢失响应式)</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>            <span class=\"token comment\">// 添加未定义变量错误提示，create-vue@3.6.3 关闭，这里加上是为了支持下一个章节演示。</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>            <span class=\"token string-property property\">'no-undef'</span><span class=\"token operator\">:</span> <span class=\"token string\">'error'</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p><img data-src=\"https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202308311631742.png\" alt=\"image-20230831163101352\" /></p>\n",
            "tags": [
                "计算机学科",
                "vue3"
            ]
        }
    ]
}