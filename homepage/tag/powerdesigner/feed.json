{
    "version": "https://jsonfeed.org/version/1",
    "title": "homepage • All posts by \"powerdesigner\" tag",
    "description": "欢迎来我的博客空间",
    "home_page_url": "https://pigpigletsgo.github.io/homepage",
    "items": [
        {
            "id": "https://pigpigletsgo.github.io/homepage/2024/04/07/tools/powerdesigner/PowerDesigner%E7%94%9F%E6%88%90SQL%E5%B8%A6%E6%B3%A8%E9%87%8A%E9%81%BF%E5%85%8Dcomment%E6%8A%A5%E9%94%99/",
            "url": "https://pigpigletsgo.github.io/homepage/2024/04/07/tools/powerdesigner/PowerDesigner%E7%94%9F%E6%88%90SQL%E5%B8%A6%E6%B3%A8%E9%87%8A%E9%81%BF%E5%85%8Dcomment%E6%8A%A5%E9%94%99/",
            "title": "PowerDesigner生成SQL带注释避免comment报错",
            "date_published": "2024-04-07T09:39:42.973Z",
            "content_html": "<h1 id=\"powerdesigner生成sql带注释避免comment报错\"><a class=\"anchor\" href=\"#powerdesigner生成sql带注释避免comment报错\">#</a> PowerDesigner 生成 SQL 带注释避免 comment 报错</h1>\n<h2 id=\"powerdesigner-165-生成的sql语句在mysql数据库无法成功执行\"><a class=\"anchor\" href=\"#powerdesigner-165-生成的sql语句在mysql数据库无法成功执行\">#</a> powerdesigner 16.5 生成的 sql 语句在 mysql 数据库无法成功执行</h2>\n<p>用 pd 导出的 sql, 默认无法正常执行会报错</p>\n<pre><code>[Err] 1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'comment on table TB_PAYOUT_APPLY_UNIQUE is \n'结汇申请防重表'' at line 1\n</code></pre>\n<p>默认导出 sql 为：</p>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># 为了减少篇幅，减少了部分字段注释</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">create</span> <span class=\"token keyword\">table</span> TB_PAYOUT_APPLY_UNIQUE </pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>   SRC_MERCHANT_ID      <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">32</span><span class=\"token punctuation\">)</span>                    <span class=\"token operator\">not</span> <span class=\"token boolean\">null</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>   MER_ORDER_NO         <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">64</span><span class=\"token punctuation\">)</span>                    <span class=\"token operator\">not</span> <span class=\"token boolean\">null</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>   UNION_TIME           <span class=\"token keyword\">datetime</span>                       <span class=\"token operator\">not</span> <span class=\"token boolean\">null</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>   PAYOUT_SEQNO         <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">64</span><span class=\"token punctuation\">)</span>                    <span class=\"token operator\">not</span> <span class=\"token boolean\">null</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>   GMT_CREATE           <span class=\"token keyword\">datetime</span>                       <span class=\"token boolean\">null</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token keyword\">comment</span> <span class=\"token keyword\">on</span> <span class=\"token keyword\">table</span> TB_PAYOUT_APPLY_UNIQUE <span class=\"token operator\">is</span> </pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token string\">'结汇申请防重表'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token keyword\">comment</span> <span class=\"token keyword\">on</span> <span class=\"token keyword\">column</span> TB_PAYOUT_APPLY_UNIQUE<span class=\"token punctuation\">.</span>SRC_MERCHANT_ID <span class=\"token operator\">is</span> </pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token string\">'交易来源商户号'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token keyword\">create</span> <span class=\"token keyword\">index</span> TB_PAYOUT_UNIQUE_IDX <span class=\"token keyword\">on</span> TB_PAYOUT_APPLY_UNIQUE <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>PAYOUT_SEQNO <span class=\"token keyword\">ASC</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p><code>comment on column TB_PAYOUT_APPLY_UNIQUE.MER_ORDER_NO is '外部订单号';</code>  在 mysql 下是无法直接执行</p>\n<p>mysql 的单字段修改，<strong> 使用 alter table 方法</strong></p>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">ALTER</span> <span class=\"token keyword\">TABLE</span> table_name <span class=\"token keyword\">MODIFY</span> <span class=\"token keyword\">COLUMN</span> column_name <span class=\"token keyword\">TINYINT</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">tinyint</span>表示<span class=\"token keyword\">column</span>类型<span class=\"token punctuation\">)</span> <span class=\"token keyword\">COMMENT</span> <span class=\"token string\">'-1：默认值，1：人员id，2：公司id'</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>这种写法必须要指定 字段类型: <code>TINYINT(tinyint表示column类型)</code>  否则会报错.</p>\n<p><strong>那么需要修改 sql 的注释修改.</strong></p>\n<h2 id=\"1-列注释修改\"><a class=\"anchor\" href=\"#1-列注释修改\">#</a> 1 列注释修改</h2>\n<ol>\n<li>\n<p>在 Database -&gt; edit Current DBMS... 设置 dbms 的属性，找到 script -&gt; objects -&gt; column -&gt; add</p>\n</li>\n<li>\n<p>在原来的内容后面添加 <code>[ comment %.q:COMMENT%]]注意去掉一个]</code></p>\n<p>添加后的内容为 (可拷贝)： <code>%20:COLUMN% %30:DATATYPE%[.Z:[%Compressed%? compressed][ %NULLNOTNULL%][%IDENTITY%?[.O:[ default autoincrement][ identity]]:[%COMPUTE%? compute (%COMPUTE%):[ default %DEFAULT%]]] [%CONSTDEFN%][ comment %.q:COMMENT%]]</code></p>\n</li>\n<li>\n<p>把 script -&gt; column -&gt; ColumnComment 的 Value 清空</p>\n</li>\n</ol>\n<h2 id=\"2-表注释修改\"><a class=\"anchor\" href=\"#2-表注释修改\">#</a> 2 表注释修改</h2>\n<ol>\n<li>\n<p>在 Database -&gt; edit Current DBMS... 设置 dbms 的属性</p>\n</li>\n<li>\n<p>找到 script -&gt; objects -&gt; Table -&gt; TableComment: Value 中</p>\n<p>修改后内容为 (可拷贝)： <code>alter table [%QUALIFIER%]%TABLE% comment %.60qA:COMMENT%</code></p>\n</li>\n</ol>\n<h2 id=\"3-去掉主键注释\"><a class=\"anchor\" href=\"#3-去掉主键注释\">#</a> 3 去掉主键注释</h2>\n<ol>\n<li>在 Databse -&gt; edit Current DBMS... 设置 dbms 的属性，找到 script -&gt; objects -&gt; Pkey -&gt; PKeyComment 清空 Value 值，如需要注释则修改其格式</li>\n</ol>\n<h2 id=\"其它修改\"><a class=\"anchor\" href=\"#其它修改\">#</a> 其它修改</h2>\n<ol>\n<li>\n<p>调整导出 sql 的编码格式</p>\n<p>database -&gt; Generate Databse -&gt; Format Encoding: UTF-8 点击确定</p>\n</li>\n</ol>\n<h2 id=\"调整后的sql\"><a class=\"anchor\" href=\"#调整后的sql\">#</a> 调整后的 sql</h2>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">create</span> <span class=\"token keyword\">table</span> TB_OCEAN_PAYOUT_BILL_RELATION </pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>   SRC_MERCHANT_ID      <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">32</span><span class=\"token punctuation\">)</span>                    <span class=\"token operator\">not</span> <span class=\"token boolean\">null</span>  <span class=\"token keyword\">comment</span> <span class=\"token string\">'交易来源商户号'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>   MER_ORDER_NO         <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">64</span><span class=\"token punctuation\">)</span>                    <span class=\"token operator\">not</span> <span class=\"token boolean\">null</span>  <span class=\"token keyword\">comment</span> <span class=\"token string\">'外部订单号'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>   PAYOUT_SEQNO         <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">64</span><span class=\"token punctuation\">)</span>                    <span class=\"token operator\">not</span> <span class=\"token boolean\">null</span>  <span class=\"token keyword\">comment</span> <span class=\"token string\">'结汇交易流水号'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>   OCEAN_PAY_BILL_NO    <span class=\"token keyword\">numeric</span><span class=\"token punctuation\">(</span><span class=\"token number\">16</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>                  <span class=\"token boolean\">null</span>  <span class=\"token keyword\">comment</span> <span class=\"token string\">'跨境支付单号'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>   DT_CREATE            <span class=\"token keyword\">datetime</span>                       <span class=\"token boolean\">null</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>   <span class=\"token keyword\">constraint</span> PK_TB_OCEAN_PAYOUT_BILL_RELATI <span class=\"token keyword\">primary</span> <span class=\"token keyword\">key</span> <span class=\"token keyword\">clustered</span> <span class=\"token punctuation\">(</span>SRC_MERCHANT_ID<span class=\"token punctuation\">,</span> MER_ORDER_NO<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token keyword\">alter</span> <span class=\"token keyword\">table</span> TB_OCEAN_PAYOUT_BILL_RELATION <span class=\"token keyword\">comment</span> <span class=\"token string\">'结汇申请支付单关联表'</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure>",
            "tags": [
                "tools",
                "PowerDesigner"
            ]
        }
    ]
}