<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#FFF"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="alternate" type="application/rss+xml" title="D の Java" href="https://pigpigletsgo.github.io/rss.xml"><link rel="alternate" type="application/atom+xml" title="D の Java" href="https://pigpigletsgo.github.io/atom.xml"><link rel="alternate" type="application/json" title="D の Java" href="https://pigpigletsgo.github.io/feed.json"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/css/app.css?v=0.2.5"><meta name="keywords" content="计算机学科,web,js"><link rel="canonical" href="https://pigpigletsgo.github.io/computer-science/web/js/JS%E8%BF%9B%E9%98%B6/JS%E8%BF%9B%E9%98%B6-%E6%B7%B1%E5%85%A5%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/"><title>JS 进阶 - 深入面向对象 - JS 进阶 - js - web - 计算机学科 | D & PersonalBlog = D の Java = 别怕路长梦远</title><meta name="generator" content="Hexo 5.4.2"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">JS 进阶 - 深入面向对象</h1><div class="meta"><span class="item" title="创建时间：2024-03-13 14:05:28"><span class="icon"><i class="ic i-calendar"></i> </span><span class="text">发表于</span> <time itemprop="dateCreated datePublished" datetime="2024-03-13T14:05:28+08:00">2024-03-13</time> </span><span class="item" title="本文字数"><span class="icon"><i class="ic i-pen"></i> </span><span class="text">本文字数</span> <span>33k</span> <span class="text">字</span> </span><span class="item" title="阅读时长"><span class="icon"><i class="ic i-clock"></i> </span><span class="text">阅读时长</span> <span>30 分钟</span></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="切换导航栏"><span class="line"></span> <span class="line"></span> <span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">D & PersonalBlog</a></li></ul><ul class="right"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div id="imgs" class="pjax"><ul><li class="item" data-background-image="https://img.timelessq.com/images/2022/07/26/4c481240fd5e6e7b076ca8fe50da6e52.jpg"></li><li class="item" data-background-image="https://img.timelessq.com/images/2022/07/26/5bf6cc840c1eee492a78927590510321.jpg"></li><li class="item" data-background-image="https://img.timelessq.com/images/2022/07/26/46d0371c19c0586fb0629e97bac23133.jpg"></li><li class="item" data-background-image="https://img.timelessq.com/images/2022/07/26/9544aaed0500309bfed0ddfc0321f933.jpg"></li><li class="item" data-background-image="https://img.timelessq.com/images/2022/07/26/38f4d53604cb5ca98a47fea8d62cde72.jpg"></li><li class="item" data-background-image="https://img.timelessq.com/images/2022/07/26/6edf0eae0c5c58dadd09198c6c3c9f6d.jpg"></li></ul></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"/></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"/><use xlink:href="#gentle-wave" x="48" y="3"/><use xlink:href="#gentle-wave" x="48" y="5"/><use xlink:href="#gentle-wave" x="48" y="7"/></g></svg></div><main><div class="inner"><div id="main" class="pjax"><div class="article wrap"><div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i> <span><a href="/">首页</a></span><i class="ic i-angle-right"></i> <span itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/computer-science/" itemprop="item" rel="index" title="分类于 计算机学科"><span itemprop="name">计算机学科</span></a><meta itemprop="position" content="1"></span><i class="ic i-angle-right"></i> <span itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/computer-science/web/" itemprop="item" rel="index" title="分类于 web"><span itemprop="name">web</span></a><meta itemprop="position" content="2"></span><i class="ic i-angle-right"></i> <span itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/computer-science/web/js/" itemprop="item" rel="index" title="分类于 js"><span itemprop="name">js</span></a><meta itemprop="position" content="3"></span><i class="ic i-angle-right"></i> <span class="current" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/computer-science/web/js/JS%E8%BF%9B%E9%98%B6/" itemprop="item" rel="index" title="分类于 JS 进阶"><span itemprop="name">JS 进阶</span></a><meta itemprop="position" content="4"></span></div><article itemscope itemtype="http://schema.org/Article" class="post block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://pigpigletsgo.github.io/computer-science/web/js/JS%E8%BF%9B%E9%98%B6/JS%E8%BF%9B%E9%98%B6-%E6%B7%B1%E5%85%A5%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="D"><meta itemprop="description" content="别怕路长梦远, 欢迎来我的博客空间"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="D の Java"></span><div class="body md" itemprop="articleBody"><h2 id="深入面向对象"><a class="anchor" href="#深入面向对象">#</a> 深入面向对象</h2><h3 id="1-编程思想"><a class="anchor" href="#1-编程思想">#</a> 1 编程思想</h3><ul><li>面向过程</li><li>面向对象</li></ul><h4 id="11-面向过程"><a class="anchor" href="#11-面向过程">#</a> 1.1 面向过程</h4><p>目标：从生活例子了解什么是面向过程</p><blockquote><ul><li>&lt;font title=red&gt; 面向过程 &lt;/font&gt;：就是分析出解决问题所需要的步骤，然后用函数把这些步骤一步一步实现，使用的时候再一个一个的依次调用就可以了。</li><li>&lt;font&gt; 举个栗子 &lt;/font&gt;：蛋炒饭</li></ul><ol><li>蒸米饭</li><li>炒鸡蛋</li><li>放点，胡萝卜丁，洋葱，香肠，红椒</li><li>最后将它们依次调用 就得出了 香喷喷的 <mark>蛋炒饭</mark>.</li></ol><p>&lt;font&gt; 面向过程 &lt;/font&gt;，就是按照我们分析好了的步骤，按照步骤解决问题。</p></blockquote><hr><h4 id="12-面向对象-oop"><a class="anchor" href="#12-面向对象-oop">#</a> 1.2 面向对象 (oop)</h4><p>目标：从生活例子了解什么是面向对象编程</p><blockquote><ul><li>&lt;font title=red&gt; 面向对象 &lt;/font&gt;：是把事务分解成为一个个对象，然后由对象之间分工合作。</li><li>&lt;font&gt; 举个栗子 &lt;/font&gt;：盖浇饭</li></ul><ol><li>下面的配菜都提前准备好了然后直接调用就好了</li></ol></blockquote><p><img data-src="https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202308090914759.png" alt="image-20230809091454087"></p><blockquote><ul><li>在面向对象程序开发思想中，每一个对象都是功能中心，具有明确分工。</li><li>面向对象编程具有灵活，代码可复用，容易维护和开发的优点，更适合多人合作的大型软件项目。</li><li>&lt;font&gt; 面向对象的特性 &lt;/font&gt;：<ul><li>封装性</li><li>继承性</li><li>多态性</li></ul></li></ul></blockquote><p><img data-src="https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202308090925578.png" alt="image-20230809092546938"></p><p><strong>继承</strong>：继承自拖拉机，实现了扫地的接口</p><p><strong>封装</strong>：无需知道如何运作，开动即可</p><p><strong>动态</strong>：平时扫地，天热当风扇</p><p><strong>重用</strong>：没用额外动力，重复利用了发动机能量</p><p><strong>多线程</strong>：多个扫把同时工作</p><p><strong>低耦合</strong>：扫把可以换成拖把而无须改动</p><p><strong>组件编程</strong>：每个配件都是可单独利用的工具</p><p><strong>适配器模式</strong>：无需造发动机，继承自拖拉机，只取动力方法</p><p><strong>代码托管</strong>：无需管理垃圾，直接扫到路边即可</p><hr><h4 id="13-面向过程面向对象-对比"><a class="anchor" href="#13-面向过程面向对象-对比">#</a> 1.3 面向过程 &amp; 面向对象 对比</h4><h5 id="131-面向过程编程"><a class="anchor" href="#131-面向过程编程">#</a> 1.3.1 面向过程编程</h5><p><strong>优点</strong>：</p><p>性能比面向对象高，适合跟硬件联系很紧密的东西，例如单片机就采用的面向过程面呈。</p><p><strong>缺点</strong>：</p><p>没有面向对象易维护，易复用，易扩展</p><h5 id="132-面向对象编程-oop"><a class="anchor" href="#132-面向对象编程-oop">#</a> 1.3.2 面向对象编程 (oop)</h5><p><strong>优点</strong>：</p><p>易维护，易复用，易扩展，由于面向对象有封装，继承，多态的特性，可以设计出低耦合的系统，使系统 更加灵活，更加易于维护</p><p><strong>缺点</strong>：</p><p>性能比面向过程低</p><hr><h3 id="2-构造函数"><a class="anchor" href="#2-构造函数">#</a> 2 构造函数</h3><blockquote><ul><li>封装是面向对象思想中比较重要的一部分，JS 面向对象可以通过<mark>构造函数实现的封装</mark>。</li><li>同样的将变量和函数组合到了一起并通过<mark> this 实现数据的共享</mark>，所不同的是借助<mark>构造函数创建出来的实例对象之间是彼此不影响</mark>的</li></ul></blockquote><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">function</span> <span class="token function">Star</span><span class="token punctuation">(</span><span class="token parameter">uname <span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>   <span class="token keyword">this</span><span class="token punctuation">.</span>uname <span class="token operator">=</span> uname</pre></td></tr><tr><td data-num="3"></td><td><pre>   <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age</pre></td></tr><tr><td data-num="4"></td><td><pre>   <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">sing</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'我会唱歌'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="6"></td><td><pre>   <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token comment">// 实例对象，获得了构造函数中封装的所有逻辑</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">const</span> ldh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Star</span><span class="token punctuation">(</span><span class="token string">'刘德华'</span> <span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">const</span> zxy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Star</span><span class="token punctuation">(</span><span class="token string">'张学友'</span> <span class="token punctuation">,</span> <span class="token number">19</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="11"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ldh <span class="token operator">===</span> zxy<span class="token punctuation">)</span><span class="token comment">// false</span></pre></td></tr><tr><td data-num="12"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ldh<span class="token punctuation">.</span>sing <span class="token operator">===</span> zxy<span class="token punctuation">.</span>sing<span class="token punctuation">)</span><span class="token comment">// false</span></pre></td></tr></table></figure><p>&lt;blockquote alt=danger&gt;<br>&lt;div&gt;<br>&lt;p&gt;<br>&lt;span&gt;&lt;font title=red &gt; 注意 &lt;/font&gt;：&lt;/span&gt;<br>&lt;/p&gt;<br>&lt;ul&gt;<br>&lt;li&gt;<br>&lt;p&gt;<br>&lt;span&gt; 封装是面向对象思想中比较重要的一部分，JS 面向对象可以通过 &lt; span alt=solid &gt; 构造函数实现的封装 &lt;/span&gt;&lt;/span&gt;<br>&lt;/p&gt;<br>&lt;/li&gt;<br>&lt;li&gt;<br>&lt;p&gt;<br>&lt;span&gt;&lt;span alt=wavy &gt; 前面我们学过的构造函数方法很好用 &lt;/span&gt;，但是 &lt; font title=red &gt; 存在浪费内存的问题 &lt;/font&gt;&lt;/span&gt;<br>&lt;/p&gt;<br>&lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/div&gt;<br>&lt;/blockquote&gt;</p><p><img data-src="https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202308091000680.png" alt="image-20230809100029870"></p><p>&lt;blockquote alt=success&gt;<br>&lt;div&gt;<br>&lt;p&gt;<br>&lt;span&gt;&lt;font &gt; 总结 &lt;/font&gt;：&lt;/span&gt;<br>&lt;/p&gt;<br>&lt;ol&gt;<br>&lt;li&gt;<br>&lt;p&gt;<br>&lt;span&gt; 构造函数体现了面向对象的 &lt; span alt=solid &gt; 封装特性 &lt;/span&gt;&lt;/span&gt;<br>&lt;/p&gt;<br>&lt;/li&gt;<br>&lt;li&gt;<br>&lt;p&gt;<br>&lt;span&gt;&lt;span alt=wavy &gt; 构造函数实例创建的对象彼此独立，互不影响 &lt;/span&gt;&lt;/span&gt;<br>&lt;/p&gt;<br>&lt;/li&gt;<br>&lt;/ol&gt;<br>&lt;/div&gt;<br>&lt;/blockquote&gt;</p><p>&lt;blockquote alt=info&gt;<br>&lt;div&gt;<br>&lt;p&gt;<br>&lt;span&gt; 我们希望 &lt; span alt=solid &gt; 所有的对象使用同一个函数，这样就比较节省内存 &lt;/span&gt;，那么我们要怎么做呢？&lt;/span&gt;<br>&lt;/p&gt;<br>&lt;p&gt;<br>&lt;span&gt; 我们就需要用到 &lt; font title=red &gt; 原型了 &lt;/font&gt; 下面学习原型 &lt;/span&gt;<br>&lt;/p&gt;<br>&lt;/div&gt;<br>&lt;/blockquote&gt;</p><h3 id="3-原型"><a class="anchor" href="#3-原型">#</a> 3 原型</h3><p>&lt;blockquote alt=info&gt;<br>&lt;div&gt;<br>&lt;p&gt;<br>&lt;span&gt;&lt;font &gt; 学习路径 &lt;/font&gt;：&lt;/span&gt;<br>&lt;/p&gt;<br>&lt;ul&gt;<br>&lt;li&gt;<br>&lt;p&gt;<br>&lt;span&gt; 原型 &lt;/span&gt;<br>&lt;/p&gt;<br>&lt;/li&gt;<br>&lt;li&gt;<br>&lt;p&gt;<br>&lt;span&gt;constructor 属性 &lt;/span&gt;<br>&lt;/p&gt;<br>&lt;/li&gt;<br>&lt;li&gt;<br>&lt;p&gt;<br>&lt;span&gt; 对象原型 &lt;/span&gt;<br>&lt;/p&gt;<br>&lt;/li&gt;<br>&lt;li&gt;<br>&lt;p&gt;<br>&lt;span&gt; 原型继承 &lt;/span&gt;<br>&lt;/p&gt;<br>&lt;/li&gt;<br>&lt;li&gt;<br>&lt;p&gt;<br>&lt;span&gt; 原型链 &lt;/span&gt;<br>&lt;/p&gt;<br>&lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/div&gt;<br>&lt;/blockquote&gt;</p><h4 id="31-原型prototype"><a class="anchor" href="#31-原型prototype">#</a> 3.1 原型 (prototype)</h4><p>目标：能够利用<mark>原型对象</mark> 实现 <mark>方法 共享</mark>.</p><blockquote><ul><li>构造函数通过<mark>原型分配的函数</mark>是所有对象所 &lt;font title=red&gt; 共享的 &lt;/font&gt;。</li><li>JavaScript 规定，&lt;font title=red&gt; 每一个构造函数都有一个 prototype 属性 &lt;/font&gt;，指向另一个对象，所以我们也称为 &lt; font title=red &gt; 原型对象 &lt;/font&gt;.</li><li>这个对象可以 &lt;font title=red&gt; 挂载函数 &lt;/font&gt;，对象实例化不会多次创建 &lt; span alt=solid &gt; 原型 &lt;/span &gt; 上函数，&lt;span alt=wavy &gt; 节约内存 &lt;/span&gt;.</li><li><mark>我们可以把那些不变的方法，直接定义在 prototype 对象上<sup>不要直接写在构造函数中</sup>，这样所有对象的实例就可以共享这些方法</mark>。</li><li><mark>构造函数和原型对象中的 this 都指向 实例化的对象</mark>。</li></ul></blockquote><p><img data-src="https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202308091028554.png" alt="image-20230809102822018"></p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 1. 公共的属性写到 构造函数里面</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">function</span> <span class="token function">Star</span><span class="token punctuation">(</span><span class="token parameter">uname<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">.</span>uname <span class="token operator">=</span> uname</pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age</pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token comment">// 构造函数实例对象都是独立的彼此互不影响但是 多个对象就会有多个不同地址的函数 浪费内存</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token comment">// 不建议将函数写在构造函数中</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token comment">// this.sing = function () &#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token comment">//     console.log (' 唱歌 ')</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token comment">// &#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token comment">// 2. 公共的函数写到 原型对象 身上</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token class-name">Star</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sing</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'唱歌'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token keyword">const</span> ldh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Star</span><span class="token punctuation">(</span><span class="token string">'刘德华'</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token keyword">const</span> zxy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Star</span><span class="token punctuation">(</span><span class="token string">'张学友'</span><span class="token punctuation">,</span> <span class="token number">19</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="17"></td><td><pre>ldh<span class="token punctuation">.</span><span class="token function">sing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">// 唱歌</span></pre></td></tr><tr><td data-num="18"></td><td><pre>zxy<span class="token punctuation">.</span><span class="token function">sing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">// 唱歌</span></pre></td></tr><tr><td data-num="19"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ldh<span class="token punctuation">.</span>sing <span class="token operator">===</span> zxy<span class="token punctuation">.</span>sing<span class="token punctuation">)</span></pre></td></tr></table></figure><p><img data-src="https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202308091032780.png" alt="image-20230809103215391"></p><p>&lt;blockquote alt=success&gt;<br>&lt;div&gt;<br>&lt;p&gt;<br>&lt;span&gt;&lt;font &gt; 总结 &lt;/font&gt;：&lt;/span&gt;<br>&lt;/p&gt;<br>&lt;ul&gt;<br>&lt;li&gt;<br>&lt;p&gt;<br>&lt;span&gt; 公共的属性写到，构造函数里面 &lt;/span&gt;<br>&lt;/p&gt;<br>&lt;/li&gt;<br>&lt;li&gt;<br>&lt;p&gt;<br>&lt;span&gt; 公共的函数写到 原型对象 身上 &lt;/span&gt;<br>&lt;/p&gt;<br>&lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;hr&gt;<br>&lt;ol&gt;<br>&lt;li&gt;<br>&lt;p&gt;<br>&lt;span&gt; 原型是什么？&lt;/span&gt;<br>&lt;/p&gt;<br>&lt;ul&gt;<br>&lt;li&gt;<br>&lt;p&gt;<br>&lt;span&gt; 一个对象，我们也称为 &lt; font&gt;prototype&lt;/font &gt; 为 &lt; font &gt; 原型对象 &lt;/font&gt;&lt;/span&gt;<br>&lt;/p&gt;<br>&lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/li&gt;<br>&lt;li&gt;<br>&lt;p&gt;<br>&lt;span&gt; 原型的作用是什么？&lt;/span&gt;<br>&lt;/p&gt;<br>&lt;ul&gt;<br>&lt;li&gt;<br>&lt;p&gt;<br>&lt;span&gt; 共享方法 &lt;/span&gt;<br>&lt;/p&gt;<br>&lt;/li&gt;<br>&lt;li&gt;<br>&lt;p&gt;<br>&lt;span&gt; 可以把那些 &lt; font &gt; 不变的方法 &lt;/font&gt;，直接定义在 &lt; font&gt;prototype&lt;/font &gt; 对象上 &lt;/span&gt;<br>&lt;/p&gt;<br>&lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/li&gt;<br>&lt;li&gt;<br>&lt;p&gt;<br>&lt;span&gt; 构造函数和原型里面的 this 指向谁？&lt;/span&gt;<br>&lt;/p&gt;<br>&lt;ul&gt;<br>&lt;li&gt;<br>&lt;p&gt;<br>&lt;span&gt;&lt;font title=red &gt; 实例化的对象 &lt;/font&gt;&lt;/span&gt;<br>&lt;/p&gt;<br>&lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/li&gt;<br>&lt;/ol&gt;<br>&lt;/div&gt;<br>&lt;/blockquote&gt;</p><blockquote><p>两句话：</p><ol><li>所有的对象里面都有 <code>__proto__</code> 对象原型 指向原型 <code>prototype</code> 对象<ul><li><code>__proto__.constructor</code> 指向构造函数</li></ul></li><li>所有的原型对象 <code>(prototype)</code> 里面都有 <code>constructor</code> ，指向 创建该原型对象的构造函数</li></ol></blockquote><h4 id="311-原型this指向"><a class="anchor" href="#311-原型this指向">#</a> 3.1.1 原型 —this 指向</h4><p>目标：能够说出构造函数和原型对象中的 this 指向</p><blockquote><p><mark>构造函数</mark>和<mark>原型对象</mark>中的<mark> this</mark> 都<mark>指向</mark>，<mark>实例化的对象</mark>.</p></blockquote><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">let</span> that</pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">function</span> <span class="token function">Star</span><span class="token punctuation">(</span><span class="token parameter">uname<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token comment">// 构造函数里面的 this 就是 实例对象 ldh</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    that <span class="token operator">=</span> <span class="token keyword">this</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token comment">// console.log(this)</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">.</span>uanem <span class="token operator">=</span> uname</pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age</pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">let</span> that1</pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token comment">// 原型对象里面的函数 this 指向的还是 实例对象 ldh</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token class-name">Star</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sing</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    that1 <span class="token operator">=</span> <span class="token keyword">this</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'会唱歌'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token comment">// 实例对象 ldh</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token keyword">const</span> ldh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Star</span><span class="token punctuation">(</span><span class="token string">'刘德华'</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="17"></td><td><pre>ldh<span class="token punctuation">.</span><span class="token function">sing</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token comment">// 判断两个 对象是否是同一个 对象</span></pre></td></tr><tr><td data-num="19"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>that <span class="token operator">===</span> ldh<span class="token punctuation">)</span> <span class="token comment">// true</span></pre></td></tr><tr><td data-num="20"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>that1 <span class="token operator">===</span> ldh<span class="token punctuation">)</span> <span class="token comment">// true</span></pre></td></tr></table></figure><p>&lt;blockquote alt=success&gt;<br>&lt;div&gt;<br>&lt;p&gt;<br>&lt;span&gt;&lt;font &gt; 总结 &lt;/font&gt;：&lt;/span&gt;<br>&lt;/p&gt;<br>&lt;ol&gt;<br>&lt;li&gt;<br>&lt;p&gt;<br>&lt;span&gt; 构造函数和原型里面的 this 指向谁？&lt;/span&gt;<br>&lt;/p&gt;<br>&lt;/li&gt;<br>&lt;/ol&gt;<br>&lt;ul&gt;<br>&lt;li&gt;<br>&lt;p&gt;<br>&lt;span&gt; 实例化的对象 &lt;/span&gt;<br>&lt;/p&gt;<br>&lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/div&gt;<br>&lt;/blockquote&gt;</p><h4 id="312-数组扩展案例求最大值和数组求和"><a class="anchor" href="#312-数组扩展案例求最大值和数组求和">#</a> 3.1.2 数组扩展案例 — 求最大值和数组求和</h4><p><strong>代码</strong>：</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 自己定义 数组扩展方法  求和 和 最大值</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">// 1. 我们定义的这个方法， 任何一个数组实例对象都可以使用</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">// 2. 自定义的方法写到 数组.prototype 身上</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">// 最大值</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">// 数组实例.prototype 原型.max 返回最大值</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">max</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token comment">// 原型函数里面的 this 指向 实例对象 arr 并 展开 this</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">// 3</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token comment">// 求和函数</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sum</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token comment">// 原型函数里面的 this 指向 实例对象 arr</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">prev<span class="token punctuation">,</span> current</span><span class="token punctuation">)</span> <span class="token operator">=></span> prev <span class="token operator">+</span> current<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">// 6</span></pre></td></tr></table></figure><hr><h4 id="32-constructor属性"><a class="anchor" href="#32-constructor属性">#</a> 3.2 constructor 属性</h4><p><strong>在哪里</strong>？每个<mark>原型对象</mark>里面都有个 <code>constructor</code> 属性 ( <code>constructor</code> 构造函数)</p><p><strong>作用</strong>：该属性 &lt;font title=red&gt; 指向 &lt;/font &gt; 该<mark>原型对象</mark>的 &lt;font title=red&gt; 构造函数，简单理解，就是指向我的爸爸，我是有爸爸的孩子 &lt;/font&gt;.</p><p><img data-src="https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202308091118245.png" alt="image-20230809111807683"></p><p><strong>代码</strong>：</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 构造函数</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">function</span> <span class="token function">Star</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">// 实例化对象</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">const</span> ldh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Star</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">// 只要是原型对象里面默认都有一个 constructor 属性并且指向 Star</span></pre></td></tr><tr><td data-num="6"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Star</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token comment">//constructor : ƒ Star()</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment">// 判断原型里面的构造函数属性是否与 Star 构造函数是相同的</span></pre></td></tr><tr><td data-num="8"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Star</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">===</span> Star<span class="token punctuation">)</span><span class="token comment">// true</span></pre></td></tr></table></figure><p><strong>使用场景</strong>：</p><blockquote><p>如果有<mark>多个方法的对象</mark>，我们可以给<mark>原型对象采取对象形式赋值</mark>。</p><p>但是这样就<mark>会覆盖构造函数原型对象原来的内容</mark>，这样修改后的 原型对象 <code>constructor</code> 就<mark>不再指向当前构造函数了</mark>此时，我们可以在<mark>修改后的原型对象中</mark>，<mark>添加一个 <code>constructor</code> 指向原来的构造函数</mark>。</p></blockquote><p><strong>以下两种方式的区别</strong>：</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token class-name">Star</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>sing <span class="token operator">=</span> function <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">//-----------------------------------</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token class-name">Star</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    sing<span class="token operator">:</span> <span class="token function">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token char">'唱'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p><strong>代码</strong>：</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 构造函数</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">function</span> <span class="token function">Star</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">// 这么写 比较麻烦</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment">// 追加的不会覆盖原型中的 constructor 属性的指向</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token class-name">Star</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sing</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'唱'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token class-name">Star</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">dance</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'跳'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token class-name">Star</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">warp</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'warp'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token class-name">Star</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">qiu</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'篮球'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token comment">// 实例化对象</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token keyword">const</span> ldh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Star</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="19"></td><td><pre>ldh<span class="token punctuation">.</span><span class="token function">sing</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="20"></td><td><pre>ldh<span class="token punctuation">.</span><span class="token function">dance</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="21"></td><td><pre>ldh<span class="token punctuation">.</span><span class="token function">warp</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="22"></td><td><pre>ldh<span class="token punctuation">.</span><span class="token function">qiu</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="23"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Star</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span></pre></td></tr></table></figure><p><strong>结果</strong>：</p><p><img data-src="https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202308091133419.png" alt="image-20230809113309022"></p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 构造函数</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">function</span> <span class="token function">Star</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">// 赋值的会覆盖原型中原有的 constructor 属性指向</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment">// 这种方式属于是将一个新的对象赋值给了 prototype 不再是之前的也不知道是谁的 this 了</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token class-name">Star</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token function-variable function">sing</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'唱'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token function-variable function">dance</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'跳'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token function-variable function">warp</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'warp'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token function-variable function">qiu</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'篮球'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token comment">// 实例化对象</span></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token keyword">const</span> ldh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Star</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="21"></td><td><pre>ldh<span class="token punctuation">.</span><span class="token function">sing</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="22"></td><td><pre>ldh<span class="token punctuation">.</span><span class="token function">dance</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="23"></td><td><pre>ldh<span class="token punctuation">.</span><span class="token function">warp</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="24"></td><td><pre>ldh<span class="token punctuation">.</span><span class="token function">qiu</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="25"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Star</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span></pre></td></tr></table></figure><p><strong>结果</strong>：</p><p><img data-src="https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202308091134190.png" alt="image-20230809113434852"></p><h4 id="321-重新指回创建原型对象的构造函数"><a class="anchor" href="#321-重新指回创建原型对象的构造函数">#</a> 3.2.1 重新指回创建原型对象的构造函数</h4><p><strong>代码</strong>：</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 构造函数</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">function</span> <span class="token function">Star</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">// 赋值的会覆盖原型中原有的 constructor 属性指向</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token class-name">Star</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token comment">// 重新指回创造这个原型对象的 构造函数</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token literal-property property">constructor</span><span class="token operator">:</span> Star<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token function-variable function">sing</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'唱'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token function-variable function">dance</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'跳'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token function-variable function">warp</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'warp'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token function-variable function">qiu</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'篮球'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token comment">// 实例化对象</span></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token keyword">const</span> ldh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Star</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="22"></td><td><pre>ldh<span class="token punctuation">.</span><span class="token function">sing</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="23"></td><td><pre>ldh<span class="token punctuation">.</span><span class="token function">dance</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="24"></td><td><pre>ldh<span class="token punctuation">.</span><span class="token function">warp</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="25"></td><td><pre>ldh<span class="token punctuation">.</span><span class="token function">qiu</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="26"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Star</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span></pre></td></tr></table></figure><p><strong>结果</strong>：</p><p><img data-src="https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202308091141707.png" alt="image-20230809114108545"></p><p>&lt;blockquote alt=success&gt;<br>&lt;div&gt;<br>&lt;p&gt;<br>&lt;span&gt;&lt;font &gt; 总结 &lt;/font&gt;：&lt;/span&gt;<br>&lt;/p&gt;<br>&lt;ol&gt;<br>&lt;li&gt;<br>&lt;p&gt;<br>&lt;span&gt;constructor 属性的作用是什么？&lt;/span&gt;<br>&lt;/p&gt;<br>&lt;/li&gt;<br>&lt;/ol&gt;<br>&lt;ul&gt;<br>&lt;li&gt;<br>&lt;p&gt;<br>&lt;span&gt;&lt;span alt=wavy &gt; 指向该原型对象的构造函数 &lt;/span&gt;&lt;/span&gt;<br>&lt;/p&gt;<br>&lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/div&gt;<br>&lt;/blockquote&gt;</p><h4 id="33-对象原型"><a class="anchor" href="#33-对象原型">#</a> 3.3 对象原型</h4><blockquote><p>思考：</p><p><mark>构造函数</mark>可以创建<mark>实例对象</mark>，构造函数还<mark>有一个</mark><mark>原型对象</mark>，<mark>一些公共的属性</mark>或者<mark>方法放到</mark>这个<mark>原型对象身上</mark>，但是 <mark>为啥实例对象可以访问原型对象里面的属性和方法呢</mark>？</p></blockquote><p><img data-src="https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202308091147172.png" alt="image-20230809114739934"></p><p>&lt;blockquote alt=info&gt;<br>&lt;div&gt;<br>&lt;p&gt;<br>&lt;span&gt;&lt;font &gt; 对象原型 &lt;/font&gt;：&lt;/span&gt;<br>&lt;/p&gt;<br>&lt;p&gt;<br>&lt;span&gt;&lt;font title=red &gt; 对象都会有一个属性 &lt;/font&gt; &lt;font&gt;<strong>proto</strong>&lt;/font&gt; 指向构造函数的 &lt;font&gt;prototype&lt;/font&gt; 原型对象，之所以我们对象可以使用构造函数 &lt; font&gt;prototype&lt;/font &gt; 原型对象的属性和方法，就是因为对象有 &lt; font&gt;<strong>proto</strong>&lt;/font&gt; 原型的存在。对象里面的原型所以叫对象原型 &lt;/span&gt;<br>&lt;/p&gt;<br>&lt;/div&gt;<br>&lt;/blockquote&gt;</p><p><img data-src="https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202308091153140.png" alt="image-20230809115311930"></p><p><strong>代码</strong>：</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 构造函数</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">function</span> <span class="token function">Star</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">// 实例化对象</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">const</span> ldh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Star</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">// 打印实例化对象</span></pre></td></tr><tr><td data-num="6"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ldh<span class="token punctuation">)</span></pre></td></tr></table></figure><p><strong>结果</strong>：</p><p><img data-src="https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202308091315944.png" alt="image-20230809131512463"></p><p>打印中，其中 [[Prototype]] 就是 <code>__proto__</code> 看如下解释：</p><p>&lt;blockquote alt=danger&gt;<br>&lt;div&gt;<br>&lt;p&gt;<br>&lt;span&gt;&lt;font title=red &gt; 注意：&lt;/font&gt;&lt;/span&gt;<br>&lt;/p&gt;<br>&lt;ul&gt;<br>&lt;li&gt;<br>&lt;p&gt;<br>&lt;span&gt;<strong>proto</strong> 是 JS 非标准属性，所以有些浏览器不是显示的 <strong>proto</strong> &lt;/span&gt;<br>&lt;/p&gt;<br>&lt;/li&gt;<br>&lt;li&gt;<br>&lt;p&gt;<br>&lt;span&gt;[[prototype]] 和 <strong>proto</strong> 意义相同，但是我们写的时候必须写 <strong>proto</strong>&lt;/span&gt;<br>&lt;/p&gt;<br>&lt;/li&gt;<br>&lt;li&gt;<br>&lt;p&gt;<br>&lt;span&gt;&lt;span alt=solid &gt; 用来表明当前实例对象 指向哪个原型对象 prototype&lt;/span&gt;&lt;/span&gt;<br>&lt;/p&gt;<br>&lt;/li&gt;<br>&lt;li&gt;<br>&lt;p&gt;<br>&lt;span&gt;<strong>proto</strong> 对象原型里面也有一个 &lt;font&gt;constructor&lt;/font &gt; 属性，&lt;font title=red &gt; 指向创建该实例对象的构造函数 &lt;/font&gt;&lt;/span&gt;<br>&lt;/p&gt;<br>&lt;/li&gt;<br>&lt;li&gt;<br>&lt;p&gt;<br>&lt;span&gt;<strong>proto</strong> 是只读的，不能修改！！！&lt;/span&gt;<br>&lt;/p&gt;<br>&lt;/li&gt;<br>&lt;li&gt;<br>&lt;p&gt;<br>&lt;span&gt; 对象原型 (<em>proto</em>) 指向原型对象 prototype&lt;/span&gt;<br>&lt;/p&gt;<br>&lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/div&gt;<br>&lt;/blockquote&gt;</p><p><strong>代码</strong>：</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 构造函数</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">function</span> <span class="token function">Star</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">// 实例化对象</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">const</span> ldh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Star</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">// 对象原型__proto__指向 构造函数的原型对象</span></pre></td></tr><tr><td data-num="6"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ldh<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token class-name">Star</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token comment">// true</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment">// 对象原型里面有 constructor 指向 构造函数 Star 又指回来了！</span></pre></td></tr><tr><td data-num="8"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ldh<span class="token punctuation">.</span><span class="token class-name">__proto__</span><span class="token punctuation">.</span>constructor <span class="token operator">===</span> Star<span class="token punctuation">)</span><span class="token comment">// true</span></pre></td></tr></table></figure><p>爸爸指向哥哥，哥哥的 constructor 指向爸爸，弟弟指向哥哥，弟弟的 constructor 指向爸爸。爸爸指向弟弟</p><p><img data-src="https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202308091333285.png" alt="image-20230809133342890"></p><p>&lt;blockquote alt=success&gt;<br>&lt;div&gt;<br>&lt;p&gt;<br>&lt;span&gt;&lt;font &gt; 总结：&lt;/font&gt;&lt;/span&gt;<br>&lt;/p&gt;<br>&lt;ol&gt;<br>&lt;li&gt;<br>&lt;p&gt;<br>&lt;span&gt;prototype 是什么？哪里来的？&lt;/span&gt;<br>&lt;/p&gt;<br>&lt;ul&gt;<br>&lt;li&gt;<br>&lt;p&gt;<br>&lt;span&gt; 原型 (原型对象)&lt;/span&gt;<br>&lt;/p&gt;<br>&lt;/li&gt;<br>&lt;li&gt;<br>&lt;p&gt;<br>&lt;span&gt; 构造函数都自动有原型 &lt;/span&gt;<br>&lt;/p&gt;<br>&lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/li&gt;<br>&lt;li&gt;<br>&lt;p&gt;<br>&lt;span&gt;constructor 属性在哪里？作用干啥的？&lt;/span&gt;<br>&lt;/p&gt;<br>&lt;ul&gt;<br>&lt;li&gt;<br>&lt;p&gt;<br>&lt;span&gt;&lt;font title=red&gt;prototype 原型对象 &lt;/font &gt; 和 &lt; font title=red &gt; 对象原型__proto__&lt;/font &gt; 里面都有 &lt;/span&gt;<br>&lt;/p&gt;<br>&lt;/li&gt;<br>&lt;li&gt;<br>&lt;p&gt;<br>&lt;span&gt; 都 &lt; font title=red &gt; 指向 &lt;/font &gt; 创建实例对象 / 原型的 &lt; font title=red &gt; 构造函数 &lt;/font&gt;&lt;/span&gt;<br>&lt;/p&gt;<br>&lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/li&gt;<br>&lt;li&gt;<br>&lt;p&gt;<br>&lt;span&gt;<strong>proto</strong> 属性在哪里？ 指向谁？&lt;/span&gt;<br>&lt;/p&gt;<br>&lt;ul&gt;<br>&lt;li&gt;<br>&lt;p&gt;<br>&lt;span&gt; 在实例对象里面 &lt;/span&gt;<br>&lt;/p&gt;<br>&lt;/li&gt;<br>&lt;li&gt;<br>&lt;p&gt;<br>&lt;span&gt; 指向原型 prototype&lt;/span&gt;<br>&lt;/p&gt;<br>&lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/li&gt;<br>&lt;/ol&gt;<br>&lt;/div&gt;<br>&lt;/blockquote&gt;</p><h4 id="34-原型继承"><a class="anchor" href="#34-原型继承">#</a> 3.4 原型继承</h4><p><mark>继承</mark>是<mark>面向对象编程的另一个特征</mark>，通过继承<mark>进一步提升代码封装的程度</mark>，JavaScript 中大多是<mark>借助原型对象实现继承的特性</mark>。</p><blockquote><p>龙生龙，凤生凤，老鼠的儿子会打洞 描述的正是继承的含义。</p></blockquote><p><strong>我们来看个代码</strong>：</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">function</span> <span class="token function">Man</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>   <span class="token keyword">this</span><span class="token punctuation">.</span>head <span class="token operator">=</span> <span class="token number">1</span></pre></td></tr><tr><td data-num="3"></td><td><pre>   <span class="token keyword">this</span><span class="token punctuation">.</span>eyes <span class="token operator">=</span> <span class="token number">2</span></pre></td></tr><tr><td data-num="4"></td><td><pre>   <span class="token keyword">this</span><span class="token punctuation">.</span>legs <span class="token operator">=</span> <span class="token number">2</span></pre></td></tr><tr><td data-num="5"></td><td><pre>   <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">say</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>   <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">eat</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">const</span> pink <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Man</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr></table></figure><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">function</span> <span class="token function">Woman</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre> <span class="token keyword">this</span><span class="token punctuation">.</span>head <span class="token operator">=</span> <span class="token number">1</span></pre></td></tr><tr><td data-num="3"></td><td><pre>   <span class="token keyword">this</span><span class="token punctuation">.</span>eyes <span class="token operator">=</span> <span class="token number">2</span></pre></td></tr><tr><td data-num="4"></td><td><pre>   <span class="token keyword">this</span><span class="token punctuation">.</span>legs <span class="token operator">=</span> <span class="token number">2</span></pre></td></tr><tr><td data-num="5"></td><td><pre>   <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">say</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>   <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">eat</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>   <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">baby</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">const</span> red <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Woman</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr></table></figure><h5 id="1-font-titlered封装font抽取公共部分"><a class="anchor" href="#1-font-titlered封装font抽取公共部分">#</a> 1 &lt;font title=red&gt; 封装 &lt;/font&gt;— 抽取公共部分</h5><p>把男人和女人公共的部分抽取出来放到人类里面</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 人类</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">const</span> Person <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token literal-property property">eyes</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token literal-property property">head</span><span class="token operator">:</span> <span class="token number">2</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">// 男人</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">function</span> <span class="token function">Man</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token comment">// 女人</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">function</span> <span class="token function">Woman</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>   <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">baby</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h5 id="2-问题原因"><a class="anchor" href="#2-问题原因">#</a> 2 问题 —— 原因</h5><p>将 构造函数.prototype.constructor 重新指回自己</p><p><strong>代码</strong>：</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 对象 公共属性或方法</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">const</span> Person <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token literal-property property">eyes</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token literal-property property">head</span><span class="token operator">:</span> <span class="token number">2</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">// 女人构造函数</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">function</span> <span class="token function">Woman</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token comment">// 原型对象继承 Person 对象 公共属性或方法</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token class-name">Woman</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> Person</pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token comment">// 指向自己构造函数</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token class-name">Woman</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> Woman</pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token comment">// 向女人 中 追加一个 baby 的 特有函数</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token class-name">Woman</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">baby</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'小宝宝'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Woman</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token comment">// 男人构造函数</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token keyword">function</span> <span class="token function">Man</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token comment">// 原型对象继承 Person 对象 公共属性或方法</span></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token class-name">Man</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> Person</pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token comment">// 指向自己构造函数</span></pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token class-name">Man</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> Man</pre></td></tr><tr><td data-num="23"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Man</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p><img data-src="https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202308091707485.png" alt="image-20230809170720906"></p><p><strong>结果</strong>：</p><p>&lt;span alt=solid&gt; 注意，这里面的两个不同实例对象的 constructor 指向同一个实例方法 &lt;/span&gt;.</p><p><img data-src="./JS%E8%BF%9B%E9%98%B6.assets/image-20230809161325679.png" alt="image-20230809161325679"></p><p>男人和女人<mark>同时使用了同一个对象</mark>，根据<mark>引用类型的特点</mark>，<mark>它们指向同一个对象</mark>，<mark>修改一个就会都影响</mark>。</p><p><img data-src="./JS%E8%BF%9B%E9%98%B6.assets/image-20230809163744490.png" alt="image-20230809163744490"></p><p><img data-src="./JS%E8%BF%9B%E9%98%B6.assets/image-20230809163754261.png" alt="image-20230809163754261"></p><blockquote><p>&lt;font&gt; 解决方式 &lt;/font&gt;：</p><ol><li>既然使用对象抽取公共属性的话，很多个实例都要使用而一个修改 prototype 就是全部修改，因为对象是引用数据类型</li><li>那么就换成 &lt;span alt=solid&gt; 构造函数 &lt;/span&gt;，构造函数 每个实例要使用都需要 new 一下构造函数这样每个实例的 prototype 都是不同的，这样修改就不会影响其它的了。</li></ol></blockquote><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 对象 公共属性或方法 不要使用对象 因为对象都引用了同一个内容一个修改会影响其它的</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">// const Person = &#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">//     eyes: 1,</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment">//     head: 2</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">// &#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">// 使用构造函数 抽取公共的属性或方法</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment">// 构造函数 new 出来的对象 结构一样 但是对象不一样</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">.</span>eyes <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">.</span>head <span class="token operator">=</span> <span class="token number">2</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token comment">// 女人构造函数</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token keyword">function</span> <span class="token function">Woman</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token comment">// 原型对象继承 Person 对象 公共属性或方法</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token class-name">Woman</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token comment">// 指向自己构造函数</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token class-name">Woman</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> Woman</pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token comment">// 向女人 中 追加一个 baby 的 特有函数</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token class-name">Woman</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">baby</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'小宝宝'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Woman</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token comment">// 男人构造函数</span></pre></td></tr><tr><td data-num="24"></td><td><pre><span class="token keyword">function</span> <span class="token function">Man</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="25"></td><td><pre><span class="token comment">// 原型对象继承 Person 对象 公共属性或方法</span></pre></td></tr><tr><td data-num="26"></td><td><pre><span class="token class-name">Man</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="27"></td><td><pre><span class="token comment">// 指向自己构造函数</span></pre></td></tr><tr><td data-num="28"></td><td><pre><span class="token class-name">Man</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> Man</pre></td></tr><tr><td data-num="29"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Man</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p><strong>结果</strong>：</p><p><img data-src="https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202308091705280.png" alt="image-20230809165135788"></p><h4 id="35-原型链"><a class="anchor" href="#35-原型链">#</a> 3.5 原型链</h4><p>基于<mark>原型对象的继承使得不同构造函数的原型对象关联在一起</mark>，并且这种<mark>关联的关系是一种链状的结构</mark>，我们将原型对象的链状结构关系称为<mark>原型链</mark>.</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 构造函数</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">// 实例对象</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">const</span> ldh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">// 判断实例对象的__proto__ 是否与 Person.prototype 相同 实例对象__prto__是指向 Person.prototype 的</span></pre></td></tr><tr><td data-num="6"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ldh<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token comment">// true</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment">//__proto__：对象原型 指向 原型对象</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token comment">// 原型对象 里面有一个 对象原型 指向的还是一个 原型对象，那么指向的是谁的 原型对象呢？</span></pre></td></tr><tr><td data-num="9"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>__proto__<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token comment">// 判断原型对象的对象原型是否指向 Object 的原型对象</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token comment">// 因为 Person.prototype 是自定义函数 往上走就是 Object 没有其它的了 Object 指向 Object.prototype</span></pre></td></tr><tr><td data-num="12"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token comment">// true</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token comment">// Object 的构造函数 指向 Object.prototype 而 Object.prototype.constructor 指向 它自己的构造函数</span></pre></td></tr><tr><td data-num="14"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token comment">// Object 的 prototype.__proto__ 指向上一层但是上一层就没有了 所以为 null</span></pre></td></tr><tr><td data-num="16"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>__proto__<span class="token punctuation">)</span><span class="token comment">// null</span></pre></td></tr></table></figure><p><strong>结果</strong>：</p><p><img data-src="https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202308091800621.png" alt="image-20230809180028175"></p><ul><li><p>&lt;span alt=wavy&gt; 只要是个对象就有 <code>__proto__</code> &lt;/span&gt;.</p></li><li><p>&lt;span alt=wavy&gt; 只要是原型对象里面就有 <code>constructor</code> &lt;/span&gt;.</p></li></ul><p><img data-src="https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202308091739595.png" alt="image-20230809173938143"></p><h5 id="351-原型链查找规则"><a class="anchor" href="#351-原型链查找规则">#</a> 3.5.1 原型链 — 查找规则</h5><ol><li>当访问一个对象的属性 (包括方法) 时 ， 首先查找这个 &lt; font title=red &gt; 对象自身 &lt;/font &gt; 有没有该属性。</li><li>如果没有就查找它的原型 (也就是 <code>__proto__</code> 指向的 &lt;font title=red&gt;prototype 原型对象 &lt;/font&gt;)</li><li>如果还没有就查找原型对象 的原型 (&lt;font title=red&gt;Object 的原型对象 &lt;/font&gt;)</li><li>依此类推一直找到 Object 为止 (null)</li><li><code>__proto__</code> 对象原型的<mark>意义</mark>就在于<mark>为对象成员查找机制提供一个方向，或者一条路线</mark>.</li><li>可以使用 <code>instanceof</code> 运算符用于检测构造函数的 <code>prototype</code> 属性<mark>是否出现在某个实例对象的原型链上</mark>.</li></ol><p><strong>instanceof 演示</strong>：</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 构造函数</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">// 实例对象</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">const</span> ldh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ldh <span class="token keyword">instanceof</span> <span class="token class-name">Person</span><span class="token punctuation">)</span><span class="token comment">// true</span></pre></td></tr><tr><td data-num="6"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ldh <span class="token keyword">instanceof</span> <span class="token class-name">Object</span><span class="token punctuation">)</span><span class="token comment">// true</span></pre></td></tr><tr><td data-num="7"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ldh <span class="token keyword">instanceof</span> <span class="token class-name">Array</span><span class="token punctuation">)</span><span class="token comment">//false ldh 是一个对象它不属于数组</span></pre></td></tr><tr><td data-num="8"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span> <span class="token keyword">instanceof</span> <span class="token class-name">Array</span><span class="token punctuation">)</span><span class="token comment">//true [] 数组类型属于数组</span></pre></td></tr><tr><td data-num="9"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Array <span class="token keyword">instanceof</span> <span class="token class-name">Object</span><span class="token punctuation">)</span><span class="token comment">// 万物皆对象</span></pre></td></tr></table></figure><h3 id="综合案例模态框封装"><a class="anchor" href="#综合案例模态框封装">#</a> 综合案例 — 模态框封装</h3><p>目的：练习 &lt;font title=red&gt; 面向对象 &lt;/font&gt; 写插件 (模态框)</p><p><img data-src="https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202308091833091.png" alt="image-20230809183332615"></p><p><strong>分析需求</strong>：</p><ol><li>多个模态框一样的，而且每次点击都会出来一个，怎么做呢？<ul><li>&lt;font title=red&gt; 构造函数 &lt;/font&gt;。把模态框封装一个 &lt; font title=red &gt; 构造函数 Modal&lt;/font&gt;，每次 new 都会产出一个模态框，所以点击不同的按钮就是在做 &lt; font title=red&gt;new 模态框 &lt;/font&gt;，实例化。</li></ul></li><li>模态框有什么功能呢？打开功能 (显示)，关闭功能，而且每个模态框都包含着 2 个功能<ul><li>open 功能 (打开)</li><li>close 功能 (关闭)</li></ul></li></ol><p><strong>问</strong>：open 和 close 方法，写到哪里？</p><p>&lt;span alt=solid&gt; 构造函数 Modal 的 &lt; font title=red &gt; 原型对象上 &lt;/font&gt;，共享方法 &lt;/span&gt;.</p><figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>X-UA-Compatible<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>IE=edge<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=1.0<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>面向对象封装消息提示<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css"></span></span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token selector">.modal</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>      <span class="token property">width</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>      <span class="token property">min-height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>      <span class="token property">box-shadow</span><span class="token punctuation">:</span> 0 0 10px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.2<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>      <span class="token property">border-radius</span><span class="token punctuation">:</span> 4px<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>      <span class="token property">position</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>      <span class="token property">z-index</span><span class="token punctuation">:</span> 999<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>      <span class="token property">left</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>      <span class="token property">top</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>      <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translate3d</span><span class="token punctuation">(</span>-50%<span class="token punctuation">,</span> -50%<span class="token punctuation">,</span> 0<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>      <span class="token property">background-color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="22"></td><td><pre></pre></td></tr><tr><td data-num="23"></td><td><pre>    <span class="token selector">.modal .header</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>      <span class="token property">line-height</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>      <span class="token property">padding</span><span class="token punctuation">:</span> 0 10px<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>      <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>      <span class="token property">font-size</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="29"></td><td><pre></pre></td></tr><tr><td data-num="30"></td><td><pre>    <span class="token selector">.modal .header i</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>      <span class="token property">font-style</span><span class="token punctuation">:</span> normal<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>      <span class="token property">color</span><span class="token punctuation">:</span> #999<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>      <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>      <span class="token property">right</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>      <span class="token property">top</span><span class="token punctuation">:</span> -2px<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>      <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="37"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="38"></td><td><pre></pre></td></tr><tr><td data-num="39"></td><td><pre>    <span class="token selector">.modal .body</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="40"></td><td><pre>      <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="41"></td><td><pre>      <span class="token property">padding</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="42"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="43"></td><td><pre></pre></td></tr><tr><td data-num="44"></td><td><pre>    <span class="token selector">.modal .footer</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="45"></td><td><pre>      <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="46"></td><td><pre>      <span class="token property">justify-content</span><span class="token punctuation">:</span> flex-end<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="47"></td><td><pre>      <span class="token property">padding</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="48"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="49"></td><td><pre></pre></td></tr><tr><td data-num="50"></td><td><pre>    <span class="token selector">.modal .footer a</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="51"></td><td><pre>      <span class="token property">padding</span><span class="token punctuation">:</span> 3px 8px<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="52"></td><td><pre>      <span class="token property">background</span><span class="token punctuation">:</span> #ccc<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="53"></td><td><pre>      <span class="token property">text-decoration</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="54"></td><td><pre>      <span class="token property">color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="55"></td><td><pre>      <span class="token property">border-radius</span><span class="token punctuation">:</span> 2px<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="56"></td><td><pre>      <span class="token property">margin-right</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="57"></td><td><pre>      <span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="58"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="59"></td><td><pre></pre></td></tr><tr><td data-num="60"></td><td><pre>    <span class="token selector">.modal .footer a.submit</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="61"></td><td><pre>      <span class="token property">background-color</span><span class="token punctuation">:</span> #369<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="62"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="63"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="64"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="65"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="66"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>delete<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>删除<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="67"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>login<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>登录<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="68"></td><td><pre></pre></td></tr><tr><td data-num="69"></td><td><pre>  <span class="token comment">&lt;!-- &lt;div class="modal"></span></pre></td></tr><tr><td data-num="70"></td><td><pre>    &lt;div class="header"> 温馨提示 &lt;i>x&lt;/i>&lt;/div></pre></td></tr><tr><td data-num="71"></td><td><pre>    &lt;div class="body"> 您没有删除权限操作 & lt;/div></pre></td></tr><tr><td data-num="72"></td><td><pre>  &lt;/div> --></pre></td></tr><tr><td data-num="73"></td><td><pre></pre></td></tr><tr><td data-num="74"></td><td><pre>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>./js/模态框.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="75"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="76"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 1.Modal 构造函数封装 — 模态框</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">function</span> <span class="token function">Modal</span><span class="token punctuation">(</span>title <span class="token operator">=</span> <span class="token string">'加载中...'</span><span class="token punctuation">,</span> message <span class="token operator">=</span> <span class="token string">'...'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token comment">// 创建 Modal 模态框盒子</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token comment">// 1.1 创建 div 标签</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">.</span>modalBox <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token comment">// 1.2 给 div 标签添加类名为 modal</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">.</span>modalBox<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">'modal'</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token comment">// 1.3 modal 盒子内部填充 2 个 div 标签并且修改文字内容</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">.</span>modalBox<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"></span></span></pre></td></tr><tr><td data-num="10"></td><td><pre>    &lt;div class="header"><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>title<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string"> &lt;i>x&lt;/i>&lt;/div></span></pre></td></tr><tr><td data-num="11"></td><td><pre>    &lt;div class="body"><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>message<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string"> &lt;/div></span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token template-punctuation string">`</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>modalBox<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token comment">// 2. 给构造函数原型对象 挂载 open 方法</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token class-name">Modal</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">open</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token comment">// 先来判断页面中是否有 modal 盒子，如果有先删除，否则继续添加，防止重复打开同一个窗口</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token keyword">const</span> modal <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.modal'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    modal <span class="token operator">&amp;&amp;</span> modal<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token comment">// 注意这个方法不要用箭头函数 因为还需要用到 this</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    <span class="token comment">// 把刚才创建的 modalBox 显示到页面 body 中</span></pre></td></tr><tr><td data-num="22"></td><td><pre>    document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>modalBox<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    <span class="token comment">// 要等着盒子显示出来，就可以绑定点击事件了 (关闭窗口事件)</span></pre></td></tr><tr><td data-num="24"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">.</span>modalBox<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'i'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>        <span class="token comment">// 这个地方需要用到箭头函数</span></pre></td></tr><tr><td data-num="26"></td><td><pre>        <span class="token comment">// 这个 this 指向 实例对象 箭头函数 沿用作用域链上一层找 this 就是 function 函数 Modal 了</span></pre></td></tr><tr><td data-num="27"></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="28"></td><td><pre>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="29"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="30"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="31"></td><td><pre><span class="token comment">// 3. 给构造函数原型对象挂载 close 方法 </span></pre></td></tr><tr><td data-num="32"></td><td><pre><span class="token class-name">Modal</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">close</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>    <span class="token comment">// 将当前元素从 DOM 树中删除</span></pre></td></tr><tr><td data-num="34"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">.</span>modalBox<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="35"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="36"></td><td><pre><span class="token comment">// 点击 删除按钮</span></pre></td></tr><tr><td data-num="37"></td><td><pre>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#delete'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="38"></td><td><pre>    <span class="token keyword">const</span> del <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Modal</span><span class="token punctuation">(</span><span class="token string">'温馨提示'</span><span class="token punctuation">,</span> <span class="token string">'您没有权限删除操作'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="39"></td><td><pre>    del<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="40"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="41"></td><td><pre><span class="token comment">// 点击 登录按钮</span></pre></td></tr><tr><td data-num="42"></td><td><pre>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#login'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="43"></td><td><pre>    <span class="token keyword">const</span> log <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Modal</span><span class="token punctuation">(</span><span class="token string">'友情提示'</span><span class="token punctuation">,</span><span class="token string">'您没有注册呢 ?'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="44"></td><td><pre>    log<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="45"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p><strong>效果</strong>：</p><p><img data-src="https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202308091936673.gif" alt="test"></p><h2 id="深浅拷贝"><a class="anchor" href="#深浅拷贝">#</a> 深浅拷贝</h2><ul><li><p>浅拷贝</p></li><li><p>深拷贝</p></li></ul><h3 id="1-浅拷贝"><a class="anchor" href="#1-浅拷贝">#</a> 1 浅拷贝</h3><p>首先浅拷贝和深拷贝只针对引用类型</p><p><strong>浅拷贝</strong>：拷贝的是地址</p><p><strong>常见方法</strong>：</p><ol><li><strong>拷贝对象</strong>：Object.assgin () / 展开运算符 <code>&#123;…Obj&#125;</code> 拷贝对象</li><li>拷贝数组：Array.prototype.concat () 或者 <code>[…arr]</code></li></ol><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token literal-property property">uname</span><span class="token operator">:</span> <span class="token string">'pink'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token literal-property property">family</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token literal-property property">baby</span><span class="token operator">:</span> <span class="token string">'小Pink'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">3</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token comment">// 浅拷贝</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">const</span> o <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token operator">...</span>obj<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token comment">// 基本数据类型拷贝的是值，引用类型拷贝的是地址值 一个修改影响全部</span></pre></td></tr><tr><td data-num="12"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token comment">// &#123;uname: 'pink', age: 18&#125;  family: &#123;baby: ' 老 pink', age: 3&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>o<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">20</span></pre></td></tr><tr><td data-num="14"></td><td><pre>o<span class="token punctuation">.</span>family<span class="token punctuation">.</span>baby <span class="token operator">=</span> <span class="token string">'老pink'</span></pre></td></tr><tr><td data-num="15"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token comment">// &#123;uname: 'pink', age: 20&#125; family: &#123;baby: ' 老 pink', age: 3&#125;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token comment">// &#123;uname: 'pink', age: 18&#125; family: &#123;baby: ' 老 pink', age: 3&#125;</span></pre></td></tr></table></figure><p><strong>结果</strong>：</p><p><img data-src="https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202308092037020.png" alt="image-20230809203736792"></p><blockquote><p>如果是简单数据类型拷贝<mark>值</mark>，引用数据类型拷贝的是<mark>地址</mark> (简单理解：如果是<mark>单层对象，没问题</mark>，如果有<mark>多层就有问题</mark>)</p></blockquote><blockquote><p>&lt;font&gt; 总结 &lt;/font&gt;：</p><ol><li>直接赋值和浅拷贝有什么区别？<ul><li>直接赋值的方法，只要是对象，都会互相影响，因为是直接拷贝对象栈里面的地址</li><li>浅拷贝如果是一层对象，不互相影响，如果出现多层对象拷贝还是会互相影响</li></ul></li><li>浅拷贝怎么理解？<ul><li>拷贝对象之后，里面的属性值是简单数据类型直接拷贝值</li><li>如果属性值是引用数据类型则拷贝的是地址值</li></ul></li></ol></blockquote><h3 id="2-深拷贝"><a class="anchor" href="#2-深拷贝">#</a> 2 深拷贝</h3><p>首先浅拷贝和深拷贝只针对引用类型</p><p><strong>深拷贝</strong>：拷贝的是<mark>对象</mark>，<mark>不是地址</mark>.</p><blockquote><p>&lt;font&gt; 常见方法 &lt;/font&gt;：</p><ol><li>通过递归实现深拷贝</li><li>lodash / cloneDeep</li><li>通过 JSON.stringify () 实现</li></ol></blockquote><p><strong>常见方法</strong>：</p><h4 id="1-通过递归实现深拷贝"><a class="anchor" href="#1-通过递归实现深拷贝">#</a> 1 通过递归实现深拷贝</h4><h5 id="递归介绍"><a class="anchor" href="#递归介绍">#</a> 递归介绍</h5><blockquote><p>&lt;font&gt; 函数递归 &lt;/font&gt;：</p><p>&lt;span alt=solid&gt; 如果一个函数在内部可以调用其本身，那么这个函数就是递归函数 &lt;/span&gt;.</p><ul><li>简单理解：函数内部自己调自己，这个函数就是递归函数</li><li>递归函数的作用和循环效果类似</li><li>由于递归很容易发生 “栈溢出” 错误 (stack ooverflow)，所以 &lt;font title=red &gt; 必须要加退出条件 return&lt;/font&gt;。</li></ul></blockquote><p><img data-src="https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202308092047083.png" alt="image-20230809204658767"></p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    i<span class="token operator">++</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">调用第</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>i<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">次</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">===</span> <span class="token number">10</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token keyword">return</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p><strong>效果</strong>：</p><p><img data-src="https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202308092053955.png" alt="image-20230809205327608"></p><p><strong>函数递归</strong></p><p>利用递归函数实现 setTimeout 模拟 setInterval 效果</p><figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>./js/模拟定时器.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span> </pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLocaleString</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token function">setTimeout</span><span class="token punctuation">(</span>fn<span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr></table></figure><h5 id="11-通过递归实现深拷贝-精简版"><a class="anchor" href="#11-通过递归实现深拷贝-精简版">#</a> 1.1 通过递归实现深拷贝 (精简版)</h5><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> o <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">function</span> <span class="token function">deepCopy</span><span class="token punctuation">(</span><span class="token parameter">newObj <span class="token punctuation">,</span> oldObj</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>   <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> k <span class="token keyword">in</span> oldObj<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>      <span class="token keyword">if</span><span class="token punctuation">(</span>oldObj<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token keyword">instanceof</span> <span class="token class-name">Array</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>         newObj<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="6"></td><td><pre>         <span class="token function">deepCopy</span><span class="token punctuation">(</span>newObj<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token punctuation">,</span> oldObj<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>newObj<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token punctuation">,</span> oldObj<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>         newObj<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>         <span class="token function">deepCopy</span><span class="token punctuation">(</span>newObj<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token punctuation">,</span> oldObj<span class="token punctuation">[</span>k<span class="token punctuation">]</span></pre></td></tr><tr><td data-num="10"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>     		newObj<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> oldObj<span class="token punctuation">[</span>k<span class="token punctuation">]</span>             </pre></td></tr><tr><td data-num="12"></td><td><pre>     <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>   <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> o <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">function</span> <span class="token function">deepCopy</span><span class="token punctuation">(</span><span class="token parameter">newObj <span class="token punctuation">,</span> oldObj</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>   <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> k <span class="token keyword">in</span> oldObj<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>      newObj<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> oldObj<span class="token punctuation">[</span>k<span class="token punctuation">]</span></pre></td></tr><tr><td data-num="5"></td><td><pre>   <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token function">deepCopy</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span>obj<span class="token punctuation">)</span></pre></td></tr></table></figure><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> o <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">function</span> <span class="token function">deepCopy</span><span class="token punctuation">(</span><span class="token parameter">newObj <span class="token punctuation">,</span> oldObj</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>   <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> k <span class="token keyword">in</span> oldObj<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>      <span class="token keyword">if</span><span class="token punctuation">(</span>oldObj<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token keyword">instanceof</span> <span class="token class-name">Array</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>         newObj<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="6"></td><td><pre>         <span class="token function">deepCopy</span><span class="token punctuation">(</span>newObj<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token punctuation">,</span> oldObj<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>oldObj<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token keyword">instanceof</span> <span class="token class-name">Object</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>         newObj<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>         <span class="token function">deepCopy</span><span class="token punctuation">(</span>newObj<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token punctuation">,</span> oldObj<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="10"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>         newObj<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> oldObj<span class="token punctuation">[</span>k<span class="token punctuation">]</span></pre></td></tr><tr><td data-num="12"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>   <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> o <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">function</span> <span class="token function">deepCopy</span><span class="token punctuation">(</span><span class="token parameter">newObj <span class="token punctuation">,</span> oldObj</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>   <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> k <span class="token keyword">in</span> oldObj<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>      <span class="token keyword">if</span><span class="token punctuation">(</span>oldObj<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token keyword">instanceof</span> <span class="token class-name">Array</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>         newObj<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="6"></td><td><pre>         <span class="token function">deepCopy</span><span class="token punctuation">(</span>newObj<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token punctuation">,</span> oldObj<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>oldObj<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token keyword">instanceof</span> <span class="token class-name">Object</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>         newObj<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>         <span class="token function">deepCopy</span><span class="token punctuation">(</span>newObj<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token punctuation">,</span> oldObj<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="10"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>         newObj<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> oldObj<span class="token punctuation">[</span>k<span class="token punctuation">]</span></pre></td></tr><tr><td data-num="12"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>   <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p><strong>综合代码</strong>：</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token literal-property property">uname</span><span class="token operator">:</span> <span class="token string">'pink'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token literal-property property">famiyl</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token literal-property property">uname</span><span class="token operator">:</span> <span class="token string">'老pink'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">29</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token literal-property property">hobby</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'唱'</span><span class="token punctuation">,</span> <span class="token string">'跳'</span><span class="token punctuation">,</span> <span class="token string">'wrap'</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">const</span> o <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token comment">// 拷贝函数</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token keyword">function</span> <span class="token function">deepCopy</span><span class="token punctuation">(</span><span class="token parameter">newObj<span class="token punctuation">,</span> oldObj</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> k <span class="token keyword">in</span> oldObj<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        <span class="token comment">// 处理数组的拷贝问题</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        <span class="token comment">// 判断属性值是否为数组类型的</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        <span class="token comment">// 万物皆对象，先筛选数组 再 对象 </span></pre></td></tr><tr><td data-num="17"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span>oldObj<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token keyword">instanceof</span> <span class="token class-name">Array</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>            <span class="token comment">// 新数组中传入属性名 默认赋值类型为数组</span></pre></td></tr><tr><td data-num="19"></td><td><pre>            newObj<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="20"></td><td><pre>            <span class="token comment">// 递归调用自己传入 属性名 ， 属性值 传入函数中</span></pre></td></tr><tr><td data-num="21"></td><td><pre>            <span class="token function">deepCopy</span><span class="token punctuation">(</span>newObj<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">,</span> oldObj<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="22"></td><td><pre>        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>oldObj<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token keyword">instanceof</span> <span class="token class-name">Object</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">// 千万不要将对象的判断写在前面因为数组也是对象它会将数组当对象处理</span></pre></td></tr><tr><td data-num="23"></td><td><pre>            newObj<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>            <span class="token function">deepCopy</span><span class="token punctuation">(</span>newObj<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">,</span> oldObj<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="25"></td><td><pre>        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>            <span class="token comment">//k : uname , age | oldOb[k] 'pink' , 18</span></pre></td></tr><tr><td data-num="27"></td><td><pre>            <span class="token comment">//newObj [k] 等价于 o.uname , o.age</span></pre></td></tr><tr><td data-num="28"></td><td><pre>            newObj<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> oldObj<span class="token punctuation">[</span>k<span class="token punctuation">]</span></pre></td></tr><tr><td data-num="29"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="31"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="32"></td><td><pre><span class="token comment">// 调用函数 传入实参 两个对象  新对象  旧对象</span></pre></td></tr><tr><td data-num="33"></td><td><pre><span class="token comment">// 功能： 将旧对象的属性名属性值 拷贝到 新对象中</span></pre></td></tr><tr><td data-num="34"></td><td><pre><span class="token function">deepCopy</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span> obj<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="35"></td><td><pre><span class="token comment">// 基本数据类型修改后不会影响到另一个对象</span></pre></td></tr><tr><td data-num="36"></td><td><pre>o<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">100</span></pre></td></tr><tr><td data-num="37"></td><td><pre>o<span class="token punctuation">.</span>famiyl<span class="token punctuation">.</span>uname <span class="token operator">=</span> <span class="token string">'老老老pink'</span></pre></td></tr><tr><td data-num="38"></td><td><pre>o<span class="token punctuation">.</span>hobby<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'练习两年半'</span></pre></td></tr><tr><td data-num="39"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="40"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span></pre></td></tr></table></figure><p><strong>结果</strong>：</p><p><img data-src="https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202308101029120.png" alt="image-20230810095909996"></p><p><img data-src="https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202308101029744.png" alt="image-20230810102915988"></p><h4 id="2-js库lodash里面clonedeep内部实现了深拷贝-常用️"><a class="anchor" href="#2-js库lodash里面clonedeep内部实现了深拷贝-常用️">#</a> 2 js 库 lodash 里面 cloneDeep 内部实现了深拷贝 (常用)⭐️</h4><p><strong>使用步骤</strong>：</p><ol><li><p>引入 lodash.min.js 文件</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">"./js/lodash.min.js"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span></pre></td></tr></table></figure></li><li><p>开始调用 lodash 里面的函数进行使用</p></li></ol><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token literal-property property">uname</span><span class="token operator">:</span> <span class="token string">'pink'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token literal-property property">family</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token literal-property property">uname</span><span class="token operator">:</span> <span class="token string">'老pink'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">20</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token literal-property property">arr</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'唱'</span><span class="token punctuation">,</span><span class="token string">'跳'</span><span class="token punctuation">,</span><span class="token string">'wrap'</span><span class="token punctuation">,</span><span class="token string">'篮球'</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token comment">// 调用函数进行深拷贝</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token keyword">const</span> o <span class="token operator">=</span> _<span class="token punctuation">.</span><span class="token function">cloneDeep</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="12"></td><td><pre>o<span class="token punctuation">.</span>uname <span class="token operator">=</span> <span class="token string">'小pink'</span></pre></td></tr><tr><td data-num="13"></td><td><pre>o<span class="token punctuation">.</span>family<span class="token punctuation">.</span>uname <span class="token operator">=</span> <span class="token string">'老老老老pink'</span></pre></td></tr><tr><td data-num="14"></td><td><pre>o<span class="token punctuation">.</span>arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'鸡哥'</span></pre></td></tr><tr><td data-num="15"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="16"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span></pre></td></tr></table></figure><p><strong>结果</strong>：</p><p><img data-src="https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202308101113200.png" alt="image-20230810111311696"></p><h4 id="3-使用json的方式实现深拷贝"><a class="anchor" href="#3-使用json的方式实现深拷贝">#</a> 3 使用 JSON 的方式实现深拷贝</h4><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token literal-property property">uname</span><span class="token operator">:</span> <span class="token string">'pink'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token literal-property property">hobby</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'唱歌'</span><span class="token punctuation">,</span><span class="token string">'跳舞'</span><span class="token punctuation">,</span><span class="token string">'wrap'</span><span class="token punctuation">]</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token literal-property property">family</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token literal-property property">uname</span><span class="token operator">:</span> <span class="token string">'老pink'</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token comment">// 把对象转换为 JSON 字符串</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">const</span> json <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="11"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>json<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token comment">// 再将转换为字符串的 JSON 数据解析为 对象 此时它们的 地址 和 引用的地址都不同了</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token keyword">const</span> o <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>json<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="14"></td><td><pre>o<span class="token punctuation">.</span>uname <span class="token operator">=</span> <span class="token string">'小pink'</span></pre></td></tr><tr><td data-num="15"></td><td><pre>o<span class="token punctuation">.</span>hobby<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'ikun'</span></pre></td></tr><tr><td data-num="16"></td><td><pre>o<span class="token punctuation">.</span>family<span class="token punctuation">.</span>uname <span class="token operator">=</span> <span class="token string">'老老老pink'</span></pre></td></tr><tr><td data-num="17"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="18"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span></pre></td></tr></table></figure><p><strong>图解</strong>：</p><p><img data-src="https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202308101118380.png" alt="image-20230810111855025"></p><p><strong>效果</strong>：</p><p><img data-src="https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202308101119177.png" alt="image-20230810111918889"></p><blockquote><p>&lt;span alt=solid&gt; 总结 &lt;/span&gt;：</p><ol><li>实现深拷贝三种方式？<ul><li>自己利用递归函数书写深拷贝</li><li>利用 js 库 lodash 里面的 <code>_.cloneDeep()</code></li><li>利用 JSON 字符串转换</li></ul></li></ol></blockquote><h2 id="异常处理"><a class="anchor" href="#异常处理">#</a> 异常处理</h2><ul><li>throw 抛异常</li><li>try /catch 捕获异常</li><li>debugger</li></ul><p>了解 JavaScript 中程序异常处理的方法，提升代码运行的健壮性。</p><h3 id="1-throw-抛异常"><a class="anchor" href="#1-throw-抛异常">#</a> 1 throw 抛异常</h3><p>异常处理是指预估代码执行过程中<mark>可能发生的错误</mark>，然后最大程度的<mark>避免错误的发生导致整个程序无法继续运行</mark>。</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">function</span> <span class="token function">counter</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>x <span class="token operator">||</span> <span class="token operator">!</span>y<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token comment">//throw ' 参数不能为空'</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'参数不能为空'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token keyword">return</span> x <span class="token operator">+</span> y</pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token function">counter</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p><strong>结果</strong>：</p><p><img data-src="https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202308101129281.png" alt="image-20230810112858201"></p><blockquote><p>&lt;span alt=solid&gt; 总结 &lt;/span&gt;：</p><ol><li>throw 抛出异常信息，<mark>程序也会终止执行</mark>.</li><li>throw 后面跟的是<mark>错误提示信息</mark>.</li><li>Error 对象，配合 throw 使用，能够设置<mark>更详细的错误信息</mark>.</li></ol><hr><ol><li>抛出异常我们用哪个关键字？它会终止程序吗？<ul><li>throw 关键字</li><li>&lt;font title=red&gt; 会终止程序 &lt;/font&gt;.</li></ul></li><li>抛出异常经常和谁配合使用？<ul><li>Error 对象，配合 throw 使用</li></ul></li></ol></blockquote><hr><h3 id="2-try-catch-捕获错误信息"><a class="anchor" href="#2-try-catch-捕获错误信息">#</a> 2 try /catch 捕获错误信息</h3><p>我们可以通过 <code>try/catch</code> <mark>捕获错误信息</mark> (<mark>浏览器提供</mark>的错误信息) &lt;span alt=dotted&gt;try 试试 &lt;/span&gt; &lt;span alt=dotted&gt;catch 拦住 &lt;/span&gt; &lt;span alt=dotted&gt;finally 最后 &lt;/span&gt;.</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token operator">&lt;</span>body<span class="token operator">></span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token operator">&lt;</span>p<span class="token operator">></span><span class="token number">123</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">"../js/try/catch捕获异常.js"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span></pre></td></tr></table></figure><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token keyword">try</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token comment">// 可能发生错误的代码 放到 try 中 试试</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token keyword">const</span> p <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.p'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        p<span class="token punctuation">.</span>style<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token string">'red'</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token comment">// 捕获可能发生的异常</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        <span class="token comment">//catch 参数列表中 随意写一个变量名称 它是由浏览器提供的错误信息</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token comment">// 调用错误信息的属性 message</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>message<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token comment">// 抛出异常后会终止后面的代码</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'选择器 获取不到指定的标签'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        <span class="token comment">// 上面抛出了异常程序终止下面的打印不会执行</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'hello'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        <span class="token comment">//finally 无论是否发生异常 都会执行代码块</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token punctuation">&#125;</span> <span class="token keyword">finally</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'world !'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p><strong>结果</strong>：</p><p><img data-src="https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202308101153181.png" alt="image-20230810115318837"></p><blockquote><p>&lt;span alt=&quot;solid&quot;&gt; 总结 &lt;/span&gt;:</p><ol><li><code>try...catch</code> 用于捕获错误信息</li><li>将预估可能发生错误的代码写在 <code>try</code> 代码块中</li><li>如果 <code>try</code> 代码块中出现错误后，会执行 <code>catch</code> 代码块，并拦截到错误信息</li><li><code>finally</code> 不管是否有错误，都会执行</li></ol><hr><ol><li>捕获异常我们用哪 3 个关键字？可能会出现的错误代码写到谁里面<ul><li><code>try catch finally</code></li><li><code>try</code></li></ul></li><li>怎么调用错误信息？<ul><li>利用 <code>catch</code> 的参数</li></ul></li></ol></blockquote><h3 id="3-debugger"><a class="anchor" href="#3-debugger">#</a> 3 debugger</h3><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token keyword">try</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token comment">// 可能发生错误的代码 放到 try 中 试试</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token keyword">const</span> p <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.p'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        p<span class="token punctuation">.</span>style<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token string">'red'</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token comment">// 捕获可能发生的异常</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        <span class="token comment">//catch 参数列表中 随意写一个变量名称 它是由浏览器提供的错误信息</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>message<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token comment">// 抛出异常后会终止后面的代码</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token comment">// 相当于打了个断点</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        <span class="token keyword">debugger</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        <span class="token comment">// 调用错误信息的属性 message</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'选择器 获取不到指定的标签'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        <span class="token comment">// 上面抛出了异常程序终止下面的打印不会执行</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'hello'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        <span class="token comment">//finally 无论是否发生异常 都会执行代码块</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token punctuation">&#125;</span> <span class="token keyword">finally</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'world !'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p><strong>效果</strong>：</p><p><img data-src="https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202308101313189.png" alt="image-20230810131346686"></p><h2 id="处理this"><a class="anchor" href="#处理this">#</a> 处理 this</h2><ul><li>this 指向</li><li>改变 this</li></ul><p>this 是 JavaScript 最具 “魅惑” 的知识点，不同的应用场合 this 的取值可能会与意想不到的结果，在此我们对以往学习过的关于 [this 默认的取值] 情况进行归纳和总结。</p><p>目标：了解函数中 this 在不同场景下的默认值，知道动态指定函数 this 值的方法</p><p><strong>学习路径</strong>：</p><ol><li>普通函数 this 指向</li><li>箭头函数 this 指向</li></ol><h3 id="1-this-指向普通函数"><a class="anchor" href="#1-this-指向普通函数">#</a> 1 this 指向 — 普通函数</h3><p>目标：能说出普通函数的 this 指向</p><p>普通函数的调用方式决定了 this 的值，即 [谁调用 this 的值指向谁]</p><h4 id="普通函数"><a class="anchor" href="#普通函数">#</a> 普通函数</h4><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 普通函数</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">function</span> <span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token comment">// window </span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">// 函数表达式</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">const</span> <span class="token function-variable function">sayHello</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token comment">// window </span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token comment">// 函数的调用方式决定了 this 的值</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">// window</span></pre></td></tr><tr><td data-num="11"></td><td><pre>window<span class="token punctuation">.</span><span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">// window</span></pre></td></tr><tr><td data-num="12"></td><td><pre></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token comment">// 普通对象</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>   <span class="token literal-property property">uname</span><span class="token operator">:</span> <span class="token string">'小明'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="16"></td><td><pre>   <span class="token function-variable function">walk</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token comment">// user</span></pre></td></tr><tr><td data-num="18"></td><td><pre>   <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token comment">// 动态为 user 添加方法</span></pre></td></tr><tr><td data-num="21"></td><td><pre>user<span class="token punctuation">.</span>sayHi <span class="token operator">=</span> sayHi <span class="token comment">// user</span></pre></td></tr><tr><td data-num="22"></td><td><pre>user<span class="token punctuation">.</span>sayHello <span class="token operator">=</span> sayHello <span class="token comment">// user</span></pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token comment">// 函数调用方式，决定了 this 的值</span></pre></td></tr><tr><td data-num="24"></td><td><pre>user<span class="token punctuation">.</span><span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">// user</span></pre></td></tr><tr><td data-num="25"></td><td><pre>user<span class="token punctuation">.</span><span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">// user</span></pre></td></tr></table></figure><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token operator">&lt;</span>script<span class="token operator">></span></pre></td></tr><tr><td data-num="2"></td><td><pre>	<span class="token string">'use strict'</span> <span class="token comment">// 开启严格模式 下面的函数中获取 this 就是 undefined 了</span></pre></td></tr><tr><td data-num="3"></td><td><pre>	<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token comment">// undefined</span></pre></td></tr><tr><td data-num="5"></td><td><pre>   <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>	<span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span></pre></td></tr></table></figure><p>&lt;span alt=solid&gt; 普通函数没有明确调用者时 this 值为 window，严格模式下没有调用者时 this 的值为 undefined&lt;/span&gt;.</p><blockquote><p>总结：</p><ol><li>普通函数 this 指向我们怎么记忆？<ul><li>[谁调用 this 的值指向谁]</li></ul></li><li>普通函数严格模式下指向谁？<ul><li>严格模式下指向 <code>undefined</code></li></ul></li></ol></blockquote><h3 id="11-this-指向箭头函数"><a class="anchor" href="#11-this-指向箭头函数">#</a> 1.1 this 指向 — 箭头函数</h3><p>目标：能说出箭头函数的 this 指向</p><blockquote><p>箭头函数中的 this 与普通函数完全不同，也不受调用方式的影响，事实上 &lt;span alt=solid&gt; 箭头函数中并不存在 this!&lt;/span&gt;</p><ol><li>箭头函数会默认帮我们绑定外层 this 的值，所以在箭头函数中 this 的值和外层的 this 是一样的</li><li>箭头函数中的 this 引用的就是最近作用域中的 this</li><li>向外层作用域中，一层一层查找 this ， 直到有 this 的定义</li></ol></blockquote><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> <span class="token function-variable function">sayHi</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token comment">// window</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span> </pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">// window.sayHi()</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token literal-property property">uname</span><span class="token operator">:</span> <span class="token string">'pink'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token comment">// 到了 user 的作用域中 而 user 是 window 调用的</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token function-variable function">walk</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token comment">// 从上一层作用域开始找</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token comment">// window</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>user<span class="token punctuation">.</span><span class="token function">walk</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr></table></figure><h4 id="注意情况1"><a class="anchor" href="#注意情况1">#</a> 注意情况 1：</h4><p>在开发中 [使用箭头函数前需要考虑函数中 this 的值] ，事件回调函数使用箭头函数时，this 为全局的 window 因此 DOM 事件回调函数<mark>如果里面需要</mark> DOM 对象的 this，&lt;span alt=solid&gt; 则不推荐使用箭头函数 &lt;/span&gt;.</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 获取元素对象</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">const</span> button <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'button'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">// 箭头函数此时 this 指向了 window</span></pre></td></tr><tr><td data-num="4"></td><td><pre>button<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">// window</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">// 普通函数 此时 this 指向了 DOM 对象 button</span></pre></td></tr><tr><td data-num="6"></td><td><pre>button<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span> <span class="token comment">// button</span></pre></td></tr></table></figure><h4 id="注意情况2"><a class="anchor" href="#注意情况2">#</a> 注意情况 2：</h4><p>同样由于箭头函数 this 的原因，基于原型的面向对象也<mark>不推荐采用箭头函数</mark>.</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">// 原型对象上 添加了 箭头函数</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">walk</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token comment">// window</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">const</span> man <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre>man<span class="token punctuation">.</span><span class="token function">walk</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr></table></figure><blockquote><p>&lt;span alt=solid&gt; 总结 &lt;/span&gt;：</p><ol><li>函数内不存在 this ，沿用上一级的<ul><li>过程：向外层作用域中，一层一层查找 this ，直到有 this 的定义为止</li></ul></li><li>&lt;font&gt; 不适用 &lt;/font&gt;.<ul><li><mark>构造函数</mark>，<mark>原型函数</mark>，<mark>dom 事件函数</mark>等等</li></ul></li><li>&lt;font&gt; 适用 &lt;/font&gt;.<ul><li>需要使用<mark>上层 this</mark> 的地方</li></ul></li><li>&lt;span alt=wavy&gt; 使用正确的话，它会在很多地方带来方便，后面我们会大量使用慢慢体会 &lt;/span&gt;.</li></ol></blockquote><h3 id="2-改变this"><a class="anchor" href="#2-改变this">#</a> 2 改变 this</h3><p>JavaScript 中还允许指定函数中 this 的指向，有 3 个方法可以动态指定普通函数中 this 的指向</p><ol><li><code>call()</code></li><li><code>apply()</code></li><li><code>bind()</code></li></ol><h4 id="1-call了解"><a class="anchor" href="#1-call了解">#</a> 1 call ()— 了解</h4><p>使用 call 方法调用函数，同时指定被调用函数中 this 的值</p><h6 id="语法"><a class="anchor" href="#语法">#</a> 语法：</h6><p><code>fun.call(thisArg,arg1,arg2,...)</code></p><ul><li><code>thisArg</code> ：在 fun 函数运行时指定的 this 值</li><li><code>arg2,arg2</code> ：传递的其它参数</li></ul><p>&lt;span alt=solid&gt; 返回值就是函数的返回值，因为它就是调用函数 &lt;/span&gt;.</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token literal-property property">uname</span><span class="token operator">:</span> <span class="token string">'ikun'</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token comment">// 逻辑中断 默认赋值</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    x <span class="token operator">=</span> x <span class="token operator">|</span> <span class="token number">0</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    y <span class="token operator">=</span> y <span class="token operator">|</span> <span class="token number">0</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token comment">// obj</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x <span class="token operator">+</span> y<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token comment">// 1. 调用函数</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token comment">// 1.2 可以传递实参</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token comment">// 2. 改变 this 指向</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p><strong>结果</strong>：</p><p><img data-src="https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202308101414250.png" alt="image-20230810141447040"></p><h4 id="2-apply理解"><a class="anchor" href="#2-apply理解">#</a> 2 apply ()— 理解</h4><p>使用 apply 方法调用函数，同时指定被调用函数中 this 的值</p><h6 id="语法-2"><a class="anchor" href="#语法-2">#</a> 语法：</h6><p><code>fun.apply(thisArg,[argsArray])</code></p><ul><li><code>thisArg</code> ：在 fun 函数运行时指定的 this 值</li><li><code>argsArray</code> ：传递的值，必须包含在 <mark>数组</mark> 里面</li></ul><p>&lt;span alt=solid&gt; 返回值就是函数的返回值，因为它就是调用函数 &lt;/span&gt;.</p><p>因此 apply 主要<mark>跟数组有关系</mark>，比如使用 <code>Math.max()</code> 求数组的最大值</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token comment">// obj</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x <span class="token operator">+</span> y<span class="token punctuation">)</span><span class="token comment">// 3</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token comment">// 1. 调用函数</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token comment">// 2. 改变 this 指向</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token comment">// 3. 返回值，本身就是在调用函数，所以返回值就是函数返回值</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p><strong>结果</strong>：</p><p><img data-src="https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202308101427538.png" alt="image-20230810142707106"></p><blockquote><p>思考：</p><ol><li>call 和 apply 的区别是？<ul><li>都是调用函数，都能改变 this 指向</li><li>参数不一样，apply 传递的必须是数组，但是形参接收写法和变量一样</li></ul></li></ol></blockquote><h4 id="3-bind重点"><a class="anchor" href="#3-bind重点">#</a> 3 bind ()— 重点</h4><p>bind () 方法不会调用函数。但是能改变函数内部 this 指向</p><h6 id="语法-3"><a class="anchor" href="#语法-3">#</a> 语法：</h6><p><code>fun.bind(thisArg,arg1,arg2,...)</code></p><ul><li><code>thisArg</code> ：在 fun 函数运行时指定的 this 值</li><li><code>arg1,arg2</code> ：传递的其它参</li><li>返回由指定的 this 值和初始化参数改造的 <mark>原函数拷贝 (新函数)</mark>.</li><li>因此当我们只是想改变 this 指向，并且不想调用这个函数的时候，可以使用 bind ，比如改变定时器内部的 this 指向。</li></ul><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token comment">// window</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment">// 1.bind 不会调用函数</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token comment">// 2. 能改变 this 指向</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token comment">// 3. 返回值是个函数，但是这个函数里面的 this 是更改过的</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">const</span> fun <span class="token operator">=</span> <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token function">fun</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">// obj</span></pre></td></tr></table></figure><h5 id="定时器点击按钮后2秒恢复"><a class="anchor" href="#定时器点击按钮后2秒恢复">#</a> 定时器 — 点击按钮后 2 秒恢复</h5><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 需求，有一个按钮 点击里面就禁用，2 秒之后就开启</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">const</span> button <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'button'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre>button<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token comment">// 禁用元素</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">.</span>disabled <span class="token operator">=</span> <span class="token boolean">true</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token keyword">let</span> that <span class="token operator">=</span> <span class="token keyword">this</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token comment">// 定时器里面也可以改为使用箭头函数 因为箭头函数 this 沿用上一层就是 button 对象的 this</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token comment">//window.button.disabled = false 无效</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token comment">// 在这个函数里面，我们要由原来的 window 改为 button</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token keyword">this</span><span class="token punctuation">.</span>disabled <span class="token operator">=</span> <span class="token boolean">false</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        <span class="token comment">// 打印查看 定时器内部函数的 this 跟 单击事件里面的 this 是否相同 单击事件的 this 是 buttn 按钮对象</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token operator">===</span> that<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        <span class="token comment">//bind (this) 里面的 this 就是单击事件函数中的 this 也就是 button 对象</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><blockquote><p>&lt;span alt=solid&gt;call,apply,bind 总结 &lt;/span&gt;：</p><ul><li>相同点：<ul><li>都可以改变函数内部 this 的指向。</li></ul></li><li>区别点：<ul><li>call 和 apply 会调用函数，并且改变函数内部 this 的指向</li><li>call 和 apply 传递的参数不一样 call 传递参数 <code>arg1,arg2,...</code> 形式 apply 必须数组形式传递 <code>[arg1,arg2,...]</code></li><li>&lt;span alt=solid&gt;bind 不会调用函数，可以改变函数内部 this 的指向 &lt;/span&gt;.</li></ul></li><li>主要应用场景：<ul><li>call 调用函数并且可以传递参数</li><li>apply 经常跟数组有关系，比如借助于数学对象实现数组最大值最小值</li><li>&lt;span alt=solid&gt;bind 不调用函数，但是还会改变 this 指向，比如改变定时器内部的 this 指向 &lt;/span&gt;。</li></ul></li></ul></blockquote><h2 id="防抖-debounce"><a class="anchor" href="#防抖-debounce">#</a> 防抖 (debounce)</h2><p><strong>防抖</strong>：单位时间内，频繁触发事件，&lt;font title=red&gt; 只执行最后一次 &lt;/font&gt;.</p><p><img data-src="https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202308101532326.png" alt="image-20230810153242050"></p><p><strong>举个栗子</strong>：&lt;span alt=solid&gt; 王者荣耀回城 &lt;/span&gt;，只要被打断就需要重新来</p><p>廉颇残血了 想要 回家补补血，这时鲁班突然冒出来打了 廉颇一下，廉颇的回城施法被打断了，生气的廉颇就需要重新点一下回城，重新等待 3 秒的 施法时间。</p><p><img data-src="https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202308101534660.png" alt="image-20230810153426277"></p><p><strong>使用场景</strong>：</p><ul><li><mark>搜索框搜索输入</mark>。只需用户<mark>最后</mark>一次输入完，再发送请求</li><li>手机号，邮箱验证 <mark>输入检测</mark>。</li></ul><h3 id="案例利用防抖来处理鼠标滑过盒子显示文字1"><a class="anchor" href="#案例利用防抖来处理鼠标滑过盒子显示文字1">#</a> 案例 — 利用防抖来处理 — 鼠标滑过盒子显示文字 + 1</h3><p><strong>要求</strong>：鼠标再盒子上移动，里面的数字就会变化 + 1</p><h4 id="1-使用-loadsh库来实现-防抖"><a class="anchor" href="#1-使用-loadsh库来实现-防抖">#</a> 1 使用 loadsh 库来实现 防抖</h4><p>1. 引入 lodash 库的 js 文件</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token operator">&lt;</span>style<span class="token operator">></span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token punctuation">.</span>box <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>      <span class="token literal-property property">width</span><span class="token operator">:</span> 500px<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>      <span class="token literal-property property">height</span><span class="token operator">:</span> 500px<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>      background<span class="token operator">-</span>color<span class="token operator">:</span> #ccc<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>      <span class="token literal-property property">color</span><span class="token operator">:</span> #fff<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>      text<span class="token operator">-</span>align<span class="token operator">:</span> center<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>      font<span class="token operator">-</span>size<span class="token operator">:</span> 100px<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>  <span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">></span></pre></td></tr><tr><td data-num="11"></td><td><pre>  <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">"./js/lodash.min.js"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span></pre></td></tr></table></figure><p>2. 编写 js 代码：</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token operator">&lt;</span>body<span class="token operator">></span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"box"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token operator">&lt;</span>script<span class="token operator">></span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token comment">// 利用防抖实现性能优化</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token comment">// 需求：鼠标在盒子上移动，里面的数字就会 + 1</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token keyword">const</span> box <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.box'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token comment">// 鼠标移动函数</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token keyword">function</span> <span class="token function">mouseMove</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>      box<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> i<span class="token operator">++</span></pre></td></tr><tr><td data-num="11"></td><td><pre>      <span class="token comment">// 如果里面存在大量消耗性能的代码，比如 dom 操作，比如数据处理，可能造成卡顿</span></pre></td></tr><tr><td data-num="12"></td><td><pre></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token comment">// 添加鼠标移动监听事件</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token comment">// box.addEventListener('mousemove', mouseMove)</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token comment">// 利用 lodash 库实现防抖 —500 毫秒之后才 + 1</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token comment">// 语法：_.debounce (fun, 时间)</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    box<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mousemove'</span><span class="token punctuation">,</span> _<span class="token punctuation">.</span><span class="token function">debounce</span><span class="token punctuation">(</span>mouseMove<span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="19"></td><td><pre>  <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span></pre></td></tr></table></figure><p><strong>效果</strong>：</p><p><img data-src="https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202308101602532.gif" alt="test"></p><h3 id="2-手写防抖函数"><a class="anchor" href="#2-手写防抖函数">#</a> 2 手写防抖函数</h3><p><strong>核心思路</strong>：</p><p>防抖的核心就是利用定时器 (setTimeout) 来实现</p><ol><li>声明一个定时器 <mark>变量</mark>。</li><li>当鼠标每次滑动都先判断 <mark>是否有定时器</mark>了，如果有定时器先 <mark>清除以前</mark>的定时器</li><li>如果没有定时器则 <mark>开启</mark> 定时器 ，记得<mark>存到变量</mark>里面</li><li>在<mark>定时器里面调用</mark>要执行的函数</li></ol><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 利用防抖实现性能优化</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">// 需求：鼠标在盒子上移动，里面的数字就会 + 1</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">const</span> box <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.box'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">// 鼠标移动函数</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">function</span> <span class="token function">mouseMove</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>   box<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> i<span class="token operator">++</span></pre></td></tr><tr><td data-num="8"></td><td><pre>   <span class="token comment">// 如果里面存在大量消耗性能的代码，比如 dom 操作，比如数据处理，可能造成卡顿</span></pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token comment">// 手写防抖函数</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token comment">// 1.  声明一个定时器 变量。</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token comment">// 2.  当鼠标每次滑动都先判断 是否有定时器了，如果有定时器先 清除以前的定时器</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token comment">// 3.  如果没有定时器则 开启 定时器 ，记得存到变量里面</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token comment">// 4.  在定时器里面调用要执行的函数</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token keyword">function</span> <span class="token function">debounce</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> t</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>   <span class="token keyword">let</span> timer</pre></td></tr><tr><td data-num="18"></td><td><pre>   <span class="token comment">//return 返回一个匿名函数</span></pre></td></tr><tr><td data-num="19"></td><td><pre>   <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>      <span class="token comment">// 判断是否有定时器了 有则函数 </span></pre></td></tr><tr><td data-num="21"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span>timer<span class="token punctuation">)</span> <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="22"></td><td><pre>      timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>         <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">// 调用传入的函数</span></pre></td></tr><tr><td data-num="24"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> t<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="25"></td><td><pre>   <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="26"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="27"></td><td><pre><span class="token comment">//debounce (mouseMOve, 500) 相当于 function () &#123;定时器&#125; 当鼠标再次移动就调用了返回的函数</span></pre></td></tr><tr><td data-num="28"></td><td><pre>box<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mousemove'</span><span class="token punctuation">,</span> <span class="token function">debounce</span><span class="token punctuation">(</span>mouseMove<span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr></table></figure><h2 id="节流throttle"><a class="anchor" href="#节流throttle">#</a> 节流 —throttle</h2><p><strong>节流</strong>：单位时间内，频繁触发事件，<mark>只执行一次</mark>.</p><p><img data-src="https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202308101619481.png" alt="image-20230810161935226"></p><p><strong>举个栗子</strong>：</p><ul><li><p><mark>王者荣耀技能冷却</mark>，期间无法继续释放技能</p></li><li><p><mark>和平精英 98k</mark> 换子弹期间不能射击</p></li><li><p><strong>使用场景</strong>：</p><ul><li><strong>高频事件</strong>：鼠标移动 == <code>mousemove</code> ==，页面尺寸缩放 <mark>resize</mark>，滚动条滚动 <mark>scroll 等等</mark>.</li></ul></li></ul><p><strong>要求</strong>：鼠标在盒子上移动， 不管移动多少次，每隔 500ms 才 + 1</p><p><strong>实现方式</strong>：</p><ol><li><mark>lodash</mark> 提供的<mark>节流函数</mark>来处理</li><li><mark>手写</mark>一个<mark>节流函数</mark>来处理</li></ol><h3 id="1-使用lodash方式实现节流"><a class="anchor" href="#1-使用lodash方式实现节流">#</a> 1 使用 lodash 方式实现节流</h3><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token operator">&lt;</span>style<span class="token operator">></span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token punctuation">.</span>box <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>      <span class="token literal-property property">width</span><span class="token operator">:</span> 500px<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>      <span class="token literal-property property">height</span><span class="token operator">:</span> 500px<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>      background<span class="token operator">-</span>color<span class="token operator">:</span> #ccc<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>      <span class="token literal-property property">color</span><span class="token operator">:</span> #fff<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>      text<span class="token operator">-</span>align<span class="token operator">:</span> center<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>      font<span class="token operator">-</span>size<span class="token operator">:</span> 100px<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>  <span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">></span></pre></td></tr><tr><td data-num="11"></td><td><pre>  <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">"./js/lodash.min.js"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">></span></pre></td></tr><tr><td data-num="13"></td><td><pre></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token operator">&lt;</span>body<span class="token operator">></span></pre></td></tr><tr><td data-num="15"></td><td><pre>  <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"box"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="16"></td><td><pre>  <span class="token operator">&lt;</span>script<span class="token operator">></span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token comment">// 利用防抖实现性能优化</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token comment">// 需求：鼠标在盒子上移动，里面的数字就会 + 1</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token keyword">const</span> box <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.box'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    <span class="token comment">// 鼠标移动函数</span></pre></td></tr><tr><td data-num="22"></td><td><pre>    <span class="token keyword">function</span> <span class="token function">mouseMove</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>      box<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> i<span class="token operator">++</span></pre></td></tr><tr><td data-num="24"></td><td><pre>      <span class="token comment">// 如果里面存在大量消耗性能的代码，比如 dom 操作，比如数据处理，可能造成卡顿</span></pre></td></tr><tr><td data-num="25"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>    <span class="token comment">// 利用 lodash 库实现节流，500 毫秒之后才 + 1</span></pre></td></tr><tr><td data-num="27"></td><td><pre>    <span class="token comment">// 语法: _.throttle (fun, 时间)</span></pre></td></tr><tr><td data-num="28"></td><td><pre>    box<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mousemove'</span><span class="token punctuation">,</span> _<span class="token punctuation">.</span><span class="token function">throttle</span><span class="token punctuation">(</span>mouseMove<span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="29"></td><td><pre>  <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span></pre></td></tr><tr><td data-num="30"></td><td><pre><span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span></pre></td></tr></table></figure><p><strong>效果</strong>：</p><p><img data-src="https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202308101631716.gif" alt="test"></p><h3 id="手写节流函数"><a class="anchor" href="#手写节流函数">#</a> 手写节流函数</h3><p>核心也是使用定时器实现 setTimeout 实现</p><p><strong>核心思路</strong>：</p><ol><li>声明一个定时器 <mark>变量</mark>.</li><li>当鼠标每次滑动都先判断 <mark>是否有定时器了</mark>，如果有定时器则<mark>不开启</mark>新定时器</li><li>如果没有定时器则<mark>开启</mark>定时器，记得<mark>存到变量</mark>里面<ol><li>定时器里面<mark>调用</mark>执行的函数</li><li>定时器里面要把定时器<mark>清空</mark>.</li></ol></li></ol><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token operator">&lt;</span>body<span class="token operator">></span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"box"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token operator">&lt;</span>script<span class="token operator">></span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token comment">// 利用防抖实现性能优化</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token comment">// 需求：鼠标在盒子上移动，里面的数字就会 + 1</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token keyword">const</span> box <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.box'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token comment">// 鼠标移动函数</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token keyword">function</span> <span class="token function">mouseMove</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>      box<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> i<span class="token operator">++</span></pre></td></tr><tr><td data-num="11"></td><td><pre>      <span class="token comment">// 如果里面存在大量消耗性能的代码，比如 dom 操作，比如数据处理，可能造成卡顿</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token comment">// 利用 lodash 库实现节流，500 毫秒之后才 + 1</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token comment">// 语法: _.throttle (fun, 时间)</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token keyword">function</span> <span class="token function">throttle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>      <span class="token keyword">let</span> timer <span class="token operator">=</span> <span class="token keyword">null</span></pre></td></tr><tr><td data-num="17"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>timer<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="18"></td><td><pre>        timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>          <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="20"></td><td><pre>          <span class="token comment">// 清空定时器 </span></pre></td></tr><tr><td data-num="21"></td><td><pre>          <span class="token comment">// 思考这里为什么不使用 clearTimeout 来清除定时器 而是赋值为 null 呢？</span></pre></td></tr><tr><td data-num="22"></td><td><pre>          timer <span class="token operator">=</span> <span class="token keyword">null</span></pre></td></tr><tr><td data-num="23"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> t<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="24"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>    box<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mousemove'</span><span class="token punctuation">,</span> <span class="token function">throttle</span><span class="token punctuation">(</span>mouseMove<span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="26"></td><td><pre>  <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span></pre></td></tr><tr><td data-num="27"></td><td><pre><span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span></pre></td></tr></table></figure><h3 id="定时器的冷知识"><a class="anchor" href="#定时器的冷知识">#</a> 定时器的冷知识</h3><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">let</span> timer <span class="token operator">=</span> <span class="token keyword">null</span></pre></td></tr><tr><td data-num="2"></td><td><pre>timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token comment">// 1</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">// 在 setTimeout 中是无法删除定时器的，</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment">// 因为定时器还在运作，所以使用 timer = null 而不是 clearTimeout (timer)</span></pre></td></tr></table></figure><p>定时器还在运作的期间是无法删除的，一般不要在定时器的内部使用 clearTimeout 来删除当前的定时器可以删除其它的</p><h2 id="防抖和节流总结"><a class="anchor" href="#防抖和节流总结">#</a> 防抖和节流总结</h2><table><thead><tr><th>性能优化</th><th>说明</th><th>使用场景</th></tr></thead><tbody><tr><td>防抖</td><td>单位时间内，频繁触发事件，只执行最后一次</td><td>搜索框搜索输入，手机号，邮箱验证输入检测</td></tr><tr><td>节流</td><td>单位时间内，频繁触发事件，只执行一次</td><td>高频事件：鼠标移动，页面尺寸缩放，滚动条滚动等等</td></tr></tbody></table><h2 id="综合案例记录上次视频播放位置"><a class="anchor" href="#综合案例记录上次视频播放位置">#</a> 综合案例 — 记录上次视频播放位置</h2><p><strong>分析</strong>：</p><p><strong>两个事件</strong>：</p><ol><li>ontimeupdate 事件在 视频 / 音频 (audio/video) 当前的播放位置发送改变时触发</li><li>onloadeddata 事件在当前帧的数据加载完成且还没有足够的数据播放 视频 / 音频 (audio /video) 的下一帧时触发</li></ol><h5 id="演示ontimeupdate事件"><a class="anchor" href="#演示ontimeupdate事件">#</a> 演示 ontimeupdate 事件</h5><figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>video</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://v.itheima.net/LapADhV6.mp4<span class="token punctuation">"</span></span> <span class="token attr-name">controls</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>video</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token operator">&lt;</span>script<span class="token operator">></span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token comment">// 获取元素 要对视频进行操作</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">const</span> video <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'video'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token comment">// 当视频 / 音频 当前播放的位置发送改变时触发事件</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    video<span class="token punctuation">.</span><span class="token function-variable function">ontimeupdate</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'123'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span></pre></td></tr></table></figure><p><strong>效果</strong>：</p><p><img data-src="https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202308101700465.gif" alt="test"></p><p><strong>谁需要节流</strong>？</p><p>ontimeupdate，触发频次太高了，我们可以设定 1 秒钟触发一次</p><p><strong>思路</strong>：</p><ol><li>在 ontimeupdate 事件触发的时候，每隔 1 秒钟，就记录当前时间到本地存储</li><li>下次打开页面，onloadeddata 事件触发，就可以从本地存储取出时间，让视频从取出的时间播放，如果没有就默认为 0</li><li>获得当前时间： <code>video.currentTime</code></li></ol><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> html<span class="token operator">></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string">"en"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token operator">&lt;</span>head<span class="token operator">></span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token operator">&lt;</span>meta charset<span class="token operator">=</span><span class="token string">"UTF-8"</span> <span class="token operator">/</span><span class="token operator">></span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token operator">&lt;</span>meta http<span class="token operator">-</span>equiv<span class="token operator">=</span><span class="token string">"X-UA-Compatible"</span> content<span class="token operator">=</span><span class="token string">"IE=edge"</span> <span class="token operator">/</span><span class="token operator">></span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token operator">&lt;</span>meta name<span class="token operator">=</span><span class="token string">"viewport"</span> content<span class="token operator">=</span><span class="token string">"width=device-width, initial-scale=1.0"</span> <span class="token operator">/</span><span class="token operator">></span></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token operator">&lt;</span>meta name<span class="token operator">=</span><span class="token string">"referrer"</span> content<span class="token operator">=</span><span class="token string">"never"</span> <span class="token operator">/</span><span class="token operator">></span></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token operator">&lt;</span>title<span class="token operator">></span>综合案例<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">></span></pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token operator">&lt;</span>style<span class="token operator">></span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token operator">*</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>      <span class="token literal-property property">padding</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>      <span class="token literal-property property">margin</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>      box<span class="token operator">-</span>sizing<span class="token operator">:</span> border<span class="token operator">-</span>box<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="15"></td><td><pre></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token punctuation">.</span>container <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>      <span class="token literal-property property">width</span><span class="token operator">:</span> 1200px<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>      <span class="token literal-property property">margin</span><span class="token operator">:</span> <span class="token number">0</span> auto<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="20"></td><td><pre></pre></td></tr><tr><td data-num="21"></td><td><pre>    <span class="token punctuation">.</span>video video <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>      <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">100</span><span class="token operator">%</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>      <span class="token literal-property property">padding</span><span class="token operator">:</span> 20px <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="25"></td><td><pre></pre></td></tr><tr><td data-num="26"></td><td><pre>    <span class="token punctuation">.</span>elevator <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>      <span class="token literal-property property">position</span><span class="token operator">:</span> fixed<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>      <span class="token literal-property property">top</span><span class="token operator">:</span> 280px<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>      <span class="token literal-property property">right</span><span class="token operator">:</span> 20px<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>      z<span class="token operator">-</span>index<span class="token operator">:</span> <span class="token number">999</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>      <span class="token literal-property property">background</span><span class="token operator">:</span> #fff<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>      <span class="token literal-property property">border</span><span class="token operator">:</span> 1px solid #e4e4e4<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>      <span class="token literal-property property">width</span><span class="token operator">:</span> 60px<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="35"></td><td><pre></pre></td></tr><tr><td data-num="36"></td><td><pre>    <span class="token punctuation">.</span>elevator a <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="37"></td><td><pre>      <span class="token literal-property property">display</span><span class="token operator">:</span> block<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="38"></td><td><pre>      <span class="token literal-property property">padding</span><span class="token operator">:</span> 10px<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="39"></td><td><pre>      text<span class="token operator">-</span>decoration<span class="token operator">:</span> none<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="40"></td><td><pre>      text<span class="token operator">-</span>align<span class="token operator">:</span> center<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="41"></td><td><pre>      <span class="token literal-property property">color</span><span class="token operator">:</span> #<span class="token number">999</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="42"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="43"></td><td><pre></pre></td></tr><tr><td data-num="44"></td><td><pre>    <span class="token punctuation">.</span>elevator a<span class="token punctuation">.</span>active <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="45"></td><td><pre>      <span class="token literal-property property">color</span><span class="token operator">:</span> #1286ff<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="46"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="47"></td><td><pre></pre></td></tr><tr><td data-num="48"></td><td><pre>    <span class="token punctuation">.</span>outline <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="49"></td><td><pre>      padding<span class="token operator">-</span>bottom<span class="token operator">:</span> 300px<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="50"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="51"></td><td><pre>  <span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">></span></pre></td></tr><tr><td data-num="52"></td><td><pre><span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">></span></pre></td></tr><tr><td data-num="53"></td><td><pre></pre></td></tr><tr><td data-num="54"></td><td><pre><span class="token operator">&lt;</span>body<span class="token operator">></span></pre></td></tr><tr><td data-num="55"></td><td><pre>  <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"container"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="56"></td><td><pre>    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"header"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="57"></td><td><pre>      <span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string">"http://pip.itcast.cn"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="58"></td><td><pre>        <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">"https://pip.itcast.cn/img/logo_v3.29b9ba72.png"</span> alt<span class="token operator">=</span><span class="token string">""</span> <span class="token operator">/</span><span class="token operator">></span></pre></td></tr><tr><td data-num="59"></td><td><pre>      <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">></span></pre></td></tr><tr><td data-num="60"></td><td><pre>    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="61"></td><td><pre>    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"video"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="62"></td><td><pre>      <span class="token operator">&lt;</span>video src<span class="token operator">=</span><span class="token string">"https://v.itheima.net/LapADhV6.mp4"</span> controls<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>video<span class="token operator">></span></pre></td></tr><tr><td data-num="63"></td><td><pre>    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="64"></td><td><pre>    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"elevator"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="65"></td><td><pre>      <span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string">"javascript:;"</span> data<span class="token operator">-</span>ref<span class="token operator">=</span><span class="token string">"video"</span><span class="token operator">></span>视频介绍<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">></span></pre></td></tr><tr><td data-num="66"></td><td><pre>      <span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string">"javascript:;"</span> data<span class="token operator">-</span>ref<span class="token operator">=</span><span class="token string">"intro"</span><span class="token operator">></span>课程简介<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">></span></pre></td></tr><tr><td data-num="67"></td><td><pre>      <span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string">"javascript:;"</span> data<span class="token operator">-</span>ref<span class="token operator">=</span><span class="token string">"outline"</span><span class="token operator">></span>评论列表<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">></span></pre></td></tr><tr><td data-num="68"></td><td><pre>    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="69"></td><td><pre>  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="70"></td><td><pre>  <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">"https://cdn.jsdelivr.net/npm/lodash@4.17.21/lodash.min.js"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span></pre></td></tr><tr><td data-num="71"></td><td><pre>  <span class="token operator">&lt;</span>script<span class="token operator">></span></pre></td></tr><tr><td data-num="72"></td><td><pre>    <span class="token comment">// 获取元素 要对视频进行操作</span></pre></td></tr><tr><td data-num="73"></td><td><pre>    <span class="token keyword">const</span> video <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'video'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="74"></td><td><pre>    <span class="token comment">// 当视频 / 音频 当前播放的位置发送改变时触发事件</span></pre></td></tr><tr><td data-num="75"></td><td><pre>    video<span class="token punctuation">.</span>ontimeupdate <span class="token operator">=</span> _<span class="token punctuation">.</span><span class="token function">throttle</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="76"></td><td><pre>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>video<span class="token punctuation">.</span>currentTime<span class="token punctuation">)</span> <span class="token comment">// 获得当前视频时间</span></pre></td></tr><tr><td data-num="77"></td><td><pre>      <span class="token comment">// 本地存储视频时间</span></pre></td></tr><tr><td data-num="78"></td><td><pre>      localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">'currentTime'</span><span class="token punctuation">,</span> video<span class="token punctuation">.</span>currentTime<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="79"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="80"></td><td><pre>    <span class="token comment">// 打开页面触发事件，就从本地存储里面取出记录的时间，赋值给 video.currentTime</span></pre></td></tr><tr><td data-num="81"></td><td><pre>    <span class="token comment">// 注意打开页面触发事件 ，而不是刷新页面触发事件 刷新页面不触发事件</span></pre></td></tr><tr><td data-num="82"></td><td><pre>    video<span class="token punctuation">.</span><span class="token function-variable function">onloadeddata</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="83"></td><td><pre>      <span class="token comment">// 防止用户第一次打开本地没有 currentTime 获取就是 undefined 使用 || 逻辑中断</span></pre></td></tr><tr><td data-num="84"></td><td><pre>      <span class="token comment">// 将本地存储播放的视频 赋值给视频</span></pre></td></tr><tr><td data-num="85"></td><td><pre>      video<span class="token punctuation">.</span>currentTime <span class="token operator">=</span> localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">'currentTime'</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token number">0</span></pre></td></tr><tr><td data-num="86"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="87"></td><td><pre>  <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span></pre></td></tr><tr><td data-num="88"></td><td><pre><span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span></pre></td></tr><tr><td data-num="89"></td><td><pre><span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">></span></pre></td></tr></table></figure><div class="tags"><a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%AD%A6%E7%A7%91/" rel="tag"><i class="ic i-tag"></i> 计算机学科</a> <a href="/tags/web/" rel="tag"><i class="ic i-tag"></i> web</a> <a href="/tags/js/" rel="tag"><i class="ic i-tag"></i> js</a></div></div><footer><div class="meta"><span id="computer-science/web/js/JS进阶/JS进阶-深入面向对象/" class="item leancloud_visitors" data-flag-title="JS 进阶 - 深入面向对象" title="阅读次数"><span class="icon"><i class="ic i-eye"></i> </span><span class="text">阅读次数</span> <span class="leancloud-visitors-count"></span> <span class="text">次</span></span></div><div class="reward"><button><i class="ic i-heartbeat"></i> 赞赏</button><p>请我喝[茶]~(￣▽￣)~*</p><div id="qr"><div><img data-src="/images/wechatpay.png" alt="D 微信支付"><p>微信支付</p></div><div><img data-src="/images/alipay.png" alt="D 支付宝"><p>支付宝</p></div><div><img data-src="/images/paypal.png" alt="D 贝宝"><p>贝宝</p></div></div></div><div id="copyright"><ul><li class="author"><strong>Dkx： </strong>D <i class="ic i-at"><em>@</em></i>D の Java</li><li class="link"><strong>本文链接：</strong> <a href="https://pigpigletsgo.github.io/computer-science/web/js/JS%E8%BF%9B%E9%98%B6/JS%E8%BF%9B%E9%98%B6-%E6%B7%B1%E5%85%A5%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/" title="JS 进阶 - 深入面向对象">https://pigpigletsgo.github.io/computer-science/web/js/JS进阶/JS进阶-深入面向对象/</a></li><li class="license"><strong>版权声明： </strong>本站所有文章除特别声明外，均采用 <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> 许可协议。转载请注明出处！</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/computer-science/web/js/JQuery/JQuery%E9%AB%98%E7%BA%A7/" itemprop="url" rel="prev" data-background-image="https:&#x2F;&#x2F;img.timelessq.com&#x2F;images&#x2F;2022&#x2F;07&#x2F;26&#x2F;4c481240fd5e6e7b076ca8fe50da6e52.jpg" title="jQuery高级部分"><span class="type">上一篇</span> <span class="category"><i class="ic i-flag"></i> JQuery</span><h3>jQuery高级部分</h3></a></div><div class="item right"><a href="/computer-science/web/js/JS%E8%BF%9B%E9%98%B6/JS%E8%BF%9B%E9%98%B6/" itemprop="url" rel="next" data-background-image="https:&#x2F;&#x2F;img.timelessq.com&#x2F;images&#x2F;2022&#x2F;07&#x2F;26&#x2F;1406d3cdecfa0dd6e62f13a601eb9230.jpg" title="JS进阶"><span class="type">下一篇</span> <span class="category"><i class="ic i-flag"></i> JS 进阶</span><h3>JS进阶</h3></a></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="文章目录"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B7%B1%E5%85%A5%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.</span> <span class="toc-text">深入面向对象</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E7%BC%96%E7%A8%8B%E6%80%9D%E6%83%B3"><span class="toc-number">1.1.</span> <span class="toc-text">1 编程思想</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#11-%E9%9D%A2%E5%90%91%E8%BF%87%E7%A8%8B"><span class="toc-number">1.1.1.</span> <span class="toc-text">1.1 面向过程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#12-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1-oop"><span class="toc-number">1.1.2.</span> <span class="toc-text">1.2 面向对象 (oop)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#13-%E9%9D%A2%E5%90%91%E8%BF%87%E7%A8%8B%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1-%E5%AF%B9%E6%AF%94"><span class="toc-number">1.1.3.</span> <span class="toc-text">1.3 面向过程 &amp; 面向对象 对比</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#131-%E9%9D%A2%E5%90%91%E8%BF%87%E7%A8%8B%E7%BC%96%E7%A8%8B"><span class="toc-number">1.1.3.1.</span> <span class="toc-text">1.3.1 面向过程编程</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#132-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B-oop"><span class="toc-number">1.1.3.2.</span> <span class="toc-text">1.3.2 面向对象编程 (oop)</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0"><span class="toc-number">1.2.</span> <span class="toc-text">2 构造函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%8E%9F%E5%9E%8B"><span class="toc-number">1.3.</span> <span class="toc-text">3 原型</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#31-%E5%8E%9F%E5%9E%8Bprototype"><span class="toc-number">1.3.1.</span> <span class="toc-text">3.1 原型 (prototype)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#311-%E5%8E%9F%E5%9E%8Bthis%E6%8C%87%E5%90%91"><span class="toc-number">1.3.2.</span> <span class="toc-text">3.1.1 原型 —this 指向</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#312-%E6%95%B0%E7%BB%84%E6%89%A9%E5%B1%95%E6%A1%88%E4%BE%8B%E6%B1%82%E6%9C%80%E5%A4%A7%E5%80%BC%E5%92%8C%E6%95%B0%E7%BB%84%E6%B1%82%E5%92%8C"><span class="toc-number">1.3.3.</span> <span class="toc-text">3.1.2 数组扩展案例 — 求最大值和数组求和</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#32-constructor%E5%B1%9E%E6%80%A7"><span class="toc-number">1.3.4.</span> <span class="toc-text">3.2 constructor 属性</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#321-%E9%87%8D%E6%96%B0%E6%8C%87%E5%9B%9E%E5%88%9B%E5%BB%BA%E5%8E%9F%E5%9E%8B%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0"><span class="toc-number">1.3.5.</span> <span class="toc-text">3.2.1 重新指回创建原型对象的构造函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#33-%E5%AF%B9%E8%B1%A1%E5%8E%9F%E5%9E%8B"><span class="toc-number">1.3.6.</span> <span class="toc-text">3.3 对象原型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#34-%E5%8E%9F%E5%9E%8B%E7%BB%A7%E6%89%BF"><span class="toc-number">1.3.7.</span> <span class="toc-text">3.4 原型继承</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-font-titlered%E5%B0%81%E8%A3%85font%E6%8A%BD%E5%8F%96%E5%85%AC%E5%85%B1%E9%83%A8%E5%88%86"><span class="toc-number">1.3.7.1.</span> <span class="toc-text">1 &lt;font title&#x3D;red&gt; 封装 &lt;&#x2F;font&gt;— 抽取公共部分</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E9%97%AE%E9%A2%98%E5%8E%9F%E5%9B%A0"><span class="toc-number">1.3.7.2.</span> <span class="toc-text">2 问题 —— 原因</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#35-%E5%8E%9F%E5%9E%8B%E9%93%BE"><span class="toc-number">1.3.8.</span> <span class="toc-text">3.5 原型链</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#351-%E5%8E%9F%E5%9E%8B%E9%93%BE%E6%9F%A5%E6%89%BE%E8%A7%84%E5%88%99"><span class="toc-number">1.3.8.1.</span> <span class="toc-text">3.5.1 原型链 — 查找规则</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B%E6%A8%A1%E6%80%81%E6%A1%86%E5%B0%81%E8%A3%85"><span class="toc-number">1.4.</span> <span class="toc-text">综合案例 — 模态框封装</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B7%B1%E6%B5%85%E6%8B%B7%E8%B4%9D"><span class="toc-number">2.</span> <span class="toc-text">深浅拷贝</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E6%B5%85%E6%8B%B7%E8%B4%9D"><span class="toc-number">2.1.</span> <span class="toc-text">1 浅拷贝</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%B7%B1%E6%8B%B7%E8%B4%9D"><span class="toc-number">2.2.</span> <span class="toc-text">2 深拷贝</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E9%80%9A%E8%BF%87%E9%80%92%E5%BD%92%E5%AE%9E%E7%8E%B0%E6%B7%B1%E6%8B%B7%E8%B4%9D"><span class="toc-number">2.2.1.</span> <span class="toc-text">1 通过递归实现深拷贝</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%80%92%E5%BD%92%E4%BB%8B%E7%BB%8D"><span class="toc-number">2.2.1.1.</span> <span class="toc-text">递归介绍</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#11-%E9%80%9A%E8%BF%87%E9%80%92%E5%BD%92%E5%AE%9E%E7%8E%B0%E6%B7%B1%E6%8B%B7%E8%B4%9D-%E7%B2%BE%E7%AE%80%E7%89%88"><span class="toc-number">2.2.1.2.</span> <span class="toc-text">1.1 通过递归实现深拷贝 (精简版)</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-js%E5%BA%93lodash%E9%87%8C%E9%9D%A2clonedeep%E5%86%85%E9%83%A8%E5%AE%9E%E7%8E%B0%E4%BA%86%E6%B7%B1%E6%8B%B7%E8%B4%9D-%E5%B8%B8%E7%94%A8%EF%B8%8F"><span class="toc-number">2.2.2.</span> <span class="toc-text">2 js 库 lodash 里面 cloneDeep 内部实现了深拷贝 (常用)⭐️</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E4%BD%BF%E7%94%A8json%E7%9A%84%E6%96%B9%E5%BC%8F%E5%AE%9E%E7%8E%B0%E6%B7%B1%E6%8B%B7%E8%B4%9D"><span class="toc-number">2.2.3.</span> <span class="toc-text">3 使用 JSON 的方式实现深拷贝</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86"><span class="toc-number">3.</span> <span class="toc-text">异常处理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-throw-%E6%8A%9B%E5%BC%82%E5%B8%B8"><span class="toc-number">3.1.</span> <span class="toc-text">1 throw 抛异常</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-try-catch-%E6%8D%95%E8%8E%B7%E9%94%99%E8%AF%AF%E4%BF%A1%E6%81%AF"><span class="toc-number">3.2.</span> <span class="toc-text">2 try &#x2F;catch 捕获错误信息</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-debugger"><span class="toc-number">3.3.</span> <span class="toc-text">3 debugger</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%84%E7%90%86this"><span class="toc-number">4.</span> <span class="toc-text">处理 this</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-this-%E6%8C%87%E5%90%91%E6%99%AE%E9%80%9A%E5%87%BD%E6%95%B0"><span class="toc-number">4.1.</span> <span class="toc-text">1 this 指向 — 普通函数</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%99%AE%E9%80%9A%E5%87%BD%E6%95%B0"><span class="toc-number">4.1.1.</span> <span class="toc-text">普通函数</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-this-%E6%8C%87%E5%90%91%E7%AE%AD%E5%A4%B4%E5%87%BD%E6%95%B0"><span class="toc-number">4.2.</span> <span class="toc-text">1.1 this 指向 — 箭头函数</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F%E6%83%85%E5%86%B51"><span class="toc-number">4.2.1.</span> <span class="toc-text">注意情况 1：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F%E6%83%85%E5%86%B52"><span class="toc-number">4.2.2.</span> <span class="toc-text">注意情况 2：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%94%B9%E5%8F%98this"><span class="toc-number">4.3.</span> <span class="toc-text">2 改变 this</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-call%E4%BA%86%E8%A7%A3"><span class="toc-number">4.3.1.</span> <span class="toc-text">1 call ()— 了解</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E8%AF%AD%E6%B3%95"><span class="toc-number">4.3.1.0.1.</span> <span class="toc-text">语法：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-apply%E7%90%86%E8%A7%A3"><span class="toc-number">4.3.2.</span> <span class="toc-text">2 apply ()— 理解</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E8%AF%AD%E6%B3%95-2"><span class="toc-number">4.3.2.0.1.</span> <span class="toc-text">语法：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-bind%E9%87%8D%E7%82%B9"><span class="toc-number">4.3.3.</span> <span class="toc-text">3 bind ()— 重点</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E8%AF%AD%E6%B3%95-3"><span class="toc-number">4.3.3.0.1.</span> <span class="toc-text">语法：</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AE%9A%E6%97%B6%E5%99%A8%E7%82%B9%E5%87%BB%E6%8C%89%E9%92%AE%E5%90%8E2%E7%A7%92%E6%81%A2%E5%A4%8D"><span class="toc-number">4.3.3.1.</span> <span class="toc-text">定时器 — 点击按钮后 2 秒恢复</span></a></li></ol><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%98%B2%E6%8A%96-debounce"><span class="toc-number">5.</span> <span class="toc-text">防抖 (debounce)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%E5%88%A9%E7%94%A8%E9%98%B2%E6%8A%96%E6%9D%A5%E5%A4%84%E7%90%86%E9%BC%A0%E6%A0%87%E6%BB%91%E8%BF%87%E7%9B%92%E5%AD%90%E6%98%BE%E7%A4%BA%E6%96%87%E5%AD%971"><span class="toc-number">5.1.</span> <span class="toc-text">案例 — 利用防抖来处理 — 鼠标滑过盒子显示文字 + 1</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E4%BD%BF%E7%94%A8-loadsh%E5%BA%93%E6%9D%A5%E5%AE%9E%E7%8E%B0-%E9%98%B2%E6%8A%96"><span class="toc-number">5.1.1.</span> <span class="toc-text">1 使用 loadsh 库来实现 防抖</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%89%8B%E5%86%99%E9%98%B2%E6%8A%96%E5%87%BD%E6%95%B0"><span class="toc-number">5.2.</span> <span class="toc-text">2 手写防抖函数</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%8A%82%E6%B5%81throttle"><span class="toc-number">6.</span> <span class="toc-text">节流 —throttle</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E4%BD%BF%E7%94%A8lodash%E6%96%B9%E5%BC%8F%E5%AE%9E%E7%8E%B0%E8%8A%82%E6%B5%81"><span class="toc-number">6.1.</span> <span class="toc-text">1 使用 lodash 方式实现节流</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%8B%E5%86%99%E8%8A%82%E6%B5%81%E5%87%BD%E6%95%B0"><span class="toc-number">6.2.</span> <span class="toc-text">手写节流函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9A%E6%97%B6%E5%99%A8%E7%9A%84%E5%86%B7%E7%9F%A5%E8%AF%86"><span class="toc-number">6.3.</span> <span class="toc-text">定时器的冷知识</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%98%B2%E6%8A%96%E5%92%8C%E8%8A%82%E6%B5%81%E6%80%BB%E7%BB%93"><span class="toc-number">7.</span> <span class="toc-text">防抖和节流总结</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B%E8%AE%B0%E5%BD%95%E4%B8%8A%E6%AC%A1%E8%A7%86%E9%A2%91%E6%92%AD%E6%94%BE%E4%BD%8D%E7%BD%AE"><span class="toc-number">8.</span> <span class="toc-text">综合案例 — 记录上次视频播放位置</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%BC%94%E7%A4%BAontimeupdate%E4%BA%8B%E4%BB%B6"><span class="toc-number">8.0.0.1.</span> <span class="toc-text">演示 ontimeupdate 事件</span></a></li></ol></li></div><div class="related panel pjax" data-title="系列文章"><ul><li class="active"><a href="/computer-science/web/js/JS%E8%BF%9B%E9%98%B6/JS%E8%BF%9B%E9%98%B6-%E6%B7%B1%E5%85%A5%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/" rel="bookmark" title="JS进阶-深入面向对象">JS进阶-深入面向对象</a></li><li><a href="/computer-science/web/js/JS%E8%BF%9B%E9%98%B6/JS%E8%BF%9B%E9%98%B6/" rel="bookmark" title="JS进阶">JS进阶</a></li></ul></div><div class="overview panel" data-title="站点概览"><div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="D" data-src="/images/avatar.jpg"><p class="name" itemprop="name">D</p><div class="description" itemprop="description">欢迎来我的博客空间</div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">524</span> <span class="name">文章</span></a></div><div class="item categories"><a href="/categories/"><span class="count">137</span> <span class="name">分类</span></a></div><div class="item tags"><a href="/tags/"><span class="count">166</span> <span class="name">标签</span></a></div></nav><div class="social"><span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL1BpZ1BpZ0xldHNHbw==" title="https:&#x2F;&#x2F;github.com&#x2F;PigPigLetsGo"><i class="ic i-github"></i></span> <span class="exturl item twitter" data-url="aHR0cHM6Ly90d2l0dGVyLmNvbS9Ea3gxMjE5" title="https:&#x2F;&#x2F;twitter.com&#x2F;Dkx1219"><i class="ic i-twitter"></i></span> <span class="exturl item zhihu" data-url="aHR0cHM6Ly93d3cuemhpaHUuY29tL3Blb3BsZS96dWktaG91LXllLWJlaS1sdWUtc2hh" title="https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;zui-hou-ye-bei-lue-sha"><i class="ic i-zhihu"></i></span> <span class="exturl item music" data-url="aHR0cHM6Ly9tdXNpYy4xNjMuY29tLyMvdXNlci9ob21lP2lkPTU3NjUxMDQ1OQ==" title="https:&#x2F;&#x2F;music.163.com&#x2F;#&#x2F;user&#x2F;home?id&#x3D;576510459"><i class="ic i-cloud-music"></i></span> <span class="exturl item weibo" data-url="aHR0cHM6Ly93d3cud2VpYm8uY29tL3UvNTk5OTU0OTg0MQ==" title="https:&#x2F;&#x2F;www.weibo.com&#x2F;u&#x2F;5999549841"><i class="ic i-weibo"></i></span> <span class="exturl item facebook" data-url="aHR0cHM6Ly93d3cuZmFjZWJvb2suY29tL3Byb2ZpbGUucGhwP2lkPTEwMDA5NDA4Nzc0ODIwMQ==" title="https:&#x2F;&#x2F;www.facebook.com&#x2F;profile.php?id&#x3D;100094087748201"><i class="ic i-facebook"></i></span> <span class="exturl item stackoverflow" data-url="aHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS91c2Vycy8xOTQwNjAyOS9kLWt4" title="https:&#x2F;&#x2F;stackoverflow.com&#x2F;users&#x2F;19406029&#x2F;d-kx"><i class="ic i-stack-overflow"></i></span> <span class="exturl item youtube" data-url="aHR0cHM6Ly93d3cueW91dHViZS5jb20vQERreC12djdsbQ==" title="https:&#x2F;&#x2F;www.youtube.com&#x2F;@Dkx-vv7lm"><i class="ic i-youtube"></i></span> <span class="exturl item instagram" data-url="aHR0cHM6Ly93d3cuaW5zdGFncmFtLmNvbS9kb3Vka3g/aWdzaD1PR1E1WkRjMk9EazJaQSUzRCUzRCZ1dG1fc291cmNlPXFy" title="https:&#x2F;&#x2F;www.instagram.com&#x2F;doudkx?igsh&#x3D;OGQ5ZDc2ODk2ZA%3D%3D&amp;utm_source&#x3D;qr"><i class="ic i-instagram"></i></span> <span class="exturl item paper-plane" data-url="aHR0cHM6Ly90Lm1lL2RvdTAxMDg=" title="https:&#x2F;&#x2F;t.me&#x2F;dou0108"><i class="ic i-paper-plane"></i></span> <span class="exturl item skype" data-url="aHR0cHM6Ly9qb2luLnNreXBlLmNvbS9UN25TSWhvbmMxcWQ=" title="https:&#x2F;&#x2F;join.skype.com&#x2F;T7nSIhonc1qd"><i class="ic i-skype"></i></span></div><ul class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>首页</a></li><li class="item"><a href="/about/" rel="section"><i class="ic i-user"></i>关于</a></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-feather"></i>文章</a><ul class="submenu"><li class="item"><a href="/archives/" rel="section"><i class="ic i-list-alt"></i>归档</a></li><li class="item"><a href="/categories/" rel="section"><i class="ic i-th"></i>分类</a></li><li class="item"><a href="/tags/" rel="section"><i class="ic i-tags"></i>标签</a></li></ul></li><li class="item"><a href="/friends/" rel="section"><i class="ic i-heart"></i>友達</a></li><li class="item"><a href="/links/" rel="section"><i class="ic i-magic"></i>链接</a></li></ul></div></div></div><ul id="quick"><li class="prev pjax"><a href="/computer-science/web/js/JQuery/JQuery%E9%AB%98%E7%BA%A7/" rel="prev" title="上一篇"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/computer-science/web/js/JS%E8%BF%9B%E9%98%B6/JS%E8%BF%9B%E9%98%B6/" rel="next" title="下一篇"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"><div class="rpost pjax"><h2>随机文章</h2><ul><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于 计算机学科">计算机学科</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/java/" title="分类于 java">java</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/java/maven/" title="分类于 maven">maven</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/java/maven/%E8%BF%9B%E9%98%B6/" title="分类于 进阶">进阶</a></div><span><a href="/computer-science/java/maven/%E8%BF%9B%E9%98%B6/%E7%BB%A7%E6%89%BF%E4%B8%8E%E8%81%9A%E5%90%88/" title="maven-继承与聚合">maven-继承与聚合</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于 计算机学科">计算机学科</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/java/" title="分类于 java">java</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/java/%E5%B7%A5%E5%85%B7%E7%B1%BB/" title="分类于 工具类">工具类</a></div><span><a href="/computer-science/java/%E5%B7%A5%E5%85%B7%E7%B1%BB/JDBC%E5%B7%A5%E5%85%B7%E7%B1%BB/" title="JDBC工具类">JDBC工具类</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于 计算机学科">计算机学科</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/java/" title="分类于 java">java</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/java/spring/" title="分类于 spring">spring</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/java/spring/springboot/" title="分类于 springboot">springboot</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/java/spring/springboot/%E6%95%B4%E5%90%88jar%E5%8C%85/" title="分类于 整合 jar 包">整合 jar 包</a></div><span><a href="/computer-science/java/spring/springboot/%E6%95%B4%E5%90%88jar%E5%8C%85/Sprong-boot-devtools/" title="Sprong-boot-devtools">Sprong-boot-devtools</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于 计算机学科">计算机学科</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/java/" title="分类于 java">java</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/java/spring/" title="分类于 spring">spring</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/java/spring/spring%E6%BA%90%E7%A0%81/" title="分类于 spring 源码">spring 源码</a></div><span><a href="/computer-science/java/spring/spring%E6%BA%90%E7%A0%81/Spring5%E6%96%B0%E5%8A%9F%E8%83%BD/" title="Spring5框架新功能">Spring5框架新功能</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于 计算机学科">计算机学科</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/java/" title="分类于 java">java</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/java/maven/" title="分类于 maven">maven</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/java/maven/%E8%BF%9B%E9%98%B6/" title="分类于 进阶">进阶</a></div><span><a href="/computer-science/java/maven/%E8%BF%9B%E9%98%B6/%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86/" title="maven-版本管理">maven-版本管理</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/bug/" title="分类于 问题总汇">问题总汇</a></div><span><a href="/bug/org-springframework-http-converter-HttpMessageNotWritableException-No-converter-found-for-retur/" title="org-springframework-http-converter-HttpMessageNotWritableException-No-converter-found-for-retur">org-springframework-http-converter-HttpMessageNotWritableException-No-converter-found-for-retur</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于 计算机学科">计算机学科</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/java/" title="分类于 java">java</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/java/data-structures-and-algorithms/" title="分类于 数据结构与算法">数据结构与算法</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/java/data-structures-and-algorithms/%E9%98%BB%E5%A1%9E%E9%98%9F%E5%88%97/" title="分类于 阻塞队列">阻塞队列</a></div><span><a href="/computer-science/java/data-structures-and-algorithms/%E9%98%BB%E5%A1%9E%E9%98%9F%E5%88%97/%E9%98%BB%E5%A1%9E%E9%98%9F%E5%88%97-%E5%8F%8C%E9%94%81%E5%AE%9E%E7%8E%B03-%E6%9C%80%E5%90%8E%E9%98%B6%E6%AE%B5/" title="阻塞队列-双锁实现3-最后阶段">阻塞队列-双锁实现3-最后阶段</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于 计算机学科">计算机学科</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/web/" title="分类于 web">web</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/web/css/" title="分类于 css">css</a></div><span><a href="/computer-science/web/css/CSS3/" title="CSS3">CSS3</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于 计算机学科">计算机学科</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/web/" title="分类于 web">web</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/web/vue/" title="分类于 vue">vue</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/web/vue/vue3/" title="分类于 vue3">vue3</a></div><span><a href="/computer-science/web/vue/vue3/%E9%85%8D%E7%BD%AE%E4%BB%A3%E7%A0%81%E6%A3%80%E6%9F%A5%E5%B7%A5%E4%BD%9C%E6%B5%81/" title="vue3-提交前做代码检查">vue3-提交前做代码检查</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于 计算机学科">计算机学科</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/java/" title="分类于 java">java</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/java/%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93/" title="分类于 第三方库">第三方库</a></div><span><a href="/computer-science/java/%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93/CommonsLang3/" title="Apache Commons-Lang3">Apache Commons-Lang3</a></span></li></ul></div><div><h2>最新评论</h2><ul class="leancloud-recent-comment"></ul></div></div><div class="status"><div class="copyright">&copy; 2023 – <span itemprop="copyrightYear">2024</span> <span class="with-love"><i class="ic i-sakura rotate"></i> </span><span class="author" itemprop="copyrightHolder">D @ D & PersonalBlog</span></div><div class="count"><span class="post-meta-item-icon"><i class="ic i-chart-area"></i> </span><span title="站点总字数">3.5m 字</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="ic i-coffee"></i> </span><span title="站点阅读时长">52:54</span></div><div class="powered-by">基于 <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL={path:"computer-science/web/js/JS进阶/JS进阶-深入面向对象/",favicon:{show:"（●´3｀●）やれやれだぜ",hide:"(´Д｀)大変だ！"},search:{placeholder:"文章搜索",empty:"关于 「 ${query} 」，什么也没搜到",stats:"${time} ms 内找到 ${hits} 条结果"},valine:!0,fancybox:!0,copyright:'复制成功，转载请遵守 <i class="ic i-creative-commons"></i>BY-NC-SA 协议。',ignores:[function(e){return e.includes("#")},function(e){return new RegExp(LOCAL.path+"$").test(e)}]}</script><script src="https://cdn.polyfill.io/v2/polyfill.js"></script><script src="https://cdn.jsdelivr.net/gh/PigPigLetsGo/live2d-widget@latest/autoload.js"></script><script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script><script src="/js/app.js?v=0.2.5"></script></body></html>