<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#FFF"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="alternate" type="application/rss+xml" title="D の Java" href="https://pigpigletsgo.github.io/rss.xml"><link rel="alternate" type="application/atom+xml" title="D の Java" href="https://pigpigletsgo.github.io/atom.xml"><link rel="alternate" type="application/json" title="D の Java" href="https://pigpigletsgo.github.io/feed.json"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/css/app.css?v=0.2.5"><meta name="keywords" content="springboot,计算机学科,SSM,整合jar包"><link rel="canonical" href="https://pigpigletsgo.github.io/computer-science/java/spring/springboot/%E6%95%B4%E5%90%88jar%E5%8C%85/SpringBoot%E6%95%B4%E5%90%88%E7%AC%AC%E4%B8%89%E6%96%B9%E6%8A%80%E6%9C%AF/"><title>SpringBoot 整合第三方技术 [代码生成] - 整合 jar 包 - springboot - spring - java - 计算机学科 | D & PersonalBlog = D の Java = 别怕路长梦远</title><meta name="generator" content="Hexo 5.4.2"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">SpringBoot 整合第三方技术 [代码生成]</h1><div class="meta"><span class="item" title="创建时间：2024-02-11 14:07:54"><span class="icon"><i class="ic i-calendar"></i> </span><span class="text">发表于</span> <time itemprop="dateCreated datePublished" datetime="2024-02-11T14:07:54+08:00">2024-02-11</time> </span><span class="item" title="本文字数"><span class="icon"><i class="ic i-pen"></i> </span><span class="text">本文字数</span> <span>31k</span> <span class="text">字</span> </span><span class="item" title="阅读时长"><span class="icon"><i class="ic i-clock"></i> </span><span class="text">阅读时长</span> <span>28 分钟</span></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="切换导航栏"><span class="line"></span> <span class="line"></span> <span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">D & PersonalBlog</a></li></ul><ul class="right"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div id="imgs" class="pjax"><ul><li class="item" data-background-image="https://img.timelessq.com/images/2022/07/26/6edf0eae0c5c58dadd09198c6c3c9f6d.jpg"></li><li class="item" data-background-image="https://img.timelessq.com/images/2022/07/26/6a834199cae04e75c335d444704c2060.jpg"></li><li class="item" data-background-image="https://img.timelessq.com/images/2022/07/26/ecce74bba1d6312552d0156083825749.jpg"></li><li class="item" data-background-image="https://img.timelessq.com/images/2022/07/26/4c481240fd5e6e7b076ca8fe50da6e52.jpg"></li><li class="item" data-background-image="https://img.timelessq.com/images/2022/07/26/9544aaed0500309bfed0ddfc0321f933.jpg"></li><li class="item" data-background-image="https://img.timelessq.com/images/2022/07/26/666b3077b407f3c0ce9c10c00b861abe.jpg"></li></ul></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"/></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"/><use xlink:href="#gentle-wave" x="48" y="3"/><use xlink:href="#gentle-wave" x="48" y="5"/><use xlink:href="#gentle-wave" x="48" y="7"/></g></svg></div><main><div class="inner"><div id="main" class="pjax"><div class="article wrap"><div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i> <span><a href="/">首页</a></span><i class="ic i-angle-right"></i> <span itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/computer-science/" itemprop="item" rel="index" title="分类于 计算机学科"><span itemprop="name">计算机学科</span></a><meta itemprop="position" content="1"></span><i class="ic i-angle-right"></i> <span itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/computer-science/java/" itemprop="item" rel="index" title="分类于 java"><span itemprop="name">java</span></a><meta itemprop="position" content="2"></span><i class="ic i-angle-right"></i> <span itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/computer-science/java/spring/" itemprop="item" rel="index" title="分类于 spring"><span itemprop="name">spring</span></a><meta itemprop="position" content="3"></span><i class="ic i-angle-right"></i> <span itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/computer-science/java/spring/springboot/" itemprop="item" rel="index" title="分类于 springboot"><span itemprop="name">springboot</span></a><meta itemprop="position" content="4"></span><i class="ic i-angle-right"></i> <span class="current" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/computer-science/java/spring/springboot/%E6%95%B4%E5%90%88jar%E5%8C%85/" itemprop="item" rel="index" title="分类于 整合 jar 包"><span itemprop="name">整合 jar 包</span></a><meta itemprop="position" content="5"></span></div><article itemscope itemtype="http://schema.org/Article" class="post block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://pigpigletsgo.github.io/computer-science/java/spring/springboot/%E6%95%B4%E5%90%88jar%E5%8C%85/SpringBoot%E6%95%B4%E5%90%88%E7%AC%AC%E4%B8%89%E6%96%B9%E6%8A%80%E6%9C%AF/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="D"><meta itemprop="description" content="别怕路长梦远, 欢迎来我的博客空间"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="D の Java"></span><div class="body md" itemprop="articleBody"><h1 id="整合junit"><a class="anchor" href="#整合junit">#</a> 整合 Junit</h1><p>SpringBoot 中的启动类，这个类起到了配置类的作用这个类在什么位置，它就会把它所在的包以及子包全部扫描一遍，所以说 service 业务层的 bean 才会被加载成配置 bean</p><ul><li>启动类</li></ul><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>dkx<span class="token punctuation">.</span>springboot</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span></span><span class="token class-name">SpringBootApplication</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span></span><span class="token class-name">SpringApplication</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="6"></td><td><pre> * Hello world!</pre></td></tr><tr><td data-num="7"></td><td><pre> *</pre></td></tr><tr><td data-num="8"></td><td><pre> */</pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token annotation punctuation">@SpringBootApplication</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args <span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">App</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><ul><li>service</li></ul><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token annotation punctuation">@SuppressWarnings</span><span class="token punctuation">(</span><span class="token string">"all"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">BookService</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>impl<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token annotation punctuation">@SuppressWarnings</span><span class="token punctuation">(</span><span class="token string">"all"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token annotation punctuation">@Service</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BookServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">BookService</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token annotation punctuation">@Override</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"BookService save running..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>目录结构</p><p><img data-src="https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202310040853095.png" alt="image_2023-03-10-17-00-09"></p><h2 id="springboottest"><a class="anchor" href="#springboottest">#</a> @SpringBootTest</h2><ul><li><p>类型：测试类注解</p></li><li><p>位置：测试类定义上方</p></li><li><p>作用：设置 JUnit 加载的 SpringBoot 启动类</p></li><li><p><strong>相关属性</strong>:</p><ul><li>classes: 设置 SpringBoot 启动类</li></ul></li></ul><p><strong>注意事项:</strong> 如果测试类在 SpringBoot 启动类的包或子包中，可以省略启动类的设置，也就是省略 classes 的设定</p><p><img data-src="https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202310040853922.png" alt="image_2023-03-10-17-16-04"></p><ul><li>Test</li></ul><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token annotation punctuation">@SpringBootTest</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringTest</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token annotation punctuation">@Autowired</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">BookService</span> bookService<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token annotation punctuation">@Test</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        bookService<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><ul><li><p>测试类会默认加载启动类，初始化 Spring 环境</p></li><li><p>如果测试类所在的包位置与启动类的不符合那么就找不到启动类了</p></li></ul><p><img data-src="https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202310040853139.png" alt="image_2023-03-10-17-04-01"></p><p>Run console Result</p><p><img data-src="https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202310040853150.png" alt="image_2023-03-10-17-04-44"></p><ul><li>报错原因测试：无法找到启动类</li></ul><h2 id="指定启动类参数"><a class="anchor" href="#指定启动类参数">#</a> 指定启动类参数</h2><ul><li><p>@SpringBootTest(classes = Class.class)</p></li><li><p>如果测试类与启动类不是在相同的目录下但是也想用怎么办？</p></li><li><p>解决方式：使用 clasees 参数来指定启动类</p></li></ul><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token annotation punctuation">@SpringBootTest</span><span class="token punctuation">(</span>classes <span class="token operator">=</span> <span class="token class-name">App</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringTest</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token annotation punctuation">@Autowired</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">BookService</span> bookService<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token annotation punctuation">@Test</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        bookService<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token class-name">Run</span> console <span class="token class-name">Result</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span></pre></td></tr><tr><td data-num="11"></td><td><pre>  <span class="token punctuation">.</span>   ____          _            __ _ _</pre></td></tr><tr><td data-num="12"></td><td><pre> <span class="token operator">/</span>\\ <span class="token operator">/</span> ___'_ __ _ <span class="token function">_</span><span class="token punctuation">(</span>_<span class="token punctuation">)</span>_ __  __ _ \ \ \ \</pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token punctuation">(</span> <span class="token punctuation">(</span> <span class="token punctuation">)</span>\___ <span class="token operator">|</span> <span class="token char">'_ | '</span>_<span class="token operator">|</span> <span class="token operator">|</span> '_ \<span class="token operator">/</span> _` <span class="token operator">|</span> \ \ \ \</pre></td></tr><tr><td data-num="14"></td><td><pre> \\<span class="token operator">/</span>  ___<span class="token punctuation">)</span><span class="token operator">|</span> <span class="token operator">|</span>_<span class="token punctuation">)</span><span class="token operator">|</span> <span class="token operator">|</span> <span class="token operator">|</span> <span class="token operator">|</span> <span class="token operator">|</span> <span class="token operator">||</span> <span class="token punctuation">(</span>_<span class="token operator">|</span> <span class="token operator">|</span>  <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span></pre></td></tr><tr><td data-num="15"></td><td><pre>  '  <span class="token operator">|</span>____<span class="token operator">|</span> <span class="token punctuation">.</span>__<span class="token operator">|</span>_<span class="token operator">|</span> <span class="token operator">|</span>_<span class="token operator">|</span>_<span class="token operator">|</span> <span class="token operator">|</span>_\__<span class="token punctuation">,</span> <span class="token operator">|</span> <span class="token operator">/</span> <span class="token operator">/</span> <span class="token operator">/</span> <span class="token operator">/</span></pre></td></tr><tr><td data-num="16"></td><td><pre> <span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span><span class="token operator">|</span>_<span class="token operator">|=</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span><span class="token operator">|</span>___<span class="token operator">/=</span><span class="token operator">/</span>_<span class="token operator">/</span>_<span class="token operator">/</span>_<span class="token operator">/</span></pre></td></tr><tr><td data-num="17"></td><td><pre> <span class="token operator">::</span> <span class="token class-name">Spring</span> <span class="token class-name">Boot</span> <span class="token operator">::</span>                <span class="token punctuation">(</span>v2<span class="token punctuation">.</span><span class="token number">7.9</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="18"></td><td><pre></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token number">2023</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">17</span><span class="token operator">:</span><span class="token number">06</span><span class="token operator">:</span><span class="token number">56.257</span>  <span class="token constant">INFO</span> <span class="token number">11444</span> <span class="token operator">--</span><span class="token operator">-</span> <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>dkx<span class="token punctuation">.</span>springboot1<span class="token punctuation">.</span></span>SpringTest</span>           <span class="token operator">:</span> <span class="token class-name">Starting</span> <span class="token class-name">SpringTest</span> using <span class="token class-name">Java</span> <span class="token number">11.0</span><span class="token number">.16</span><span class="token number">.1</span> on <span class="token class-name">Administrantor</span><span class="token operator">-</span><span class="token class-name">Dkx</span> <span class="token keyword">with</span> <span class="token class-name">PID</span> <span class="token number">11444</span> <span class="token punctuation">(</span>started by <span class="token class-name">Administrator</span> in <span class="token class-name">E</span><span class="token operator">:</span>\apache<span class="token operator">-</span>maven<span class="token operator">-</span><span class="token number">3.6</span><span class="token number">.3</span>\maven<span class="token operator">-</span>work<span class="token operator">-</span>space\space<span class="token operator">-</span>idea01\maven<span class="token operator">-</span>springboot<span class="token operator">-</span>demo16<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token number">2023</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">17</span><span class="token operator">:</span><span class="token number">06</span><span class="token operator">:</span><span class="token number">56.261</span>  <span class="token constant">INFO</span> <span class="token number">11444</span> <span class="token operator">--</span><span class="token operator">-</span> <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>dkx<span class="token punctuation">.</span>springboot1<span class="token punctuation">.</span></span>SpringTest</span>           <span class="token operator">:</span> <span class="token class-name">No</span> active profile set<span class="token punctuation">,</span> falling back <span class="token keyword">to</span> <span class="token number">1</span> <span class="token keyword">default</span> profile<span class="token operator">:</span> <span class="token string">"default"</span></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token number">2023</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">17</span><span class="token operator">:</span><span class="token number">06</span><span class="token operator">:</span><span class="token number">58.531</span>  <span class="token constant">INFO</span> <span class="token number">11444</span> <span class="token operator">--</span><span class="token operator">-</span> <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>dkx<span class="token punctuation">.</span>springboot1<span class="token punctuation">.</span></span>SpringTest</span>           <span class="token operator">:</span> <span class="token class-name">Started</span> <span class="token class-name">SpringTest</span> in <span class="token number">3.637</span> seconds <span class="token punctuation">(</span><span class="token constant">JVM</span> running <span class="token keyword">for</span> <span class="token number">7.217</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token class-name">BookService</span> save running<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></pre></td></tr></table></figure><h1 id="springboot整合ssm"><a class="anchor" href="#springboot整合ssm">#</a> SpringBoot 整合 SSM</h1><ul><li><p>SpringBoot 整合 Spring (不存在)</p></li><li><p>SpringBoot 整合 SpringMVC (不存在)</p></li></ul><h2 id="springboot整合mybatis主要"><a class="anchor" href="#springboot整合mybatis主要">#</a> SpringBoot 整合 MyBatis (主要)</h2><ul><li><p>SpringConfig</p><ul><li>导入 JdbcConfig</li><li>导入 MyBatisConfig</li></ul></li><li><p>JDBCConfig</p><ul><li>定义数据源 (加载 properties 配置项:driver,url,username,pssword)</li></ul></li><li><p>MyBatisConfig</p><ul><li>定义 SqlSessionFactoryBean</li><li>定义映射配置</li></ul></li></ul><p><strong>以上的工作都不用干了</strong></p><h3 id="创建步骤"><a class="anchor" href="#创建步骤">#</a> 创建步骤</h3><ul><li>pom.xml 文件中导入 myabtis 整合 springboot 的起步依赖</li></ul><figure class="highlight xml"><figcaption data-lang="XML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.mybatis.spring.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artfactId</span><span class="token punctuation">></span></span>mybatis-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>2.2.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><ul><li>MyBatis 操作数据库所以需要导入 mysql-connector 和 druid 的坐标依赖</li></ul><h2 id="mapper"><a class="anchor" href="#mapper">#</a> @Mapper</h2><ul><li><p>作用: <strong>在接口类上添加了 @Mapper, 在编译之后会生成响应的接口实现类</strong></p></li><li><p>添加位置：接口类上面</p></li></ul><h2 id="mapperscan"><a class="anchor" href="#mapperscan">#</a> @MapperScan</h2><ul><li><p>作用: <strong>指定要变成实现类的接口所在的包，包下面的所有接口在编译之后都会生成相对应的实现类</strong></p></li><li><p>添加位置：在 SpringBoot 启动类上面添加</p></li></ul><p><strong>注意事项:</strong></p><p>SpringBoot 不建议使用 XML 文件配置，MyBatis 则有点犯难了，官方推荐使用 mybatis-boot-starter 与 SpringBoot 整合</p><p>MyBatis 官方建议：直接在 Mapper 类中采用注解的形式操作数据库，通过 @MapperScan 扫描指定的映射器存放路径，最终不需要加任何注解，也不需要对应的 XML 文件类配置 sql 语句</p><ol><li>创建新模块，选择 Spring 初始化，并配置模块相关基础信息</li></ol><p><img data-src="https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202310040853277.png" alt="image_2023-03-10-21-23-08"></p><ol start="2"><li>选择当前模块需要使用的技术集 (MyBatis,MySQL)</li></ol><p><img data-src="https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202310040853042.png" alt="image_2023-03-10-21-25-05"></p><ol start="3"><li>设置数据源参数</li></ol><p><img data-src="https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202310040853018.png" alt="image_2023-03-10-21-29-22"></p><p>配置数据库连接池</p><figure class="highlight xml"><figcaption data-lang="XML"></figcaption><table><tr><td data-num="1"></td><td><pre>spring:</pre></td></tr><tr><td data-num="2"></td><td><pre>  datasource:</pre></td></tr><tr><td data-num="3"></td><td><pre>    type: com.alibaba.druid.pool.DruidDataSource</pre></td></tr><tr><td data-num="4"></td><td><pre>    driver-class-name: com.mysql.cj.jdbc.Driver</pre></td></tr><tr><td data-num="5"></td><td><pre>    url: jdbc:mysql://localhost:3306/demo2?characterEncoding=utf-8&amp;serverTimezone=UTC</pre></td></tr><tr><td data-num="6"></td><td><pre>    username: root</pre></td></tr><tr><td data-num="7"></td><td><pre>    password: dkx</pre></td></tr></table></figure><p>配置读取 Mapper.xml 文件</p><figure class="highlight xml"><figcaption data-lang="XML"></figcaption><table><tr><td data-num="1"></td><td><pre>mybatis:</pre></td></tr><tr><td data-num="2"></td><td><pre>  mapper-locations: classpath:mapper/*.xml</pre></td></tr></table></figure><p><strong>注意事项:</strong></p><p>SpringBoot 版本低于 2.4.3 (不含),MySQL 驱动版本大于 8.0 时，需要在 url 连接串配置时区</p><p><code>jdbc:mysql://localhost:3306/ssm_db?characterEncoding=utf-8&amp;serverTimezone=UTC</code></p><p>或在 MySQL 数据库端配置时区解决此问题</p><ol start="4"><li>定义数据层接口与映射配置</li></ol><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token annotation punctuation">@SuppressWarnings</span><span class="token punctuation">(</span><span class="token string">"all"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token annotation punctuation">@Mapper</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">BookMapper</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">"select * from book where id = #&#123;id&#125;"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token class-name">Book</span> <span class="token function">getById</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><ol start="5"><li>测试类中注入 dao 接口，测试功能</li></ol><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token annotation punctuation">@SpringBootTest</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AppTest</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token annotation punctuation">@Autowired</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">BookMapper</span> bookMapper<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token annotation punctuation">@Test</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        <span class="token class-name">Book</span> book <span class="token operator">=</span> bookMapper<span class="token punctuation">.</span><span class="token function">getById</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>book<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token class-name">Run</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span></pre></td></tr><tr><td data-num="12"></td><td><pre>  <span class="token punctuation">.</span>   ____          _            __ _ _</pre></td></tr><tr><td data-num="13"></td><td><pre> <span class="token operator">/</span>\\ <span class="token operator">/</span> ___'_ __ _ <span class="token function">_</span><span class="token punctuation">(</span>_<span class="token punctuation">)</span>_ __  __ _ \ \ \ \</pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token punctuation">(</span> <span class="token punctuation">(</span> <span class="token punctuation">)</span>\___ <span class="token operator">|</span> <span class="token char">'_ | '</span>_<span class="token operator">|</span> <span class="token operator">|</span> '_ \<span class="token operator">/</span> _` <span class="token operator">|</span> \ \ \ \</pre></td></tr><tr><td data-num="15"></td><td><pre> \\<span class="token operator">/</span>  ___<span class="token punctuation">)</span><span class="token operator">|</span> <span class="token operator">|</span>_<span class="token punctuation">)</span><span class="token operator">|</span> <span class="token operator">|</span> <span class="token operator">|</span> <span class="token operator">|</span> <span class="token operator">|</span> <span class="token operator">||</span> <span class="token punctuation">(</span>_<span class="token operator">|</span> <span class="token operator">|</span>  <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span></pre></td></tr><tr><td data-num="16"></td><td><pre>  '  <span class="token operator">|</span>____<span class="token operator">|</span> <span class="token punctuation">.</span>__<span class="token operator">|</span>_<span class="token operator">|</span> <span class="token operator">|</span>_<span class="token operator">|</span>_<span class="token operator">|</span> <span class="token operator">|</span>_\__<span class="token punctuation">,</span> <span class="token operator">|</span> <span class="token operator">/</span> <span class="token operator">/</span> <span class="token operator">/</span> <span class="token operator">/</span></pre></td></tr><tr><td data-num="17"></td><td><pre> <span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span><span class="token operator">|</span>_<span class="token operator">|=</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span><span class="token operator">|</span>___<span class="token operator">/=</span><span class="token operator">/</span>_<span class="token operator">/</span>_<span class="token operator">/</span>_<span class="token operator">/</span></pre></td></tr><tr><td data-num="18"></td><td><pre> <span class="token operator">::</span> <span class="token class-name">Spring</span> <span class="token class-name">Boot</span> <span class="token operator">::</span>                <span class="token punctuation">(</span>v2<span class="token punctuation">.</span><span class="token number">7.9</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="19"></td><td><pre></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token number">2023</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">21</span><span class="token operator">:</span><span class="token number">32</span><span class="token operator">:</span><span class="token number">16.874</span>  <span class="token constant">INFO</span> <span class="token number">13108</span> <span class="token operator">--</span><span class="token operator">-</span> <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>dkx<span class="token punctuation">.</span>springboot<span class="token punctuation">.</span>test<span class="token punctuation">.</span></span>AppTest</span>          <span class="token operator">:</span> <span class="token class-name">Starting</span> <span class="token class-name">AppTest</span> using <span class="token class-name">Java</span> <span class="token number">11.0</span><span class="token number">.16</span><span class="token number">.1</span> on <span class="token class-name">Administrantor</span><span class="token operator">-</span><span class="token class-name">Dkx</span> <span class="token keyword">with</span> <span class="token class-name">PID</span> <span class="token number">13108</span> <span class="token punctuation">(</span>started by <span class="token class-name">Administrator</span> in <span class="token class-name">E</span><span class="token operator">:</span>\apache<span class="token operator">-</span>maven<span class="token operator">-</span><span class="token number">3.6</span><span class="token number">.3</span>\maven<span class="token operator">-</span>work<span class="token operator">-</span>space\space<span class="token operator">-</span>idea01\maven<span class="token operator">-</span>springboot<span class="token operator">-</span>demo17<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token number">2023</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">21</span><span class="token operator">:</span><span class="token number">32</span><span class="token operator">:</span><span class="token number">16.877</span>  <span class="token constant">INFO</span> <span class="token number">13108</span> <span class="token operator">--</span><span class="token operator">-</span> <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>dkx<span class="token punctuation">.</span>springboot<span class="token punctuation">.</span>test<span class="token punctuation">.</span></span>AppTest</span>          <span class="token operator">:</span> <span class="token class-name">No</span> active profile set<span class="token punctuation">,</span> falling back <span class="token keyword">to</span> <span class="token number">1</span> <span class="token keyword">default</span> profile<span class="token operator">:</span> <span class="token string">"default"</span></pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token number">2023</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">21</span><span class="token operator">:</span><span class="token number">32</span><span class="token operator">:</span><span class="token number">19.793</span>  <span class="token constant">INFO</span> <span class="token number">13108</span> <span class="token operator">--</span><span class="token operator">-</span> <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>dkx<span class="token punctuation">.</span>springboot<span class="token punctuation">.</span>test<span class="token punctuation">.</span></span>AppTest</span>          <span class="token operator">:</span> <span class="token class-name">Started</span> <span class="token class-name">AppTest</span> in <span class="token number">4.158</span> seconds <span class="token punctuation">(</span><span class="token constant">JVM</span> running <span class="token keyword">for</span> <span class="token number">7.305</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token number">2023</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">21</span><span class="token operator">:</span><span class="token number">32</span><span class="token operator">:</span><span class="token number">20.859</span>  <span class="token constant">INFO</span> <span class="token number">13108</span> <span class="token operator">--</span><span class="token operator">-</span> <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>zaxxer<span class="token punctuation">.</span>hikari<span class="token punctuation">.</span></span>HikariDataSource</span>       <span class="token operator">:</span> <span class="token class-name">HikariPool</span><span class="token operator">-</span><span class="token number">1</span> <span class="token operator">-</span> <span class="token class-name">Starting</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></pre></td></tr><tr><td data-num="24"></td><td><pre><span class="token number">2023</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">21</span><span class="token operator">:</span><span class="token number">32</span><span class="token operator">:</span><span class="token number">23.551</span>  <span class="token constant">INFO</span> <span class="token number">13108</span> <span class="token operator">--</span><span class="token operator">-</span> <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>zaxxer<span class="token punctuation">.</span>hikari<span class="token punctuation">.</span></span>HikariDataSource</span>       <span class="token operator">:</span> <span class="token class-name">HikariPool</span><span class="token operator">-</span><span class="token number">1</span> <span class="token operator">-</span> <span class="token class-name">Start</span> <span class="token class-name"><span class="token namespace">completed<span class="token punctuation">.</span></span></span></pre></td></tr><tr><td data-num="25"></td><td><pre>Book<span class="token punctuation">&#123;</span>id<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> type<span class="token operator">=</span><span class="token char">'计算机理论'</span><span class="token punctuation">,</span> name<span class="token operator">=</span>'<span class="token class-name">Spring</span>实战'<span class="token punctuation">,</span> description<span class="token operator">=</span>'<span class="token class-name">Spring</span>入门经典教程'<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="26"></td><td><pre><span class="token number">2023</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">21</span><span class="token operator">:</span><span class="token number">32</span><span class="token operator">:</span><span class="token number">23.771</span>  <span class="token constant">INFO</span> <span class="token number">13108</span> <span class="token operator">--</span><span class="token operator">-</span> <span class="token punctuation">[</span>ionShutdownHook<span class="token punctuation">]</span> <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>zaxxer<span class="token punctuation">.</span>hikari<span class="token punctuation">.</span></span>HikariDataSource</span>       <span class="token operator">:</span> <span class="token class-name">HikariPool</span><span class="token operator">-</span><span class="token number">1</span> <span class="token operator">-</span> <span class="token class-name">Shutdown</span> initiated<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></pre></td></tr><tr><td data-num="27"></td><td><pre><span class="token number">2023</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">21</span><span class="token operator">:</span><span class="token number">32</span><span class="token operator">:</span><span class="token number">23.817</span>  <span class="token constant">INFO</span> <span class="token number">13108</span> <span class="token operator">--</span><span class="token operator">-</span> <span class="token punctuation">[</span>ionShutdownHook<span class="token punctuation">]</span> <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>zaxxer<span class="token punctuation">.</span>hikari<span class="token punctuation">.</span></span>HikariDataSource</span>       <span class="token operator">:</span> <span class="token class-name">HikariPool</span><span class="token operator">-</span><span class="token number">1</span> <span class="token operator">-</span> <span class="token class-name">Shutdown</span> <span class="token class-name"><span class="token namespace">completed<span class="token punctuation">.</span></span></span></pre></td></tr><tr><td data-num="28"></td><td><pre></pre></td></tr><tr><td data-num="29"></td><td><pre>Process finished <span class="token keyword">with</span> <span class="token namespace">exit</span> code <span class="token number">0</span></pre></td></tr></table></figure><h2 id="基于springboot的ssm整合案例"><a class="anchor" href="#基于springboot的ssm整合案例">#</a> 基于 SpringBoot 的 SSM 整合案例</h2><ol><li>pom.xml</li></ol><ul><li>&lt;font style=&quot;color:red&quot;&gt; 配置起步依赖，必要的资源坐标 (druid)&lt;/font&gt;</li></ul><ol start="2"><li>application.yml</li></ol><ul><li>&lt;font style=&quot;color:red&quot;&gt; 设置数据源，端口等 &lt;/font&gt;</li></ul><ol start="3"><li>配置类</li></ol><ul><li>&lt;font style=&quot;color:red&quot;&gt; 全部删除 &lt;/font&gt;</li></ul><ol start="4"><li>dao</li></ol><ul><li>&lt;font style=&quot;color:red&quot;&gt; 设置 @Mapper&lt;/font&gt;</li></ul><ol start="5"><li><p>测试类</p></li><li><p>页面</p></li></ol><ul><li><p>&lt;font style=&quot;color:red&quot;&gt; 放置在 resources 目录下的 static 目录中 &lt;/font&gt;</p></li><li><p>&lt;font style=&quot;color:red&quot;&gt; 在 resources 目录中创建一个 index.html 页面来作为主页面直接访问地址即可跳转到我们想要访问的页面中 &lt;/font&gt;</p></li></ul><p><strong>目录结构</strong></p><p><img data-src="https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202310040853836.png" alt="image_2023-03-11-14-41-11"></p><p><a href="https://pigpigletsgo.github.io/computer-science/java/spring/springboot/%E6%95%B4%E5%90%88jar%E5%8C%85/11/">查看代码</a></p><ol><li>设置分页拦截器作为 Spring 管理的 Bean</li></ol><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token annotation punctuation">@SuppressWarnings</span><span class="token punctuation">(</span><span class="token string">"all"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">// 配置该类为 bean</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token annotation punctuation">@Configuration</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MpConfig</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token annotation punctuation">@Bean</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token keyword">public</span> <span class="token class-name">MybatisPlusInterceptor</span> <span class="token function">getMybatisPlusInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment">//        1. 定义 MP 拦截器</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token class-name">MybatisPlusInterceptor</span> mpinterceptor <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MybatisPlusInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token comment">//        2. 添加具体拦截器</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        mpinterceptor<span class="token punctuation">.</span><span class="token function">addInnerInterceptor</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">PaginationInnerInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token keyword">return</span> mpinterceptor<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><ol start="2"><li>执行分页查询</li></ol><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token annotation punctuation">@Test</span></pre></td></tr><tr><td data-num="2"></td><td><pre>	<span class="token keyword">void</span> <span class="token function">testGetByPage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>		<span class="token class-name">IPage</span> page <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Page</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>		userMapper<span class="token punctuation">.</span><span class="token function">selectPage</span><span class="token punctuation">(</span>page<span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"当前页数为: "</span><span class="token operator">+</span>page<span class="token punctuation">.</span><span class="token function">getCurrent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"一共多少页: "</span><span class="token operator">+</span>page<span class="token punctuation">.</span><span class="token function">getPages</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"每页展示的数据: "</span><span class="token operator">+</span>page<span class="token punctuation">.</span><span class="token function">getSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"一共多少条数据: "</span><span class="token operator">+</span>page<span class="token punctuation">.</span><span class="token function">getTotal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"数据: "</span><span class="token operator">+</span>page<span class="token punctuation">.</span><span class="token function">getRecords</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token constant">RUN</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span></pre></td></tr><tr><td data-num="12"></td><td><pre>  <span class="token punctuation">.</span>   ____          _            __ _ _</pre></td></tr><tr><td data-num="13"></td><td><pre> <span class="token operator">/</span>\\ <span class="token operator">/</span> ___'_ __ _ <span class="token function">_</span><span class="token punctuation">(</span>_<span class="token punctuation">)</span>_ __  __ _ \ \ \ \</pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token punctuation">(</span> <span class="token punctuation">(</span> <span class="token punctuation">)</span>\___ <span class="token operator">|</span> <span class="token char">'_ | '</span>_<span class="token operator">|</span> <span class="token operator">|</span> '_ \<span class="token operator">/</span> _` <span class="token operator">|</span> \ \ \ \</pre></td></tr><tr><td data-num="15"></td><td><pre> \\<span class="token operator">/</span>  ___<span class="token punctuation">)</span><span class="token operator">|</span> <span class="token operator">|</span>_<span class="token punctuation">)</span><span class="token operator">|</span> <span class="token operator">|</span> <span class="token operator">|</span> <span class="token operator">|</span> <span class="token operator">|</span> <span class="token operator">||</span> <span class="token punctuation">(</span>_<span class="token operator">|</span> <span class="token operator">|</span>  <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span></pre></td></tr><tr><td data-num="16"></td><td><pre>  '  <span class="token operator">|</span>____<span class="token operator">|</span> <span class="token punctuation">.</span>__<span class="token operator">|</span>_<span class="token operator">|</span> <span class="token operator">|</span>_<span class="token operator">|</span>_<span class="token operator">|</span> <span class="token operator">|</span>_\__<span class="token punctuation">,</span> <span class="token operator">|</span> <span class="token operator">/</span> <span class="token operator">/</span> <span class="token operator">/</span> <span class="token operator">/</span></pre></td></tr><tr><td data-num="17"></td><td><pre> <span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span><span class="token operator">|</span>_<span class="token operator">|=</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span><span class="token operator">|</span>___<span class="token operator">/=</span><span class="token operator">/</span>_<span class="token operator">/</span>_<span class="token operator">/</span>_<span class="token operator">/</span></pre></td></tr><tr><td data-num="18"></td><td><pre> <span class="token operator">::</span> <span class="token class-name">Spring</span> <span class="token class-name">Boot</span> <span class="token operator">::</span>                <span class="token punctuation">(</span>v2<span class="token punctuation">.</span><span class="token number">7.9</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="19"></td><td><pre></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token number">2023</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">11</span> <span class="token number">22</span><span class="token operator">:</span><span class="token number">22</span><span class="token operator">:</span><span class="token number">33.306</span>  <span class="token constant">INFO</span> <span class="token number">9448</span> <span class="token operator">--</span><span class="token operator">-</span> <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> <span class="token class-name"><span class="token namespace">c<span class="token punctuation">.</span>m<span class="token punctuation">.</span></span>MavenMybstisplusDemoApplicationTests</span> <span class="token operator">:</span> <span class="token class-name">Starting</span> <span class="token class-name">MavenMybstisplusDemoApplicationTests</span> using <span class="token class-name">Java</span> <span class="token number">11.0</span><span class="token number">.16</span><span class="token number">.1</span> on <span class="token class-name">Administrantor</span><span class="token operator">-</span><span class="token class-name">Dkx</span> <span class="token keyword">with</span> <span class="token class-name">PID</span> <span class="token number">9448</span> <span class="token punctuation">(</span>started by <span class="token class-name">Administrator</span> in <span class="token class-name">E</span><span class="token operator">:</span>\apache<span class="token operator">-</span>maven<span class="token operator">-</span><span class="token number">3.6</span><span class="token number">.3</span>\maven<span class="token operator">-</span>work<span class="token operator">-</span>space\space02\maven<span class="token operator">-</span>mybstisplus<span class="token operator">-</span>demo<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token number">2023</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">11</span> <span class="token number">22</span><span class="token operator">:</span><span class="token number">22</span><span class="token operator">:</span><span class="token number">33.316</span>  <span class="token constant">INFO</span> <span class="token number">9448</span> <span class="token operator">--</span><span class="token operator">-</span> <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> <span class="token class-name"><span class="token namespace">c<span class="token punctuation">.</span>m<span class="token punctuation">.</span></span>MavenMybstisplusDemoApplicationTests</span> <span class="token operator">:</span> <span class="token class-name">No</span> active profile set<span class="token punctuation">,</span> falling back <span class="token keyword">to</span> <span class="token number">1</span> <span class="token keyword">default</span> profile<span class="token operator">:</span> <span class="token string">"default"</span></pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token class-name">Logging</span> initialized using '<span class="token keyword">class</span> <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>logging<span class="token punctuation">.</span>stdout<span class="token punctuation">.</span></span>StdOutImpl</span>' <span class="token class-name"><span class="token namespace">adapter<span class="token punctuation">.</span></span></span></pre></td></tr><tr><td data-num="23"></td><td><pre>Registered plugin<span class="token operator">:</span> '<span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>extension<span class="token punctuation">.</span>plugins<span class="token punctuation">.</span></span>MybatisPlusInterceptor</span><span class="token annotation punctuation">@1a96d94c</span>'</pre></td></tr><tr><td data-num="24"></td><td><pre><span class="token class-name">Property</span> 'mapperLocations' was not specified<span class="token punctuation">.</span></pre></td></tr><tr><td data-num="25"></td><td><pre> _ _   <span class="token operator">|</span>_  _ _<span class="token operator">|</span>_<span class="token punctuation">.</span> ___ _ <span class="token operator">|</span>    _ </pre></td></tr><tr><td data-num="26"></td><td><pre><span class="token operator">|</span> <span class="token operator">|</span> <span class="token operator">|</span>\<span class="token operator">/</span><span class="token operator">|</span>_<span class="token punctuation">)</span><span class="token punctuation">(</span>_<span class="token operator">|</span> <span class="token operator">|</span> <span class="token operator">|</span>_\  <span class="token operator">|</span>_<span class="token punctuation">)</span><span class="token operator">||</span>_<span class="token operator">|</span>_\ </pre></td></tr><tr><td data-num="27"></td><td><pre>     <span class="token operator">/</span>               <span class="token operator">|</span>         </pre></td></tr><tr><td data-num="28"></td><td><pre>                        <span class="token number">3.4</span><span class="token number">.1</span> </pre></td></tr><tr><td data-num="29"></td><td><pre><span class="token number">2023</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">11</span> <span class="token number">22</span><span class="token operator">:</span><span class="token number">22</span><span class="token operator">:</span><span class="token number">43.693</span>  <span class="token constant">INFO</span> <span class="token number">9448</span> <span class="token operator">--</span><span class="token operator">-</span> <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> <span class="token class-name"><span class="token namespace">c<span class="token punctuation">.</span>m<span class="token punctuation">.</span></span>MavenMybstisplusDemoApplicationTests</span> <span class="token operator">:</span> <span class="token class-name">Started</span> <span class="token class-name">MavenMybstisplusDemoApplicationTests</span> in <span class="token number">12.737</span> seconds <span class="token punctuation">(</span><span class="token constant">JVM</span> running <span class="token keyword">for</span> <span class="token number">17.761</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="30"></td><td><pre><span class="token class-name">Creating</span> a <span class="token keyword">new</span> <span class="token class-name">SqlSession</span></pre></td></tr><tr><td data-num="31"></td><td><pre><span class="token class-name">SqlSession</span> <span class="token punctuation">[</span><span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>session<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span></span>DefaultSqlSession</span><span class="token annotation punctuation">@339f3a55</span><span class="token punctuation">]</span> was not registered <span class="token keyword">for</span> synchronization because synchronization is not active</pre></td></tr><tr><td data-num="32"></td><td><pre><span class="token number">2023</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">11</span> <span class="token number">22</span><span class="token operator">:</span><span class="token number">22</span><span class="token operator">:</span><span class="token number">45.905</span>  <span class="token constant">INFO</span> <span class="token number">9448</span> <span class="token operator">--</span><span class="token operator">-</span> <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>alibaba<span class="token punctuation">.</span>druid<span class="token punctuation">.</span>pool<span class="token punctuation">.</span></span>DruidDataSource</span>   <span class="token operator">:</span> <span class="token punctuation">&#123;</span>dataSource<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">&#125;</span> inited</pre></td></tr><tr><td data-num="33"></td><td><pre><span class="token constant">JDBC</span> <span class="token class-name">Connection</span> <span class="token punctuation">[</span><span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span>cj<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span></span>ConnectionImpl</span><span class="token annotation punctuation">@70c29356</span><span class="token punctuation">]</span> will not be managed by <span class="token class-name">Spring</span></pre></td></tr><tr><td data-num="34"></td><td><pre><span class="token operator">==</span><span class="token operator">></span>  <span class="token class-name">Preparing</span><span class="token operator">:</span> <span class="token class-name">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token class-name">FROM</span> plus</pre></td></tr><tr><td data-num="35"></td><td><pre><span class="token operator">==</span><span class="token operator">></span> <span class="token class-name">Parameters</span><span class="token operator">:</span> </pre></td></tr><tr><td data-num="36"></td><td><pre><span class="token operator">&lt;=</span><span class="token operator">=</span>    <span class="token class-name">Columns</span><span class="token operator">:</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="37"></td><td><pre><span class="token operator">&lt;=</span><span class="token operator">=</span>        <span class="token class-name">Row</span><span class="token operator">:</span> <span class="token number">5</span></pre></td></tr><tr><td data-num="38"></td><td><pre><span class="token operator">&lt;=</span><span class="token operator">=</span>      <span class="token class-name">Total</span><span class="token operator">:</span> <span class="token number">1</span></pre></td></tr><tr><td data-num="39"></td><td><pre><span class="token operator">==</span><span class="token operator">></span>  <span class="token class-name">Preparing</span><span class="token operator">:</span> <span class="token class-name">SELECT</span> id<span class="token punctuation">,</span>name<span class="token punctuation">,</span>password<span class="token punctuation">,</span>age<span class="token punctuation">,</span>tel <span class="token constant">FROM</span> plus <span class="token constant">LIMIT</span> <span class="token operator">?</span></pre></td></tr><tr><td data-num="40"></td><td><pre><span class="token operator">==</span><span class="token operator">></span> <span class="token class-name">Parameters</span><span class="token operator">:</span> <span class="token function">2</span><span class="token punctuation">(</span><span class="token class-name">Long</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="41"></td><td><pre><span class="token operator">&lt;=</span><span class="token operator">=</span>    <span class="token class-name">Columns</span><span class="token operator">:</span> id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> password<span class="token punctuation">,</span> age<span class="token punctuation">,</span> tel</pre></td></tr><tr><td data-num="42"></td><td><pre><span class="token operator">&lt;=</span><span class="token operator">=</span>        <span class="token class-name">Row</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token class-name">Tom888</span><span class="token punctuation">,</span> tom888<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">12987345</span></pre></td></tr><tr><td data-num="43"></td><td><pre><span class="token operator">&lt;=</span><span class="token operator">=</span>        <span class="token class-name">Row</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token class-name">Jerry</span><span class="token punctuation">,</span> jerry<span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">1237568324</span></pre></td></tr><tr><td data-num="44"></td><td><pre><span class="token operator">&lt;=</span><span class="token operator">=</span>      <span class="token class-name">Total</span><span class="token operator">:</span> <span class="token number">2</span></pre></td></tr><tr><td data-num="45"></td><td><pre><span class="token class-name">Closing</span> non transactional <span class="token class-name">SqlSession</span> <span class="token punctuation">[</span><span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>session<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span></span>DefaultSqlSession</span><span class="token annotation punctuation">@339f3a55</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="46"></td><td><pre>当前页数为<span class="token operator">:</span> <span class="token number">1</span></pre></td></tr><tr><td data-num="47"></td><td><pre>一共多少页<span class="token operator">:</span> <span class="token number">3</span></pre></td></tr><tr><td data-num="48"></td><td><pre>每页展示的数据<span class="token operator">:</span> <span class="token number">2</span></pre></td></tr><tr><td data-num="49"></td><td><pre>一共多少条数据<span class="token operator">:</span> <span class="token number">5</span></pre></td></tr><tr><td data-num="50"></td><td><pre>数据<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token class-name">Plus</span><span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token class-name">Tom888</span><span class="token punctuation">,</span> password<span class="token operator">=</span>tom888<span class="token punctuation">,</span> age<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">,</span> tel<span class="token operator">=</span><span class="token number">12987345</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">Plus</span><span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token class-name">Jerry</span><span class="token punctuation">,</span> password<span class="token operator">=</span>jerry<span class="token punctuation">,</span> age<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">,</span> tel<span class="token operator">=</span><span class="token number">1237568324</span><span class="token punctuation">)</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="51"></td><td><pre><span class="token number">2023</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">11</span> <span class="token number">22</span><span class="token operator">:</span><span class="token number">22</span><span class="token operator">:</span><span class="token number">49.400</span>  <span class="token constant">INFO</span> <span class="token number">9448</span> <span class="token operator">--</span><span class="token operator">-</span> <span class="token punctuation">[</span>ionShutdownHook<span class="token punctuation">]</span> <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>alibaba<span class="token punctuation">.</span>druid<span class="token punctuation">.</span>pool<span class="token punctuation">.</span></span>DruidDataSource</span>   <span class="token operator">:</span> <span class="token punctuation">&#123;</span>dataSource<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">&#125;</span> closing <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></pre></td></tr><tr><td data-num="52"></td><td><pre><span class="token number">2023</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">11</span> <span class="token number">22</span><span class="token operator">:</span><span class="token number">22</span><span class="token operator">:</span><span class="token number">49.418</span>  <span class="token constant">INFO</span> <span class="token number">9448</span> <span class="token operator">--</span><span class="token operator">-</span> <span class="token punctuation">[</span>ionShutdownHook<span class="token punctuation">]</span> <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>alibaba<span class="token punctuation">.</span>druid<span class="token punctuation">.</span>pool<span class="token punctuation">.</span></span>DruidDataSource</span>   <span class="token operator">:</span> <span class="token punctuation">&#123;</span>dataSource<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">&#125;</span> closed</pre></td></tr><tr><td data-num="53"></td><td><pre></pre></td></tr><tr><td data-num="54"></td><td><pre><span class="token class-name">Process</span> finished <span class="token keyword">with</span> <span class="token namespace">exit</span> code <span class="token number">0</span></pre></td></tr></table></figure><p><img data-src="https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202310040854039.png" alt="image_2023-03-12-10-12-51"></p><h2 id="开启日志"><a class="anchor" href="#开启日志">#</a> 开启日志</h2><figure class="highlight yml"><figcaption data-lang="YAML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token key atrule">spring</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token key atrule">datasource</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token key atrule">type</span><span class="token punctuation">:</span> com.alibaba.druid.pool.DruidDataSource</pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token key atrule">driver-class-name</span><span class="token punctuation">:</span> com.mysql.cj.jdbc.Driver</pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token key atrule">url</span><span class="token punctuation">:</span> jdbc<span class="token punctuation">:</span>mysql<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span>3306/mybatisplus<span class="token punctuation">?</span>characterEncoding=utf<span class="token punctuation">-</span>8<span class="token important">&amp;serverTimezone=UTC</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token key atrule">username</span><span class="token punctuation">:</span> root</pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token key atrule">password</span><span class="token punctuation">:</span> dkx</pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token comment">#开启 MP 的日志 (输出到控制台)</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token key atrule">mybatis-plus</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="10"></td><td><pre>  <span class="token key atrule">configuration</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token key atrule">log-impl</span><span class="token punctuation">:</span> org.apache.ibatis.logging.stdout.StdOutImpl</pre></td></tr></table></figure><h2 id="dql编程控制"><a class="anchor" href="#dql编程控制">#</a> DQL 编程控制</h2><h3 id="条件查询-设置查询条件"><a class="anchor" href="#条件查询-设置查询条件">#</a> 条件查询 -- 设置查询条件</h3><ul><li>MyBatisPlus 将书写复杂的 SQL 查询条件进行了封装，使用编程的形式完成查询条件的组合</li></ul><p><img data-src="https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202310040854190.png" alt="image_2023-03-12-10-16-18"></p><ul><li><strong>格式一</strong>：常规格式</li></ul><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">//        第一种方式：按条件查询，特殊情况才使用</span></pre></td></tr><tr><td data-num="2"></td><td><pre>        <span class="token class-name">QueryWrapper</span> q <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">QueryWrapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">//        lt: 小于</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        q<span class="token punctuation">.</span><span class="token function">lt</span><span class="token punctuation">(</span><span class="token string">"age"</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Plus</span><span class="token punctuation">></span></span> list <span class="token operator">=</span> plusMapper<span class="token punctuation">.</span><span class="token function">selectList</span><span class="token punctuation">(</span>q<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">//        for(Plus i:list)&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment">//            System.out.println(i);</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token comment">//        &#125;</span></pre></td></tr></table></figure><ul><li><strong>格式二</strong>：链式编程格式</li></ul><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token class-name">QueryWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Plus</span><span class="token punctuation">></span></span> qo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">QueryWrapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>        qo<span class="token punctuation">.</span><span class="token function">lt</span><span class="token punctuation">(</span><span class="token string">"age"</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">gt</span><span class="token punctuation">(</span><span class="token string">"age"</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Plus</span><span class="token punctuation">></span></span> listo <span class="token operator">=</span> plusMapper<span class="token punctuation">.</span><span class="token function">selectList</span><span class="token punctuation">(</span>qo<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment">//        for(Plus i:listo)&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">//            System.out.println(i);</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">//        &#125;</span></pre></td></tr></table></figure><ul><li><strong>格式三</strong>: lambda 格式 (推荐)</li></ul><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">//        第二种方式:lambda 格式按条件查询</span></pre></td></tr><tr><td data-num="2"></td><td><pre>        <span class="token class-name">QueryWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Plus</span><span class="token punctuation">></span></span> q1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">QueryWrapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        q1<span class="token punctuation">.</span><span class="token function">lambda</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">lt</span><span class="token punctuation">(</span><span class="token class-name">Plus</span><span class="token operator">::</span><span class="token function">getAge</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">gt</span><span class="token punctuation">(</span><span class="token class-name">Plus</span><span class="token operator">::</span><span class="token function">getAge</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Plus</span><span class="token punctuation">></span></span> list1 <span class="token operator">=</span> plusMapper<span class="token punctuation">.</span><span class="token function">selectList</span><span class="token punctuation">(</span>q1<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">//        for(Plus i:list1)&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">//            System.out.println(i);</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment">//        &#125;</span></pre></td></tr></table></figure><ul><li><strong>格式四</strong>: lambda 格式 (推荐)</li></ul><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">//        查询多个条件</span></pre></td></tr><tr><td data-num="2"></td><td><pre>        <span class="token class-name">LambdaQueryWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Plus</span><span class="token punctuation">></span></span> q3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LambdaQueryWrapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">//        q3.lt(Plus::getAge,10);</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment">//        q3.gt(Plus::getAge,30);</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">//        或者使用链式编程</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">//        10 到 30 之间</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment">//        q3.lt(Plus::getAge,10).gt(Plus::getAge,30);</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token comment">//        小于 10 或大于 30</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        q3<span class="token punctuation">.</span><span class="token function">lt</span><span class="token punctuation">(</span><span class="token class-name">Plus</span><span class="token operator">::</span><span class="token function">getAge</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">or</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">gt</span><span class="token punctuation">(</span><span class="token class-name">Plus</span><span class="token operator">::</span><span class="token function">getAge</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Plus</span><span class="token punctuation">></span></span> list3 <span class="token operator">=</span> plusMapper<span class="token punctuation">.</span><span class="token function">selectList</span><span class="token punctuation">(</span>q3<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Plus</span> i<span class="token operator">:</span>list3<span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr></table></figure><ul><li>并且 (and)</li></ul><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token class-name">LambdaQueryWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Plus</span><span class="token punctuation">></span></span> l <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LambdaQueryWrapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">//        查询 10 到 30 之间的数据</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        l<span class="token punctuation">.</span><span class="token function">lt</span><span class="token punctuation">(</span><span class="token class-name">Plus</span><span class="token operator">::</span><span class="token function">getAge</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">gt</span><span class="token punctuation">(</span><span class="token class-name">Plus</span><span class="token operator">::</span><span class="token function">getAge</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Plus</span><span class="token punctuation">></span></span> listl <span class="token operator">=</span> plusMapper<span class="token punctuation">.</span><span class="token function">selectList</span><span class="token punctuation">(</span>l<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Plus</span> i<span class="token operator">:</span>listl<span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr></table></figure><ul><li>或者 (or)</li></ul><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token class-name">LambdaQueryWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Plus</span><span class="token punctuation">></span></span> l <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LambdaQueryWrapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">//        查询小与 30 或者大于 10 的信息</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        l<span class="token punctuation">.</span><span class="token function">lt</span><span class="token punctuation">(</span><span class="token class-name">Plus</span><span class="token operator">::</span><span class="token function">getAge</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">or</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">gt</span><span class="token punctuation">(</span><span class="token class-name">Plus</span><span class="token operator">::</span><span class="token function">getAge</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Plus</span><span class="token punctuation">></span></span> listl <span class="token operator">=</span> plusMapper<span class="token punctuation">.</span><span class="token function">selectList</span><span class="token punctuation">(</span>l<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Plus</span> i<span class="token operator">:</span>listl<span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="条件查询-null值处理"><a class="anchor" href="#条件查询-null值处理">#</a> 条件查询 --null 值处理</h3><p><img data-src="https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202310040854501.png" alt="image_2023-03-12-12-39-26"></p><ul><li><p>通常情况下我们只会设置一部分不会每一个都设置</p></li><li><p>if 语句控制条件追加</p></li></ul><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token class-name">LambdaQueryWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Plus</span><span class="token punctuation">></span></span> q <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LambdaQueryWrapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">//        通过 if 判断 getAge1 是否为 null 如果为 null 则不执行 q.gt (Plus::getAge,query.getAge1 ());</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> query<span class="token punctuation">.</span><span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>            q<span class="token punctuation">.</span><span class="token function">lt</span><span class="token punctuation">(</span><span class="token class-name">Plus</span><span class="token operator">::</span><span class="token function">getAge</span><span class="token punctuation">,</span>query<span class="token punctuation">.</span><span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">//        通过 if 判断 getAge1 是否为 null 如果为 null 则不执行 q.gt (Plus::getAge,query.getAge1 ());</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> query<span class="token punctuation">.</span><span class="token function">getAge1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="8"></td><td><pre>            q<span class="token punctuation">.</span><span class="token function">gt</span><span class="token punctuation">(</span><span class="token class-name">Plus</span><span class="token operator">::</span><span class="token function">getAge</span><span class="token punctuation">,</span>query<span class="token punctuation">.</span><span class="token function">getAge1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Plus</span><span class="token punctuation">></span></span> list <span class="token operator">=</span> plusMapper<span class="token punctuation">.</span><span class="token function">selectList</span><span class="token punctuation">(</span>q<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Plus</span> i<span class="token operator">:</span>list<span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr></table></figure><ul><li>条件参数控制 (链式编程)</li></ul><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token class-name">LambdaQueryWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Plus</span><span class="token punctuation">></span></span> q <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LambdaQueryWrapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">//        先判断第一个参数是否为 true, 如果为 true 连接当前条件，false 则不连</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        q<span class="token punctuation">.</span><span class="token function">lt</span><span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> query<span class="token punctuation">.</span><span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token class-name">Plus</span><span class="token operator">::</span><span class="token function">getAge</span><span class="token punctuation">,</span>query<span class="token punctuation">.</span><span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment">//        先判断第一个参数是否为 true, 如果为 true 连接当前条件，false 则不连</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token punctuation">.</span><span class="token function">gt</span><span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> query<span class="token punctuation">.</span><span class="token function">getAge1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token class-name">Plus</span><span class="token operator">::</span><span class="token function">getAge</span><span class="token punctuation">,</span>query<span class="token punctuation">.</span><span class="token function">getAge1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Plus</span><span class="token punctuation">></span></span> list <span class="token operator">=</span> plusMapper<span class="token punctuation">.</span><span class="token function">selectList</span><span class="token punctuation">(</span>q<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Plus</span> i<span class="token operator">:</span>list<span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="查询投影"><a class="anchor" href="#查询投影">#</a> 查询投影</h3><ul><li>查询结果包含模型类中部分属性</li></ul><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">//        查询投影</span></pre></td></tr><tr><td data-num="2"></td><td><pre>        <span class="token class-name">LambdaQueryWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Plus</span><span class="token punctuation">></span></span> q <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LambdaQueryWrapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        q<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token class-name">Plus</span><span class="token operator">::</span><span class="token function">getId</span><span class="token punctuation">,</span><span class="token class-name">Plus</span><span class="token operator">::</span><span class="token function">getName</span><span class="token punctuation">,</span><span class="token class-name">Plus</span><span class="token operator">::</span><span class="token function">getAge</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Plus</span><span class="token punctuation">></span></span> list <span class="token operator">=</span> plusMapper<span class="token punctuation">.</span><span class="token function">selectList</span><span class="token punctuation">(</span>q<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">//        for(Plus i:list)&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">//            System.out.println(i);</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment">//        &#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token class-name">QueryWrapper</span> q1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">QueryWrapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        q1<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">,</span><span class="token string">"name"</span><span class="token punctuation">,</span><span class="token string">"age"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Plus</span><span class="token punctuation">></span></span> list1 <span class="token operator">=</span> plusMapper<span class="token punctuation">.</span><span class="token function">selectList</span><span class="token punctuation">(</span>q1<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token comment">//        for(Plus i:list1)&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token comment">//            System.out.println(i);</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token comment">//        &#125;</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token constant">RUN</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token class-name">Plus</span><span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> name<span class="token operator">=</span>张三<span class="token punctuation">,</span> password<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">,</span> age<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">,</span> tel<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token class-name">Plus</span><span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span> name<span class="token operator">=</span>张三<span class="token punctuation">,</span> password<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">,</span> age<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">,</span> tel<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token class-name">Plus</span><span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token class-name">Jock</span><span class="token punctuation">,</span> password<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">,</span> age<span class="token operator">=</span><span class="token number">41</span><span class="token punctuation">,</span> tel<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token class-name">Plus</span><span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">,</span> name<span class="token operator">=</span>小日子<span class="token operator">-</span>刘桑<span class="token punctuation">,</span> password<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">,</span> age<span class="token operator">=</span><span class="token number">15</span><span class="token punctuation">,</span> tel<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token class-name">Plus</span><span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token number">1634728724109651970</span><span class="token punctuation">,</span> name<span class="token operator">=</span>小六<span class="token punctuation">,</span> password<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">,</span> age<span class="token operator">=</span><span class="token number">321</span><span class="token punctuation">,</span> tel<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="20"></td><td><pre></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token class-name">Process</span> finished <span class="token keyword">with</span> <span class="token namespace">exit</span> code <span class="token number">0</span></pre></td></tr></table></figure><ul><li>查询结果包含模型类中 未定义的属性</li></ul><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token class-name">QueryWrapper</span> q2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">QueryWrapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">//        相当于 select ... from ? ...</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        q2<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">"count(*) as size"</span><span class="token punctuation">,</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment">//        分组</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        q2<span class="token punctuation">.</span><span class="token function">groupBy</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">></span><span class="token punctuation">></span></span> map <span class="token operator">=</span> plusMapper<span class="token punctuation">.</span><span class="token function">selectMaps</span><span class="token punctuation">(</span>q2<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">></span></span> i<span class="token operator">:</span>map<span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token constant">RUN</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token punctuation">&#123;</span>size<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span> name<span class="token operator">=</span>张三<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token punctuation">&#123;</span>size<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token class-name">Jock</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token punctuation">&#123;</span>size<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> name<span class="token operator">=</span>小日子<span class="token operator">-</span>刘桑<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token punctuation">&#123;</span>size<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> name<span class="token operator">=</span>小六<span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="查询条件"><a class="anchor" href="#查询条件">#</a> 查询条件</h3><ul><li><p>范围匹配 (&gt;,=,between)</p></li><li><p>模糊匹配 (like)</p></li><li><p>空判定 (null)</p></li><li><p>包含型匹配 (in)</p></li><li><p>分组 (group)</p></li><li><p>排序 (order)</p></li><li><p>...</p></li><li><p>用户登入 (eq 匹配)</p></li></ul><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token class-name">LambdaQueryWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Plus</span><span class="token punctuation">></span></span> q3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LambdaQueryWrapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">//        eq 等同于 =</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">//        select * from plus where name = "张三" and password = "法外狂徒";</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        q3<span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token class-name">Plus</span><span class="token operator">::</span><span class="token function">getName</span><span class="token punctuation">,</span><span class="token string">"Jock"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token class-name">Plus</span><span class="token operator">::</span><span class="token function">getPassword</span><span class="token punctuation">,</span><span class="token string">"123456"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">//        因为 eq 条件查询出来的有两个张三和法外狂徒我们使用 selectOne 只输出一个结果的方法时就会报错</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token class-name">Plus</span> plus <span class="token operator">=</span> plusMapper<span class="token punctuation">.</span><span class="token function">selectOne</span><span class="token punctuation">(</span>q3<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment">//        System.out.println(plus);</span></pre></td></tr></table></figure><ul><li>购物设定价格区间，户籍设定年龄区间 (le ge 匹配 或 between 匹配)</li></ul><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token class-name">LambdaQueryWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Plus</span><span class="token punctuation">></span></span> q4 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LambdaQueryWrapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">//        范围查询 lt 小于，le 小于等于，gt 大于，ge 大于等于，eq 等于</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">//        查询范围 min --> max</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment">//      方案一：设定上限下限</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        q4<span class="token punctuation">.</span><span class="token function">le</span><span class="token punctuation">(</span><span class="token class-name">Plus</span><span class="token operator">::</span><span class="token function">getAge</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ge</span><span class="token punctuation">(</span><span class="token class-name">Plus</span><span class="token operator">::</span><span class="token function">getAge</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">//      方案二：设定范围</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        q4<span class="token punctuation">.</span><span class="token function">between</span><span class="token punctuation">(</span><span class="token class-name">Plus</span><span class="token operator">::</span><span class="token function">getAge</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Plus</span><span class="token punctuation">></span></span> list2 <span class="token operator">=</span> plusMapper<span class="token punctuation">.</span><span class="token function">selectList</span><span class="token punctuation">(</span>q4<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Plus</span> i<span class="token operator">:</span>list2<span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr></table></figure><ul><li>查信息，搜索新闻 (非全文检索版:like 匹配)</li></ul><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token class-name">LambdaQueryWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Plus</span><span class="token punctuation">></span></span> q5 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LambdaQueryWrapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>        q5<span class="token punctuation">.</span><span class="token function">likeLeft</span><span class="token punctuation">(</span><span class="token class-name">Plus</span><span class="token operator">::</span><span class="token function">getName</span><span class="token punctuation">,</span><span class="token string">"三"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Plus</span><span class="token punctuation">></span></span> list3 <span class="token operator">=</span> plusMapper<span class="token punctuation">.</span><span class="token function">selectList</span><span class="token punctuation">(</span>q5<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Plus</span> i<span class="token operator">:</span>list3<span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr></table></figure><ul><li>统计报表 (分组查询聚合函数)</li></ul><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token class-name">QueryWrapper</span> q2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">QueryWrapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">//        相当于 select ... from ? ...</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        q2<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">"count(*) as size"</span><span class="token punctuation">,</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment">//        分组</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        q2<span class="token punctuation">.</span><span class="token function">groupBy</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">></span><span class="token punctuation">></span></span> map <span class="token operator">=</span> plusMapper<span class="token punctuation">.</span><span class="token function">selectMaps</span><span class="token punctuation">(</span>q2<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">></span></span> i<span class="token operator">:</span>map<span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="字段映射与表名映射"><a class="anchor" href="#字段映射与表名映射">#</a> 字段映射与表名映射</h2><p><img data-src="https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202310040854461.png" alt="image_2023-03-12-22-03-36"></p><h3 id="问题一表字段与编码属性设计不同步"><a class="anchor" href="#问题一表字段与编码属性设计不同步">#</a> 问题一：表字段与编码属性设计不同步</h3><p><img data-src="https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202310040854388.png" alt="image_2023-03-12-22-05-14"></p><h3 id="tablefield"><a class="anchor" href="#tablefield">#</a> @TableField</h3><ul><li><p>类型：属性注解</p></li><li><p>位置：模型类属性定义上方</p></li><li><p>作用：设置当前属性对应的数据库表中的字段关系</p></li><li><p>范例:</p></li></ul><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token annotation punctuation">@TableField</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">"pwd"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">String</span> password<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><ul><li>相关属性<ul><li>value (默认): 设置数据库表字段名称</li></ul></li></ul><h3 id="问题二编码中添加了数据库中未定义的属性"><a class="anchor" href="#问题二编码中添加了数据库中未定义的属性">#</a> 问题二：编码中添加了数据库中未定义的属性</h3><p><img data-src="https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202310040854427.png" alt="image_2023-03-12-22-11-10"></p><p>解决方式</p><p><img data-src="https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202310040854347.png" alt="image_2023-03-12-22-12-33"></p><h3 id="tablefield-2"><a class="anchor" href="#tablefield-2">#</a> @TableField</h3><ul><li><p>类型：属性注解</p></li><li><p>位置：模型类属性定义上方</p></li><li><p>作用：设置当前属性对应的数据库表中的字段关系</p></li><li><p>范例:</p></li></ul><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token annotation punctuation">@TableField</span><span class="token punctuation">(</span>exist <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">Integer</span> online<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><ul><li>相关属性<ul><li>value: 设置数据库表字段名称</li><li>&lt;font style=&quot;color:red&quot;&gt;exist: 设置属性在数据库表字段中是否存在，默认为 true, 此属性无法与 value 合并使用 &lt;/font&gt;</li></ul></li></ul><h3 id="问题三采用默认查询开放了更多的字段查看权限"><a class="anchor" href="#问题三采用默认查询开放了更多的字段查看权限">#</a> 问题三：采用默认查询开放了更多的字段查看权限</h3><figure class="highlight sql"><figcaption data-lang="SQL"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">select</span> id<span class="token punctuation">,</span>name<span class="token punctuation">,</span>pwd<span class="token punctuation">,</span>age<span class="token punctuation">,</span>tel<span class="token punctuation">,</span>speciality <span class="token keyword">from</span> <span class="token keyword">user</span></pre></td></tr></table></figure><ul><li>可能会导致我们原本不想让密码的数据 d</li></ul><p><img data-src="https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202310040854894.png" alt="image_2023-03-12-22-17-26"></p><ul><li>设置字段不参与查询</li></ul><h3 id="tablefield设置字段不参与查询"><a class="anchor" href="#tablefield设置字段不参与查询">#</a> @TableField 设置字段不参与查询</h3><ul><li><p>类型：属性注解</p></li><li><p>位置：模型类属性定义上方</p></li><li><p>作用：设置当前属性对应的数据库表中的关系</p></li><li><p>范例:</p></li></ul><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token annotation punctuation">@TableField</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">"pwd"</span><span class="token punctuation">,</span>select<span class="token operator">=</span><span class="token boolean">false</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">String</span> password<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><ul><li>相关属性:<ul><li>value: 设置数据库表字段名称</li><li>exist: 设置属性在数据库表字段中是否存在，默认为 true, 此属性无法与 value 合并使用</li><li>&lt;font style=&quot;color:red&quot;&gt;select: 设置属性是否参与查询，此属性与 select () 映射配置不冲突 &lt;/font&gt;</li></ul></li></ul><h3 id="问题四表名与编码开发设计不同步"><a class="anchor" href="#问题四表名与编码开发设计不同步">#</a> 问题四：表名与编码开发设计不同步</h3><p><img data-src="https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202310040854031.png" alt="image_2023-03-12-22-21-46"></p><ul><li>解决方案:</li></ul><p><img data-src="https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202310040854739.png" alt="image_2023-03-12-22-22-14"></p><h3 id="tablename"><a class="anchor" href="#tablename">#</a> @TableName</h3><ul><li><p>类型：类注解</p></li><li><p>位置：模型类定义上方</p></li><li><p>作用：设置当前类对应与数据库表关系</p></li><li><p>范例:</p></li></ul><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token annotation punctuation">@TableName</span><span class="token punctuation">(</span><span class="token string">"tbl_user"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><ul><li>相关属性<ul><li>value: 设置数据库表名称</li></ul></li></ul><h2 id="dml编程控制"><a class="anchor" href="#dml编程控制">#</a> DML 编程控制</h2><p><strong>id 生成策略控制</strong></p><ul><li>不同的表应用不同的 id 生成策略<ul><li>日志：自增 (1,2,3,4, ...)</li><li>购物订单：特殊规则 (FQ2398798AK82)</li><li>外卖单：关联地区日期等信息 (10 04 20200314 34 91)</li><li>关系表：可省略 id</li><li>...</li></ul></li></ul><h3 id="tableid"><a class="anchor" href="#tableid">#</a> @TableId</h3><ul><li><p>类型：属性注解</p></li><li><p>位置：模型类中用于表示主键的属性定义上方</p></li><li><p>作用：设置当前类中注解属性的生成策略</p></li><li><p>范例:</p></li></ul><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token annotation punctuation">@TableId</span><span class="token punctuation">(</span>type <span class="token operator">=</span> <span class="token class-name">IdType</span><span class="token punctuation">.</span><span class="token constant">AUTO</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><ul><li>相关属性<ul><li>value: 设置数据库主键名称</li><li>type: 设置主键属性的生成策略，值参照 IdType 枚举值</li></ul></li></ul><h3 id="auto"><a class="anchor" href="#auto">#</a> AUTO</h3><p>范例:</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token annotation punctuation">@TableId</span><span class="token punctuation">(</span>type <span class="token operator">=</span> <span class="token class-name">IdType</span><span class="token punctuation">.</span><span class="token constant">AUTO</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>使用数据 id 自增策略控制 id 生成</p><p><strong>使用 sql 命令:alter table [表名] auto_increment = n 来设定一下自增的起步值</strong></p><p><img data-src="https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202310040854987.png" alt="image_2023-03-13-10-44-05"></p><p><strong>测试类</strong></p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token annotation punctuation">@Test</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token keyword">void</span> <span class="token function">insertTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token class-name">Plusa</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Plusa</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        p<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"刘桑-c"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        p<span class="token punctuation">.</span><span class="token function">setPwd</span><span class="token punctuation">(</span><span class="token string">"789"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        p<span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token number">29</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        p<span class="token punctuation">.</span><span class="token function">setTel</span><span class="token punctuation">(</span><span class="token string">"3123"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token keyword">int</span> i <span class="token operator">=</span> plusMapper<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>i <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token string">"执行成功"</span><span class="token operator">:</span><span class="token string">"执行失败"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token constant">RUN</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span></pre></td></tr><tr><td data-num="12"></td><td><pre>执行成功</pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token constant">MYSQL</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span></pre></td></tr><tr><td data-num="14"></td><td><pre>mysql<span class="token operator">></span> select <span class="token operator">*</span> from plus<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token operator">|</span> id <span class="token operator">|</span> name        <span class="token operator">|</span> password       <span class="token operator">|</span> age <span class="token operator">|</span> tel          <span class="token operator">|</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> 张三        <span class="token operator">|</span> 法外狂徒       <span class="token operator">|</span>   <span class="token number">3</span> <span class="token operator">|</span> <span class="token number">1122</span>         <span class="token operator">|</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token operator">|</span>  <span class="token number">2</span> <span class="token operator">|</span> 张三        <span class="token operator">|</span> 法外狂徒       <span class="token operator">|</span>   <span class="token number">4</span> <span class="token operator">|</span> <span class="token number">2233</span>         <span class="token operator">|</span></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token operator">|</span>  <span class="token number">3</span> <span class="token operator">|</span> <span class="token class-name">Jock</span>        <span class="token operator">|</span> <span class="token number">123456</span>         <span class="token operator">|</span>  <span class="token number">41</span> <span class="token operator">|</span> <span class="token number">867862342</span>    <span class="token operator">|</span></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token operator">|</span>  <span class="token number">4</span> <span class="token operator">|</span> 小日子<span class="token operator">-</span>刘桑 <span class="token operator">|</span> it<span class="token operator">-</span>小日子<span class="token operator">-</span>刘桑 <span class="token operator">|</span>  <span class="token number">15</span> <span class="token operator">|</span> <span class="token number">912837893759</span> <span class="token operator">|</span></pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token operator">|</span>  <span class="token number">5</span> <span class="token operator">|</span> 刘桑<span class="token operator">-</span>a      <span class="token operator">|</span> <span class="token number">123</span>            <span class="token operator">|</span>  <span class="token number">30</span> <span class="token operator">|</span> <span class="token number">3123</span>         <span class="token operator">|</span></pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span></pre></td></tr></table></figure><h3 id="input"><a class="anchor" href="#input">#</a> INPUT</h3><p>范例:</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token annotation punctuation">@TableId</span><span class="token punctuation">(</span>type <span class="token operator">=</span> <span class="token class-name">IdType</span><span class="token punctuation">.</span><span class="token constant">INPUT</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>用户手工输入 id, 如果没有自增条件而又不输入 id 则报错 null</p><p><img data-src="https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202310040854625.png" alt="image_2023-03-13-11-03-52"></p><p>用户手工输入 id</p><p><strong>测试代码</strong></p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token annotation punctuation">@Test</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token keyword">void</span> <span class="token function">insertTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token class-name">Plusa</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Plusa</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        p<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span><span class="token number">10L</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        p<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"刘桑-c"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        p<span class="token punctuation">.</span><span class="token function">setPwd</span><span class="token punctuation">(</span><span class="token string">"789"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        p<span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token number">29</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        p<span class="token punctuation">.</span><span class="token function">setTel</span><span class="token punctuation">(</span><span class="token string">"3123"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token keyword">int</span> i <span class="token operator">=</span> plusMapper<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>i <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token string">"执行成功"</span><span class="token operator">:</span><span class="token string">"执行失败"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token constant">RUN</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span></pre></td></tr><tr><td data-num="13"></td><td><pre>执行成功</pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token constant">MYSQL</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span></pre></td></tr><tr><td data-num="15"></td><td><pre>mysql<span class="token operator">></span> select <span class="token operator">*</span> from plus<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token operator">|</span> id <span class="token operator">|</span> name        <span class="token operator">|</span> password       <span class="token operator">|</span> age <span class="token operator">|</span> tel          <span class="token operator">|</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> 张三        <span class="token operator">|</span> 法外狂徒       <span class="token operator">|</span>   <span class="token number">3</span> <span class="token operator">|</span> <span class="token number">1122</span>         <span class="token operator">|</span></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token operator">|</span>  <span class="token number">2</span> <span class="token operator">|</span> 张三        <span class="token operator">|</span> 法外狂徒       <span class="token operator">|</span>   <span class="token number">4</span> <span class="token operator">|</span> <span class="token number">2233</span>         <span class="token operator">|</span></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token operator">|</span>  <span class="token number">3</span> <span class="token operator">|</span> <span class="token class-name">Jock</span>        <span class="token operator">|</span> <span class="token number">123456</span>         <span class="token operator">|</span>  <span class="token number">41</span> <span class="token operator">|</span> <span class="token number">867862342</span>    <span class="token operator">|</span></pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token operator">|</span>  <span class="token number">4</span> <span class="token operator">|</span> 小日子<span class="token operator">-</span>刘桑 <span class="token operator">|</span> it<span class="token operator">-</span>小日子<span class="token operator">-</span>刘桑 <span class="token operator">|</span>  <span class="token number">15</span> <span class="token operator">|</span> <span class="token number">912837893759</span> <span class="token operator">|</span></pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token operator">|</span>  <span class="token number">5</span> <span class="token operator">|</span> 刘桑<span class="token operator">-</span>a      <span class="token operator">|</span> <span class="token number">123</span>            <span class="token operator">|</span>  <span class="token number">30</span> <span class="token operator">|</span> <span class="token number">3123</span>         <span class="token operator">|</span></pre></td></tr><tr><td data-num="24"></td><td><pre><span class="token operator">|</span>  <span class="token number">6</span> <span class="token operator">|</span> 刘桑<span class="token operator">-</span>b      <span class="token operator">|</span> <span class="token number">456</span>            <span class="token operator">|</span>  <span class="token number">31</span> <span class="token operator">|</span> <span class="token number">3123</span>         <span class="token operator">|</span></pre></td></tr><tr><td data-num="25"></td><td><pre><span class="token operator">|</span>  <span class="token number">7</span> <span class="token operator">|</span> 刘桑<span class="token operator">-</span>c      <span class="token operator">|</span> <span class="token number">789</span>            <span class="token operator">|</span>  <span class="token number">29</span> <span class="token operator">|</span> <span class="token number">3123</span>         <span class="token operator">|</span></pre></td></tr><tr><td data-num="26"></td><td><pre><span class="token operator">|</span>  <span class="token number">8</span> <span class="token operator">|</span> 刘桑<span class="token operator">-</span>c      <span class="token operator">|</span> <span class="token number">789</span>            <span class="token operator">|</span>  <span class="token number">29</span> <span class="token operator">|</span> <span class="token number">3123</span>         <span class="token operator">|</span></pre></td></tr><tr><td data-num="27"></td><td><pre><span class="token operator">|</span>  <span class="token number">9</span> <span class="token operator">|</span> 刘桑<span class="token operator">-</span>c      <span class="token operator">|</span> <span class="token number">789</span>            <span class="token operator">|</span>  <span class="token number">29</span> <span class="token operator">|</span> <span class="token number">3123</span>         <span class="token operator">|</span></pre></td></tr><tr><td data-num="28"></td><td><pre><span class="token operator">|</span> <span class="token number">10</span> <span class="token operator">|</span> 刘桑<span class="token operator">-</span>c      <span class="token operator">|</span> <span class="token number">789</span>            <span class="token operator">|</span>  <span class="token number">29</span> <span class="token operator">|</span> <span class="token number">3123</span>         <span class="token operator">|</span></pre></td></tr><tr><td data-num="29"></td><td><pre><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span></pre></td></tr></table></figure><p>如果有自增值约束那么就不会报错会根据自增的起步值自增</p><p><code>alter table plus modify id bigint auto_increment;</code></p><p><img data-src="https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202310040854642.png" alt="image_2023-03-13-11-09-17"></p><p><strong>测试代码</strong></p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token annotation punctuation">@Test</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token keyword">void</span> <span class="token function">insertTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token class-name">Plusa</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Plusa</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        p<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"刘桑-c"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        p<span class="token punctuation">.</span><span class="token function">setPwd</span><span class="token punctuation">(</span><span class="token string">"789"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        p<span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token number">29</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        p<span class="token punctuation">.</span><span class="token function">setTel</span><span class="token punctuation">(</span><span class="token string">"3123"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token keyword">int</span> i <span class="token operator">=</span> plusMapper<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>i <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token string">"执行成功"</span><span class="token operator">:</span><span class="token string">"执行失败"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token constant">RUN</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span></pre></td></tr><tr><td data-num="12"></td><td><pre>执行成功</pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token constant">MYSQL</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span></pre></td></tr><tr><td data-num="14"></td><td><pre>mysql<span class="token operator">></span> select <span class="token operator">*</span> from plus<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token operator">|</span> id <span class="token operator">|</span> name        <span class="token operator">|</span> password       <span class="token operator">|</span> age <span class="token operator">|</span> tel          <span class="token operator">|</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> 张三        <span class="token operator">|</span> 法外狂徒       <span class="token operator">|</span>   <span class="token number">3</span> <span class="token operator">|</span> <span class="token number">1122</span>         <span class="token operator">|</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token operator">|</span>  <span class="token number">2</span> <span class="token operator">|</span> 张三        <span class="token operator">|</span> 法外狂徒       <span class="token operator">|</span>   <span class="token number">4</span> <span class="token operator">|</span> <span class="token number">2233</span>         <span class="token operator">|</span></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token operator">|</span>  <span class="token number">3</span> <span class="token operator">|</span> <span class="token class-name">Jock</span>        <span class="token operator">|</span> <span class="token number">123456</span>         <span class="token operator">|</span>  <span class="token number">41</span> <span class="token operator">|</span> <span class="token number">867862342</span>    <span class="token operator">|</span></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token operator">|</span>  <span class="token number">4</span> <span class="token operator">|</span> 小日子<span class="token operator">-</span>刘桑 <span class="token operator">|</span> it<span class="token operator">-</span>小日子<span class="token operator">-</span>刘桑 <span class="token operator">|</span>  <span class="token number">15</span> <span class="token operator">|</span> <span class="token number">912837893759</span> <span class="token operator">|</span></pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token operator">|</span>  <span class="token number">5</span> <span class="token operator">|</span> 刘桑<span class="token operator">-</span>a      <span class="token operator">|</span> <span class="token number">123</span>            <span class="token operator">|</span>  <span class="token number">30</span> <span class="token operator">|</span> <span class="token number">3123</span>         <span class="token operator">|</span></pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token operator">|</span>  <span class="token number">6</span> <span class="token operator">|</span> 刘桑<span class="token operator">-</span>b      <span class="token operator">|</span> <span class="token number">456</span>            <span class="token operator">|</span>  <span class="token number">31</span> <span class="token operator">|</span> <span class="token number">3123</span>         <span class="token operator">|</span></pre></td></tr><tr><td data-num="24"></td><td><pre><span class="token operator">|</span>  <span class="token number">7</span> <span class="token operator">|</span> 刘桑<span class="token operator">-</span>c      <span class="token operator">|</span> <span class="token number">789</span>            <span class="token operator">|</span>  <span class="token number">29</span> <span class="token operator">|</span> <span class="token number">3123</span>         <span class="token operator">|</span></pre></td></tr><tr><td data-num="25"></td><td><pre><span class="token operator">|</span>  <span class="token number">8</span> <span class="token operator">|</span> 刘桑<span class="token operator">-</span>c      <span class="token operator">|</span> <span class="token number">789</span>            <span class="token operator">|</span>  <span class="token number">29</span> <span class="token operator">|</span> <span class="token number">3123</span>         <span class="token operator">|</span></pre></td></tr><tr><td data-num="26"></td><td><pre><span class="token operator">|</span>  <span class="token number">9</span> <span class="token operator">|</span> 刘桑<span class="token operator">-</span>c      <span class="token operator">|</span> <span class="token number">789</span>            <span class="token operator">|</span>  <span class="token number">29</span> <span class="token operator">|</span> <span class="token number">3123</span>         <span class="token operator">|</span></pre></td></tr><tr><td data-num="27"></td><td><pre><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span></pre></td></tr></table></figure><h3 id="none"><a class="anchor" href="#none">#</a> NONE</h3><p>不设置 id 生成策略</p><p>自动生成主键，使用雪花算法</p><p>范例:</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token annotation punctuation">@TableId</span><span class="token punctuation">(</span>type <span class="token operator">=</span> <span class="token class-name">IdType</span><span class="token punctuation">.</span><span class="token constant">NONE</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p><strong>测试代码</strong></p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre>mysql<span class="token operator">></span> select <span class="token operator">*</span> from plus<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token operator">|</span> id                  <span class="token operator">|</span> name        <span class="token operator">|</span> password       <span class="token operator">|</span> age <span class="token operator">|</span> tel          <span class="token operator">|</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token operator">|</span> <span class="token number">1635120592362332161</span> <span class="token operator">|</span> 刘桑<span class="token operator">-</span>c      <span class="token operator">|</span> <span class="token number">789</span>            <span class="token operator">|</span>  <span class="token number">29</span> <span class="token operator">|</span> <span class="token number">3123</span>         <span class="token operator">|</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span></pre></td></tr></table></figure><h3 id="assign_id"><a class="anchor" href="#assign_id">#</a> ASSIGN_ID</h3><p>雪花算法生成 id (可兼容数值与字符串型)</p><p>雪花算法：生成一个串，串由 64 位二进制组成最终得到一个 Long 值</p><p><img data-src="https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202310040854878.png" alt="image_2023-03-13-11-37-50"></p><p>范例:</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token annotation punctuation">@TableId</span><span class="token punctuation">(</span>type <span class="token operator">=</span> <span class="token class-name">IdType</span><span class="token punctuation">.</span><span class="token constant">ASSIGN_ID</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p><strong>测试代码</strong></p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token annotation punctuation">@Test</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token keyword">void</span> <span class="token function">insertTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token class-name">Plusa</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Plusa</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment">//        p.setId(12L);</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        p<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"刘桑-c"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        p<span class="token punctuation">.</span><span class="token function">setPwd</span><span class="token punctuation">(</span><span class="token string">"789"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        p<span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token number">29</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        p<span class="token punctuation">.</span><span class="token function">setTel</span><span class="token punctuation">(</span><span class="token string">"3123"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token keyword">int</span> i <span class="token operator">=</span> plusMapper<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>i <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token string">"执行成功"</span><span class="token operator">:</span><span class="token string">"执行失败"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token constant">RUN</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span></pre></td></tr><tr><td data-num="13"></td><td><pre>执行成功</pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token constant">MYSQL</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span></pre></td></tr><tr><td data-num="15"></td><td><pre>mysql<span class="token operator">></span> select <span class="token operator">*</span> from plus<span class="token punctuation">;</span><span class="token operator">/</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token operator">|</span> id                  <span class="token operator">|</span> name        <span class="token operator">|</span> password       <span class="token operator">|</span> age <span class="token operator">|</span> tel          <span class="token operator">|</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token operator">|</span> <span class="token number">1635119016822366210</span> <span class="token operator">|</span> 刘桑<span class="token operator">-</span>c      <span class="token operator">|</span> <span class="token number">789</span>            <span class="token operator">|</span>  <span class="token number">29</span> <span class="token operator">|</span> <span class="token number">3123</span>         <span class="token operator">|</span></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span></pre></td></tr></table></figure><h3 id="assign_uuid"><a class="anchor" href="#assign_uuid">#</a> ASSIGN_UUID</h3><p>以 UUID 生成算法作为 id 生成策略</p><p>范例:</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token annotation punctuation">@TableId</span><span class="token punctuation">(</span>type <span class="token operator">=</span> <span class="token class-name">IdType</span><span class="token punctuation">.</span><span class="token constant">ASSIGN_UUID</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="yml中设置全局配置id生成策略"><a class="anchor" href="#yml中设置全局配置id生成策略">#</a> yml 中设置全局配置 id 生成策略</h3><figure class="highlight yml"><figcaption data-lang="YAML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token key atrule">mybatis-plus</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">#  使用 全局配置 id 生成策略</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token key atrule">global-config</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token key atrule">db-config</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">#      这条语句等同于 @TableId (type = IdType.AUTO)</span></pre></td></tr><tr><td data-num="6"></td><td><pre>      <span class="token key atrule">id-type</span><span class="token punctuation">:</span> auto</pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment">#      配置全局实体类名前缀让其与数据库表名称保持一致</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token comment">#      table-prefix: tab_</span></pre></td></tr></table></figure><ul><li>id 生成策略全局配置</li></ul><p><img data-src="https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202310040855882.png" alt="image_2023-03-13-12-28-49"></p><ul><li>表名前缀全局配置</li></ul><p><img data-src="https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202310040855003.png" alt="image_2023-03-13-12-28-18"></p><h3 id="多记录操作"><a class="anchor" href="#多记录操作">#</a> 多记录操作</h3><p><img data-src="https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202310040855473.png" alt="image_2023-03-13-12-32-22"></p><p><strong>方法</strong></p><ul><li>按照主键删除多条记录</li></ul><p>&lt;font style=&quot;color:red&quot;&gt;deleteBatchIds&lt;/font&gt;</p><ul><li>根据主键查询多条记录</li></ul><p>&lt;font style=&quot;color:red&quot;&gt;selectBatchIds&lt;/font&gt;</p><ul><li>该方法接收的是 List 集合，来进行多条记录操作</li></ul><p><strong>测试类</strong></p><h4 id="delete"><a class="anchor" href="#delete">#</a> Delete</h4><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token annotation punctuation">@Test</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token keyword">void</span> <span class="token function">deleteTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Long</span><span class="token punctuation">></span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">4L</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">5L</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">6L</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">7L</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token keyword">int</span> i <span class="token operator">=</span> plusMapper<span class="token punctuation">.</span><span class="token function">deleteBatchIds</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>i <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token string">"执行成功"</span><span class="token operator">:</span><span class="token string">"执行失败"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token constant">RUN</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span></pre></td></tr><tr><td data-num="12"></td><td><pre>执行成功</pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token constant">MYSQL</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span></pre></td></tr><tr><td data-num="14"></td><td><pre></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token constant">MYSQL</span><span class="token operator">--</span><span class="token class-name">Before</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span></pre></td></tr><tr><td data-num="16"></td><td><pre>mysql<span class="token operator">></span> select <span class="token operator">*</span> from plus<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token operator">|</span> id <span class="token operator">|</span> name        <span class="token operator">|</span> password       <span class="token operator">|</span> age <span class="token operator">|</span> tel          <span class="token operator">|</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> 张三        <span class="token operator">|</span> 法外狂徒       <span class="token operator">|</span>   <span class="token number">3</span> <span class="token operator">|</span> <span class="token number">1122</span>         <span class="token operator">|</span></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token operator">|</span>  <span class="token number">2</span> <span class="token operator">|</span> 张三        <span class="token operator">|</span> 法外狂徒       <span class="token operator">|</span>   <span class="token number">4</span> <span class="token operator">|</span> <span class="token number">2233</span>         <span class="token operator">|</span></pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token operator">|</span>  <span class="token number">3</span> <span class="token operator">|</span> <span class="token class-name">Jock</span>        <span class="token operator">|</span> <span class="token number">123456</span>         <span class="token operator">|</span>  <span class="token number">41</span> <span class="token operator">|</span> <span class="token number">867862342</span>    <span class="token operator">|</span></pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token operator">|</span>  <span class="token number">4</span> <span class="token operator">|</span> 小日子<span class="token operator">-</span>刘桑 <span class="token operator">|</span> it<span class="token operator">-</span>小日子<span class="token operator">-</span>刘桑 <span class="token operator">|</span>  <span class="token number">15</span> <span class="token operator">|</span> <span class="token number">912837893759</span> <span class="token operator">|</span></pre></td></tr><tr><td data-num="24"></td><td><pre><span class="token operator">|</span>  <span class="token number">5</span> <span class="token operator">|</span> 刘桑<span class="token operator">-</span>a      <span class="token operator">|</span> <span class="token number">123</span>            <span class="token operator">|</span>  <span class="token number">30</span> <span class="token operator">|</span> <span class="token number">3123</span>         <span class="token operator">|</span></pre></td></tr><tr><td data-num="25"></td><td><pre><span class="token operator">|</span>  <span class="token number">6</span> <span class="token operator">|</span> 刘桑<span class="token operator">-</span>b      <span class="token operator">|</span> <span class="token number">456</span>            <span class="token operator">|</span>  <span class="token number">31</span> <span class="token operator">|</span> <span class="token number">3123</span>         <span class="token operator">|</span></pre></td></tr><tr><td data-num="26"></td><td><pre><span class="token operator">|</span>  <span class="token number">7</span> <span class="token operator">|</span> 刘桑<span class="token operator">-</span>c      <span class="token operator">|</span> <span class="token number">789</span>            <span class="token operator">|</span>  <span class="token number">29</span> <span class="token operator">|</span> <span class="token number">3123</span>         <span class="token operator">|</span></pre></td></tr><tr><td data-num="27"></td><td><pre><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span></pre></td></tr><tr><td data-num="28"></td><td><pre><span class="token number">7</span> rows in set <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="29"></td><td><pre></pre></td></tr><tr><td data-num="30"></td><td><pre><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token constant">MYSQL</span><span class="token operator">--</span><span class="token class-name">After</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span></pre></td></tr><tr><td data-num="31"></td><td><pre></pre></td></tr><tr><td data-num="32"></td><td><pre>mysql<span class="token operator">></span> select <span class="token operator">*</span> from plus<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="33"></td><td><pre><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span></pre></td></tr><tr><td data-num="34"></td><td><pre><span class="token operator">|</span> id <span class="token operator">|</span> name <span class="token operator">|</span> password <span class="token operator">|</span> age <span class="token operator">|</span> tel       <span class="token operator">|</span></pre></td></tr><tr><td data-num="35"></td><td><pre><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span></pre></td></tr><tr><td data-num="36"></td><td><pre><span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> 张三 <span class="token operator">|</span> 法外狂徒 <span class="token operator">|</span>   <span class="token number">3</span> <span class="token operator">|</span> <span class="token number">1122</span>      <span class="token operator">|</span></pre></td></tr><tr><td data-num="37"></td><td><pre><span class="token operator">|</span>  <span class="token number">2</span> <span class="token operator">|</span> 张三 <span class="token operator">|</span> 法外狂徒 <span class="token operator">|</span>   <span class="token number">4</span> <span class="token operator">|</span> <span class="token number">2233</span>      <span class="token operator">|</span></pre></td></tr><tr><td data-num="38"></td><td><pre><span class="token operator">|</span>  <span class="token number">3</span> <span class="token operator">|</span> <span class="token class-name">Jock</span> <span class="token operator">|</span> <span class="token number">123456</span>   <span class="token operator">|</span>  <span class="token number">41</span> <span class="token operator">|</span> <span class="token number">867862342</span> <span class="token operator">|</span></pre></td></tr><tr><td data-num="39"></td><td><pre><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span></pre></td></tr></table></figure><h4 id="select"><a class="anchor" href="#select">#</a> Select</h4><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token annotation punctuation">@Test</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token keyword">void</span> <span class="token function">deleteTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Long</span><span class="token punctuation">></span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1L</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2L</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">3L</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Plusa</span><span class="token punctuation">></span></span> plusas <span class="token operator">=</span> plusMapper<span class="token punctuation">.</span><span class="token function">selectBatchIds</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Plusa</span> i<span class="token operator">:</span>plusas<span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token constant">RUN</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token class-name">Plusa</span><span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> name<span class="token operator">=</span>张三<span class="token punctuation">,</span> pwd<span class="token operator">=</span>法外狂徒<span class="token punctuation">,</span> age<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">,</span> tel<span class="token operator">=</span><span class="token number">1122</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token class-name">Plusa</span><span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span> name<span class="token operator">=</span>张三<span class="token punctuation">,</span> pwd<span class="token operator">=</span>法外狂徒<span class="token punctuation">,</span> age<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">,</span> tel<span class="token operator">=</span><span class="token number">2233</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token class-name">Plusa</span><span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token class-name">Jock</span><span class="token punctuation">,</span> pwd<span class="token operator">=</span><span class="token number">123456</span><span class="token punctuation">,</span> age<span class="token operator">=</span><span class="token number">41</span><span class="token punctuation">,</span> tel<span class="token operator">=</span><span class="token number">867862342</span><span class="token punctuation">)</span></pre></td></tr></table></figure><h3 id="逻辑删除"><a class="anchor" href="#逻辑删除">#</a> 逻辑删除</h3><ul><li>删除操作业务问题：业务数据从数据库中丢弃</li></ul><p><img data-src="https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202310040855215.png" alt="image_2023-03-13-13-59-30"></p><ul><li>逻辑删除：为数据设置是否可用状态字段，删除时设置状态字段为不可用状态，数据保留在数据库中</li></ul><p><img data-src="https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202310040855372.png" alt="image_2023-03-13-14-26-05"></p><p>操作步骤:</p><ol><li>数据库表中添加逻辑删除标记字段</li></ol><p><img data-src="https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202310040855619.png" alt="image_2023-03-13-15-20-43"></p><ol start="2"><li>实体类中添加对应字段，并设定当前字段为逻辑删除字段</li></ol><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token annotation punctuation">@TableLogic</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">Integer</span> deleted<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><ol start="3"><li>配置逻辑删除字面值</li></ol><figure class="highlight yml"><figcaption data-lang="YAML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token key atrule">mybatis-plus</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token key atrule">configuration</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token key atrule">log-impl</span><span class="token punctuation">:</span> org.apache.ibatis.logging.stdout.StdOutImpl</pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token key atrule">global-config</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token key atrule">db-config</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="6"></td><td><pre>      <span class="token key atrule">logic-delete-field</span><span class="token punctuation">:</span> deleted</pre></td></tr><tr><td data-num="7"></td><td><pre>      <span class="token comment">#1 代表已经删除</span></pre></td></tr><tr><td data-num="8"></td><td><pre>      <span class="token key atrule">logic-delete-value</span><span class="token punctuation">:</span> <span class="token number">1</span></pre></td></tr><tr><td data-num="9"></td><td><pre>      <span class="token comment">#0 代表没有删除</span></pre></td></tr><tr><td data-num="10"></td><td><pre>      <span class="token key atrule">logic-not-delete-value</span><span class="token punctuation">:</span> <span class="token number">0</span></pre></td></tr></table></figure><p><strong>一旦把逻辑删除功能开启后下面就要注意了</strong></p><p>原来执行的删除语句就变成了一个更新语句:</p><p>执行的 java 代码</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token annotation punctuation">@Test</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token keyword">void</span> <span class="token function">deleteTest1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token keyword">int</span> i <span class="token operator">=</span> plusMapper<span class="token punctuation">.</span><span class="token function">deleteById</span><span class="token punctuation">(</span><span class="token number">1L</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>i <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token string">"删除成功"</span><span class="token operator">:</span><span class="token string">"删除失败"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr></table></figure><figure class="highlight sql"><figcaption data-lang="SQL"></figcaption><table><tr><td data-num="1"></td><td><pre>Preparing: <span class="token keyword">UPDATE</span> plus <span class="token keyword">SET</span> deleted<span class="token operator">=</span><span class="token number">1</span> <span class="token keyword">WHERE</span> id<span class="token operator">=</span>? <span class="token operator">AND</span> deleted<span class="token operator">=</span><span class="token number">0</span></pre></td></tr></table></figure><p><strong>执行数据结果</strong></p><pre><code>mysql&gt; select * from plus;
+----+------+----------+-----+-----------+---------+
| id | name | password | age | tel       | deleted |
+----+------+----------+-----+-----------+---------+
|  1 | 张三 | 法外狂徒 |   3 | 1122      |       1 |
|  2 | 张三 | 法外狂徒 |   4 | 2233      |       1 |
|  3 | Jock | 123456   |  41 | 867862342 |       0 |
+----+------+----------+-----+-----------+---------+
3 rows in set (0.00 sec)
</code></pre><ul><li>domain</li></ul><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token annotation punctuation">@SuppressWarnings</span><span class="token punctuation">(</span><span class="token string">"all"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token annotation punctuation">@Data</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">// 设置数据库表的名称，解决实体类与数据库表名不一致情况</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token annotation punctuation">@TableName</span><span class="token punctuation">(</span><span class="token string">"plus"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Plusa</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">//    @TableId(type = IdType.NONE)</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token comment">//    设置数据库表的字段名称，解决字段名不一致，select=false 该字段不参与查询</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token annotation punctuation">@TableField</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">"password"</span><span class="token punctuation">,</span>select<span class="token operator">=</span><span class="token boolean">true</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">String</span> pwd<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">Integer</span> age<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">String</span> tel<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token comment">//    是否在线</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token annotation punctuation">@TableField</span><span class="token punctuation">(</span>exist <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">Integer</span> online<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token comment">//    逻辑删除字段：标记当前记录是否被删除</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token annotation punctuation">@TableLogic</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"0"</span><span class="token punctuation">,</span>delval <span class="token operator">=</span> <span class="token string">"1"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">Integer</span> deleted<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><ul><li>test</li></ul><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token annotation punctuation">@Test</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token keyword">void</span> <span class="token function">deleteTest1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token keyword">int</span> i <span class="token operator">=</span> plusMapper<span class="token punctuation">.</span><span class="token function">deleteById</span><span class="token punctuation">(</span><span class="token number">2L</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>i <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token string">"删除成功"</span><span class="token operator">:</span><span class="token string">"删除失败"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token constant">RUN</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span></pre></td></tr><tr><td data-num="7"></td><td><pre>执行成功</pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token constant">MYSQL</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token class-name">Before</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span></pre></td></tr><tr><td data-num="10"></td><td><pre>mysql<span class="token operator">></span> select <span class="token operator">*</span> from plus<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token operator">|</span> id <span class="token operator">|</span> name <span class="token operator">|</span> password <span class="token operator">|</span> age <span class="token operator">|</span> tel       <span class="token operator">|</span> deleted <span class="token operator">|</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> 张三 <span class="token operator">|</span> 法外狂徒 <span class="token operator">|</span>   <span class="token number">3</span> <span class="token operator">|</span> <span class="token number">1122</span>      <span class="token operator">|</span>       <span class="token number">0</span> <span class="token operator">|</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token operator">|</span>  <span class="token number">2</span> <span class="token operator">|</span> 张三 <span class="token operator">|</span> 法外狂徒 <span class="token operator">|</span>   <span class="token number">4</span> <span class="token operator">|</span> <span class="token number">2233</span>      <span class="token operator">|</span>       <span class="token number">0</span> <span class="token operator">|</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token operator">|</span>  <span class="token number">3</span> <span class="token operator">|</span> <span class="token class-name">Jock</span> <span class="token operator">|</span> <span class="token number">123456</span>   <span class="token operator">|</span>  <span class="token number">41</span> <span class="token operator">|</span> <span class="token number">867862342</span> <span class="token operator">|</span>       <span class="token number">0</span> <span class="token operator">|</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token number">3</span> rows in set <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="19"></td><td><pre></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token class-name">After</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span></pre></td></tr><tr><td data-num="21"></td><td><pre></pre></td></tr><tr><td data-num="22"></td><td><pre>mysql<span class="token operator">></span> select <span class="token operator">*</span> from plus<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span></pre></td></tr><tr><td data-num="24"></td><td><pre><span class="token operator">|</span> id <span class="token operator">|</span> name <span class="token operator">|</span> password <span class="token operator">|</span> age <span class="token operator">|</span> tel       <span class="token operator">|</span> deleted <span class="token operator">|</span></pre></td></tr><tr><td data-num="25"></td><td><pre><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span></pre></td></tr><tr><td data-num="26"></td><td><pre><span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> 张三 <span class="token operator">|</span> 法外狂徒 <span class="token operator">|</span>   <span class="token number">3</span> <span class="token operator">|</span> <span class="token number">1122</span>      <span class="token operator">|</span>       <span class="token number">0</span> <span class="token operator">|</span></pre></td></tr><tr><td data-num="27"></td><td><pre><span class="token operator">|</span>  <span class="token number">2</span> <span class="token operator">|</span> 张三 <span class="token operator">|</span> 法外狂徒 <span class="token operator">|</span>   <span class="token number">4</span> <span class="token operator">|</span> <span class="token number">2233</span>      <span class="token operator">|</span>       <span class="token number">1</span> <span class="token operator">|</span></pre></td></tr><tr><td data-num="28"></td><td><pre><span class="token operator">|</span>  <span class="token number">3</span> <span class="token operator">|</span> <span class="token class-name">Jock</span> <span class="token operator">|</span> <span class="token number">123456</span>   <span class="token operator">|</span>  <span class="token number">41</span> <span class="token operator">|</span> <span class="token number">867862342</span> <span class="token operator">|</span>       <span class="token number">0</span> <span class="token operator">|</span></pre></td></tr><tr><td data-num="29"></td><td><pre><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span></pre></td></tr></table></figure><ul><li>执行一下查询看看 deleted 为 1 的数据是否会被查询出来</li></ul><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token annotation punctuation">@Test</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token keyword">void</span> <span class="token function">selectTest1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Plusa</span><span class="token punctuation">></span></span> list <span class="token operator">=</span> plusMapper<span class="token punctuation">.</span><span class="token function">selectList</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Plusa</span> i<span class="token operator">:</span>list<span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token constant">RUN</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token class-name">Plusa</span><span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> name<span class="token operator">=</span>张三<span class="token punctuation">,</span> pwd<span class="token operator">=</span>法外狂徒<span class="token punctuation">,</span> age<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">,</span> tel<span class="token operator">=</span><span class="token number">1122</span><span class="token punctuation">,</span> online<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">,</span> deleted<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token class-name">Plusa</span><span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token class-name">Jock</span><span class="token punctuation">,</span> pwd<span class="token operator">=</span><span class="token number">123456</span><span class="token punctuation">,</span> age<span class="token operator">=</span><span class="token number">41</span><span class="token punctuation">,</span> tel<span class="token operator">=</span><span class="token number">867862342</span><span class="token punctuation">,</span> online<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">,</span> deleted<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token operator">==</span><span class="token operator">></span>  <span class="token class-name">Preparing</span><span class="token operator">:</span> <span class="token class-name">SELECT</span> id<span class="token punctuation">,</span>name<span class="token punctuation">,</span>password <span class="token class-name">AS</span> pwd<span class="token punctuation">,</span>age<span class="token punctuation">,</span>tel<span class="token punctuation">,</span>deleted <span class="token constant">FROM</span> plus <span class="token class-name">WHERE</span> deleted<span class="token operator">=</span><span class="token number">0</span></pre></td></tr></table></figure><p><strong>要注意使用 deleted 而不是 delete 会报错因为这是个关键字</strong></p><p><strong>注意事项:</strong></p><p>不要查询 deleted 逻辑删除字段为 1 的因为被判定为删除查询时 deleted = 0 导致查询不出结果</p><h2 id="乐观锁"><a class="anchor" href="#乐观锁">#</a> 乐观锁</h2><p><strong>注意事项:</strong></p><p>不要查询 deleted 逻辑删除字段为 1 的因为被判定为删除查询时 deleted = 0 导致查询不出结果</p><ol><li>数据库表中添加锁标记字段</li></ol><p><img data-src="https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202310040855713.png" alt="image_2023-03-13-18-34-18"></p><ol start="2"><li>实体类中添加对应字段，并设定当前字段为逻辑删除标记字段</li></ol><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token annotation punctuation">@SuppressWarnings</span><span class="token punctuation">(</span><span class="token string">"all"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">// 设置数据库表的名称，解决实体类与数据库表名不一致情况</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token annotation punctuation">@TableName</span><span class="token punctuation">(</span><span class="token string">"plus"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token annotation punctuation">@Data</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Plusa</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">//    @TableId(type = IdType.NONE)</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token comment">//    设置数据库表的字段名称，解决字段名不一致，select=false 该字段不参与查询</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token annotation punctuation">@TableField</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">"password"</span><span class="token punctuation">,</span>select<span class="token operator">=</span><span class="token boolean">true</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">String</span> pwd<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">Integer</span> age<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">String</span> tel<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token comment">//    是否在线</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token annotation punctuation">@TableField</span><span class="token punctuation">(</span>exist <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">Integer</span> online<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token comment">//    逻辑删除字段：标记当前记录是否被删除</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token comment">//    @TableLogic(value = "0",delval = "1")</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">Integer</span> deleted<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token annotation punctuation">@Version</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">Integer</span> version<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><ol start="3"><li>配置乐观锁拦截器实现锁机制对应的动态 SQL 语句拼装</li></ol><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token annotation punctuation">@SuppressWarnings</span><span class="token punctuation">(</span><span class="token string">"all"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token annotation punctuation">@Configuration</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MPConfig</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token annotation punctuation">@Bean</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token keyword">public</span> <span class="token class-name">MybatisPlusInterceptor</span> <span class="token function">getMybatisPlusInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token class-name">MybatisPlusInterceptor</span> m <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MybatisPlusInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        m<span class="token punctuation">.</span><span class="token function">addInnerInterceptor</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">PaginationInnerInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        m<span class="token punctuation">.</span><span class="token function">addInnerInterceptor</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">OptimisticLockerInnerInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token keyword">return</span> m<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><ol start="4"><li>测试代码</li></ol><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token annotation punctuation">@Test</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token keyword">void</span> <span class="token function">updateTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token class-name">Plusa</span> p <span class="token operator">=</span> plusMapper<span class="token punctuation">.</span><span class="token function">selectById</span><span class="token punctuation">(</span><span class="token number">3L</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//version = 2</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token class-name">Plusa</span> p1 <span class="token operator">=</span> plusMapper<span class="token punctuation">.</span><span class="token function">selectById</span><span class="token punctuation">(</span><span class="token number">3L</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 更新失败，因为当这个执行的时候 version 已经不是之前的了被修改过了</span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre>        p<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"张三aaa"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        <span class="token keyword">int</span> i <span class="token operator">=</span> plusMapper<span class="token punctuation">.</span><span class="token function">updateById</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>i <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token string">"更新成功"</span><span class="token operator">:</span><span class="token string">"更新失败"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre>        p1<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"张三bbb"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token keyword">int</span> i1 <span class="token operator">=</span> plusMapper<span class="token punctuation">.</span><span class="token function">updateById</span><span class="token punctuation">(</span>p1<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>i1 <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token string">"更新成功"</span><span class="token operator">:</span><span class="token string">"更新失败"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token constant">RUN</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token constant">JDBC</span> <span class="token class-name">Connection</span> <span class="token punctuation">[</span><span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span>cj<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span></span>ConnectionImpl</span><span class="token annotation punctuation">@325162e9</span><span class="token punctuation">]</span> will not be managed by <span class="token class-name">Spring</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token operator">==</span><span class="token operator">></span>  <span class="token class-name">Preparing</span><span class="token operator">:</span> <span class="token class-name">SELECT</span> id<span class="token punctuation">,</span>name<span class="token punctuation">,</span>password <span class="token class-name">AS</span> pwd<span class="token punctuation">,</span>age<span class="token punctuation">,</span>tel<span class="token punctuation">,</span>deleted<span class="token punctuation">,</span>version <span class="token constant">FROM</span> plus <span class="token class-name">WHERE</span> id<span class="token operator">=</span><span class="token operator">?</span> <span class="token class-name">AND</span> deleted<span class="token operator">=</span><span class="token number">0</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token operator">==</span><span class="token operator">></span> <span class="token class-name">Parameters</span><span class="token operator">:</span> <span class="token function">3</span><span class="token punctuation">(</span><span class="token class-name">Long</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token operator">&lt;=</span><span class="token operator">=</span>    <span class="token class-name">Columns</span><span class="token operator">:</span> id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> pwd<span class="token punctuation">,</span> age<span class="token punctuation">,</span> tel<span class="token punctuation">,</span> deleted<span class="token punctuation">,</span> version</pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token operator">&lt;=</span><span class="token operator">=</span>        <span class="token class-name">Row</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> 李四<span class="token punctuation">,</span> <span class="token number">123456</span><span class="token punctuation">,</span> <span class="token number">41</span><span class="token punctuation">,</span> <span class="token number">867862342</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token operator">&lt;=</span><span class="token operator">=</span>      <span class="token class-name">Total</span><span class="token operator">:</span> <span class="token number">1</span></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token class-name">Closing</span> non transactional <span class="token class-name">SqlSession</span> <span class="token punctuation">[</span><span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>session<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span></span>DefaultSqlSession</span><span class="token annotation punctuation">@23121d14</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token class-name">Creating</span> a <span class="token keyword">new</span> <span class="token class-name">SqlSession</span></pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token class-name">SqlSession</span> <span class="token punctuation">[</span><span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>session<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span></span>DefaultSqlSession</span><span class="token annotation punctuation">@6a8a551e</span><span class="token punctuation">]</span> was not registered <span class="token keyword">for</span> synchronization because synchronization is not active</pre></td></tr><tr><td data-num="24"></td><td><pre><span class="token constant">JDBC</span> <span class="token class-name">Connection</span> <span class="token punctuation">[</span><span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span>cj<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span></span>ConnectionImpl</span><span class="token annotation punctuation">@325162e9</span><span class="token punctuation">]</span> will not be managed by <span class="token class-name">Spring</span></pre></td></tr><tr><td data-num="25"></td><td><pre><span class="token operator">==</span><span class="token operator">></span>  <span class="token class-name">Preparing</span><span class="token operator">:</span> <span class="token constant">UPDATE</span> plus <span class="token class-name">SET</span> name<span class="token operator">=</span><span class="token operator">?</span><span class="token punctuation">,</span> password<span class="token operator">=</span><span class="token operator">?</span><span class="token punctuation">,</span> age<span class="token operator">=</span><span class="token operator">?</span><span class="token punctuation">,</span> tel<span class="token operator">=</span><span class="token operator">?</span><span class="token punctuation">,</span> version<span class="token operator">=</span><span class="token operator">?</span> <span class="token class-name">WHERE</span> id<span class="token operator">=</span><span class="token operator">?</span> <span class="token class-name">AND</span> version<span class="token operator">=</span><span class="token operator">?</span> <span class="token class-name">AND</span> deleted<span class="token operator">=</span><span class="token number">0</span></pre></td></tr><tr><td data-num="26"></td><td><pre><span class="token operator">==</span><span class="token operator">></span> <span class="token class-name">Parameters</span><span class="token operator">:</span> 张三<span class="token function">aaa</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">123456</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">41</span><span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">867862342</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">3</span><span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">3</span><span class="token punctuation">(</span><span class="token class-name">Long</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">2</span><span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="27"></td><td><pre><span class="token operator">&lt;=</span><span class="token operator">=</span>    <span class="token class-name">Updates</span><span class="token operator">:</span> <span class="token number">1</span></pre></td></tr><tr><td data-num="28"></td><td><pre><span class="token class-name">Closing</span> non transactional <span class="token class-name">SqlSession</span> <span class="token punctuation">[</span><span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>session<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span></span>DefaultSqlSession</span><span class="token annotation punctuation">@6a8a551e</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="29"></td><td><pre>更新成功</pre></td></tr><tr><td data-num="30"></td><td><pre><span class="token class-name">Creating</span> a <span class="token keyword">new</span> <span class="token class-name">SqlSession</span></pre></td></tr><tr><td data-num="31"></td><td><pre><span class="token class-name">SqlSession</span> <span class="token punctuation">[</span><span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>session<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span></span>DefaultSqlSession</span><span class="token annotation punctuation">@407b8435</span><span class="token punctuation">]</span> was not registered <span class="token keyword">for</span> synchronization because synchronization is not active</pre></td></tr><tr><td data-num="32"></td><td><pre><span class="token constant">JDBC</span> <span class="token class-name">Connection</span> <span class="token punctuation">[</span><span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span>cj<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span></span>ConnectionImpl</span><span class="token annotation punctuation">@325162e9</span><span class="token punctuation">]</span> will not be managed by <span class="token class-name">Spring</span></pre></td></tr><tr><td data-num="33"></td><td><pre><span class="token operator">==</span><span class="token operator">></span>  <span class="token class-name">Preparing</span><span class="token operator">:</span> <span class="token constant">UPDATE</span> plus <span class="token class-name">SET</span> name<span class="token operator">=</span><span class="token operator">?</span><span class="token punctuation">,</span> password<span class="token operator">=</span><span class="token operator">?</span><span class="token punctuation">,</span> age<span class="token operator">=</span><span class="token operator">?</span><span class="token punctuation">,</span> tel<span class="token operator">=</span><span class="token operator">?</span><span class="token punctuation">,</span> version<span class="token operator">=</span><span class="token operator">?</span> <span class="token class-name">WHERE</span> id<span class="token operator">=</span><span class="token operator">?</span> <span class="token class-name">AND</span> version<span class="token operator">=</span><span class="token operator">?</span> <span class="token class-name">AND</span> deleted<span class="token operator">=</span><span class="token number">0</span></pre></td></tr><tr><td data-num="34"></td><td><pre><span class="token operator">==</span><span class="token operator">></span> <span class="token class-name">Parameters</span><span class="token operator">:</span> 张三<span class="token function">bbb</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">123456</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">41</span><span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">867862342</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">3</span><span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">3</span><span class="token punctuation">(</span><span class="token class-name">Long</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">2</span><span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="35"></td><td><pre><span class="token operator">&lt;=</span><span class="token operator">=</span>    <span class="token class-name">Updates</span><span class="token operator">:</span> <span class="token number">0</span></pre></td></tr><tr><td data-num="36"></td><td><pre><span class="token class-name">Closing</span> non transactional <span class="token class-name">SqlSession</span> <span class="token punctuation">[</span><span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>session<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span></span>DefaultSqlSession</span><span class="token annotation punctuation">@407b8435</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="37"></td><td><pre>更新失败</pre></td></tr><tr><td data-num="38"></td><td><pre></pre></td></tr><tr><td data-num="39"></td><td><pre><span class="token class-name">Process</span> finished <span class="token keyword">with</span> <span class="token namespace">exit</span> code <span class="token number">0</span></pre></td></tr><tr><td data-num="40"></td><td><pre><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token constant">MYSQL</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span></pre></td></tr><tr><td data-num="41"></td><td><pre><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token class-name">Before</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span></pre></td></tr><tr><td data-num="42"></td><td><pre>mysql<span class="token operator">></span>  select <span class="token operator">*</span> from plus<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="43"></td><td><pre><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span></pre></td></tr><tr><td data-num="44"></td><td><pre><span class="token operator">|</span> id <span class="token operator">|</span> name    <span class="token operator">|</span> password <span class="token operator">|</span> age <span class="token operator">|</span> tel       <span class="token operator">|</span> deleted <span class="token operator">|</span> version <span class="token operator">|</span></pre></td></tr><tr><td data-num="45"></td><td><pre><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span></pre></td></tr><tr><td data-num="46"></td><td><pre><span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> 张三    <span class="token operator">|</span> 法外狂徒 <span class="token operator">|</span>   <span class="token number">3</span> <span class="token operator">|</span> <span class="token number">1122</span>      <span class="token operator">|</span>       <span class="token number">1</span> <span class="token operator">|</span>       <span class="token number">1</span> <span class="token operator">|</span></pre></td></tr><tr><td data-num="47"></td><td><pre><span class="token operator">|</span>  <span class="token number">2</span> <span class="token operator">|</span> 张三    <span class="token operator">|</span> 法外狂徒 <span class="token operator">|</span>   <span class="token number">4</span> <span class="token operator">|</span> <span class="token number">2233</span>      <span class="token operator">|</span>       <span class="token number">1</span> <span class="token operator">|</span>       <span class="token number">1</span> <span class="token operator">|</span></pre></td></tr><tr><td data-num="48"></td><td><pre><span class="token operator">|</span>  <span class="token number">3</span> <span class="token operator">|</span> 张三aaa <span class="token operator">|</span> <span class="token number">123456</span>   <span class="token operator">|</span>  <span class="token number">41</span> <span class="token operator">|</span> <span class="token number">867862342</span> <span class="token operator">|</span>       <span class="token number">0</span> <span class="token operator">|</span>       <span class="token number">2</span> <span class="token operator">|</span></pre></td></tr><tr><td data-num="49"></td><td><pre><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span></pre></td></tr><tr><td data-num="50"></td><td><pre><span class="token number">3</span> rows in set <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="51"></td><td><pre><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token class-name">After</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span></pre></td></tr><tr><td data-num="52"></td><td><pre>mysql<span class="token operator">></span>  select <span class="token operator">*</span> from plus<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="53"></td><td><pre><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span></pre></td></tr><tr><td data-num="54"></td><td><pre><span class="token operator">|</span> id <span class="token operator">|</span> name    <span class="token operator">|</span> password <span class="token operator">|</span> age <span class="token operator">|</span> tel       <span class="token operator">|</span> deleted <span class="token operator">|</span> version <span class="token operator">|</span></pre></td></tr><tr><td data-num="55"></td><td><pre><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span></pre></td></tr><tr><td data-num="56"></td><td><pre><span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> 张三    <span class="token operator">|</span> 法外狂徒 <span class="token operator">|</span>   <span class="token number">3</span> <span class="token operator">|</span> <span class="token number">1122</span>      <span class="token operator">|</span>       <span class="token number">1</span> <span class="token operator">|</span>       <span class="token number">1</span> <span class="token operator">|</span></pre></td></tr><tr><td data-num="57"></td><td><pre><span class="token operator">|</span>  <span class="token number">2</span> <span class="token operator">|</span> 张三    <span class="token operator">|</span> 法外狂徒 <span class="token operator">|</span>   <span class="token number">4</span> <span class="token operator">|</span> <span class="token number">2233</span>      <span class="token operator">|</span>       <span class="token number">1</span> <span class="token operator">|</span>       <span class="token number">1</span> <span class="token operator">|</span></pre></td></tr><tr><td data-num="58"></td><td><pre><span class="token operator">|</span>  <span class="token number">3</span> <span class="token operator">|</span> 张三aaa <span class="token operator">|</span> <span class="token number">123456</span>   <span class="token operator">|</span>  <span class="token number">41</span> <span class="token operator">|</span> <span class="token number">867862342</span> <span class="token operator">|</span>       <span class="token number">0</span> <span class="token operator">|</span>       <span class="token number">3</span> <span class="token operator">|</span></pre></td></tr><tr><td data-num="59"></td><td><pre><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span></pre></td></tr><tr><td data-num="60"></td><td><pre><span class="token number">3</span> rows in set <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span></pre></td></tr></table></figure><ol start="5"><li>使用乐观锁机制在修改前必须先获取到对应数据的 version 方可正常进行</li></ol><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token annotation punctuation">@Test</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token keyword">void</span> <span class="token function">arTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">//        先通过 id 查询出一行数据，也获取到 version 的数据</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token class-name">Plusa</span> p <span class="token operator">=</span> plusMapper<span class="token punctuation">.</span><span class="token function">selectById</span><span class="token punctuation">(</span><span class="token number">3L</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        p<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"刘桑"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">//        再进行修改的操作此时对象中 setName 对 name 进行了修改而查询中也查出一行的数据其中 包含了 version 没有 version 就会报错</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        <span class="token keyword">int</span> i <span class="token operator">=</span> plusMapper<span class="token punctuation">.</span><span class="token function">updateById</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>i <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token string">"更新成功"</span><span class="token operator">:</span><span class="token string">"更新失败"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token constant">RUN</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token constant">JDBC</span> <span class="token class-name">Connection</span> <span class="token punctuation">[</span><span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span>cj<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span></span>ConnectionImpl</span><span class="token annotation punctuation">@2365ea38</span><span class="token punctuation">]</span> will not be managed by <span class="token class-name">Spring</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token operator">==</span><span class="token operator">></span>  <span class="token class-name">Preparing</span><span class="token operator">:</span> <span class="token class-name">SELECT</span> id<span class="token punctuation">,</span>name<span class="token punctuation">,</span>password <span class="token class-name">AS</span> pwd<span class="token punctuation">,</span>age<span class="token punctuation">,</span>tel<span class="token punctuation">,</span>deleted<span class="token punctuation">,</span>version <span class="token constant">FROM</span> plus <span class="token class-name">WHERE</span> id<span class="token operator">=</span><span class="token operator">?</span> <span class="token class-name">AND</span> deleted<span class="token operator">=</span><span class="token number">0</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token operator">==</span><span class="token operator">></span> <span class="token class-name">Parameters</span><span class="token operator">:</span> <span class="token function">3</span><span class="token punctuation">(</span><span class="token class-name">Long</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token operator">&lt;=</span><span class="token operator">=</span>    <span class="token class-name">Columns</span><span class="token operator">:</span> id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> pwd<span class="token punctuation">,</span> age<span class="token punctuation">,</span> tel<span class="token punctuation">,</span> deleted<span class="token punctuation">,</span> version</pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token operator">&lt;=</span><span class="token operator">=</span>        <span class="token class-name">Row</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> 张三aaa<span class="token punctuation">,</span> <span class="token number">123456</span><span class="token punctuation">,</span> <span class="token number">41</span><span class="token punctuation">,</span> <span class="token number">867862342</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">3</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token operator">&lt;=</span><span class="token operator">=</span>      <span class="token class-name">Total</span><span class="token operator">:</span> <span class="token number">1</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token class-name">Closing</span> non transactional <span class="token class-name">SqlSession</span> <span class="token punctuation">[</span><span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>session<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span></span>DefaultSqlSession</span><span class="token annotation punctuation">@6df4af5</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token class-name">Creating</span> a <span class="token keyword">new</span> <span class="token class-name">SqlSession</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token class-name">SqlSession</span> <span class="token punctuation">[</span><span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>session<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span></span>DefaultSqlSession</span><span class="token annotation punctuation">@7cd5fcf4</span><span class="token punctuation">]</span> was not registered <span class="token keyword">for</span> synchronization because synchronization is not active</pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token constant">JDBC</span> <span class="token class-name">Connection</span> <span class="token punctuation">[</span><span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span>cj<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span></span>ConnectionImpl</span><span class="token annotation punctuation">@2365ea38</span><span class="token punctuation">]</span> will not be managed by <span class="token class-name">Spring</span></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token operator">==</span><span class="token operator">></span>  <span class="token class-name">Preparing</span><span class="token operator">:</span> <span class="token constant">UPDATE</span> plus <span class="token class-name">SET</span> name<span class="token operator">=</span><span class="token operator">?</span><span class="token punctuation">,</span> password<span class="token operator">=</span><span class="token operator">?</span><span class="token punctuation">,</span> age<span class="token operator">=</span><span class="token operator">?</span><span class="token punctuation">,</span> tel<span class="token operator">=</span><span class="token operator">?</span><span class="token punctuation">,</span> version<span class="token operator">=</span><span class="token operator">?</span> <span class="token class-name">WHERE</span> id<span class="token operator">=</span><span class="token operator">?</span> <span class="token class-name">AND</span> version<span class="token operator">=</span><span class="token operator">?</span> <span class="token class-name">AND</span> deleted<span class="token operator">=</span><span class="token number">0</span></pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token operator">==</span><span class="token operator">></span> <span class="token class-name">Parameters</span><span class="token operator">:</span> 刘桑<span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">123456</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">41</span><span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">867862342</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">4</span><span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">3</span><span class="token punctuation">(</span><span class="token class-name">Long</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">3</span><span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token operator">&lt;=</span><span class="token operator">=</span>    <span class="token class-name">Updates</span><span class="token operator">:</span> <span class="token number">1</span></pre></td></tr><tr><td data-num="24"></td><td><pre><span class="token class-name">Closing</span> non transactional <span class="token class-name">SqlSession</span> <span class="token punctuation">[</span><span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>session<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span></span>DefaultSqlSession</span><span class="token annotation punctuation">@7cd5fcf4</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="25"></td><td><pre>更新成功</pre></td></tr><tr><td data-num="26"></td><td><pre></pre></td></tr><tr><td data-num="27"></td><td><pre><span class="token class-name">Process</span> finished <span class="token keyword">with</span> <span class="token namespace">exit</span> code <span class="token number">0</span></pre></td></tr></table></figure><p><strong>执行修改前执行查询语句:</strong></p><pre><code>==&gt;  Preparing: SELECT id,name,password AS pwd,age,tel,deleted,version FROM plus WHERE id=? AND deleted=0
</code></pre><p><strong>执行修改时使用 version 字段作为乐观锁检查依据</strong></p><pre><code>==&gt;  Preparing: UPDATE plus SET name=?, password=?, age=?, tel=?, version=? WHERE id=? AND version=? AND deleted=0
</code></pre><ul><li>每个人拿到的锁是不一样的，只有自己的那个版本操作完后让版本叠加，下一个人才可以进行操作</li></ul><h3 id="需要注意的两点"><a class="anchor" href="#需要注意的两点">#</a> 需要注意的两点</h3><p><img data-src="https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202310040855207.png" alt="image-20230313185146185"></p><h2 id="快速开发"><a class="anchor" href="#快速开发">#</a> 快速开发</h2><h3 id="代码生成器"><a class="anchor" href="#代码生成器">#</a> 代码生成器</h3><p>比如造句:</p><p><img data-src="https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202310040855274.png" alt="image_2023-03-13-18-56-08"></p><p>用它原始提供的信息加自己填入的内容是不是就可以组成一个新的句子</p><p><img data-src="https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202310040855294.png" alt="image_2023-03-13-19-22-26"></p><p><img data-src="https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202310040855897.png" alt="image_2023-03-13-19-24-05"></p><p><img data-src="https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202310040855187.png" alt="image_2023-03-13-19-23-16"></p><p><img data-src="https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202310040855022.png" alt="image_2023-03-13-19-24-52"></p><ul><li><p>模板：MyBatisPlus 提供</p></li><li><p>数据库相关配置：读取数据库获取信息</p></li><li><p>开发者自定义配置：手工配置</p></li></ul><h3 id="代码生成器-2"><a class="anchor" href="#代码生成器-2">#</a> 代码生成器</h3><figure class="highlight xml"><figcaption data-lang="XML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">&lt;!--    模板引擎 --></span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.apache.velocity<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>velocity-engine-core<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>2.3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment">&lt;!--    代码生成器 --></span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="9"></td><td><pre>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.baomidou<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="10"></td><td><pre>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>mybatis-plus-generator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="11"></td><td><pre>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>3.4.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><ul><li>创建代码生成器核心代码类</li></ul><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">DbType</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">IdType</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>generator<span class="token punctuation">.</span></span><span class="token class-name">AutoGenerator</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>generator<span class="token punctuation">.</span>config<span class="token punctuation">.</span></span><span class="token class-name">DataSourceConfig</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>generator<span class="token punctuation">.</span>config<span class="token punctuation">.</span></span><span class="token class-name">GlobalConfig</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>generator<span class="token punctuation">.</span>config<span class="token punctuation">.</span></span><span class="token class-name">PackageConfig</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>generator<span class="token punctuation">.</span>config<span class="token punctuation">.</span></span><span class="token class-name">StrategyConfig</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>generator<span class="token punctuation">.</span>config<span class="token punctuation">.</span>rules<span class="token punctuation">.</span></span><span class="token class-name">NamingStrategy</span></span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token annotation punctuation">@SuppressWarnings</span><span class="token punctuation">(</span><span class="token string">"all"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CodeGet</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        <span class="token comment">// 创建代码生成器对象</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        <span class="token class-name">AutoGenerator</span> autogenerator <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AutoGenerator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        <span class="token class-name">DataSourceConfig</span> d <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DataSourceConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        d<span class="token punctuation">.</span><span class="token function">setDriverName</span><span class="token punctuation">(</span><span class="token string">"com.mysql.cj.jdbc.Driver"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        <span class="token comment">// 记得更改自己的数据信息否则会报错</span></pre></td></tr><tr><td data-num="18"></td><td><pre>        d<span class="token punctuation">.</span><span class="token function">setUrl</span><span class="token punctuation">(</span><span class="token string">"jdbc:mysql://localhost:3306/?characterEncoding=utf-8&amp;serverTimezone=UTC&amp;useUnicode=true"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>        d<span class="token punctuation">.</span><span class="token function">setUsername</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>        d<span class="token punctuation">.</span><span class="token function">setPassword</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>        d<span class="token punctuation">.</span><span class="token function">setDbType</span><span class="token punctuation">(</span><span class="token class-name">DbType</span><span class="token punctuation">.</span><span class="token constant">MYSQL</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>        autogenerator<span class="token punctuation">.</span><span class="token function">setDataSource</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>        <span class="token comment">// 设置全局配置</span></pre></td></tr><tr><td data-num="24"></td><td><pre>        <span class="token class-name">GlobalConfig</span> globalConfig <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GlobalConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>        <span class="token class-name">String</span> projectPath <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">"user.dir"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>projectPath<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>        globalConfig<span class="token punctuation">.</span><span class="token function">setOutputDir</span><span class="token punctuation">(</span>projectPath<span class="token operator">+</span><span class="token string">"\\src\\main\\java"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>        globalConfig<span class="token punctuation">.</span><span class="token function">setOpen</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 设置生成完毕后是否打开生成代码所在位置</span></pre></td></tr><tr><td data-num="29"></td><td><pre>        globalConfig<span class="token punctuation">.</span><span class="token function">setAuthor</span><span class="token punctuation">(</span><span class="token string">"dkx"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 设置作者</span></pre></td></tr><tr><td data-num="30"></td><td><pre>        globalConfig<span class="token punctuation">.</span><span class="token function">setFileOverride</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 设置是否覆盖原始生成的文件</span></pre></td></tr><tr><td data-num="31"></td><td><pre>        globalConfig<span class="token punctuation">.</span><span class="token function">setMapperName</span><span class="token punctuation">(</span><span class="token string">"%sMapper"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 设置数据层接口名 % s 为占位符，指代模块名称</span></pre></td></tr><tr><td data-num="32"></td><td><pre>        globalConfig<span class="token punctuation">.</span><span class="token function">setServiceName</span><span class="token punctuation">(</span><span class="token string">"%sService"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>        globalConfig<span class="token punctuation">.</span><span class="token function">setIdType</span><span class="token punctuation">(</span><span class="token class-name">IdType</span><span class="token punctuation">.</span><span class="token constant">AUTO</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 设置 Id 生成策略</span></pre></td></tr><tr><td data-num="34"></td><td><pre>        autogenerator<span class="token punctuation">.</span><span class="token function">setGlobalConfig</span><span class="token punctuation">(</span>globalConfig<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>        <span class="token comment">// 设置包名相关配置</span></pre></td></tr><tr><td data-num="36"></td><td><pre>        <span class="token class-name">PackageConfig</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PackageConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="37"></td><td><pre>        p<span class="token punctuation">.</span><span class="token function">setParent</span><span class="token punctuation">(</span><span class="token string">"com.dkx"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 设置生成的包名，与代码所在位置不冲突，二者叠加组成完整路径</span></pre></td></tr><tr><td data-num="38"></td><td><pre>        p<span class="token punctuation">.</span><span class="token function">setModuleName</span><span class="token punctuation">(</span><span class="token string">"system"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 模块名</span></pre></td></tr><tr><td data-num="39"></td><td><pre>        p<span class="token punctuation">.</span><span class="token function">setController</span><span class="token punctuation">(</span><span class="token string">"controller"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="40"></td><td><pre>        p<span class="token punctuation">.</span><span class="token function">setEntity</span><span class="token punctuation">(</span><span class="token string">"domain"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 设置实体类包名</span></pre></td></tr><tr><td data-num="41"></td><td><pre>        p<span class="token punctuation">.</span><span class="token function">setService</span><span class="token punctuation">(</span><span class="token string">"service"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="42"></td><td><pre>        p<span class="token punctuation">.</span><span class="token function">setMapper</span><span class="token punctuation">(</span><span class="token string">"mapper"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 设置数据层包名</span></pre></td></tr><tr><td data-num="43"></td><td><pre>        autogenerator<span class="token punctuation">.</span><span class="token function">setPackageInfo</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="44"></td><td><pre></pre></td></tr><tr><td data-num="45"></td><td><pre>        <span class="token class-name">StrategyConfig</span> s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StrategyConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="46"></td><td><pre>        <span class="token comment">// 指定生成哪个表</span></pre></td></tr><tr><td data-num="47"></td><td><pre>        <span class="token comment">// s.setInclude("");</span></pre></td></tr><tr><td data-num="48"></td><td><pre>        <span class="token comment">// 表名的生成策略：下划线转驼峰 pms_product -- PmsProduct</span></pre></td></tr><tr><td data-num="49"></td><td><pre>        s<span class="token punctuation">.</span><span class="token function">setNaming</span><span class="token punctuation">(</span><span class="token class-name">NamingStrategy</span><span class="token punctuation">.</span>underline_to_camel<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="50"></td><td><pre>        <span class="token comment">// 列名的生成策略： 下划线转驼峰 last_name -- lastName</span></pre></td></tr><tr><td data-num="51"></td><td><pre>        s<span class="token punctuation">.</span><span class="token function">setColumnNaming</span><span class="token punctuation">(</span><span class="token class-name">NamingStrategy</span><span class="token punctuation">.</span>underline_to_camel<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="52"></td><td><pre>        s<span class="token punctuation">.</span><span class="token function">setTablePrefix</span><span class="token punctuation">(</span><span class="token string">"tbl_"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 设置当前参与生成的表名，参数为可变参数</span></pre></td></tr><tr><td data-num="53"></td><td><pre>        s<span class="token punctuation">.</span><span class="token function">setRestControllerStyle</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 设置数据库表的前缀名称，模块名 = 数据库表名 - 前缀名</span></pre></td></tr><tr><td data-num="54"></td><td><pre>        s<span class="token punctuation">.</span><span class="token function">setVersionFieldName</span><span class="token punctuation">(</span><span class="token string">"version"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 设置乐观锁字段名</span></pre></td></tr><tr><td data-num="55"></td><td><pre>        s<span class="token punctuation">.</span><span class="token function">setLogicDeleteFieldName</span><span class="token punctuation">(</span><span class="token string">"deleted"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 设置逻辑删除字段名</span></pre></td></tr><tr><td data-num="56"></td><td><pre>        s<span class="token punctuation">.</span><span class="token function">setEntityLombokModel</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 设置是否启用 lombok</span></pre></td></tr><tr><td data-num="57"></td><td><pre>        autogenerator<span class="token punctuation">.</span><span class="token function">setStrategy</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="58"></td><td><pre>        autogenerator<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="59"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="60"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="代码生成可能遇到的问题"><a class="anchor" href="#代码生成可能遇到的问题">#</a> 代码生成可能遇到的问题</h3><p>报错信息：</p><p><img data-src="https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202309062124108.png" alt="image-20230906212420817"></p><p>解决方式：</p><p><img data-src="https://raw.githubusercontent.com/PigPigLetsGo/imeages/master/202309062124408.png" alt="image-20230906212435239"></p><p>去掉对钩即可解决。</p><div class="tags"><a href="/tags/springboot/" rel="tag"><i class="ic i-tag"></i> springboot</a> <a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%AD%A6%E7%A7%91/" rel="tag"><i class="ic i-tag"></i> 计算机学科</a> <a href="/tags/SSM/" rel="tag"><i class="ic i-tag"></i> SSM</a> <a href="/tags/%E6%95%B4%E5%90%88jar%E5%8C%85/" rel="tag"><i class="ic i-tag"></i> 整合jar包</a></div></div><footer><div class="meta"><span class="item"><span class="icon"><i class="ic i-calendar-check"></i> </span><span class="text">更新于</span> <time title="修改时间：2024-03-24 12:40:29" itemprop="dateModified" datetime="2024-03-24T12:40:29+08:00">2024-03-24</time> </span><span id="computer-science/java/spring/springboot/整合jar包/SpringBoot整合第三方技术/" class="item leancloud_visitors" data-flag-title="SpringBoot 整合第三方技术 [代码生成]" title="阅读次数"><span class="icon"><i class="ic i-eye"></i> </span><span class="text">阅读次数</span> <span class="leancloud-visitors-count"></span> <span class="text">次</span></span></div><div class="reward"><button><i class="ic i-heartbeat"></i> 赞赏</button><p>请我喝[茶]~(￣▽￣)~*</p><div id="qr"><div><img data-src="/images/wechatpay.png" alt="D 微信支付"><p>微信支付</p></div><div><img data-src="/images/alipay.png" alt="D 支付宝"><p>支付宝</p></div><div><img data-src="/images/paypal.png" alt="D 贝宝"><p>贝宝</p></div></div></div><div id="copyright"><ul><li class="author"><strong>Dkx： </strong>D <i class="ic i-at"><em>@</em></i>D の Java</li><li class="link"><strong>本文链接：</strong> <a href="https://pigpigletsgo.github.io/computer-science/java/spring/springboot/%E6%95%B4%E5%90%88jar%E5%8C%85/SpringBoot%E6%95%B4%E5%90%88%E7%AC%AC%E4%B8%89%E6%96%B9%E6%8A%80%E6%9C%AF/" title="SpringBoot 整合第三方技术 [代码生成]">https://pigpigletsgo.github.io/computer-science/java/spring/springboot/整合jar包/SpringBoot整合第三方技术/</a></li><li class="license"><strong>版权声明： </strong>本站所有文章除特别声明外，均采用 <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> 许可协议。转载请注明出处！</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/computer-science/java/spring/%E6%95%B4%E5%90%88jar%E5%8C%85/Spring%E6%95%B4%E5%90%88MyBatis/" itemprop="url" rel="prev" data-background-image="https:&#x2F;&#x2F;img.timelessq.com&#x2F;images&#x2F;2022&#x2F;07&#x2F;26&#x2F;6a834199cae04e75c335d444704c2060.jpg" title="Spring整合MyBatis"><span class="type">上一篇</span> <span class="category"><i class="ic i-flag"></i> 整合 jar 包</span><h3>Spring整合MyBatis</h3></a></div><div class="item right"><a href="/computer-science/java/%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93/Thymeleaf/" itemprop="url" rel="next" data-background-image="https:&#x2F;&#x2F;img.timelessq.com&#x2F;images&#x2F;2022&#x2F;07&#x2F;26&#x2F;560306a4274d1fc26eb475dd52237387.jpg" title="Thymeleaf"><span class="type">下一篇</span> <span class="category"><i class="ic i-flag"></i> 第三方库</span><h3>Thymeleaf</h3></a></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="文章目录"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%95%B4%E5%90%88junit"><span class="toc-number">1.</span> <span class="toc-text">整合 Junit</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#springboottest"><span class="toc-number">1.1.</span> <span class="toc-text">@SpringBootTest</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8C%87%E5%AE%9A%E5%90%AF%E5%8A%A8%E7%B1%BB%E5%8F%82%E6%95%B0"><span class="toc-number">1.2.</span> <span class="toc-text">指定启动类参数</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#springboot%E6%95%B4%E5%90%88ssm"><span class="toc-number">2.</span> <span class="toc-text">SpringBoot 整合 SSM</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#springboot%E6%95%B4%E5%90%88mybatis%E4%B8%BB%E8%A6%81"><span class="toc-number">2.1.</span> <span class="toc-text">SpringBoot 整合 MyBatis (主要)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E6%AD%A5%E9%AA%A4"><span class="toc-number">2.1.1.</span> <span class="toc-text">创建步骤</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#mapper"><span class="toc-number">2.2.</span> <span class="toc-text">@Mapper</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#mapperscan"><span class="toc-number">2.3.</span> <span class="toc-text">@MapperScan</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8Espringboot%E7%9A%84ssm%E6%95%B4%E5%90%88%E6%A1%88%E4%BE%8B"><span class="toc-number">2.4.</span> <span class="toc-text">基于 SpringBoot 的 SSM 整合案例</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%80%E5%90%AF%E6%97%A5%E5%BF%97"><span class="toc-number">2.5.</span> <span class="toc-text">开启日志</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#dql%E7%BC%96%E7%A8%8B%E6%8E%A7%E5%88%B6"><span class="toc-number">2.6.</span> <span class="toc-text">DQL 编程控制</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9D%A1%E4%BB%B6%E6%9F%A5%E8%AF%A2-%E8%AE%BE%E7%BD%AE%E6%9F%A5%E8%AF%A2%E6%9D%A1%E4%BB%B6"><span class="toc-number">2.6.1.</span> <span class="toc-text">条件查询 -- 设置查询条件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9D%A1%E4%BB%B6%E6%9F%A5%E8%AF%A2-null%E5%80%BC%E5%A4%84%E7%90%86"><span class="toc-number">2.6.2.</span> <span class="toc-text">条件查询 --null 值处理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E6%8A%95%E5%BD%B1"><span class="toc-number">2.6.3.</span> <span class="toc-text">查询投影</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E6%9D%A1%E4%BB%B6"><span class="toc-number">2.6.4.</span> <span class="toc-text">查询条件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%97%E6%AE%B5%E6%98%A0%E5%B0%84%E4%B8%8E%E8%A1%A8%E5%90%8D%E6%98%A0%E5%B0%84"><span class="toc-number">2.7.</span> <span class="toc-text">字段映射与表名映射</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%97%AE%E9%A2%98%E4%B8%80%E8%A1%A8%E5%AD%97%E6%AE%B5%E4%B8%8E%E7%BC%96%E7%A0%81%E5%B1%9E%E6%80%A7%E8%AE%BE%E8%AE%A1%E4%B8%8D%E5%90%8C%E6%AD%A5"><span class="toc-number">2.7.1.</span> <span class="toc-text">问题一：表字段与编码属性设计不同步</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#tablefield"><span class="toc-number">2.7.2.</span> <span class="toc-text">@TableField</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%97%AE%E9%A2%98%E4%BA%8C%E7%BC%96%E7%A0%81%E4%B8%AD%E6%B7%BB%E5%8A%A0%E4%BA%86%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%AD%E6%9C%AA%E5%AE%9A%E4%B9%89%E7%9A%84%E5%B1%9E%E6%80%A7"><span class="toc-number">2.7.3.</span> <span class="toc-text">问题二：编码中添加了数据库中未定义的属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#tablefield-2"><span class="toc-number">2.7.4.</span> <span class="toc-text">@TableField</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%97%AE%E9%A2%98%E4%B8%89%E9%87%87%E7%94%A8%E9%BB%98%E8%AE%A4%E6%9F%A5%E8%AF%A2%E5%BC%80%E6%94%BE%E4%BA%86%E6%9B%B4%E5%A4%9A%E7%9A%84%E5%AD%97%E6%AE%B5%E6%9F%A5%E7%9C%8B%E6%9D%83%E9%99%90"><span class="toc-number">2.7.5.</span> <span class="toc-text">问题三：采用默认查询开放了更多的字段查看权限</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#tablefield%E8%AE%BE%E7%BD%AE%E5%AD%97%E6%AE%B5%E4%B8%8D%E5%8F%82%E4%B8%8E%E6%9F%A5%E8%AF%A2"><span class="toc-number">2.7.6.</span> <span class="toc-text">@TableField 设置字段不参与查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%97%AE%E9%A2%98%E5%9B%9B%E8%A1%A8%E5%90%8D%E4%B8%8E%E7%BC%96%E7%A0%81%E5%BC%80%E5%8F%91%E8%AE%BE%E8%AE%A1%E4%B8%8D%E5%90%8C%E6%AD%A5"><span class="toc-number">2.7.7.</span> <span class="toc-text">问题四：表名与编码开发设计不同步</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#tablename"><span class="toc-number">2.7.8.</span> <span class="toc-text">@TableName</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#dml%E7%BC%96%E7%A8%8B%E6%8E%A7%E5%88%B6"><span class="toc-number">2.8.</span> <span class="toc-text">DML 编程控制</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#tableid"><span class="toc-number">2.8.1.</span> <span class="toc-text">@TableId</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#auto"><span class="toc-number">2.8.2.</span> <span class="toc-text">AUTO</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#input"><span class="toc-number">2.8.3.</span> <span class="toc-text">INPUT</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#none"><span class="toc-number">2.8.4.</span> <span class="toc-text">NONE</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#assign_id"><span class="toc-number">2.8.5.</span> <span class="toc-text">ASSIGN_ID</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#assign_uuid"><span class="toc-number">2.8.6.</span> <span class="toc-text">ASSIGN_UUID</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#yml%E4%B8%AD%E8%AE%BE%E7%BD%AE%E5%85%A8%E5%B1%80%E9%85%8D%E7%BD%AEid%E7%94%9F%E6%88%90%E7%AD%96%E7%95%A5"><span class="toc-number">2.8.7.</span> <span class="toc-text">yml 中设置全局配置 id 生成策略</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%9A%E8%AE%B0%E5%BD%95%E6%93%8D%E4%BD%9C"><span class="toc-number">2.8.8.</span> <span class="toc-text">多记录操作</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#delete"><span class="toc-number">2.8.8.1.</span> <span class="toc-text">Delete</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#select"><span class="toc-number">2.8.8.2.</span> <span class="toc-text">Select</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%BB%E8%BE%91%E5%88%A0%E9%99%A4"><span class="toc-number">2.8.9.</span> <span class="toc-text">逻辑删除</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B9%90%E8%A7%82%E9%94%81"><span class="toc-number">2.9.</span> <span class="toc-text">乐观锁</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9C%80%E8%A6%81%E6%B3%A8%E6%84%8F%E7%9A%84%E4%B8%A4%E7%82%B9"><span class="toc-number">2.9.1.</span> <span class="toc-text">需要注意的两点</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BF%AB%E9%80%9F%E5%BC%80%E5%8F%91"><span class="toc-number">2.10.</span> <span class="toc-text">快速开发</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%E5%99%A8"><span class="toc-number">2.10.1.</span> <span class="toc-text">代码生成器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%E5%99%A8-2"><span class="toc-number">2.10.2.</span> <span class="toc-text">代码生成器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%E5%8F%AF%E8%83%BD%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-number">2.10.3.</span> <span class="toc-text">代码生成可能遇到的问题</span></a></li></ol></li></ol></li></ol></div><div class="related panel pjax" data-title="系列文章"><ul><li><a href="/computer-science/java/spring/springboot/%E6%95%B4%E5%90%88jar%E5%8C%85/SpringBoot%E6%95%B4%E5%90%88Knife4j/" rel="bookmark" title="SpringBoot整合Knife4j">SpringBoot整合Knife4j</a></li><li><a href="/computer-science/java/spring/springboot/%E6%95%B4%E5%90%88jar%E5%8C%85/JSR303%E6%A0%A1%E9%AA%8C/" rel="bookmark" title="JSR303校验">JSR303校验</a></li><li class="active"><a href="/computer-science/java/spring/springboot/%E6%95%B4%E5%90%88jar%E5%8C%85/SpringBoot%E6%95%B4%E5%90%88%E7%AC%AC%E4%B8%89%E6%96%B9%E6%8A%80%E6%9C%AF/" rel="bookmark" title="SpringBoot整合第三方技术[代码生成]">SpringBoot整合第三方技术[代码生成]</a></li><li><a href="/computer-science/java/spring/springboot/%E6%95%B4%E5%90%88jar%E5%8C%85/Sprong-boot-devtools/" rel="bookmark" title="Sprong-boot-devtools">Sprong-boot-devtools</a></li></ul></div><div class="overview panel" data-title="站点概览"><div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="D" data-src="/images/avatar.jpg"><p class="name" itemprop="name">D</p><div class="description" itemprop="description">欢迎来我的博客空间</div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">498</span> <span class="name">文章</span></a></div><div class="item categories"><a href="/categories/"><span class="count">126</span> <span class="name">分类</span></a></div><div class="item tags"><a href="/tags/"><span class="count">158</span> <span class="name">标签</span></a></div></nav><div class="social"><span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL1BpZ1BpZ0xldHNHbw==" title="https:&#x2F;&#x2F;github.com&#x2F;PigPigLetsGo"><i class="ic i-github"></i></span> <span class="exturl item twitter" data-url="aHR0cHM6Ly90d2l0dGVyLmNvbS9Ea3gxMjE5" title="https:&#x2F;&#x2F;twitter.com&#x2F;Dkx1219"><i class="ic i-twitter"></i></span> <span class="exturl item zhihu" data-url="aHR0cHM6Ly93d3cuemhpaHUuY29tL3Blb3BsZS96dWktaG91LXllLWJlaS1sdWUtc2hh" title="https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;zui-hou-ye-bei-lue-sha"><i class="ic i-zhihu"></i></span> <span class="exturl item music" data-url="aHR0cHM6Ly9tdXNpYy4xNjMuY29tLyMvdXNlci9ob21lP2lkPTU3NjUxMDQ1OQ==" title="https:&#x2F;&#x2F;music.163.com&#x2F;#&#x2F;user&#x2F;home?id&#x3D;576510459"><i class="ic i-cloud-music"></i></span> <span class="exturl item weibo" data-url="aHR0cHM6Ly93d3cud2VpYm8uY29tL3UvNTk5OTU0OTg0MQ==" title="https:&#x2F;&#x2F;www.weibo.com&#x2F;u&#x2F;5999549841"><i class="ic i-weibo"></i></span> <span class="exturl item facebook" data-url="aHR0cHM6Ly93d3cuZmFjZWJvb2suY29tL3Byb2ZpbGUucGhwP2lkPTEwMDA5NDA4Nzc0ODIwMQ==" title="https:&#x2F;&#x2F;www.facebook.com&#x2F;profile.php?id&#x3D;100094087748201"><i class="ic i-facebook"></i></span> <span class="exturl item stackoverflow" data-url="aHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS91c2Vycy8xOTQwNjAyOS9kLWt4" title="https:&#x2F;&#x2F;stackoverflow.com&#x2F;users&#x2F;19406029&#x2F;d-kx"><i class="ic i-stack-overflow"></i></span> <span class="exturl item youtube" data-url="aHR0cHM6Ly93d3cueW91dHViZS5jb20vQERreC12djdsbQ==" title="https:&#x2F;&#x2F;www.youtube.com&#x2F;@Dkx-vv7lm"><i class="ic i-youtube"></i></span> <span class="exturl item instagram" data-url="aHR0cHM6Ly93d3cuaW5zdGFncmFtLmNvbS9kb3Vka3g/aWdzaD1PR1E1WkRjMk9EazJaQSUzRCUzRCZ1dG1fc291cmNlPXFy" title="https:&#x2F;&#x2F;www.instagram.com&#x2F;doudkx?igsh&#x3D;OGQ5ZDc2ODk2ZA%3D%3D&amp;utm_source&#x3D;qr"><i class="ic i-instagram"></i></span> <span class="exturl item paper-plane" data-url="aHR0cHM6Ly90Lm1lL2RvdTAxMDg=" title="https:&#x2F;&#x2F;t.me&#x2F;dou0108"><i class="ic i-paper-plane"></i></span> <span class="exturl item skype" data-url="aHR0cHM6Ly9qb2luLnNreXBlLmNvbS9UN25TSWhvbmMxcWQ=" title="https:&#x2F;&#x2F;join.skype.com&#x2F;T7nSIhonc1qd"><i class="ic i-skype"></i></span></div><ul class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>首页</a></li><li class="item"><a href="/about/" rel="section"><i class="ic i-user"></i>关于</a></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-feather"></i>文章</a><ul class="submenu"><li class="item"><a href="/archives/" rel="section"><i class="ic i-list-alt"></i>归档</a></li><li class="item"><a href="/categories/" rel="section"><i class="ic i-th"></i>分类</a></li><li class="item"><a href="/tags/" rel="section"><i class="ic i-tags"></i>标签</a></li></ul></li><li class="item"><a href="/friends/" rel="section"><i class="ic i-heart"></i>友達</a></li><li class="item"><a href="/links/" rel="section"><i class="ic i-magic"></i>链接</a></li></ul></div></div></div><ul id="quick"><li class="prev pjax"><a href="/computer-science/java/spring/%E6%95%B4%E5%90%88jar%E5%8C%85/Spring%E6%95%B4%E5%90%88MyBatis/" rel="prev" title="上一篇"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/computer-science/java/%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93/Thymeleaf/" rel="next" title="下一篇"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"><div class="rpost pjax"><h2>随机文章</h2><ul><li class="item"><div class="breadcrumb"><a href="/categories/bug/" title="分类于 问题总汇">问题总汇</a></div><span><a href="/bug/ClassNotFoundException/" title="java.lang.ClassNotFoundException:javax.xml.bind.DatatypeConverter">java.lang.ClassNotFoundException:javax.xml.bind.DatatypeConverter</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/bug/" title="分类于 问题总汇">问题总汇</a></div><span><a href="/bug/SQLSyntaxErrorException-Unknown-column-pwd-in-field-list/" title="SQLSyntaxErrorException-Unknown-column-pwd-in-field-list">SQLSyntaxErrorException-Unknown-column-pwd-in-field-list</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于 计算机学科">计算机学科</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/linux/" title="分类于 linux">linux</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/linux/shell%E7%BC%96%E7%A8%8B/" title="分类于 shell 编程">shell 编程</a></div><span><a href="/computer-science/linux/shell%E7%BC%96%E7%A8%8B/%E5%85%A5%E9%97%A8/" title="shell编程入门">shell编程入门</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于 计算机学科">计算机学科</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/java/" title="分类于 java">java</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/java/data-structures-and-algorithms/" title="分类于 数据结构与算法">数据结构与算法</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/java/data-structures-and-algorithms/%E4%BC%98%E5%85%88%E7%BA%A7%E9%98%9F%E5%88%97/" title="分类于 优先级队列">优先级队列</a></div><span><a href="/computer-science/java/data-structures-and-algorithms/%E4%BC%98%E5%85%88%E7%BA%A7%E9%98%9F%E5%88%97/%E4%BC%98%E5%85%88%E7%BA%A7%E9%98%9F%E5%88%97-%E6%9C%89%E5%BA%8F%E6%95%B0%E7%BB%84%E5%AE%9E%E7%8E%B0/" title="优先级队列-有序数组实现">优先级队列-有序数组实现</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/bug/" title="分类于 问题总汇">问题总汇</a></div><span><a href="/bug/Mybatis-Error-building-SqlSession-Cause-org-apache-ibatis-builder-BuilderException/" title="Mybatis-Error-building-SqlSession-Cause-org-apache-ibatis-builder-BuilderException">Mybatis-Error-building-SqlSession-Cause-org-apache-ibatis-builder-BuilderException</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于 计算机学科">计算机学科</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/web/" title="分类于 web">web</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/web/css/" title="分类于 css">css</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/web/css/%E7%A7%BB%E5%8A%A8%E7%AB%AF/" title="分类于 移动端">移动端</a></div><span><a href="/computer-science/web/css/%E7%A7%BB%E5%8A%A8%E7%AB%AF/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E5%9F%BA%E7%A1%80/" title="移动端基础">移动端基础</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于 计算机学科">计算机学科</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/nginx/" title="分类于 nginx">nginx</a></div><span><a href="/computer-science/nginx/Basics/" title="Basics">Basics</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于 计算机学科">计算机学科</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/java/" title="分类于 java">java</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/java/data-structures-and-algorithms/" title="分类于 数据结构与算法">数据结构与算法</a></div><span><a href="/computer-science/java/data-structures-and-algorithms/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%92%8C%E7%AE%97%E6%B3%95-%E6%8E%92%E5%BA%8F-%E6%9F%A5%E6%89%BE-%E5%93%88%E5%B8%8C%E8%A1%A8/" title="数据结构与算法-排序-查找-哈希表">数据结构与算法-排序-查找-哈希表</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于 计算机学科">计算机学科</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/java/" title="分类于 java">java</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/java/spring/" title="分类于 spring">spring</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/java/spring/%E6%8B%A6%E6%88%AA%E5%99%A8/" title="分类于 拦截器">拦截器</a></div><span><a href="/computer-science/java/spring/%E6%8B%A6%E6%88%AA%E5%99%A8/SpringBoot%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87url%E5%9B%9E%E6%98%BE/" title="SpringBoot上传图片url回显">SpringBoot上传图片url回显</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于 计算机学科">计算机学科</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/java/" title="分类于 java">java</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/java/spring/" title="分类于 spring">spring</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/java/spring/%E4%BB%A3%E7%A0%81%E6%A1%88%E4%BE%8B/" title="分类于 代码案例">代码案例</a></div><span><a href="/computer-science/java/spring/%E4%BB%A3%E7%A0%81%E6%A1%88%E4%BE%8B/5/" title="Value注解-实现简单类型注入">Value注解-实现简单类型注入</a></span></li></ul></div><div><h2>最新评论</h2><ul class="leancloud-recent-comment"></ul></div></div><div class="status"><div class="copyright">&copy; 2023 – <span itemprop="copyrightYear">2024</span> <span class="with-love"><i class="ic i-sakura rotate"></i> </span><span class="author" itemprop="copyrightHolder">D @ D & PersonalBlog</span></div><div class="count"><span class="post-meta-item-icon"><i class="ic i-chart-area"></i> </span><span title="站点总字数">3.4m 字</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="ic i-coffee"></i> </span><span title="站点阅读时长">51:03</span></div><div class="powered-by">基于 <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL={path:"computer-science/java/spring/springboot/整合jar包/SpringBoot整合第三方技术/",favicon:{show:"（●´3｀●）やれやれだぜ",hide:"(´Д｀)大変だ！"},search:{placeholder:"文章搜索",empty:"关于 「 ${query} 」，什么也没搜到",stats:"${time} ms 内找到 ${hits} 条结果"},valine:!0,fancybox:!0,copyright:'复制成功，转载请遵守 <i class="ic i-creative-commons"></i>BY-NC-SA 协议。',ignores:[function(e){return e.includes("#")},function(e){return new RegExp(LOCAL.path+"$").test(e)}]}</script><script src="https://cdn.polyfill.io/v2/polyfill.js"></script><script src="https://cdn.jsdelivr.net/gh/PigPigLetsGo/live2d-widget@latest/autoload.js"></script><script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script><script src="/js/app.js?v=0.2.5"></script></body></html>